import{w as c,a as d,p as l}from"./store.ebad4f21.js";import{P as s}from"./public.cf41ef09.js";import{U as p,o as y}from"./chunk-NJRNZEHX.bae55983.js";import"./index.browser.329840a6.js";import{H as u}from"./index.9735b780.js";const S=async()=>{let t="";return c.subscribe(n=>t=n),(await fetch(`${s}/flowid?walletAddress=${t}`)).json()},v=async(t,r,n)=>{let o=new Headers;o.append("Content-Type","application/json");let e=JSON.stringify({flowId:t,signature:r,pubKey:n}),a={method:"POST",headers:o,body:e,redirect:"follow"};return(await fetch(`${s}/authenticate`,a)).json()},P=async t=>{let r="",n="";d.subscribe(e=>n=e),l.subscribe(e=>r=e);let o=new TextEncoder().encode(`APTOS
message: ${t==null?void 0:t.eula}
nonce: ${t==null?void 0:t.flowId}`);if(r!=="")try{const e=new u(r).toUint8Array(),a=new p(e);return{signature:y.fromPrivateKey({privateKey:a}).sign(o).toString(),pubKey:n}}catch(e){console.log("error:",e)}};export{S as a,v as b,P as s};
