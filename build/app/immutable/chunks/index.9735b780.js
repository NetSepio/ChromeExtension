import{n as Ce,b as Ws}from"./index.browser.329840a6.js";function Y(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function js(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function ut(n,...e){if(!js(n))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function Jt(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Y(n.outputLen),Y(n.blockLen)}function ae(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function Yt(n,e){ut(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qs=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4));function Zt(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}const Ne=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),O=(n,e)=>n<<32-e|n>>>e,Vs=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Vs)throw new Error("Non little-endian hardware is not supported");const Xs=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function en(n){if(!Zt(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=Xs[n[t]];return e}const D={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function qt(n){if(n>=D._0&&n<=D._9)return n-D._0;if(n>=D._A&&n<=D._F)return n-(D._A-10);if(n>=D._a&&n<=D._f)return n-(D._a-10)}function tn(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length,t=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const s=new Uint8Array(t);for(let i=0,r=0;i<t;i++,r+=2){const o=qt(n.charCodeAt(r)),a=qt(n.charCodeAt(r+1));if(o===void 0||a===void 0){const c=n[r]+n[r+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+r)}s[i]=o*16+a}return s}function Js(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function ce(n){if(typeof n=="string"&&(n=Js(n)),!Zt(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}class ht{clone(){return this._cloneInto()}}const Ys={}.toString;function Zs(n,e){if(e!==void 0&&Ys.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(n,e)}function ft(n){const e=s=>n().update(ce(s)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}class nn extends ht{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Jt(e);const s=ce(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,r=new Uint8Array(i);r.set(s.length>i?e.create().update(s).digest():s);for(let o=0;o<r.length;o++)r[o]^=54;this.iHash.update(r),this.oHash=e.create();for(let o=0;o<r.length;o++)r[o]^=106;this.oHash.update(r),r.fill(0)}update(e){return ae(this),this.iHash.update(e),this}digestInto(e){ae(this),ut(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:s,finished:i,destroyed:r,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=r,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=s._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Re=(n,e,t)=>new nn(n,e).update(t).digest();Re.create=(n,e)=>new nn(n,e);function ei(n,e,t,s){Jt(n);const i=Zs({dkLen:32,asyncTick:10},s),{c:r,dkLen:o,asyncTick:a}=i;if(Y(r),Y(o),Y(a),r<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=ce(e),l=ce(t),u=new Uint8Array(o),d=Re.create(n,c),f=d._cloneInto().update(l);return{c:r,dkLen:o,asyncTick:a,DK:u,PRF:d,PRFSalt:f}}function ti(n,e,t,s,i){return n.destroy(),e.destroy(),s&&s.destroy(),i.fill(0),t}function ni(n,e,t,s){const{c:i,dkLen:r,DK:o,PRF:a,PRFSalt:c}=ei(n,e,t,s);let l;const u=new Uint8Array(4),d=Ne(u),f=new Uint8Array(a.outputLen);for(let _=1,A=0;A<r;_++,A+=a.outputLen){const T=o.subarray(A,A+a.outputLen);d.setInt32(0,_,!1),(l=c._cloneInto(l)).update(u).digestInto(f),T.set(f.subarray(0,T.length));for(let I=1;I<i;I++){a._cloneInto(l).update(f).digestInto(f);for(let $=0;$<T.length;$++)T[$]^=f[$]}}return ti(a,c,o,l,f)}function si(n,e,t,s){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,s);const i=BigInt(32),r=BigInt(4294967295),o=Number(t>>i&r),a=Number(t&r),c=s?4:0,l=s?0:4;n.setUint32(e+c,o,s),n.setUint32(e+l,a,s)}class sn extends ht{constructor(e,t,s,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=s,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ne(this.buffer)}update(e){ae(this);const{view:t,buffer:s,blockLen:i}=this;e=ce(e);const r=e.length;for(let o=0;o<r;){const a=Math.min(i-this.pos,r-o);if(a===i){const c=Ne(e);for(;i<=r-o;o+=i)this.process(c,o);continue}s.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ae(this),Yt(e,this),this.finished=!0;const{buffer:t,view:s,blockLen:i,isLE:r}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(s,0),o=0);for(let d=o;d<i;d++)t[d]=0;si(s,i-8,BigInt(this.length*8),r),this.process(s,0);const a=Ne(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],r)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const s=e.slice(0,t);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:s,length:i,finished:r,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=r,e.destroyed=o,i%t&&e.buffer.set(s),e}}const ii=(n,e,t)=>n&e^~n&t,ri=(n,e,t)=>n&e^n&t^e&t,oi=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),G=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),K=new Uint32Array(64);class ai extends sn{constructor(){super(64,32,8,!1),this.A=G[0]|0,this.B=G[1]|0,this.C=G[2]|0,this.D=G[3]|0,this.E=G[4]|0,this.F=G[5]|0,this.G=G[6]|0,this.H=G[7]|0}get(){const{A:e,B:t,C:s,D:i,E:r,F:o,G:a,H:c}=this;return[e,t,s,i,r,o,a,c]}set(e,t,s,i,r,o,a,c){this.A=e|0,this.B=t|0,this.C=s|0,this.D=i|0,this.E=r|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,t){for(let d=0;d<16;d++,t+=4)K[d]=e.getUint32(t,!1);for(let d=16;d<64;d++){const f=K[d-15],_=K[d-2],A=O(f,7)^O(f,18)^f>>>3,T=O(_,17)^O(_,19)^_>>>10;K[d]=T+K[d-7]+A+K[d-16]|0}let{A:s,B:i,C:r,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const f=O(a,6)^O(a,11)^O(a,25),_=u+f+ii(a,c,l)+oi[d]+K[d]|0,T=(O(s,2)^O(s,13)^O(s,22))+ri(s,i,r)|0;u=l,l=c,c=a,a=o+_|0,o=r,r=i,i=s,s=_+T|0}s=s+this.A|0,i=i+this.B|0,r=r+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(s,i,r,o,a,c,l,u)}roundClean(){K.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const ci=ft(()=>new ai),He=BigInt(2**32-1),it=BigInt(32);function rn(n,e=!1){return e?{h:Number(n&He),l:Number(n>>it&He)}:{h:Number(n>>it&He)|0,l:Number(n&He)|0}}function on(n,e=!1){let t=new Uint32Array(n.length),s=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:r,l:o}=rn(n[i],e);[t[i],s[i]]=[r,o]}return[t,s]}const li=(n,e)=>BigInt(n>>>0)<<it|BigInt(e>>>0),di=(n,e,t)=>n>>>t,ui=(n,e,t)=>n<<32-t|e>>>t,hi=(n,e,t)=>n>>>t|e<<32-t,fi=(n,e,t)=>n<<32-t|e>>>t,_i=(n,e,t)=>n<<64-t|e>>>t-32,gi=(n,e,t)=>n>>>t-32|e<<64-t,yi=(n,e)=>e,pi=(n,e)=>n,an=(n,e,t)=>n<<t|e>>>32-t,cn=(n,e,t)=>e<<t|n>>>32-t,ln=(n,e,t)=>e<<t-32|n>>>64-t,dn=(n,e,t)=>n<<t-32|e>>>64-t;function wi(n,e,t,s){const i=(e>>>0)+(s>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const bi=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),mi=(n,e,t,s)=>e+t+s+(n/2**32|0)|0,vi=(n,e,t,s)=>(n>>>0)+(e>>>0)+(t>>>0)+(s>>>0),Ti=(n,e,t,s,i)=>e+t+s+i+(n/2**32|0)|0,Ui=(n,e,t,s,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(s>>>0)+(i>>>0),Ai=(n,e,t,s,i,r)=>e+t+s+i+r+(n/2**32|0)|0,xi={fromBig:rn,split:on,toBig:li,shrSH:di,shrSL:ui,rotrSH:hi,rotrSL:fi,rotrBH:_i,rotrBL:gi,rotr32H:yi,rotr32L:pi,rotlSH:an,rotlSL:cn,rotlBH:ln,rotlBL:dn,add:wi,add3L:bi,add3H:mi,add4L:vi,add4H:Ti,add5H:Ai,add5L:Ui},g=xi,[Si,Bi]=(()=>g.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))))(),W=new Uint32Array(80),j=new Uint32Array(80);class Ei extends sn{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:s,Bl:i,Ch:r,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:f,Gh:_,Gl:A,Hh:T,Hl:I}=this;return[e,t,s,i,r,o,a,c,l,u,d,f,_,A,T,I]}set(e,t,s,i,r,o,a,c,l,u,d,f,_,A,T,I){this.Ah=e|0,this.Al=t|0,this.Bh=s|0,this.Bl=i|0,this.Ch=r|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=f|0,this.Gh=_|0,this.Gl=A|0,this.Hh=T|0,this.Hl=I|0}process(e,t){for(let y=0;y<16;y++,t+=4)W[y]=e.getUint32(t),j[y]=e.getUint32(t+=4);for(let y=16;y<80;y++){const C=W[y-15]|0,R=j[y-15]|0,Ze=g.rotrSH(C,R,1)^g.rotrSH(C,R,8)^g.shrSH(C,R,7),et=g.rotrSL(C,R,1)^g.rotrSL(C,R,8)^g.shrSL(C,R,7),M=W[y-2]|0,L=j[y-2]|0,ze=g.rotrSH(M,L,19)^g.rotrBH(M,L,61)^g.shrSH(M,L,6),tt=g.rotrSL(M,L,19)^g.rotrBL(M,L,61)^g.shrSL(M,L,6),$e=g.add4L(et,tt,j[y-7],j[y-16]),nt=g.add4H($e,Ze,ze,W[y-7],W[y-16]);W[y]=nt|0,j[y]=$e|0}let{Ah:s,Al:i,Bh:r,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:f,Fh:_,Fl:A,Gh:T,Gl:I,Hh:$,Hl:ne}=this;for(let y=0;y<80;y++){const C=g.rotrSH(d,f,14)^g.rotrSH(d,f,18)^g.rotrBH(d,f,41),R=g.rotrSL(d,f,14)^g.rotrSL(d,f,18)^g.rotrBL(d,f,41),Ze=d&_^~d&T,et=f&A^~f&I,M=g.add5L(ne,R,et,Bi[y],j[y]),L=g.add5H(M,$,C,Ze,Si[y],W[y]),ze=M|0,tt=g.rotrSH(s,i,28)^g.rotrBH(s,i,34)^g.rotrBH(s,i,39),$e=g.rotrSL(s,i,28)^g.rotrBL(s,i,34)^g.rotrBL(s,i,39),nt=s&r^s&a^r&a,Ks=i&o^i&c^o&c;$=T|0,ne=I|0,T=_|0,I=A|0,_=d|0,A=f|0,{h:d,l:f}=g.add(l|0,u|0,L|0,ze|0),l=a|0,u=c|0,a=r|0,c=o|0,r=s|0,o=i|0;const Dt=g.add3L(ze,$e,Ks);s=g.add3H(Dt,L,tt,nt),i=Dt|0}({h:s,l:i}=g.add(this.Ah|0,this.Al|0,s|0,i|0)),{h:r,l:o}=g.add(this.Bh|0,this.Bl|0,r|0,o|0),{h:a,l:c}=g.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=g.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:f}=g.add(this.Eh|0,this.El|0,d|0,f|0),{h:_,l:A}=g.add(this.Fh|0,this.Fl|0,_|0,A|0),{h:T,l:I}=g.add(this.Gh|0,this.Gl|0,T|0,I|0),{h:$,l:ne}=g.add(this.Hh|0,this.Hl|0,$|0,ne|0),this.set(s,i,r,o,a,c,l,u,d,f,_,A,T,I,$,ne)}roundClean(){W.fill(0),j.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const _t=ft(()=>new Ei);function un(n){if(typeof n!="string")throw new TypeError(`Invalid mnemonic type: ${typeof n}`);return n.normalize("NFKD")}function Ii(n){const e=un(n),t=e.split(" ");if(![12,15,18,21,24].includes(t.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:t}}const ki=n=>un(`mnemonic${n}`);function zi(n,e=""){return ni(_t,Ii(n).nfkd,ki(e),{c:2048,dkLen:64})}const[hn,fn,_n]=[[],[],[]],$i=BigInt(0),ye=BigInt(1),Ci=BigInt(2),Hi=BigInt(7),Ni=BigInt(256),Pi=BigInt(113);for(let n=0,e=ye,t=1,s=0;n<24;n++){[t,s]=[s,(2*t+3*s)%5],hn.push(2*(5*s+t)),fn.push((n+1)*(n+2)/2%64);let i=$i;for(let r=0;r<7;r++)e=(e<<ye^(e>>Hi)*Pi)%Ni,e&Ci&&(i^=ye<<(ye<<BigInt(r))-ye);_n.push(i)}const[Oi,Mi]=on(_n,!0),Ft=(n,e,t)=>t>32?ln(n,e,t):an(n,e,t),Rt=(n,e,t)=>t>32?dn(n,e,t):cn(n,e,t);function Li(n,e=24){const t=new Uint32Array(10);for(let s=24-e;s<24;s++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=t[c],u=t[c+1],d=Ft(l,u,1)^t[a],f=Rt(l,u,1)^t[a+1];for(let _=0;_<50;_+=10)n[o+_]^=d,n[o+_+1]^=f}let i=n[2],r=n[3];for(let o=0;o<24;o++){const a=fn[o],c=Ft(i,r,a),l=Rt(i,r,a),u=hn[o];i=n[u],r=n[u+1],n[u]=c,n[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=n[o+a];for(let a=0;a<10;a++)n[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}n[0]^=Oi[s],n[1]^=Mi[s]}t.fill(0)}class gt extends ht{constructor(e,t,s,i=!1,r=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=s,this.enableXOF=i,this.rounds=r,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Y(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Qs(this.state)}keccak(){Li(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){ae(this);const{blockLen:t,state:s}=this;e=ce(e);const i=e.length;for(let r=0;r<i;){const o=Math.min(t-this.pos,i-r);for(let a=0;a<o;a++)s[this.pos++]^=e[r++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:s,blockLen:i}=this;e[s]^=t,t&128&&s===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){ae(this,!1),ut(e),this.finish();const t=this.state,{blockLen:s}=this;for(let i=0,r=e.length;i<r;){this.posOut>=s&&this.keccak();const o=Math.min(s-this.posOut,r-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Y(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Yt(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:s,outputLen:i,rounds:r,enableXOF:o}=this;return e||(e=new gt(t,s,i,o,r)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=r,e.suffix=s,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Di=(n,e,t)=>ft(()=>new gt(e,n,t)),le=Di(6,136,256/8);var gn=Object.defineProperty,qi=Object.getOwnPropertyDescriptor,Ge=(n,e)=>{for(var t in e)gn(n,t,{get:e[t],enumerable:!0})},p=(n,e,t,s)=>{for(var i=s>1?void 0:s?qi(e,t):e,r=n.length-1,o;r>=0;r--)(o=n[r])&&(i=(s?o(e,t,i):o(i))||i);return s&&i&&gn(e,t,i),i},Fi=/^m(\/[0-9]+')+$/,yn=n=>n.replace("'",""),Ri="ed25519 seed",Gi=2147483648,Ki=n=>{const t=Re.create(_t,Ri).update(tn(n)).digest(),s=t.slice(0,32),i=t.slice(32);return{key:s,chainCode:i}},Wi=({key:n,chainCode:e},t)=>{const s=new ArrayBuffer(4);new DataView(s).setUint32(0,t);const i=new Uint8Array(s),r=new Uint8Array([0]),o=new Uint8Array([...r,...n,...i]),a=Re.create(_t,e).update(o).digest(),c=a.slice(0,32),l=a.slice(32);return{key:c,chainCode:l}},ji=n=>Fi.test(n)?!n.split("/").slice(1).map(yn).some(Number.isNaN):!1,Qi=(n,e,t=Gi)=>{if(!ji(n))throw new Error("Invalid derivation path");const{key:s,chainCode:i}=Ki(e);return n.split("/").slice(1).map(yn).map(o=>parseInt(o,10)).reduce((o,a)=>Wi(o,a+t),{key:s,chainCode:i})},Vi="1.21.0";async function Xi(n){return new Promise(e=>{setTimeout(e,n)})}var Gt="/v1";function Ji(n){let e=`${n}`;return e.endsWith("/")&&(e=e.substring(0,e.length-1)),e.endsWith(Gt)||(e=`${e}${Gt}`),e}var pn=2e5,wn=20,Yi=20,Zi="0x1::aptos_coin::AptosCoin";function Ke(n){let e,t,s;return typeof n=="object"?(e=n.hashFunction,t=n.ttlMs,s=n.tags):e=n,(i,r,o)=>{if(o.value!=null)o.value=Kt(o.value,e,t,s);else if(o.get!=null)o.get=Kt(o.get,e,t,s);else throw new Error("Only put a Memoize() decorator on a method or get accessor.")}}function bn(n,e){return Ke({ttlMs:n,hashFunction:e})}var Pe=new Map;function er(n){const e=new Set;for(const t of n){const s=Pe.get(t);if(s)for(const i of s)e.has(i)||(i.clear(),e.add(i))}return e.size}function Kt(n,e,t=0,s){const i=Symbol("__memoized_map__");return function(...r){let o;const a=this;a.hasOwnProperty(i)||Object.defineProperty(a,i,{configurable:!1,enumerable:!1,writable:!1,value:new Map});const c=a[i];if(Array.isArray(s))for(const l of s)Pe.has(l)?Pe.get(l).push(c):Pe.set(l,[c]);if(e||r.length>0||t>0){let l;e===!0?l=r.map(f=>f.toString()).join("!"):e?l=e.apply(a,r):l=r[0];const u=`${l}__timestamp`;let d=!1;if(t>0)if(!c.has(u))d=!0;else{const f=c.get(u);d=Date.now()-f>t}c.has(l)&&!d?o=c.get(l):(o=n.apply(a,r),c.set(l,o),t>0&&c.set(u,Date.now()))}else{const l=a;c.has(l)?o=c.get(l):(o=n.apply(a,r),c.set(l,o))}return o}}var mn=class extends Error{constructor(n,e,t){super(t),this.name="AptosApiError",this.url=e.url,this.status=e.status,this.statusText=e.statusText,this.data=e.data,this.request=n}},tr={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable"};async function nr(n,e,t,s,i,r){const o={...r==null?void 0:r.HEADERS,"x-aptos-client":`aptos-ts-sdk/${Vi}`,"content-type":s??"application/json"};return r!=null&&r.TOKEN&&(o.Authorization=`Bearer ${r==null?void 0:r.TOKEN}`),await Ws({url:n,method:e,body:t,params:i,headers:o,overrides:r})}async function vn(n){const{url:e,endpoint:t,method:s,body:i,contentType:r,params:o,overrides:a}=n,c=`${e}/${t??""}`,l=await nr(c,s,i,r,o,a),u={status:l.status,statusText:l.statusText,data:l.data,headers:l.headers,config:l.config,url:c};if(u.status>=200&&u.status<300)return u;const d=tr[u.status];throw new mn(n,u,d??"Generic Error")}async function z(n){return await vn({...n,method:"GET"})}async function pe(n){return await vn({...n,method:"POST"})}async function Wt(n){const e=[];let t;const s=n.params;for(;;){s.start=t;const i=await z({url:n.url,endpoint:n.endpoint,params:s,originMethod:n.originMethod,overrides:n.overrides});if(t=i.headers["x-aptos-cursor"],delete i.headers,e.push(...i.data),t==null)break}return e}var sr={mainnet:"https://indexer.mainnet.aptoslabs.com/v1/graphql",testnet:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",devnet:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql",local:"http://127.0.0.1:8090/v1/graphql"},ir={mainnet:"https://fullnode.mainnet.aptoslabs.com/v1",testnet:"https://fullnode.testnet.aptoslabs.com/v1",devnet:"https://fullnode.devnet.aptoslabs.com/v1",local:"http://127.0.0.1:8080/v1"},rr=(n=>(n.MAINNET="mainnet",n.TESTNET="testnet",n.DEVNET="devnet",n.LOCAL="local",n))(rr||{}),h=class Oe{static fromBuffer(e){return Oe.fromUint8Array(e)}static fromUint8Array(e){return new Oe(en(e))}static ensure(e){return typeof e=="string"?new Oe(e):e}constructor(e){e.startsWith("0x")?this.hexString=e:this.hexString=`0x${e}`}hex(){return this.hexString}noPrefix(){return this.hexString.slice(2)}toString(){return this.hex()}toShortString(){return`0x${this.hexString.replace(/^0x0*/,"")}`}toUint8Array(){return Uint8Array.from(tn(this.noPrefix()))}},b={};Ge(b,{AccountAddress:()=>w,AccountAuthenticator:()=>X,AccountAuthenticatorEd25519:()=>Hn,AccountAuthenticatorMultiEd25519:()=>Pn,ArgumentABI:()=>Xe,AuthenticationKey:()=>lt,ChainId:()=>Bt,ChangeSet:()=>xr,Ed25519PublicKey:()=>N,Ed25519Signature:()=>q,EntryFunction:()=>je,EntryFunctionABI:()=>ve,FeePayerRawTransaction:()=>At,Identifier:()=>E,Module:()=>Ar,ModuleId:()=>me,MultiAgentRawTransaction:()=>Ut,MultiEd25519PublicKey:()=>We,MultiEd25519Signature:()=>pt,MultiSig:()=>ss,MultiSigTransactionPayload:()=>ts,RawTransaction:()=>ge,RawTransactionWithData:()=>Tt,RotationProofChallenge:()=>Br,Script:()=>vt,ScriptABI:()=>Je,SignedTransaction:()=>Qe,StructTag:()=>_e,Transaction:()=>Us,TransactionArgument:()=>P,TransactionArgumentAddress:()=>Ht,TransactionArgumentBool:()=>Pt,TransactionArgumentU128:()=>$t,TransactionArgumentU16:()=>It,TransactionArgumentU256:()=>Ct,TransactionArgumentU32:()=>kt,TransactionArgumentU64:()=>zt,TransactionArgumentU8:()=>Et,TransactionArgumentU8Vector:()=>Nt,TransactionAuthenticator:()=>de,TransactionAuthenticatorEd25519:()=>wt,TransactionAuthenticatorFeePayer:()=>$n,TransactionAuthenticatorMultiAgent:()=>kn,TransactionAuthenticatorMultiEd25519:()=>bt,TransactionPayload:()=>Ee,TransactionPayloadEntryFunction:()=>St,TransactionPayloadMultisig:()=>us,TransactionPayloadScript:()=>xt,TransactionScriptABI:()=>Ot,TypeArgumentABI:()=>Ve,TypeTag:()=>B,TypeTagAddress:()=>Z,TypeTagBool:()=>ue,TypeTagParser:()=>Be,TypeTagParserError:()=>Yn,TypeTagSigner:()=>jn,TypeTagStruct:()=>ee,TypeTagU128:()=>fe,TypeTagU16:()=>Ue,TypeTagU256:()=>xe,TypeTagU32:()=>Ae,TypeTagU64:()=>he,TypeTagU8:()=>J,TypeTagVector:()=>Se,UserTransaction:()=>As,WriteSet:()=>Sr,objectStructTag:()=>mr,optionStructTag:()=>br,stringStructTag:()=>mt});var or={};Ge(or,{Deserializer:()=>yt,Serializer:()=>m,bcsSerializeBool:()=>yr,bcsSerializeBytes:()=>Q,bcsSerializeFixedBytes:()=>wr,bcsSerializeStr:()=>pr,bcsSerializeU128:()=>_r,bcsSerializeU16:()=>hr,bcsSerializeU256:()=>gr,bcsSerializeU32:()=>fr,bcsSerializeU8:()=>rt,bcsSerializeUint64:()=>ur,bcsToBytes:()=>F,deserializeVector:()=>k,serializeVector:()=>S,serializeVectorWithFunc:()=>dr});var ar=2**8-1,cr=2**16-1,be=2**32-1,Tn=BigInt(2**64)-BigInt(1),Un=BigInt(2**128)-BigInt(1),lr=BigInt(2**256)-BigInt(1),m=class{constructor(){this.buffer=new ArrayBuffer(64),this.offset=0}ensureBufferWillHandleSize(n){for(;this.buffer.byteLength<this.offset+n;){const e=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(e).set(new Uint8Array(this.buffer)),this.buffer=e}}serialize(n){this.ensureBufferWillHandleSize(n.length),new Uint8Array(this.buffer,this.offset).set(n),this.offset+=n.length}serializeWithFunction(n,e,t){this.ensureBufferWillHandleSize(e);const s=new DataView(this.buffer,this.offset);n.apply(s,[0,t,!0]),this.offset+=e}serializeStr(n){const e=new TextEncoder;this.serializeBytes(e.encode(n))}serializeBytes(n){this.serializeU32AsUleb128(n.length),this.serialize(n)}serializeFixedBytes(n){this.serialize(n)}serializeBool(n){if(typeof n!="boolean")throw new Error("Value needs to be a boolean");const e=n?1:0;this.serialize(new Uint8Array([e]))}serializeU8(n){this.serialize(new Uint8Array([n]))}serializeU16(n){this.serializeWithFunction(DataView.prototype.setUint16,2,n)}serializeU32(n){this.serializeWithFunction(DataView.prototype.setUint32,4,n)}serializeU64(n){const e=BigInt(n.toString())&BigInt(be),t=BigInt(n.toString())>>BigInt(32);this.serializeU32(Number(e)),this.serializeU32(Number(t))}serializeU128(n){const e=BigInt(n.toString())&Tn,t=BigInt(n.toString())>>BigInt(64);this.serializeU64(e),this.serializeU64(t)}serializeU256(n){const e=BigInt(n.toString())&Un,t=BigInt(n.toString())>>BigInt(128);this.serializeU128(e),this.serializeU128(t)}serializeU32AsUleb128(n){let e=n;const t=[];for(;e>>>7;)t.push(e&127|128),e>>>=7;t.push(e),this.serialize(new Uint8Array(t))}getBytes(){return new Uint8Array(this.buffer).slice(0,this.offset)}};p([te(0,ar)],m.prototype,"serializeU8",1);p([te(0,cr)],m.prototype,"serializeU16",1);p([te(0,be)],m.prototype,"serializeU32",1);p([te(BigInt(0),Tn)],m.prototype,"serializeU64",1);p([te(BigInt(0),Un)],m.prototype,"serializeU128",1);p([te(BigInt(0),lr)],m.prototype,"serializeU256",1);p([te(0,be)],m.prototype,"serializeU32AsUleb128",1);function te(n,e,t){return(s,i,r)=>{const o=r.value;return r.value=function(c){const l=BigInt(c.toString());if(l>BigInt(e.toString())||l<BigInt(n.toString()))throw new Error(t||"Value is out of range");o.apply(this,[c])},r}}var yt=class{constructor(n){this.buffer=new ArrayBuffer(n.length),new Uint8Array(this.buffer).set(n,0),this.offset=0}read(n){if(this.offset+n>this.buffer.byteLength)throw new Error("Reached to the end of buffer");const e=this.buffer.slice(this.offset,this.offset+n);return this.offset+=n,e}deserializeStr(){const n=this.deserializeBytes();return new TextDecoder().decode(n)}deserializeBytes(){const n=this.deserializeUleb128AsU32();return new Uint8Array(this.read(n))}deserializeFixedBytes(n){return new Uint8Array(this.read(n))}deserializeBool(){const n=new Uint8Array(this.read(1))[0];if(n!==1&&n!==0)throw new Error("Invalid boolean value");return n===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){const n=this.deserializeU32(),e=this.deserializeU32();return BigInt(BigInt(e)<<BigInt(32)|BigInt(n))}deserializeU128(){const n=this.deserializeU64(),e=this.deserializeU64();return BigInt(e<<BigInt(64)|n)}deserializeU256(){const n=this.deserializeU128(),e=this.deserializeU128();return BigInt(e<<BigInt(128)|n)}deserializeUleb128AsU32(){let n=BigInt(0),e=0;for(;n<be;){const t=this.deserializeU8();if(n|=BigInt(t&127)<<BigInt(e),!(t&128))break;e+=7}if(n>be)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(n)}};function S(n,e){e.serializeU32AsUleb128(n.length),n.forEach(t=>{t.serialize(e)})}function dr(n,e){const t=new m;t.serializeU32AsUleb128(n.length);const s=t[e];return n.forEach(i=>{s.call(t,i)}),t.getBytes()}function k(n,e){const t=n.deserializeUleb128AsU32(),s=[];for(let i=0;i<t;i+=1)s.push(e.deserialize(n));return s}function F(n){const e=new m;return n.serialize(e),e.getBytes()}function ur(n){const e=new m;return e.serializeU64(n),e.getBytes()}function rt(n){const e=new m;return e.serializeU8(n),e.getBytes()}function hr(n){const e=new m;return e.serializeU16(n),e.getBytes()}function fr(n){const e=new m;return e.serializeU32(n),e.getBytes()}function _r(n){const e=new m;return e.serializeU128(n),e.getBytes()}function gr(n){const e=new m;return e.serializeU256(n),e.getBytes()}function yr(n){const e=new m;return e.serializeBool(n),e.getBytes()}function pr(n){const e=new m;return e.serializeStr(n),e.getBytes()}function Q(n){const e=new m;return e.serializeBytes(n),e.getBytes()}function wr(n){const e=new m;return e.serializeFixedBytes(n),e.getBytes()}var Fe=class H{constructor(e){if(e.length!==H.LENGTH)throw new Error("Expected address of length 32");this.address=e}static fromHex(e){let t=h.ensure(e);t.noPrefix().length%2!==0&&(t=new h(`0${t.noPrefix()}`));const s=t.toUint8Array();if(s.length>H.LENGTH)throw new Error("Hex string is too long. Address's length is 32 bytes.");if(s.length===H.LENGTH)return new H(s);const i=new Uint8Array(H.LENGTH);return i.set(s,H.LENGTH-s.length),new H(i)}static isValid(e){if(e==="")return!1;let t=h.ensure(e);return t.noPrefix().length%2!==0&&(t=new h(`0${t.noPrefix()}`)),t.toUint8Array().length<=H.LENGTH}toHexString(){return h.fromUint8Array(this.address).hex()}serialize(e){e.serializeFixedBytes(this.address)}static deserialize(e){return new H(e.deserializeFixedBytes(H.LENGTH))}static standardizeAddress(e){const t=e.toLowerCase();return`0x${(t.startsWith("0x")?t.slice(2):t).padStart(64,"0")}`}};Fe.LENGTH=32;Fe.CORE_CODE_ADDRESS=Fe.fromHex("0x1");var w=Fe,An=class Me{constructor(e){if(e.length!==Me.LENGTH)throw new Error(`Ed25519PublicKey length should be ${Me.LENGTH}`);this.value=e}toBytes(){return this.value}serialize(e){e.serializeBytes(this.value)}static deserialize(e){const t=e.deserializeBytes();return new Me(t)}};An.LENGTH=32;var N=An,xn=class Le{constructor(e){if(this.value=e,e.length!==Le.LENGTH)throw new Error(`Ed25519Signature length should be ${Le.LENGTH}`)}serialize(e){e.serializeBytes(this.value)}static deserialize(e){const t=e.deserializeBytes();return new Le(t)}};xn.LENGTH=64;var q=xn,ot=32,We=class Sn{constructor(e,t){if(this.public_keys=e,this.threshold=t,t>ot)throw new Error(`"threshold" cannot be larger than ${ot}`)}toBytes(){const e=new Uint8Array(this.public_keys.length*N.LENGTH+1);return this.public_keys.forEach((t,s)=>{e.set(t.value,s*N.LENGTH)}),e[this.public_keys.length*N.LENGTH]=this.threshold,e}serialize(e){e.serializeBytes(this.toBytes())}static deserialize(e){const t=e.deserializeBytes(),s=t[t.length-1],i=[];for(let r=0;r<t.length-1;r+=N.LENGTH){const o=r;i.push(new N(t.subarray(o,o+N.LENGTH)))}return new Sn(i,s)}},Bn=class we{constructor(e,t){if(this.signatures=e,this.bitmap=t,t.length!==we.BITMAP_LEN)throw new Error(`"bitmap" length should be ${we.BITMAP_LEN}`)}toBytes(){const e=new Uint8Array(this.signatures.length*q.LENGTH+we.BITMAP_LEN);return this.signatures.forEach((t,s)=>{e.set(t.value,s*q.LENGTH)}),e.set(this.bitmap,this.signatures.length*q.LENGTH),e}static createBitmap(e){const s=new Uint8Array([0,0,0,0]),i=new Set;return e.forEach(r=>{if(r>=ot)throw new Error(`Invalid bit value ${r}.`);if(i.has(r))throw new Error("Duplicated bits detected.");i.add(r);const o=Math.floor(r/8);let a=s[o];a|=128>>r%8,s[o]=a}),s}serialize(e){e.serializeBytes(this.toBytes())}static deserialize(e){const t=e.deserializeBytes(),s=t.subarray(t.length-4),i=[];for(let r=0;r<t.length-s.length;r+=q.LENGTH){const o=r;i.push(new q(t.subarray(o,o+q.LENGTH)))}return new we(i,s)}};Bn.BITMAP_LEN=4;var pt=Bn,de=class{static deserialize(n){const e=n.deserializeUleb128AsU32();switch(e){case 0:return wt.load(n);case 1:return bt.load(n);case 2:return kn.load(n);case 3:return $n.load(n);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${e}`)}}},wt=class En extends de{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=N.deserialize(e),s=q.deserialize(e);return new En(t,s)}},bt=class In extends de{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=We.deserialize(e),s=pt.deserialize(e);return new In(t,s)}},kn=class zn extends de{constructor(e,t,s){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=s}serialize(e){e.serializeU32AsUleb128(2),this.sender.serialize(e),S(this.secondary_signer_addresses,e),S(this.secondary_signers,e)}static load(e){const t=X.deserialize(e),s=k(e,w),i=k(e,X);return new zn(t,s,i)}},$n=class Cn extends de{constructor(e,t,s,i){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=s,this.fee_payer=i}serialize(e){e.serializeU32AsUleb128(3),this.sender.serialize(e),S(this.secondary_signer_addresses,e),S(this.secondary_signers,e),this.fee_payer.address.serialize(e),this.fee_payer.authenticator.serialize(e)}static load(e){const t=X.deserialize(e),s=k(e,w),i=k(e,X),r=w.deserialize(e),o=X.deserialize(e),a={address:r,authenticator:o};return new Cn(t,s,i,a)}},X=class{static deserialize(n){const e=n.deserializeUleb128AsU32();switch(e){case 0:return Hn.load(n);case 1:return Pn.load(n);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${e}`)}}},Hn=class Nn extends X{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=N.deserialize(e),s=q.deserialize(e);return new Nn(t,s)}},Pn=class On extends X{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=We.deserialize(e),s=pt.deserialize(e);return new On(t,s)}},E=class Mn{constructor(e){this.value=e}serialize(e){e.serializeStr(this.value)}static deserialize(e){const t=e.deserializeStr();return new Mn(t)}},B=class{static deserialize(n){const e=n.deserializeUleb128AsU32();switch(e){case 0:return ue.load(n);case 1:return J.load(n);case 2:return he.load(n);case 3:return fe.load(n);case 4:return Z.load(n);case 5:return jn.load(n);case 6:return Se.load(n);case 7:return ee.load(n);case 8:return Ue.load(n);case 9:return Ae.load(n);case 10:return xe.load(n);default:throw new Error(`Unknown variant index for TypeTag: ${e}`)}}},ue=class Ln extends B{serialize(e){e.serializeU32AsUleb128(0)}static load(e){return new Ln}},J=class Dn extends B{serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new Dn}},Ue=class qn extends B{serialize(e){e.serializeU32AsUleb128(8)}static load(e){return new qn}},Ae=class Fn extends B{serialize(e){e.serializeU32AsUleb128(9)}static load(e){return new Fn}},he=class Rn extends B{serialize(e){e.serializeU32AsUleb128(2)}static load(e){return new Rn}},fe=class Gn extends B{serialize(e){e.serializeU32AsUleb128(3)}static load(e){return new Gn}},xe=class Kn extends B{serialize(e){e.serializeU32AsUleb128(10)}static load(e){return new Kn}},Z=class Wn extends B{serialize(e){e.serializeU32AsUleb128(4)}static load(e){return new Wn}},jn=class Qn extends B{serialize(e){e.serializeU32AsUleb128(5)}static load(e){return new Qn}},Se=class Vn extends B{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(6),this.value.serialize(e)}static load(e){const t=B.deserialize(e);return new Vn(t)}},ee=class Xn extends B{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(7),this.value.serialize(e)}static load(e){const t=_e.deserialize(e);return new Xn(t)}isStringTypeTag(){return this.value.module_name.value==="string"&&this.value.name.value==="String"&&this.value.address.toHexString()===w.CORE_CODE_ADDRESS.toHexString()}},_e=class at{constructor(e,t,s,i){this.address=e,this.module_name=t,this.name=s,this.type_args=i}static fromString(e){const t=new Be(e).parseTypeTag();return new at(t.value.address,t.value.module_name,t.value.name,t.value.type_args)}serialize(e){this.address.serialize(e),this.module_name.serialize(e),this.name.serialize(e),S(this.type_args,e)}static deserialize(e){const t=w.deserialize(e),s=E.deserialize(e),i=E.deserialize(e),r=k(e,B);return new at(t,s,i,r)}},mt=new _e(w.fromHex("0x1"),new E("string"),new E("String"),[]);function br(n){return new _e(w.fromHex("0x1"),new E("option"),new E("Option"),[n])}function mr(n){return new _e(w.fromHex("0x1"),new E("object"),new E("Object"),[n])}function V(n){throw new Yn(n)}function jt(n){return!!n.match(/\s/)}function Qt(n){return!!n.match(/[_A-Za-z0-9]/g)}function vr(n){return!!n.match(/T\d+/g)}function Tr(n,e){const t=n[e];if(t===":"){if(n.slice(e,e+2)==="::")return[["COLON","::"],2];V("Unrecognized token.")}else{if(t==="<")return[["LT","<"],1];if(t===">")return[["GT",">"],1];if(t===",")return[["COMMA",","],1];if(jt(t)){let s="";for(let i=e;i<n.length;i+=1){const r=n[i];if(jt(r))s=`${s}${r}`;else break}return[["SPACE",s],s.length]}else if(Qt(t)){let s="";for(let i=e;i<n.length;i+=1){const r=n[i];if(Qt(r))s=`${s}${r}`;else break}return vr(s)?[["GENERIC",s],s.length]:[["IDENT",s],s.length]}}throw new Error("Unrecognized token.")}function Ur(n){let e=0;const t=[];for(;e<n.length;){const[s,i]=Tr(n,e);s[0]!=="SPACE"&&t.push(s),e+=i}return t}var Be=class Jn{constructor(e,t){this.typeTags=[],this.tokens=Ur(e),this.typeTags=t||[]}consume(e){const t=this.tokens.shift();(!t||t[1]!==e)&&V("Invalid type tag.")}consumeWholeGeneric(){for(this.consume("<");this.tokens[0][1]!==">";)this.tokens[0][1]==="<"?this.consumeWholeGeneric():this.tokens.shift();this.consume(">")}parseCommaList(e,t){const s=[];for(this.tokens.length<=0&&V("Invalid type tag.");this.tokens[0][1]!==e&&(s.push(this.parseTypeTag()),!(this.tokens.length>0&&this.tokens[0][1]===e||(this.consume(","),this.tokens.length>0&&this.tokens[0][1]===e&&t)));)this.tokens.length<=0&&V("Invalid type tag.");return s}parseTypeTag(){this.tokens.length===0&&V("Invalid type tag.");const[e,t]=this.tokens.shift();if(t==="u8")return new J;if(t==="u16")return new Ue;if(t==="u32")return new Ae;if(t==="u64")return new he;if(t==="u128")return new fe;if(t==="u256")return new xe;if(t==="bool")return new ue;if(t==="address")return new Z;if(t==="vector"){this.consume("<");const s=this.parseTypeTag();return this.consume(">"),new Se(s)}if(t==="string")return new ee(mt);if(e==="IDENT"&&(t.startsWith("0x")||t.startsWith("0X"))){const s=w.fromHex(t);this.consume("::");const[i,r]=this.tokens.shift();i!=="IDENT"&&V("Invalid type tag."),this.consume("::");const[o,a]=this.tokens.shift();if(o!=="IDENT"&&V("Invalid type tag."),w.CORE_CODE_ADDRESS.toHexString()===s.toHexString()&&r==="object"&&a==="Object")return this.consumeWholeGeneric(),new Z;let c=[];this.tokens.length>0&&this.tokens[0][1]==="<"&&(this.consume("<"),c=this.parseCommaList(">",!0),this.consume(">"));const l=new _e(s,new E(r),new E(a),c);return new ee(l)}if(e==="GENERIC"){this.typeTags.length===0&&V("Can't convert generic type since no typeTags were specified.");const s=parseInt(t.substring(1),10);return new Jn(this.typeTags[s]).parseTypeTag()}throw new Error("Invalid type tag.")}},Yn=class extends Error{constructor(n){super(n),this.name="TypeTagParserError"}},ge=class Zn{constructor(e,t,s,i,r,o,a){this.sender=e,this.sequence_number=t,this.payload=s,this.max_gas_amount=i,this.gas_unit_price=r,this.expiration_timestamp_secs=o,this.chain_id=a}serialize(e){this.sender.serialize(e),e.serializeU64(this.sequence_number),this.payload.serialize(e),e.serializeU64(this.max_gas_amount),e.serializeU64(this.gas_unit_price),e.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(e)}static deserialize(e){const t=w.deserialize(e),s=e.deserializeU64(),i=Ee.deserialize(e),r=e.deserializeU64(),o=e.deserializeU64(),a=e.deserializeU64(),c=Bt.deserialize(e);return new Zn(t,s,i,r,o,a,c)}},vt=class es{constructor(e,t,s){this.code=e,this.ty_args=t,this.args=s}serialize(e){e.serializeBytes(this.code),S(this.ty_args,e),S(this.args,e)}static deserialize(e){const t=e.deserializeBytes(),s=k(e,B),i=k(e,P);return new es(t,s,i)}},je=class De{constructor(e,t,s,i){this.module_name=e,this.function_name=t,this.ty_args=s,this.args=i}static natural(e,t,s,i){return new De(me.fromStr(e),new E(t),s,i)}static natual(e,t,s,i){return De.natural(e,t,s,i)}serialize(e){this.module_name.serialize(e),this.function_name.serialize(e),S(this.ty_args,e),e.serializeU32AsUleb128(this.args.length),this.args.forEach(t=>{e.serializeBytes(t)})}static deserialize(e){const t=me.deserialize(e),s=E.deserialize(e),i=k(e,B),r=e.deserializeUleb128AsU32(),o=[];for(let c=0;c<r;c+=1)o.push(e.deserializeBytes());const a=o;return new De(t,s,i,a)}},ts=class ns{constructor(e){this.transaction_payload=e}serialize(e){e.serializeU32AsUleb128(0),this.transaction_payload.serialize(e)}static deserialize(e){return e.deserializeUleb128AsU32(),new ns(je.deserialize(e))}},ss=class is{constructor(e,t){this.multisig_address=e,this.transaction_payload=t}serialize(e){this.multisig_address.serialize(e),this.transaction_payload===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.transaction_payload.serialize(e))}static deserialize(e){const t=w.deserialize(e),s=e.deserializeBool();let i;return s&&(i=ts.deserialize(e)),new is(t,i)}},Ar=class rs{constructor(e){this.code=e}serialize(e){e.serializeBytes(this.code)}static deserialize(e){const t=e.deserializeBytes();return new rs(t)}},me=class ct{constructor(e,t){this.address=e,this.name=t}static fromStr(e){const t=e.split("::");if(t.length!==2)throw new Error("Invalid module id.");return new ct(w.fromHex(new h(t[0])),new E(t[1]))}serialize(e){this.address.serialize(e),this.name.serialize(e)}static deserialize(e){const t=w.deserialize(e),s=E.deserialize(e);return new ct(t,s)}},xr=class{serialize(n){throw new Error("Not implemented.")}static deserialize(n){throw new Error("Not implemented.")}},Sr=class{serialize(n){throw new Error("Not implmented.")}static deserialize(n){throw new Error("Not implmented.")}},Qe=class os{constructor(e,t){this.raw_txn=e,this.authenticator=t}serialize(e){this.raw_txn.serialize(e),this.authenticator.serialize(e)}static deserialize(e){const t=ge.deserialize(e),s=de.deserialize(e);return new os(t,s)}},Tt=class{static deserialize(n){const e=n.deserializeUleb128AsU32();switch(e){case 0:return Ut.load(n);case 1:return At.load(n);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${e}`)}}},Ut=class as extends Tt{constructor(e,t){super(),this.raw_txn=e,this.secondary_signer_addresses=t}serialize(e){e.serializeU32AsUleb128(0),this.raw_txn.serialize(e),S(this.secondary_signer_addresses,e)}static load(e){const t=ge.deserialize(e),s=k(e,w);return new as(t,s)}},At=class cs extends Tt{constructor(e,t,s){super(),this.raw_txn=e,this.secondary_signer_addresses=t,this.fee_payer_address=s}serialize(e){e.serializeU32AsUleb128(1),this.raw_txn.serialize(e),S(this.secondary_signer_addresses,e),this.fee_payer_address.serialize(e)}static load(e){const t=ge.deserialize(e),s=k(e,w),i=w.deserialize(e);return new cs(t,s,i)}},Ee=class{static deserialize(n){const e=n.deserializeUleb128AsU32();switch(e){case 0:return xt.load(n);case 2:return St.load(n);case 3:return us.load(n);default:throw new Error(`Unknown variant index for TransactionPayload: ${e}`)}}},xt=class ls extends Ee{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(0),this.value.serialize(e)}static load(e){const t=vt.deserialize(e);return new ls(t)}},St=class ds extends Ee{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(2),this.value.serialize(e)}static load(e){const t=je.deserialize(e);return new ds(t)}},us=class hs extends Ee{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(3),this.value.serialize(e)}static load(e){const t=ss.deserialize(e);return new hs(t)}},Bt=class fs{constructor(e){this.value=e}serialize(e){e.serializeU8(this.value)}static deserialize(e){const t=e.deserializeU8();return new fs(t)}},P=class{static deserialize(n){const e=n.deserializeUleb128AsU32();switch(e){case 0:return Et.load(n);case 1:return zt.load(n);case 2:return $t.load(n);case 3:return Ht.load(n);case 4:return Nt.load(n);case 5:return Pt.load(n);case 6:return It.load(n);case 7:return kt.load(n);case 8:return Ct.load(n);default:throw new Error(`Unknown variant index for TransactionArgument: ${e}`)}}},Et=class _s extends P{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(0),e.serializeU8(this.value)}static load(e){const t=e.deserializeU8();return new _s(t)}},It=class gs extends P{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(6),e.serializeU16(this.value)}static load(e){const t=e.deserializeU16();return new gs(t)}},kt=class ys extends P{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(7),e.serializeU32(this.value)}static load(e){const t=e.deserializeU32();return new ys(t)}},zt=class ps extends P{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(1),e.serializeU64(this.value)}static load(e){const t=e.deserializeU64();return new ps(t)}},$t=class ws extends P{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(2),e.serializeU128(this.value)}static load(e){const t=e.deserializeU128();return new ws(t)}},Ct=class bs extends P{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(8),e.serializeU256(this.value)}static load(e){const t=e.deserializeU256();return new bs(t)}},Ht=class ms extends P{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(3),this.value.serialize(e)}static load(e){const t=w.deserialize(e);return new ms(t)}},Nt=class vs extends P{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(4),e.serializeBytes(this.value)}static load(e){const t=e.deserializeBytes();return new vs(t)}},Pt=class Ts extends P{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(5),e.serializeBool(this.value)}static load(e){const t=e.deserializeBool();return new Ts(t)}},Us=class{getHashSalt(){const n=le.create();return n.update("APTOS::Transaction"),n.digest()}static deserialize(n){const e=n.deserializeUleb128AsU32();switch(e){case 0:return As.load(n);default:throw new Error(`Unknown variant index for Transaction: ${e}`)}}},As=class xs extends Us{constructor(e){super(),this.value=e}hash(){const e=le.create();return e.update(this.getHashSalt()),e.update(F(this)),e.digest()}serialize(e){e.serializeU32AsUleb128(0),this.value.serialize(e)}static load(e){return new xs(Qe.deserialize(e))}},Ve=class Ss{constructor(e){this.name=e}serialize(e){e.serializeStr(this.name)}static deserialize(e){const t=e.deserializeStr();return new Ss(t)}},Xe=class Bs{constructor(e,t){this.name=e,this.type_tag=t}serialize(e){e.serializeStr(this.name),this.type_tag.serialize(e)}static deserialize(e){const t=e.deserializeStr(),s=B.deserialize(e);return new Bs(t,s)}},Je=class{static deserialize(n){const e=n.deserializeUleb128AsU32();switch(e){case 0:return Ot.load(n);case 1:return ve.load(n);default:throw new Error(`Unknown variant index for TransactionPayload: ${e}`)}}},Ot=class Es extends Je{constructor(e,t,s,i,r){super(),this.name=e,this.doc=t,this.code=s,this.ty_args=i,this.args=r}serialize(e){e.serializeU32AsUleb128(0),e.serializeStr(this.name),e.serializeStr(this.doc),e.serializeBytes(this.code),S(this.ty_args,e),S(this.args,e)}static load(e){const t=e.deserializeStr(),s=e.deserializeStr(),i=e.deserializeBytes(),r=k(e,Ve),o=k(e,Xe);return new Es(t,s,i,r,o)}},ve=class Is extends Je{constructor(e,t,s,i,r){super(),this.name=e,this.module_name=t,this.doc=s,this.ty_args=i,this.args=r}serialize(e){e.serializeU32AsUleb128(1),e.serializeStr(this.name),this.module_name.serialize(e),e.serializeStr(this.doc),S(this.ty_args,e),S(this.args,e)}static load(e){const t=e.deserializeStr(),s=me.deserialize(e),i=e.deserializeStr(),r=k(e,Ve),o=k(e,Xe);return new Is(t,s,i,r,o)}},Ie=class se{constructor(e){if(e.length!==se.LENGTH)throw new Error("Expected a byte array of length 32");this.bytes=e}static fromMultiEd25519PublicKey(e){const t=e.toBytes(),s=new Uint8Array(t.length+1);s.set(t),s.set([se.MULTI_ED25519_SCHEME],t.length);const i=le.create();return i.update(s),new se(i.digest())}static fromEd25519PublicKey(e){const t=e.value,s=new Uint8Array(t.length+1);s.set(t),s.set([se.ED25519_SCHEME],t.length);const i=le.create();return i.update(s),new se(i.digest())}derivedAddress(){return h.fromUint8Array(this.bytes)}};Ie.LENGTH=32;Ie.MULTI_ED25519_SCHEME=1;Ie.ED25519_SCHEME=0;Ie.DERIVE_RESOURCE_ACCOUNT_SCHEME=255;var lt=Ie,Br=class{constructor(n,e,t,s,i,r,o){this.accountAddress=n,this.moduleName=e,this.structName=t,this.sequenceNumber=s,this.originator=i,this.currentAuthKey=r,this.newPublicKey=o}serialize(n){this.accountAddress.serialize(n),n.serializeStr(this.moduleName),n.serializeStr(this.structName),n.serializeU64(this.sequenceNumber),this.originator.serialize(n),this.currentAuthKey.serialize(n),n.serializeBytes(this.newPublicKey)}},ks=class qe{static fromAptosAccountObject(e){return new qe(h.ensure(e.privateKeyHex).toUint8Array(),e.address)}static isValidPath(e){return/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'+$/.test(e)}static fromDerivePath(e,t){if(!qe.isValidPath(e))throw new Error("Invalid derivation path");const s=t.trim().split(/\s+/).map(r=>r.toLowerCase()).join(" "),{key:i}=Qi(e,en(zi(s)));return new qe(i)}constructor(e,t){e?this.signingKey=Ce.sign.keyPair.fromSeed(e.slice(0,32)):this.signingKey=Ce.sign.keyPair(),this.accountAddress=h.ensure(t||this.authKey().hex())}address(){return this.accountAddress}authKey(){const e=new N(this.signingKey.publicKey);return lt.fromEd25519PublicKey(e).derivedAddress()}static getResourceAccountAddress(e,t){const s=F(w.fromHex(e)),i=new Uint8Array([...s,...t,lt.DERIVE_RESOURCE_ACCOUNT_SCHEME]),r=le.create();return r.update(i),h.fromUint8Array(r.digest())}static getCollectionID(e,t){const s=new TextEncoder().encode(`${e}::${t}`),i=ci.create();return i.update(s),h.fromUint8Array(i.digest())}pubKey(){return h.fromUint8Array(this.signingKey.publicKey)}signBuffer(e){const t=Ce.sign.detached(e,this.signingKey.secretKey);return h.fromUint8Array(t)}signHexString(e){const t=h.ensure(e).toUint8Array();return this.signBuffer(t)}verifySignature(e,t){const s=h.ensure(e).toUint8Array(),i=h.ensure(t).toUint8Array();return Ce.sign.detached.verify(s,i,this.signingKey.publicKey)}toPrivateKeyObject(){return{address:this.address().hex(),publicKeyHex:this.pubKey().hex(),privateKeyHex:h.fromUint8Array(this.signingKey.secretKey.slice(0,32)).hex()}}};p([Ke()],ks.prototype,"authKey",1);var Vt=ks,ke=`
    fragment CurrentTokenOwnershipFields on current_token_ownerships_v2 {
  token_standard
  token_properties_mutated_v1
  token_data_id
  table_type_v1
  storage_id
  property_version_v1
  owner_address
  last_transaction_version
  last_transaction_timestamp
  is_soulbound_v2
  is_fungible_v2
  amount
  current_token_data {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `,Er=`
    fragment TokenDataFields on current_token_datas {
  creator_address
  collection_name
  description
  metadata_uri
  name
  token_data_id_hash
  collection_data_id_hash
}
    `,Ir=`
    fragment CollectionDataFields on current_collection_datas {
  metadata_uri
  supply
  description
  collection_name
  collection_data_id_hash
  table_handle
  creator_address
}
    `,zs=`
    fragment TokenActivitiesFields on token_activities_v2 {
  after_value
  before_value
  entry_function_id_str
  event_account_address
  event_index
  from_address
  is_fungible_v2
  property_version_v1
  to_address
  token_amount
  token_data_id
  token_standard
  transaction_timestamp
  transaction_version
  type
}
    `,kr=`
    query getAccountCoinsDataCount($address: String) {
  current_fungible_asset_balances_aggregate(
    where: {owner_address: {_eq: $address}}
  ) {
    aggregate {
      count
    }
  }
}
    `,zr=`
    query getAccountCoinsData($where_condition: current_fungible_asset_balances_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_fungible_asset_balances_order_by!]) {
  current_fungible_asset_balances(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    amount
    asset_type
    is_frozen
    is_primary
    last_transaction_timestamp
    last_transaction_version
    owner_address
    storage_id
    token_standard
    metadata {
      token_standard
      symbol
      supply_aggregator_table_key_v1
      supply_aggregator_table_handle_v1
      project_uri
      name
      last_transaction_version
      last_transaction_timestamp
      icon_uri
      decimals
      creator_address
      asset_type
    }
  }
}
    `,$r=`
    query getAccountCurrentTokens($address: String!, $offset: Int, $limit: Int) {
  current_token_ownerships(
    where: {owner_address: {_eq: $address}, amount: {_gt: 0}}
    order_by: [{last_transaction_version: desc}, {creator_address: asc}, {collection_name: asc}, {name: asc}]
    offset: $offset
    limit: $limit
  ) {
    amount
    current_token_data {
      ...TokenDataFields
    }
    current_collection_data {
      ...CollectionDataFields
    }
    last_transaction_version
    property_version
  }
}
    ${Er}
${Ir}`,Cr=`
    query getAccountTokensCount($where_condition: current_token_ownerships_v2_bool_exp, $offset: Int, $limit: Int) {
  current_token_ownerships_v2_aggregate(
    where: $where_condition
    offset: $offset
    limit: $limit
  ) {
    aggregate {
      count
    }
  }
}
    `,Hr=`
    query getAccountTransactionsCount($address: String) {
  account_transactions_aggregate(where: {account_address: {_eq: $address}}) {
    aggregate {
      count
    }
  }
}
    `,Nr=`
    query getAccountTransactionsData($where_condition: account_transactions_bool_exp!, $offset: Int, $limit: Int, $order_by: [account_transactions_order_by!]) {
  account_transactions(
    where: $where_condition
    order_by: $order_by
    limit: $limit
    offset: $offset
  ) {
    token_activities_v2 {
      ...TokenActivitiesFields
    }
    transaction_version
    account_address
  }
}
    ${zs}`,Pr=`
    query getCollectionData($where_condition: current_collections_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_collections_v2_order_by!]) {
  current_collections_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    collection_id
    collection_name
    creator_address
    current_supply
    description
    last_transaction_timestamp
    last_transaction_version
    max_supply
    mutable_description
    mutable_uri
    table_handle_v1
    token_standard
    total_minted_v2
    uri
  }
}
    `,Or=`
    query getCollectionsWithOwnedTokens($where_condition: current_collection_ownership_v2_view_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_collection_ownership_v2_view_order_by!]) {
  current_collection_ownership_v2_view(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      mutable_description
      max_supply
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
    collection_id
    collection_name
    collection_uri
    creator_address
    distinct_tokens
    last_transaction_version
    owner_address
    single_token_uri
  }
}
    `,Mr=`
    query getCurrentObjects($where_condition: current_objects_bool_exp, $offset: Int, $limit: Int, $order_by: [current_objects_order_by!]) {
  current_objects(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    allow_ungated_transfer
    state_key_hash
    owner_address
    object_address
    last_transaction_version
    last_guid_creation_num
    is_deleted
  }
}
    `,Lr=`
    query getDelegatedStakingActivities($delegatorAddress: String, $poolAddress: String) {
  delegated_staking_activities(
    where: {delegator_address: {_eq: $delegatorAddress}, pool_address: {_eq: $poolAddress}}
  ) {
    amount
    delegator_address
    event_index
    event_type
    pool_address
    transaction_version
  }
}
    `,Dr=`
    query getIndexerLedgerInfo {
  ledger_infos {
    chain_id
  }
}
    `,qr=`
    query getNumberOfDelegators($poolAddress: String) {
  num_active_delegator_per_pool(
    where: {pool_address: {_eq: $poolAddress}, num_active_delegator: {_gt: "0"}}
    distinct_on: pool_address
  ) {
    num_active_delegator
    pool_address
  }
}
    `,Fr=`
    query getOwnedTokens($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${ke}`,Rr=`
    query getOwnedTokensByTokenData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${ke}`,Gr=`
    query getTokenActivities($where_condition: token_activities_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [token_activities_v2_order_by!]) {
  token_activities_v2(
    where: $where_condition
    order_by: $order_by
    offset: $offset
    limit: $limit
  ) {
    ...TokenActivitiesFields
  }
}
    ${zs}`,Kr=`
    query getTokenActivitiesCount($token_id: String) {
  token_activities_v2_aggregate(where: {token_data_id: {_eq: $token_id}}) {
    aggregate {
      count
    }
  }
}
    `,Wr=`
    query getTokenCurrentOwnerData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${ke}`,jr=`
    query getTokenData($where_condition: current_token_datas_v2_bool_exp, $offset: Int, $limit: Int, $order_by: [current_token_datas_v2_order_by!]) {
  current_token_datas_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `,Qr=`
    query getTokenOwnedFromCollection($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${ke}`,Vr=`
    query getTokenOwnersData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${ke}`,Xr=`
    query getTopUserTransactions($limit: Int) {
  user_transactions(limit: $limit, order_by: {version: desc}) {
    version
  }
}
    `,Jr=`
    query getUserTransactions($where_condition: user_transactions_bool_exp!, $offset: Int, $limit: Int, $order_by: [user_transactions_order_by!]) {
  user_transactions(
    order_by: $order_by
    where: $where_condition
    limit: $limit
    offset: $offset
  ) {
    version
  }
}
    `;function Ye(n,e,t){if(!(e!=null&&e.includes(typeof n)))throw new Error(t||`Invalid arg: ${n} type should be ${e instanceof Array?e.join(" or "):e}`)}function $s(n){if(Ye(n,["boolean","string"]),typeof n=="boolean")return n;if(n==="true")return!0;if(n==="false")return!1;throw new Error("Invalid boolean string.")}function re(n){if(Ye(n,["number","string"]),typeof n=="number")return n;const e=Number.parseInt(n,10);if(Number.isNaN(e))throw new Error("Invalid number string.");return e}function oe(n){return Ye(n,["number","bigint","string"]),BigInt(n)}function Yr(n,e,t){Mt(n,e,t)}function Mt(n,e,t,s){if(e instanceof ue)t.serializeBool($s(n));else if(e instanceof J)t.serializeU8(re(n));else if(e instanceof Ue)t.serializeU16(re(n));else if(e instanceof Ae)t.serializeU32(re(n));else if(e instanceof he)t.serializeU64(oe(n));else if(e instanceof fe)t.serializeU128(oe(n));else if(e instanceof xe)t.serializeU256(oe(n));else if(e instanceof Z)Cs(n,t);else if(e instanceof Se)Zr(n,e,t);else if(e instanceof ee)eo(n,e,t);else throw new Error("Unsupported arg type.")}function Cs(n,e){let t;if(typeof n=="string"||n instanceof h)t=w.fromHex(n);else if(n instanceof w)t=n;else throw new Error("Invalid account address.");t.serialize(e)}function Zr(n,e,t,s){if(e.value instanceof J){if(n instanceof Uint8Array){t.serializeBytes(n);return}if(n instanceof h){t.serializeBytes(n.toUint8Array());return}if(typeof n=="string"){t.serializeStr(n);return}}if(!Array.isArray(n))throw new Error("Invalid vector args.");t.serializeU32AsUleb128(n.length),n.forEach(i=>Mt(i,e.value,t))}function eo(n,e,t,s){const{address:i,module_name:r,name:o,type_args:a}=e.value,c=`${h.fromUint8Array(i.address).toShortString()}::${r.value}::${o.value}`;if(c==="0x1::string::String")Ye(n,["string"]),t.serializeStr(n);else if(c==="0x1::object::Object")Cs(n,t);else if(c==="0x1::option::Option"){if(a.length!==1)throw new Error(`Option has the wrong number of type arguments ${a.length}`);to(n,a[0],t)}else throw new Error("Unsupported struct type in function argument")}function to(n,e,t,s){n==null?t.serializeU32AsUleb128(0):(t.serializeU32AsUleb128(1),Mt(n,e,t))}function no(n,e){if(e instanceof ue)return new Pt($s(n));if(e instanceof J)return new Et(re(n));if(e instanceof Ue)return new It(re(n));if(e instanceof Ae)return new kt(re(n));if(e instanceof he)return new zt(oe(n));if(e instanceof fe)return new $t(oe(n));if(e instanceof xe)return new Ct(oe(n));if(e instanceof Z){let t;if(typeof n=="string"||n instanceof h)t=w.fromHex(n);else if(n instanceof w)t=n;else throw new Error("Invalid account address.");return new Ht(t)}if(e instanceof Se&&e.value instanceof J){if(!(n instanceof Uint8Array))throw new Error(`${n} should be an instance of Uint8Array`);return new Nt(n)}throw new Error("Unknown type for TransactionArgument.")}var so="APTOS::RawTransaction",Xt="APTOS::RawTransactionWithData",Te=class{constructor(n,e){this.rawTxnBuilder=e,this.signingFunction=n}build(n,e,t){if(!this.rawTxnBuilder)throw new Error("this.rawTxnBuilder doesn't exist.");return this.rawTxnBuilder.build(n,e,t)}static getSigningMessage(n){const e=le.create();if(n instanceof ge)e.update(so);else if(n instanceof Ut)e.update(Xt);else if(n instanceof At)e.update(Xt);else throw new Error("Unknown transaction type.");const t=e.digest(),s=F(n),i=new Uint8Array(t.length+s.length);return i.set(t),i.set(s,t.length),i}},st=class extends Te{constructor(n,e,t){super(n,t),this.publicKey=e}rawToSigned(n){const e=Te.getSigningMessage(n),t=this.signingFunction(e),s=new wt(new N(this.publicKey),t);return new Qe(n,s)}sign(n){return F(this.rawToSigned(n))}},io=class extends Te{constructor(n,e){super(n),this.publicKey=e}rawToSigned(n){const e=Te.getSigningMessage(n),t=this.signingFunction(e),s=new bt(this.publicKey,t);return new Qe(n,s)}sign(n){return F(this.rawToSigned(n))}},ro=class dt{constructor(e,t){this.abiMap=new Map,e.forEach(s=>{const i=new yt(s),r=Je.deserialize(i);let o;if(r instanceof ve){const a=r,{address:c,name:l}=a.module_name;o=`${h.fromUint8Array(c.address).toShortString()}::${l.value}::${a.name}`}else o=r.name;if(this.abiMap.has(o))throw new Error("Found conflicting ABI interfaces");this.abiMap.set(o,r)}),this.builderConfig={maxGasAmount:BigInt(pn),expSecFromNow:wn,...t}}static toBCSArgs(e,t){if(e.length!==t.length)throw new Error("Wrong number of args provided.");return t.map((s,i)=>{const r=new m;return Yr(s,e[i].type_tag,r),r.getBytes()})}static toTransactionArguments(e,t){if(e.length!==t.length)throw new Error("Wrong number of args provided.");return t.map((s,i)=>no(s,e[i].type_tag))}setSequenceNumber(e){this.builderConfig.sequenceNumber=BigInt(e)}buildTransactionPayload(e,t,s){const i=t.map(a=>new Be(a).parseTypeTag());let r;if(!this.abiMap.has(e))throw new Error(`Cannot find function: ${e}`);const o=this.abiMap.get(e);if(o instanceof ve){const a=o,c=dt.toBCSArgs(a.args,s);r=new St(new je(a.module_name,new E(a.name),i,c))}else if(o instanceof Ot){const a=o,c=dt.toTransactionArguments(a.args,s);r=new xt(new vt(a.code,i,c))}else throw new Error("Unknown ABI format.");return r}build(e,t,s){const{sender:i,sequenceNumber:r,gasUnitPrice:o,maxGasAmount:a,expSecFromNow:c,chainId:l}=this.builderConfig;if(!o)throw new Error("No gasUnitPrice provided.");const u=i instanceof w?i:w.fromHex(i),d=BigInt(Math.floor(Date.now()/1e3)+Number(c)),f=this.buildTransactionPayload(e,t,s);if(f)return new ge(u,BigInt(r),f,BigInt(a),BigInt(o),d,new Bt(Number(l)));throw new Error("Invalid ABI.")}},Hs=class{constructor(n,e){this.aptosClient=n,this.builderConfig=e}async fetchABI(n){const t=(await this.aptosClient.getAccountModules(n)).map(i=>i.abi).flatMap(i=>i.exposed_functions.filter(r=>r.is_entry).map(r=>({fullName:`${i.address}::${i.name}::${r.name}`,...r}))),s=new Map;return t.forEach(i=>{s.set(i.fullName,i)}),s}async build(n,e,t){if(n=(y=>y.replace(/^0[xX]0*/g,"0x"))(n),n.split("::").length!==3)throw new Error("'func' needs to be a fully qualified function name in format <address>::<module>::<function>, e.g. 0x1::coin::transfer");const[r,o]=n.split("::"),a=await this.fetchABI(r);if(!a.has(n))throw new Error(`${n} doesn't exist.`);const c=a.get(n),u=c.params.filter(y=>y!=="signer"&&y!=="&signer").map((y,C)=>new Xe(`var${C}`,new Be(y,e).parseTypeTag())),d=new ve(c.name,me.fromStr(`${r}::${o}`),"",c.generic_type_params.map((y,C)=>new Ve(`${C}`)),u),{sender:f,..._}=this.builderConfig,A=f instanceof w?h.fromUint8Array(f.address):f,[{sequence_number:T},I,{gas_estimate:$}]=await Promise.all([_!=null&&_.sequenceNumber?Promise.resolve({sequence_number:_==null?void 0:_.sequenceNumber}):this.aptosClient.getAccount(A),_!=null&&_.chainId?Promise.resolve(_==null?void 0:_.chainId):this.aptosClient.getChainId(),_!=null&&_.gasUnitPrice?Promise.resolve({gas_estimate:_==null?void 0:_.gasUnitPrice}):this.aptosClient.estimateGasPrice()]);return new ro([F(d)],{sender:f,sequenceNumber:T,chainId:I,gasUnitPrice:BigInt($),..._}).build(n,e,t)}};p([bn(10*60*1e3)],Hs.prototype,"fetchABI",1);var v=class ie{constructor(e,t,s=!1){if(!e)throw new Error("Node URL cannot be empty.");s?this.nodeUrl=e:this.nodeUrl=Ji(e),this.config=t==null?{}:{...t}}async getAccount(e){const{data:t}=await z({url:this.nodeUrl,endpoint:`accounts/${h.ensure(e).hex()}`,originMethod:"getAccount",overrides:{...this.config}});return t}async getAccountTransactions(e,t){const{data:s}=await z({url:this.nodeUrl,endpoint:`accounts/${h.ensure(e).hex()}/transactions`,originMethod:"getAccountTransactions",params:{start:t==null?void 0:t.start,limit:t==null?void 0:t.limit},overrides:{...this.config}});return s}async getAccountModules(e,t){return await Wt({url:this.nodeUrl,endpoint:`accounts/${e}/modules`,params:{ledger_version:t==null?void 0:t.ledgerVersion,limit:1e3},originMethod:"getAccountModules",overrides:{...this.config}})}async getAccountModule(e,t,s){const{data:i}=await z({url:this.nodeUrl,endpoint:`accounts/${h.ensure(e).hex()}/module/${t}`,originMethod:"getAccountModule",params:{ledger_version:s==null?void 0:s.ledgerVersion},overrides:{...this.config}});return i}async getAccountResources(e,t){return await Wt({url:this.nodeUrl,endpoint:`accounts/${e}/resources`,params:{ledger_version:t==null?void 0:t.ledgerVersion,limit:9999},originMethod:"getAccountResources",overrides:{...this.config}})}async getAccountResource(e,t,s){const{data:i}=await z({url:this.nodeUrl,endpoint:`accounts/${h.ensure(e).hex()}/resource/${t}`,originMethod:"getAccountResource",params:{ledger_version:s==null?void 0:s.ledgerVersion},overrides:{...this.config}});return i}static generateBCSTransaction(e,t){return new st(i=>{const r=e.signBuffer(i);return new b.Ed25519Signature(r.toUint8Array())},e.pubKey().toUint8Array()).sign(t)}static generateBCSSimulation(e,t){return new st(i=>{const r=new Uint8Array(64);return new b.Ed25519Signature(r)},e.pubKey().toUint8Array()).sign(t)}async generateTransaction(e,t,s){const i={sender:e};if(s!=null&&s.sequence_number&&(i.sequenceNumber=s.sequence_number),s!=null&&s.gas_unit_price&&(i.gasUnitPrice=s.gas_unit_price),s!=null&&s.max_gas_amount&&(i.maxGasAmount=s.max_gas_amount),s!=null&&s.expiration_timestamp_secs){const o=Number.parseInt(s.expiration_timestamp_secs,10);i.expSecFromNow=o-Math.floor(Date.now()/1e3)}return new Hs(this,i).build(t.function,t.type_arguments,t.arguments)}async generateFeePayerTransaction(e,t,s,i=[],r){const o=await this.generateTransaction(e,t,r),a=i.map(l=>w.fromHex(l));return new b.FeePayerRawTransaction(o,a,w.fromHex(s))}async submitFeePayerTransaction(e,t,s,i=[]){const r=new b.TransactionAuthenticatorFeePayer(t,e.secondary_signer_addresses,i,{address:e.fee_payer_address,authenticator:s}),o=F(new b.SignedTransaction(e.raw_txn,r));return await this.submitSignedBCSTransaction(o)}async signMultiTransaction(e,t){const s=new b.Ed25519Signature(e.signBuffer(Te.getSigningMessage(t)).toUint8Array()),i=new b.AccountAuthenticatorEd25519(new b.Ed25519PublicKey(e.signingKey.publicKey),s);return Promise.resolve(i)}async signTransaction(e,t){return Promise.resolve(ie.generateBCSTransaction(e,t))}async getEventsByCreationNumber(e,t,s){const{data:i}=await z({url:this.nodeUrl,endpoint:`accounts/${h.ensure(e).hex()}/events/${t}`,originMethod:"getEventsByCreationNumber",params:{start:s==null?void 0:s.start,limit:s==null?void 0:s.limit},overrides:{...this.config}});return i}async getEventsByEventHandle(e,t,s,i){const{data:r}=await z({url:this.nodeUrl,endpoint:`accounts/${h.ensure(e).hex()}/events/${t}/${s}`,originMethod:"getEventsByEventHandle",params:{start:i==null?void 0:i.start,limit:i==null?void 0:i.limit},overrides:{...this.config}});return r}async submitTransaction(e){return this.submitSignedBCSTransaction(e)}async simulateTransaction(e,t,s){let i;return e instanceof Vt?i=ie.generateBCSSimulation(e,t):e instanceof We?i=new io(()=>{const{threshold:o}=e,a=[],c=[];for(let u=0;u<o;u+=1)a.push(u),c.push(new b.Ed25519Signature(new Uint8Array(64)));const l=b.MultiEd25519Signature.createBitmap(a);return new b.MultiEd25519Signature(c,l)},e).sign(t):i=new st(()=>{const o=new Uint8Array(64);return new b.Ed25519Signature(o)},e.toBytes()).sign(t),this.submitBCSSimulation(i,s)}async submitSignedBCSTransaction(e){const{data:t}=await pe({url:this.nodeUrl,body:e,endpoint:"transactions",originMethod:"submitSignedBCSTransaction",contentType:"application/x.aptos.signed_transaction+bcs",overrides:{...this.config}});return t}async submitBCSSimulation(e,t){var s,i,r;const o={estimate_gas_unit_price:(s=t==null?void 0:t.estimateGasUnitPrice)!=null?s:!1,estimate_max_gas_amount:(i=t==null?void 0:t.estimateMaxGasAmount)!=null?i:!1,estimate_prioritized_gas_unit_price:(r=t==null?void 0:t.estimatePrioritizedGasUnitPrice)!=null?r:!1},{data:a}=await pe({url:this.nodeUrl,body:e,endpoint:"transactions/simulate",params:o,originMethod:"submitBCSSimulation",contentType:"application/x.aptos.signed_transaction+bcs",overrides:{...this.config}});return a}async getTransactions(e){var t;const{data:s}=await z({url:this.nodeUrl,endpoint:"transactions",originMethod:"getTransactions",params:{start:(t=e==null?void 0:e.start)==null?void 0:t.toString(),limit:e==null?void 0:e.limit},overrides:{...this.config}});return s}async getTransactionByHash(e){const{data:t}=await z({url:this.nodeUrl,endpoint:`transactions/by_hash/${e}`,originMethod:"getTransactionByHash",overrides:{...this.config}});return t}async getTransactionByVersion(e){const{data:t}=await z({url:this.nodeUrl,endpoint:`transactions/by_version/${e}`,originMethod:"getTransactionByVersion",overrides:{...this.config}});return t}async transactionPending(e){try{return(await this.getTransactionByHash(e)).type==="pending_transaction"}catch(t){if((t==null?void 0:t.status)===404)return!0;throw t}}async waitForTransactionWithResult(e,t){var s,i;const r=(s=t==null?void 0:t.timeoutSecs)!=null?s:Yi,o=(i=t==null?void 0:t.checkSuccess)!=null?i:!1;let a=!0,c=0,l;for(;a&&!(c>=r);){try{if(l=await this.getTransactionByHash(e),a=l.type==="pending_transaction",!a)break}catch(u){const d=u instanceof Lt,f=d&&u.status!==404&&u.status>=400&&u.status<500;if(!d||f)throw u}await Xi(1e3),c+=1}if(l===void 0)throw new Error(`Waiting for transaction ${e} failed`);if(a)throw new oo(`Waiting for transaction ${e} timed out after ${r} seconds`,l);if(!o)return l;if(!(l!=null&&l.success))throw new ao(`Transaction ${e} failed with an error: ${l.vm_status}`,l);return l}async waitForTransaction(e,t){await this.waitForTransactionWithResult(e,t)}async getLedgerInfo(){const{data:e}=await z({url:this.nodeUrl,originMethod:"getLedgerInfo",overrides:{...this.config}});return e}async getChainId(){return(await this.getLedgerInfo()).chain_id}async getTableItem(e,t,s){var i;return(await pe({url:this.nodeUrl,body:t,endpoint:`tables/${e}/item`,originMethod:"getTableItem",params:{ledger_version:(i=s==null?void 0:s.ledgerVersion)==null?void 0:i.toString()},overrides:{...this.config}})).data}async generateRawTransaction(e,t,s){const[{sequence_number:i},r,{gas_estimate:o}]=await Promise.all([s!=null&&s.providedSequenceNumber?Promise.resolve({sequence_number:s.providedSequenceNumber}):this.getAccount(e),this.getChainId(),s!=null&&s.gasUnitPrice?Promise.resolve({gas_estimate:s.gasUnitPrice}):this.estimateGasPrice()]),{maxGasAmount:a,gasUnitPrice:c,expireTimestamp:l}={maxGasAmount:BigInt(pn),gasUnitPrice:BigInt(o),expireTimestamp:BigInt(Math.floor(Date.now()/1e3)+wn),...s};return new b.RawTransaction(b.AccountAddress.fromHex(e),BigInt(i),t,a,c,l,new b.ChainId(r))}async generateSignSubmitTransaction(e,t,s){const i=await this.generateRawTransaction(e.address(),t,s),r=ie.generateBCSTransaction(e,i);return(await this.submitSignedBCSTransaction(r)).hash}async signAndSubmitTransaction(e,t){const s=ie.generateBCSTransaction(e,t);return(await this.submitSignedBCSTransaction(s)).hash}async publishPackage(e,t,s,i){const r=new m;S(s,r);const o=new b.TransactionPayloadEntryFunction(b.EntryFunction.natural("0x1::code","publish_package_txn",[],[Q(t),r.getBytes()]));return this.generateSignSubmitTransaction(e,o,i)}async createResourceAccountAndPublishPackage(e,t,s,i,r){const o=new m;S(i,o);const a=new b.TransactionPayloadEntryFunction(b.EntryFunction.natural("0x1::resource_account","create_resource_account_and_publish_package",[],[Q(t),Q(s),o.getBytes()]));return this.generateSignSubmitTransaction(e,a,r)}async generateSignSubmitWaitForTransaction(e,t,s){const i=await this.generateSignSubmitTransaction(e,t,s);return this.waitForTransactionWithResult(i,s)}async estimateGasPrice(){const{data:e}=await z({url:this.nodeUrl,endpoint:"estimate_gas_price",originMethod:"estimateGasPrice",overrides:{...this.config}});return e}async estimateMaxGasAmount(e){const t=`0x1::coin::CoinStore<${Zi}>`,[{gas_estimate:s},i]=await Promise.all([this.estimateGasPrice(),this.getAccountResources(e)]),r=i.find(a=>a.type===t);return BigInt(r.data.coin.value)/BigInt(s)}async rotateAuthKeyEd25519(e,t,s){const{sequence_number:i,authentication_key:r}=await this.getAccount(e.address()),o=new Vt(t),a=new b.RotationProofChallenge(b.AccountAddress.CORE_CODE_ADDRESS,"account","RotationProofChallenge",BigInt(i),b.AccountAddress.fromHex(e.address()),new b.AccountAddress(new h(r).toUint8Array()),o.pubKey().toUint8Array()),c=h.fromUint8Array(F(a)),l=e.signHexString(c),u=o.signHexString(c),d=new b.TransactionPayloadEntryFunction(b.EntryFunction.natural("0x1::account","rotate_authentication_key",[],[rt(0),Q(e.pubKey().toUint8Array()),rt(0),Q(o.pubKey().toUint8Array()),Q(l.toUint8Array()),Q(u.toUint8Array())])),f=await this.generateRawTransaction(e.address(),d,s),_=ie.generateBCSTransaction(e,f);return this.submitSignedBCSTransaction(_)}async lookupOriginalAddress(e){const t=await this.getAccountResource("0x1","0x1::account::OriginatingAddress"),{address_map:{handle:s}}=t.data,i=await this.getTableItem(s,{key_type:"address",value_type:"address",key:h.ensure(e).hex()});return new h(i)}async getBlockByHeight(e,t){const{data:s}=await z({url:this.nodeUrl,endpoint:`blocks/by_height/${e}`,originMethod:"getBlockByHeight",params:{with_transactions:t},overrides:{...this.config}});return s}async getBlockByVersion(e,t){const{data:s}=await z({url:this.nodeUrl,endpoint:`blocks/by_version/${e}`,originMethod:"getBlockByVersion",params:{with_transactions:t},overrides:{...this.config}});return s}async view(e,t){const{data:s}=await pe({url:this.nodeUrl,body:e,endpoint:"view",originMethod:"getTableItem",params:{ledger_version:t},overrides:{...this.config}});return s}clearCache(e){er(e)}};p([x],v.prototype,"getAccount",1);p([x],v.prototype,"getAccountTransactions",1);p([x,bn(10*60*1e3)],v.prototype,"getAccountModules",1);p([x],v.prototype,"getAccountModule",1);p([x],v.prototype,"getAccountResources",1);p([x],v.prototype,"getAccountResource",1);p([x],v.prototype,"getEventsByCreationNumber",1);p([x],v.prototype,"getEventsByEventHandle",1);p([x],v.prototype,"submitSignedBCSTransaction",1);p([x],v.prototype,"submitBCSSimulation",1);p([x],v.prototype,"getTransactions",1);p([x],v.prototype,"getTransactionByHash",1);p([x],v.prototype,"getTransactionByVersion",1);p([x],v.prototype,"getLedgerInfo",1);p([Ke()],v.prototype,"getChainId",1);p([x],v.prototype,"getTableItem",1);p([x,Ke({ttlMs:5*60*1e3,tags:["gas_estimates"]})],v.prototype,"estimateGasPrice",1);p([x],v.prototype,"estimateMaxGasAmount",1);p([x],v.prototype,"getBlockByHeight",1);p([x],v.prototype,"getBlockByVersion",1);p([x],v.prototype,"view",1);var Ns=v,oo=class extends Error{constructor(n,e){super(n),this.lastSubmittedTransaction=e}},ao=class extends Error{constructor(n,e){super(n),this.transaction=e}},Lt=class extends Error{constructor(n,e,t,s){super(e),this.status=n,this.message=e,this.errorCode=t,this.vmErrorCode=s}};function x(n,e,t){const s=t.value;return t.value=async function(...r){var o,a;try{return await s.apply(this,[...r])}catch(c){throw c instanceof mn?new Lt(c.status,JSON.stringify({message:c.message,...c.data}),(o=c.data)==null?void 0:o.error_code,(a=c.data)==null?void 0:a.vm_error_code):c}},t}var Ps=class U{constructor(e,t){this.endpoint=e,this.config=t}static validateAddress(e){if(e.length<66)throw new Error(`${e} is less than 66 chars long.`)}async queryIndexer(e){const t=await pe({url:this.endpoint,body:e,overrides:{WITH_CREDENTIALS:!1,...this.config}});if(t.data.errors)throw new Lt(t.data.errors[0].extensions.code,JSON.stringify({message:t.data.errors[0].message,error_code:t.data.errors[0].extensions.code}));return t.data.data}async getIndexerLedgerInfo(){const e={query:Dr};return this.queryIndexer(e)}async getAccountNFTs(e,t){const s=h.ensure(e).hex();U.validateAddress(s);const i={query:$r,variables:{address:s,offset:t==null?void 0:t.offset,limit:t==null?void 0:t.limit}};return this.queryIndexer(i)}async getTokenActivities(e,t){var s,i;const r=h.ensure(e).hex();U.validateAddress(r);const o={token_data_id:{_eq:r}};t!=null&&t.tokenStandard&&(o.token_standard={_eq:t==null?void 0:t.tokenStandard});const a={query:Gr,variables:{where_condition:o,offset:(s=t==null?void 0:t.options)==null?void 0:s.offset,limit:(i=t==null?void 0:t.options)==null?void 0:i.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(a)}async getTokenActivitiesCount(e){const t={query:Kr,variables:{token_id:e}};return this.queryIndexer(t)}async getAccountTokensCount(e,t){var s,i;const r={owner_address:{_eq:e},amount:{_gt:"0"}};t!=null&&t.tokenStandard&&(r.token_standard={_eq:t==null?void 0:t.tokenStandard});const o=h.ensure(e).hex();U.validateAddress(o);const a={query:Cr,variables:{where_condition:r,offset:(s=t==null?void 0:t.options)==null?void 0:s.offset,limit:(i=t==null?void 0:t.options)==null?void 0:i.limit}};return this.queryIndexer(a)}async getTokenData(e,t){var s,i;const r=h.ensure(e).hex();U.validateAddress(r);const o={token_data_id:{_eq:r}};t!=null&&t.tokenStandard&&(o.token_standard={_eq:t==null?void 0:t.tokenStandard});const a={query:jr,variables:{where_condition:o,offset:(s=t==null?void 0:t.options)==null?void 0:s.offset,limit:(i=t==null?void 0:t.options)==null?void 0:i.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(a)}async getTokenOwnersData(e,t,s){var i,r;const o=h.ensure(e).hex();U.validateAddress(o);const a={token_data_id:{_eq:o},amount:{_gt:"0"}};t&&(a.property_version_v1={_eq:t}),s!=null&&s.tokenStandard&&(a.token_standard={_eq:s==null?void 0:s.tokenStandard});const c={query:Vr,variables:{where_condition:a,offset:(i=s==null?void 0:s.options)==null?void 0:i.offset,limit:(r=s==null?void 0:s.options)==null?void 0:r.limit,order_by:s==null?void 0:s.orderBy}};return this.queryIndexer(c)}async getTokenCurrentOwnerData(e,t,s){var i,r;const o=h.ensure(e).hex();U.validateAddress(o);const a={token_data_id:{_eq:o},amount:{_gt:"0"}};t&&(a.property_version_v1={_eq:t}),s!=null&&s.tokenStandard&&(a.token_standard={_eq:s==null?void 0:s.tokenStandard});const c={query:Wr,variables:{where_condition:a,offset:(i=s==null?void 0:s.options)==null?void 0:i.offset,limit:(r=s==null?void 0:s.options)==null?void 0:r.limit,order_by:s==null?void 0:s.orderBy}};return this.queryIndexer(c)}async getOwnedTokens(e,t){var s,i;const r=h.ensure(e).hex();U.validateAddress(r);const o={owner_address:{_eq:r},amount:{_gt:0}};t!=null&&t.tokenStandard&&(o.token_standard={_eq:t==null?void 0:t.tokenStandard});const a={query:Fr,variables:{where_condition:o,offset:(s=t==null?void 0:t.options)==null?void 0:s.offset,limit:(i=t==null?void 0:t.options)==null?void 0:i.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(a)}async getOwnedTokensByTokenData(e,t){var s,i;const r=h.ensure(e).hex();U.validateAddress(r);const o={token_data_id:{_eq:r},amount:{_gt:0}};t!=null&&t.tokenStandard&&(o.token_standard={_eq:t==null?void 0:t.tokenStandard});const a={query:Rr,variables:{where_condition:o,offset:(s=t==null?void 0:t.options)==null?void 0:s.offset,limit:(i=t==null?void 0:t.options)==null?void 0:i.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(a)}async getTokenOwnedFromCollectionAddress(e,t,s){var i,r;const o=h.ensure(e).hex();U.validateAddress(o);const a=h.ensure(t).hex();U.validateAddress(a);const c={owner_address:{_eq:o},current_token_data:{collection_id:{_eq:a}},amount:{_gt:0}};s!=null&&s.tokenStandard&&(c.token_standard={_eq:s==null?void 0:s.tokenStandard});const l={query:Qr,variables:{where_condition:c,offset:(i=s==null?void 0:s.options)==null?void 0:i.offset,limit:(r=s==null?void 0:s.options)==null?void 0:r.limit,order_by:s==null?void 0:s.orderBy}};return this.queryIndexer(l)}async getTokenOwnedFromCollectionNameAndCreatorAddress(e,t,s,i){const r=await this.getCollectionAddress(s,t,i);return await this.getTokenOwnedFromCollectionAddress(e,r,i)}async getCollectionData(e,t,s){var i,r;const o=h.ensure(e).hex();U.validateAddress(o);const a={collection_name:{_eq:t},creator_address:{_eq:o}};s!=null&&s.tokenStandard&&(a.token_standard={_eq:s==null?void 0:s.tokenStandard});const c={query:Pr,variables:{where_condition:a,offset:(i=s==null?void 0:s.options)==null?void 0:i.offset,limit:(r=s==null?void 0:s.options)==null?void 0:r.limit,order_by:s==null?void 0:s.orderBy}};return this.queryIndexer(c)}async getCollectionAddress(e,t,s){return(await this.getCollectionData(e,t,s)).current_collections_v2[0].collection_id}async getCollectionsWithOwnedTokens(e,t){var s,i;const r=h.ensure(e).hex();U.validateAddress(r);const o={owner_address:{_eq:r}};t!=null&&t.tokenStandard&&(o.current_collection={token_standard:{_eq:t==null?void 0:t.tokenStandard}});const a={query:Or,variables:{where_condition:o,offset:(s=t==null?void 0:t.options)==null?void 0:s.offset,limit:(i=t==null?void 0:t.options)==null?void 0:i.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(a)}async getAccountTransactionsCount(e){const t=h.ensure(e).hex();U.validateAddress(t);const s={query:Hr,variables:{address:t}};return this.queryIndexer(s)}async getAccountTransactionsData(e,t){var s,i;const r=h.ensure(e).hex();U.validateAddress(r);const a={query:Nr,variables:{where_condition:{account_address:{_eq:r}},offset:(s=t==null?void 0:t.options)==null?void 0:s.offset,limit:(i=t==null?void 0:t.options)==null?void 0:i.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(a)}async getTopUserTransactions(e){const t={query:Xr,variables:{limit:e}};return this.queryIndexer(t)}async getUserTransactions(e){var t,s;const i={version:{_lte:e==null?void 0:e.startVersion}},r={query:Jr,variables:{where_condition:i,offset:(t=e==null?void 0:e.options)==null?void 0:t.offset,limit:(s=e==null?void 0:e.options)==null?void 0:s.limit,order_by:e==null?void 0:e.orderBy}};return this.queryIndexer(r)}async getDelegatedStakingActivities(e,t){const s=h.ensure(e).hex(),i=h.ensure(t).hex();U.validateAddress(s),U.validateAddress(i);const r={query:Lr,variables:{delegatorAddress:s,poolAddress:i}};return this.queryIndexer(r)}async getNumberOfDelegators(e){const t=h.ensure(e).hex();U.validateAddress(t);const s={query:qr,variables:{poolAddress:t}};return this.queryIndexer(s)}async getAccountCoinsData(e,t){var s,i;const r=h.ensure(e).hex();U.validateAddress(r);const a={query:zr,variables:{where_condition:{owner_address:{_eq:r}},offset:(s=t==null?void 0:t.options)==null?void 0:s.offset,limit:(i=t==null?void 0:t.options)==null?void 0:i.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(a)}async getAccountCoinsDataCount(e){const t=h.ensure(e).hex();U.validateAddress(t);const s={query:kr,variables:{address:t}};return this.queryIndexer(s)}async getAccountOwnedObjects(e,t){var s,i;const r=h.ensure(e).hex();U.validateAddress(r);const a={query:Mr,variables:{where_condition:{owner_address:{_eq:r}},offset:(s=t==null?void 0:t.options)==null?void 0:s.offset,limit:(i=t==null?void 0:t.options)==null?void 0:i.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(a)}},Os=class{constructor(n,e,t=!1){let s=null,i=null;if(typeof n=="object"&&co(n)?(s=n.fullnodeUrl,i=n.indexerUrl,this.network="CUSTOM"):(s=ir[n],i=sr[n],this.network=n),this.network==="CUSTOM"&&!s)throw new Error("fullnode url is not provided");i&&(this.indexerClient=new Ps(i,e)),this.aptosClient=new Ns(s,e,t)}};function Ms(n,e,t){Object.getOwnPropertyNames(e.prototype).forEach(s=>{const i=Object.getOwnPropertyDescriptor(e.prototype,s);i&&(i.value=function(...r){return this[t][s](...r)},Object.defineProperty(n.prototype,s,i))}),Object.getOwnPropertyNames(e).forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);i&&(i.value=function(...r){return this[t][s](...r)},!n.hasOwnProperty.call(n,s)&&Object.defineProperty(n,s,i))})}Ms(Os,Ns,"aptosClient");Ms(Os,Ps,"indexerClient");function co(n){return n.fullnodeUrl!==void 0&&typeof n.fullnodeUrl=="string"}var Ls=class{constructor(n,e){this.type=n,this.value=e}},Ds=class{constructor(){this.data={}}setProperty(n,e){this.data[n]=e}};function lo(n){let e;return n==="string"||n==="String"?e=new ee(mt):e=new Be(n).parseTypeTag(),e}function qs(n){const e=n.map.data,t=new Ds;return e.forEach(s=>{const{key:i}=s,r=s.value.value,o=s.value.type,a=lo(o),c=uo(a,r),l=new Ls(o,c);t.setProperty(i,l)}),t}function uo(n,e){const t=new yt(new h(e).toUint8Array());let s="";return n instanceof J?s=t.deserializeU8().toString():n instanceof he?s=t.deserializeU64().toString():n instanceof fe?s=t.deserializeU128().toString():n instanceof ue?s=t.deserializeBool()?"true":"false":n instanceof Z?s=h.fromUint8Array(t.deserializeFixedBytes(32)).hex():n instanceof ee&&n.isStringTypeTag()?s=t.deserializeStr():s=e,s}var ho={};Ge(ho,{PropertyMap:()=>Ds,PropertyValue:()=>Ls,Token:()=>_o,TokenData:()=>fo});var fo=class{constructor(n,e,t,s,i,r,o,a){this.collection=n,this.description=e,this.name=t,this.maximum=s,this.supply=i,this.uri=r,this.default_properties=qs(o),this.mutability_config=a}},_o=class{constructor(n,e,t){this.id=n,this.amount=e,this.token_properties=qs(t)}},go={};Ge(go,{AptosErrorCode:()=>Fs,MoveFunctionVisibility:()=>Rs,RoleType:()=>Gs});var Fs=(n=>(n.ACCOUNT_NOT_FOUND="account_not_found",n.RESOURCE_NOT_FOUND="resource_not_found",n.MODULE_NOT_FOUND="module_not_found",n.STRUCT_FIELD_NOT_FOUND="struct_field_not_found",n.VERSION_NOT_FOUND="version_not_found",n.TRANSACTION_NOT_FOUND="transaction_not_found",n.TABLE_ITEM_NOT_FOUND="table_item_not_found",n.BLOCK_NOT_FOUND="block_not_found",n.STATE_VALUE_NOT_FOUND="state_value_not_found",n.VERSION_PRUNED="version_pruned",n.BLOCK_PRUNED="block_pruned",n.INVALID_INPUT="invalid_input",n.INVALID_TRANSACTION_UPDATE="invalid_transaction_update",n.SEQUENCE_NUMBER_TOO_OLD="sequence_number_too_old",n.VM_ERROR="vm_error",n.HEALTH_CHECK_FAILED="health_check_failed",n.MEMPOOL_IS_FULL="mempool_is_full",n.INTERNAL_ERROR="internal_error",n.WEB_FRAMEWORK_ERROR="web_framework_error",n.BCS_NOT_SUPPORTED="bcs_not_supported",n.API_DISABLED="api_disabled",n))(Fs||{}),Rs=(n=>(n.PRIVATE="private",n.PUBLIC="public",n.FRIEND="friend",n))(Rs||{}),Gs=(n=>(n.VALIDATOR="validator",n.FULL_NODE="full_node",n))(Gs||{});export{h as H,rr as N,Os as P};
