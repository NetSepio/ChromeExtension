import{p as Ra,s as Va,n as Ga,z as ja,b as Wa,q as Za,m as mn,E as es,x as Ya}from"./index.browser.2780c866.js";var Ue=class extends Error{constructor(e,n){super(e),this.invalidReason=n}};function vn(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function Xa(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Zt(t,...e){if(!Xa(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function Qa(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");vn(t.outputLen),vn(t.blockLen)}function Et(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ts(t,e){Zt(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ja=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Gn=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),yi=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,ec=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function wi(t){for(let e=0;e<t.length;e++)t[e]=ec(t[e])}const tc=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function cr(t){Zt(t);let e="";for(let n=0;n<t.length;n++)e+=tc[t[n]];return e}const ke={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function mi(t){if(t>=ke._0&&t<=ke._9)return t-ke._0;if(t>=ke._A&&t<=ke._F)return t-(ke._A-10);if(t>=ke._a&&t<=ke._f)return t-(ke._a-10)}function ns(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=mi(t.charCodeAt(s)),a=mi(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function nc(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function kn(t){return typeof t=="string"&&(t=nc(t)),Zt(t),t}let Fr=class{clone(){return this._cloneInto()}};function rs(t){const e=r=>t().update(kn(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}var rc=(t=>(t.TOO_SHORT="too_short",t.INVALID_LENGTH="invalid_length",t.INVALID_HEX_CHARS="invalid_hex_chars",t))(rc||{}),Y=class Ot{constructor(e){this.data=e}toUint8Array(){return this.data}toStringWithoutPrefix(){return cr(this.data)}toString(){return`0x${this.toStringWithoutPrefix()}`}static fromHexString(e){let n=e;if(n.startsWith("0x")&&(n=n.slice(2)),n.length===0)throw new Ue("Hex string is too short, must be at least 1 char long, excluding the optional leading 0x.","too_short");if(n.length%2!==0)throw new Ue("Hex string must be an even number of hex characters.","invalid_length");try{return new Ot(ns(n))}catch(r){throw new Ue(`Hex string contains invalid hex characters: ${r==null?void 0:r.message}`,"invalid_hex_chars")}}static fromHexInput(e){return e instanceof Uint8Array?new Ot(e):Ot.fromHexString(e)}static isValid(e){try{return Ot.fromHexString(e),{valid:!0}}catch(n){return{valid:!1,invalidReason:n==null?void 0:n.invalidReason,invalidReasonMessage:n==null?void 0:n.message}}}equals(e){return this.data.length!==e.data.length?!1:this.data.every((n,r)=>n===e.data[r])}},is=255,ss=65535,$n=4294967295,In=18446744073709551615n,Dr=340282366920938463463374607431768211455n,os=115792089237316195423570985008687907853269984665640564039457584007913129639935n,ic=Object.defineProperty,sc=Object.getOwnPropertyDescriptor,Ae=(t,e,n,r)=>{for(var i=r>1?void 0:r?sc(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&ic(e,n,i),i},L=class{bcsToBytes(){let e=new Ne;return this.serialize(e),e.toUint8Array()}bcsToHex(){let e=this.bcsToBytes();return Y.fromHexInput(e)}},Ne=class{constructor(e=64){if(e<=0)throw new Error("Length needs to be greater than 0");this.buffer=new ArrayBuffer(e),this.offset=0}ensureBufferWillHandleSize(e){for(;this.buffer.byteLength<this.offset+e;){let n=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(n).set(new Uint8Array(this.buffer)),this.buffer=n}}appendToBuffer(e){this.ensureBufferWillHandleSize(e.length),new Uint8Array(this.buffer,this.offset).set(e),this.offset+=e.length}serializeWithFunction(e,n,r){this.ensureBufferWillHandleSize(n);let i=new DataView(this.buffer,this.offset);e.apply(i,[0,r,!0]),this.offset+=n}serializeStr(e){let n=new TextEncoder;this.serializeBytes(n.encode(e))}serializeBytes(e){this.serializeU32AsUleb128(e.length),this.appendToBuffer(e)}serializeFixedBytes(e){this.appendToBuffer(e)}serializeBool(e){as(e);let n=e?1:0;this.appendToBuffer(new Uint8Array([n]))}serializeU8(e){this.appendToBuffer(new Uint8Array([e]))}serializeU16(e){this.serializeWithFunction(DataView.prototype.setUint16,2,e)}serializeU32(e){this.serializeWithFunction(DataView.prototype.setUint32,4,e)}serializeU64(e){let n=BigInt(e)&BigInt($n),r=BigInt(e)>>BigInt(32);this.serializeU32(Number(n)),this.serializeU32(Number(r))}serializeU128(e){let n=BigInt(e)&In,r=BigInt(e)>>BigInt(64);this.serializeU64(n),this.serializeU64(r)}serializeU256(e){let n=BigInt(e)&Dr,r=BigInt(e)>>BigInt(128);this.serializeU128(n),this.serializeU128(r)}serializeU32AsUleb128(e){let n=e,r=[];for(;n>>>7;)r.push(n&127|128),n>>>=7;r.push(n),this.appendToBuffer(new Uint8Array(r))}toUint8Array(){return new Uint8Array(this.buffer).slice(0,this.offset)}serialize(e){e.serialize(this)}serializeVector(e){this.serializeU32AsUleb128(e.length),e.forEach(n=>{n.serialize(this)})}};Ae([at(0,is)],Ne.prototype,"serializeU8",1),Ae([at(0,ss)],Ne.prototype,"serializeU16",1),Ae([at(0,$n)],Ne.prototype,"serializeU32",1),Ae([at(BigInt(0),In)],Ne.prototype,"serializeU64",1),Ae([at(BigInt(0),Dr)],Ne.prototype,"serializeU128",1),Ae([at(BigInt(0),os)],Ne.prototype,"serializeU256",1),Ae([at(0,$n)],Ne.prototype,"serializeU32AsUleb128",1);function as(t){if(typeof t!="boolean")throw new Error(`${t} is not a boolean value`)}var oc=(t,e,n)=>`${t} is out of range: [${e}, ${n}]`;function mt(t,e,n){let r=BigInt(t);if(r>BigInt(n)||r<BigInt(e))throw new Error(oc(t,e,n))}function at(t,e){return(n,r,i)=>{let s=i.value;return i.value=function(o){return mt(o,t,e),s.apply(this,[o])},i}}var ac=(t=>(t.INCORRECT_NUMBER_OF_BYTES="incorrect_number_of_bytes",t.INVALID_HEX_CHARS="invalid_hex_chars",t.TOO_SHORT="too_short",t.TOO_LONG="too_long",t.LEADING_ZERO_X_REQUIRED="leading_zero_x_required",t.LONG_FORM_REQUIRED_UNLESS_SPECIAL="long_form_required_unless_special",t.INVALID_PADDING_ZEROES="INVALID_PADDING_ZEROES",t))(ac||{}),ue=class te extends L{constructor(e){if(super(),e.length!==te.LENGTH)throw new Ue("AccountAddress data should be exactly 32 bytes long","incorrect_number_of_bytes");this.data=e}isSpecial(){return this.data.slice(0,this.data.length-1).every(e=>e===0)&&this.data[this.data.length-1]<16}toString(){return`0x${this.toStringWithoutPrefix()}`}toStringWithoutPrefix(){let e=cr(this.data);return this.isSpecial()&&(e=e[e.length-1]),e}toStringLong(){return`0x${this.toStringLongWithoutPrefix()}`}toStringLongWithoutPrefix(){return cr(this.data)}toUint8Array(){return this.data}serialize(e){e.serializeFixedBytes(this.data)}serializeForEntryFunction(e){let n=this.bcsToBytes();e.serializeBytes(n)}serializeForScriptFunction(e){e.serializeU32AsUleb128(3),e.serialize(this)}static deserialize(e){let n=e.deserializeFixedBytes(te.LENGTH);return new te(n)}static fromStringStrict(e){if(!e.startsWith("0x"))throw new Ue("Hex string must start with a leading 0x.","leading_zero_x_required");let n=te.fromString(e);if(e.length!==te.LONG_STRING_LENGTH+2)if(n.isSpecial()){if(e.length!==3)throw new Ue(`The given hex string ${e} is a special address not in LONG form, it must be 0x0 to 0xf without padding zeroes.`,"INVALID_PADDING_ZEROES")}else throw new Ue(`The given hex string ${e} is not a special address, it must be represented as 0x + 64 chars.`,"long_form_required_unless_special");return n}static fromString(e){let n=e;if(e.startsWith("0x")&&(n=e.slice(2)),n.length===0)throw new Ue("Hex string is too short, must be 1 to 64 chars long, excluding the leading 0x.","too_short");if(n.length>64)throw new Ue("Hex string is too long, must be 1 to 64 chars long, excluding the leading 0x.","too_long");let r;try{r=ns(n.padStart(64,"0"))}catch(i){throw new Ue(`Hex characters are invalid: ${i==null?void 0:i.message}`,"invalid_hex_chars")}return new te(r)}static from(e){return e instanceof te?e:e instanceof Uint8Array?new te(e):te.fromString(e)}static fromStrict(e){return e instanceof te?e:e instanceof Uint8Array?new te(e):te.fromStringStrict(e)}static isValid(e){try{return e.strict?te.fromStrict(e.input):te.from(e.input),{valid:!0}}catch(n){return{valid:!1,invalidReason:n==null?void 0:n.invalidReason,invalidReasonMessage:n==null?void 0:n.message}}}equals(e){return this.data.length!==e.data.length?!1:this.data.every((n,r)=>n===e.data[r])}};ue.LENGTH=32,ue.LONG_STRING_LENGTH=64,ue.ZERO=ue.from("0x0"),ue.ONE=ue.from("0x1"),ue.TWO=ue.from("0x2"),ue.THREE=ue.from("0x3"),ue.FOUR=ue.from("0x4");var w=ue,cc=`
    fragment TokenActivitiesFields on token_activities_v2 {
  after_value
  before_value
  entry_function_id_str
  event_account_address
  event_index
  from_address
  is_fungible_v2
  property_version_v1
  to_address
  token_amount
  token_data_id
  token_standard
  transaction_timestamp
  transaction_version
  type
}
    `,uc=`
    fragment AnsTokenFragment on current_aptos_names {
  domain
  expiration_timestamp
  registered_address
  subdomain
  token_standard
  is_primary
  owner_address
}
    `,Mr=`
    fragment CurrentTokenOwnershipFields on current_token_ownerships_v2 {
  token_standard
  token_properties_mutated_v1
  token_data_id
  table_type_v1
  storage_id
  property_version_v1
  owner_address
  last_transaction_version
  last_transaction_timestamp
  is_soulbound_v2
  is_fungible_v2
  amount
  current_token_data {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    decimals
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `,lc=`
    query getAccountCoinsCount($address: String) {
  current_fungible_asset_balances_aggregate(
    where: {owner_address: {_eq: $address}}
  ) {
    aggregate {
      count
    }
  }
}
    `,dc=`
    query getAccountCoinsData($where_condition: current_fungible_asset_balances_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_fungible_asset_balances_order_by!]) {
  current_fungible_asset_balances(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    amount
    asset_type
    is_frozen
    is_primary
    last_transaction_timestamp
    last_transaction_version
    owner_address
    storage_id
    token_standard
    metadata {
      token_standard
      symbol
      supply_aggregator_table_key_v1
      supply_aggregator_table_handle_v1
      project_uri
      name
      last_transaction_version
      last_transaction_timestamp
      icon_uri
      decimals
      creator_address
      asset_type
    }
  }
}
    `,fc=`
    query getAccountCollectionsWithOwnedTokens($where_condition: current_collection_ownership_v2_view_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_collection_ownership_v2_view_order_by!]) {
  current_collection_ownership_v2_view(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      mutable_description
      max_supply
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
    collection_id
    collection_name
    collection_uri
    creator_address
    distinct_tokens
    last_transaction_version
    owner_address
    single_token_uri
  }
}
    `,hc=`
    query getAccountOwnedObjects($where_condition: current_objects_bool_exp, $offset: Int, $limit: Int, $order_by: [current_objects_order_by!]) {
  current_objects(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    allow_ungated_transfer
    state_key_hash
    owner_address
    object_address
    last_transaction_version
    last_guid_creation_num
    is_deleted
  }
}
    `,gc=`
    query getAccountOwnedTokens($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${Mr}`,pc=`
    query getAccountOwnedTokensFromCollection($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${Mr}`,yc=`
    query getAccountTokensCount($where_condition: current_token_ownerships_v2_bool_exp, $offset: Int, $limit: Int) {
  current_token_ownerships_v2_aggregate(
    where: $where_condition
    offset: $offset
    limit: $limit
  ) {
    aggregate {
      count
    }
  }
}
    `,wc=`
    query getAccountTransactionsCount($address: String) {
  account_transactions_aggregate(where: {account_address: {_eq: $address}}) {
    aggregate {
      count
    }
  }
}
    `,mc=`
    query getChainTopUserTransactions($limit: Int) {
  user_transactions(limit: $limit, order_by: {version: desc}) {
    version
  }
}
    `,cs=`
    query getCollectionData($where_condition: current_collections_v2_bool_exp!) {
  current_collections_v2(where: $where_condition) {
    collection_id
    collection_name
    creator_address
    current_supply
    description
    last_transaction_timestamp
    last_transaction_version
    max_supply
    mutable_description
    mutable_uri
    table_handle_v1
    token_standard
    total_minted_v2
    uri
  }
}
    `,bc=`
    query getCurrentFungibleAssetBalances($where_condition: current_fungible_asset_balances_bool_exp, $offset: Int, $limit: Int) {
  current_fungible_asset_balances(
    where: $where_condition
    offset: $offset
    limit: $limit
  ) {
    amount
    asset_type
    is_frozen
    is_primary
    last_transaction_timestamp
    last_transaction_version
    owner_address
    storage_id
    token_standard
  }
}
    `,_c=`
    query getDelegatedStakingActivities($delegatorAddress: String, $poolAddress: String) {
  delegated_staking_activities(
    where: {delegator_address: {_eq: $delegatorAddress}, pool_address: {_eq: $poolAddress}}
  ) {
    amount
    delegator_address
    event_index
    event_type
    pool_address
    transaction_version
  }
}
    `,Ac=`
    query getEvents($where_condition: events_bool_exp, $offset: Int, $limit: Int, $order_by: [events_order_by!]) {
  events(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    account_address
    creation_number
    data
    event_index
    sequence_number
    transaction_block_height
    transaction_version
    type
    indexed_type
  }
}
    `,xc=`
    query getFungibleAssetActivities($where_condition: fungible_asset_activities_bool_exp, $offset: Int, $limit: Int) {
  fungible_asset_activities(
    where: $where_condition
    offset: $offset
    limit: $limit
  ) {
    amount
    asset_type
    block_height
    entry_function_id_str
    event_index
    gas_fee_payer_address
    is_frozen
    is_gas_fee
    is_transaction_success
    owner_address
    storage_id
    storage_refund_amount
    token_standard
    transaction_timestamp
    transaction_version
    type
  }
}
    `,vc=`
    query getFungibleAssetMetadata($where_condition: fungible_asset_metadata_bool_exp, $offset: Int, $limit: Int) {
  fungible_asset_metadata(where: $where_condition, offset: $offset, limit: $limit) {
    icon_uri
    project_uri
    supply_aggregator_table_handle_v1
    supply_aggregator_table_key_v1
    creator_address
    asset_type
    decimals
    last_transaction_timestamp
    last_transaction_version
    name
    symbol
    token_standard
  }
}
    `,Yt=`
    query getNames($offset: Int, $limit: Int, $where_condition: current_aptos_names_bool_exp, $order_by: [current_aptos_names_order_by!]) {
  current_aptos_names(
    limit: $limit
    where: $where_condition
    order_by: $order_by
    offset: $offset
  ) {
    ...AnsTokenFragment
  }
}
    ${uc}`,us=`
    query getNumberOfDelegators($where_condition: num_active_delegator_per_pool_bool_exp, $order_by: [num_active_delegator_per_pool_order_by!]) {
  num_active_delegator_per_pool(where: $where_condition, order_by: $order_by) {
    num_active_delegator
    pool_address
  }
}
    `,ls=`
    query getProcessorStatus($where_condition: processor_status_bool_exp) {
  processor_status(where: $where_condition) {
    last_success_version
    processor
    last_updated
  }
}
    `,$c=`
    query getTokenActivity($where_condition: token_activities_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [token_activities_v2_order_by!]) {
  token_activities_v2(
    where: $where_condition
    order_by: $order_by
    offset: $offset
    limit: $limit
  ) {
    ...TokenActivitiesFields
  }
}
    ${cc}`,ds=`
    query getCurrentTokenOwnership($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${Mr}`,Ec=`
    query getTokenData($where_condition: current_token_datas_v2_bool_exp, $offset: Int, $limit: Int, $order_by: [current_token_datas_v2_order_by!]) {
  current_token_datas_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    decimals
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `,Rt=class extends Error{constructor(e,n,r){super(r),this.name="AptosApiError",this.url=n.url,this.status=n.status,this.statusText=n.statusText,this.data=n.data,this.request=e}},Sc="1.12.1",bi={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable"};async function Uc(t,e){let{url:n,method:r,body:i,contentType:s,params:o,overrides:a}=t,c={...a==null?void 0:a.HEADERS,"x-aptos-client":`aptos-typescript-sdk/${Sc}`,"content-type":s??"application/json"};return a!=null&&a.AUTH_TOKEN&&(c.Authorization=`Bearer ${a==null?void 0:a.AUTH_TOKEN}`),a!=null&&a.API_KEY&&(c.Authorization=`Bearer ${a==null?void 0:a.API_KEY}`),e.provider({url:n,method:r,body:i,params:o,headers:c,overrides:a})}async function fs(t,e,n){let{url:r,path:i}=t,s=i?`${r}/${i}`:r,o=await Uc({...t,url:s},e.client),a={status:o.status,statusText:o.statusText,data:o.data,headers:o.headers,config:o.config,request:o.request,url:s};if(a.status===401)throw new Rt(t,a,`Error: ${a.data}`);if(n==="Indexer"){let u=a.data;if(u.errors)throw new Rt(t,a,`Indexer error: ${u.errors[0].message}`??`Indexer unhandled Error ${o.status} : ${o.statusText}`);a.data=u.data}if(a.status>=200&&a.status<300)return a;let c;throw a&&a.data&&"message"in a.data&&"error_code"in a.data?c=JSON.stringify(a.data):a.status in bi?c=bi[a.status]:c=`Unhandled Error ${a.status} : ${a.statusText}`,new Rt(t,a,`${n} error: ${c}`)}async function Rr(t){let{type:e,originMethod:n,path:r,body:i,acceptType:s,contentType:o,params:a,aptosConfig:c,overrides:u}=t,d=c.getRequestUrl(e);return fs({url:d,method:"POST",originMethod:n,path:r,body:i,contentType:o,acceptType:s,params:a,overrides:u},c,t.type)}async function Ln(t){var n,r;let{aptosConfig:e}=t;return Rr({...t,type:"Fullnode",overrides:{...e.clientConfig,...e.fullnodeConfig,...t.overrides,HEADERS:{...(n=e.clientConfig)==null?void 0:n.HEADERS,...(r=e.fullnodeConfig)==null?void 0:r.HEADERS}}})}async function Cc(t){var n,r;let{aptosConfig:e}=t;return Rr({...t,type:"Indexer",overrides:{...e.clientConfig,...e.indexerConfig,...t.overrides,HEADERS:{...(n=e.clientConfig)==null?void 0:n.HEADERS,...(r=e.indexerConfig)==null?void 0:r.HEADERS}}})}async function Tc(t){var r,i,s;let{aptosConfig:e}=t,n={...e,clientConfig:{...e.clientConfig}};return(r=n==null?void 0:n.clientConfig)==null||delete r.API_KEY,Rr({...t,type:"Faucet",overrides:{...n.clientConfig,...n.faucetConfig,...t.overrides,HEADERS:{...(i=n.clientConfig)==null?void 0:i.HEADERS,...(s=n.faucetConfig)==null?void 0:s.HEADERS}}})}async function hs(t){let{aptosConfig:e,overrides:n,params:r,contentType:i,acceptType:s,path:o,originMethod:a,type:c}=t,u=e.getRequestUrl(c);return fs({url:u,method:"GET",originMethod:a,path:o,contentType:i,acceptType:s,params:r,overrides:{...e.clientConfig,...n}},e,t.type)}async function De(t){var n,r;let{aptosConfig:e}=t;return hs({...t,type:"Fullnode",overrides:{...e.clientConfig,...e.fullnodeConfig,...t.overrides,HEADERS:{...(n=e.clientConfig)==null?void 0:n.HEADERS,...(r=e.fullnodeConfig)==null?void 0:r.HEADERS}}})}async function Hn(t){let e=[],n,r=t.params;do{let i=await hs({type:"Fullnode",aptosConfig:t.aptosConfig,originMethod:t.originMethod,path:t.path,params:r,overrides:t.overrides});n=i.headers["x-aptos-cursor"],delete i.headers,e.push(...i.data),r.start=n}while(n!=null);return e}async function gs(t){let{aptosConfig:e}=t,{data:n}=await De({aptosConfig:e,originMethod:"getLedgerInfo",path:""});return n}async function zc(t){let{aptosConfig:e,ledgerVersion:n,options:r}=t,{data:i}=await De({aptosConfig:e,originMethod:"getBlockByVersion",path:`blocks/by_version/${n}`,params:{with_transactions:r==null?void 0:r.withTransactions}});return i}async function Bc(t){let{aptosConfig:e,blockHeight:n,options:r}=t,{data:i}=await De({aptosConfig:e,originMethod:"getBlockByHeight",path:`blocks/by_height/${n}`,params:{with_transactions:r==null?void 0:r.withTransactions}});return i}async function ps(t){let{aptosConfig:e,handle:n,data:r,options:i}=t;return(await Ln({aptosConfig:e,originMethod:"getTableItem",path:`tables/${n}/item`,params:{ledger_version:i==null?void 0:i.ledgerVersion},body:r})).data}async function kc(t){let{aptosConfig:e,limit:n}=t;return(await N({aptosConfig:e,query:{query:mc,variables:{limit:n}},originMethod:"getChainTopUserTransactions"})).user_transactions}async function N(t){let{aptosConfig:e,query:n,originMethod:r}=t,{data:i}=await Cc({aptosConfig:e,originMethod:r??"queryIndexer",path:"",body:n,overrides:{WITH_CREDENTIALS:!1}});return i}async function Ic(t){let{aptosConfig:e}=t;return(await N({aptosConfig:e,query:{query:ls},originMethod:"getProcessorStatuses"})).processor_status}async function ys(t){let e=await Ic({aptosConfig:t.aptosConfig});return BigInt(e[0].last_success_version)}async function ws(t){let{aptosConfig:e,processorType:n}=t;return(await N({aptosConfig:e,query:{query:ls,variables:{where_condition:{processor:{_eq:n}}}},originMethod:"getProcessorStatus"})).processor_status[0]}var _i=300,Lc=t=>{if(t&&t.length>_i)throw new Error(`Event type length exceeds the maximum length of ${_i}`)};async function Hc(t){let{aptosConfig:e,eventType:n,options:r}=t,i={where:{account_address:{_eq:"0x0000000000000000000000000000000000000000000000000000000000000000"},creation_number:{_eq:"0"},sequence_number:{_eq:"0"},indexed_type:{_eq:n}},pagination:r,orderBy:r==null?void 0:r.orderBy};return Nn({aptosConfig:e,options:i})}async function Nc(t){let{accountAddress:e,aptosConfig:n,creationNumber:r,options:i}=t,s={where:{account_address:{_eq:w.from(e).toStringLong()},creation_number:{_eq:r}},pagination:i,orderBy:i==null?void 0:i.orderBy};return Nn({aptosConfig:n,options:s})}async function Pc(t){let{accountAddress:e,aptosConfig:n,eventType:r,options:i}=t,s={where:{account_address:{_eq:w.from(e).toStringLong()},indexed_type:{_eq:r}},pagination:i,orderBy:i==null?void 0:i.orderBy};return Nn({aptosConfig:n,options:s})}async function Nn(t){var i,s;let{aptosConfig:e,options:n}=t;Lc((s=(i=n==null?void 0:n.where)==null?void 0:i.indexed_type)==null?void 0:s._eq);let r={query:Ac,variables:{where_condition:n==null?void 0:n.where,offset:n==null?void 0:n.offset,limit:n==null?void 0:n.limit,order_by:n==null?void 0:n.orderBy}};return(await N({aptosConfig:e,query:r,originMethod:"getEvents"})).events}var jn=new Map;function Vr(t,e,n){return async(...r)=>{if(jn.has(e)){let{value:s,timestamp:o}=jn.get(e);if(n===void 0||Date.now()-o<=n)return s}let i=await t(...r);return jn.set(e,{value:i,timestamp:Date.now()}),i}}async function vt(t){return new Promise(e=>{setTimeout(e,t)})}var qc=(t=>(t.FULLNODE="Fullnode",t.INDEXER="Indexer",t.FAUCET="Faucet",t))(qc||{}),ms="0x1::aptos_coin::AptosCoin",Kc="APTOS::RawTransaction",Ai="APTOS::RawTransactionWithData",Oc=(t=>(t.ACCOUNT_TRANSACTION_PROCESSOR="account_transactions_processor",t.DEFAULT="default_processor",t.EVENTS_PROCESSOR="events_processor",t.FUNGIBLE_ASSET_PROCESSOR="fungible_asset_processor",t.STAKE_PROCESSOR="stake_processor",t.TOKEN_V2_PROCESSOR="token_v2_processor",t.USER_TRANSACTION_PROCESSOR="user_transaction_processor",t))(Oc||{});async function Fc(t){let{aptosConfig:e,options:n}=t;return Hn({aptosConfig:e,originMethod:"getTransactions",path:"transactions",params:{start:n==null?void 0:n.offset,limit:n==null?void 0:n.limit}})}async function bs(t){let{aptosConfig:e}=t;return Vr(async()=>{let{data:n}=await De({aptosConfig:e,originMethod:"getGasPriceEstimation",path:"estimate_gas_price"});return n},`gas-price-${e.network}`,1e3*60*5)()}async function Dc(t){let{aptosConfig:e,ledgerVersion:n}=t,{data:r}=await De({aptosConfig:e,originMethod:"getTransactionByVersion",path:`transactions/by_version/${n}`});return r}async function Gr(t){let{aptosConfig:e,transactionHash:n}=t,{data:r}=await De({aptosConfig:e,path:`transactions/by_hash/${n}`,originMethod:"getTransactionByHash"});return r}async function Mc(t){let{aptosConfig:e,transactionHash:n}=t;try{return(await Gr({aptosConfig:e,transactionHash:n})).type==="pending_transaction"}catch(r){if((r==null?void 0:r.status)===404)return!0;throw r}}async function jr(t){let{aptosConfig:e,transactionHash:n,options:r}=t,i=(r==null?void 0:r.timeoutSecs)??20,s=(r==null?void 0:r.checkSuccess)??!0,o=!0,a=0,c,u,d=200,l=1.5;for(;o&&!(a>=i);){try{if(c=await Gr({aptosConfig:e,transactionHash:n}),o=c.type==="pending_transaction",!o)break}catch(h){if(!(h instanceof Rt)||(u=h,h.status!==404&&h.status>=400&&h.status<500))throw h}await vt(d),a+=d/1e3,d*=l}if(c===void 0)throw u||new xi(`Fetching transaction ${n} failed and timed out after ${i} seconds`,c);if(c.type==="pending_transaction")throw new xi(`Transaction ${n} timed out in pending state after ${i} seconds`,c);if(!s)return c;if(!c.success)throw new Rc(`Transaction ${n} failed with an error: ${c.vm_status}`,c);return c}async function _s(t){let{aptosConfig:e,processorType:n}=t,r=BigInt(t.minimumLedgerVersion),i=3e3,s=new Date().getTime(),o=BigInt(-1);for(;o<r;){if(new Date().getTime()-s>i)throw new Error("waitForLastSuccessIndexerVersionSync timeout");if(n===void 0?o=await ys({aptosConfig:e}):o=(await ws({aptosConfig:e,processorType:n})).last_success_version,o>=r)break;await vt(200)}}var xi=class extends Error{constructor(e,n){super(e),this.lastSubmittedTransaction=n}},Rc=class extends Error{constructor(e,n){super(e),this.transaction=n}};async function K(t){t.minimumLedgerVersion!==void 0&&await _s({aptosConfig:t.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:t.processorType})}var As=class{constructor(e){this.config=e}async getModuleEventsByEventType(e){return await K({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"events_processor"}),Hc({aptosConfig:this.config,...e})}async getAccountEventsByCreationNumber(e){return await K({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"events_processor"}),Nc({aptosConfig:this.config,...e})}async getAccountEventsByEventType(e){return await K({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"events_processor"}),Pc({aptosConfig:this.config,...e})}async getEvents(e){return await K({config:this.config,minimumLedgerVersion:e==null?void 0:e.minimumLedgerVersion,processorType:"events_processor"}),Nn({aptosConfig:this.config,...e})}};async function Vc(t){let{aptosConfig:e,accountAddress:n,amount:r,options:i}=t,s=(i==null?void 0:i.timeoutSecs)||20,{data:o}=await Tc({aptosConfig:e,path:"fund",body:{address:w.from(n).toString(),amount:r},originMethod:"fundAccount"}),a=o.txn_hashes[0],c=await jr({aptosConfig:e,transactionHash:a,options:{timeoutSecs:s,checkSuccess:i==null?void 0:i.checkSuccess}});if(c.type==="user_transaction")return c;throw new Error(`Unexpected transaction received for fund account: ${c.type}`)}var xs=class{constructor(e){this.config=e}async fundAccount(e){var r;let n=await Vc({aptosConfig:this.config,...e});return((r=e.options)==null?void 0:r.waitForIndexer)!==!1&&await _s({aptosConfig:this.config,minimumLedgerVersion:BigInt(n.version)}),n}},ur=class vs extends L{constructor(e){super(),this.value=Y.fromHexInput(e).toUint8Array()}serialize(e){e.serializeFixedBytes(this.value)}serializeForEntryFunction(e){e.serialize(this)}serializeForScriptFunction(e){e.serialize(this)}static deserialize(e,n){let r=e.deserializeFixedBytes(n);return new vs(r)}},se=class $s extends L{constructor(e){super(),as(e),this.value=e}serialize(e){e.serializeBool(this.value)}serializeForEntryFunction(e){let n=this.bcsToBytes();e.serializeBytes(n)}serializeForScriptFunction(e){e.serializeU32AsUleb128(5),e.serialize(this)}static deserialize(e){return new $s(e.deserializeBool())}},Oe=class Es extends L{constructor(e){super(),mt(e,0,is),this.value=e}serialize(e){e.serializeU8(this.value)}serializeForEntryFunction(e){let n=this.bcsToBytes();e.serializeBytes(n)}serializeForScriptFunction(e){e.serializeU32AsUleb128(0),e.serialize(this)}static deserialize(e){return new Es(e.deserializeU8())}},Xt=class Ss extends L{constructor(e){super(),mt(e,0,ss),this.value=e}serialize(e){e.serializeU16(this.value)}serializeForEntryFunction(e){let n=this.bcsToBytes();e.serializeBytes(n)}serializeForScriptFunction(e){e.serializeU32AsUleb128(6),e.serialize(this)}static deserialize(e){return new Ss(e.deserializeU16())}},Qt=class Us extends L{constructor(e){super(),mt(e,0,$n),this.value=e}serialize(e){e.serializeU32(this.value)}serializeForEntryFunction(e){let n=this.bcsToBytes();e.serializeBytes(n)}serializeForScriptFunction(e){e.serializeU32AsUleb128(7),e.serialize(this)}static deserialize(e){return new Us(e.deserializeU32())}},qe=class Cs extends L{constructor(e){super(),mt(e,BigInt(0),In),this.value=BigInt(e)}serialize(e){e.serializeU64(this.value)}serializeForEntryFunction(e){let n=this.bcsToBytes();e.serializeBytes(n)}serializeForScriptFunction(e){e.serializeU32AsUleb128(1),e.serialize(this)}static deserialize(e){return new Cs(e.deserializeU64())}},Jt=class Ts extends L{constructor(e){super(),mt(e,BigInt(0),Dr),this.value=BigInt(e)}serialize(e){e.serializeU128(this.value)}serializeForEntryFunction(e){let n=this.bcsToBytes();e.serializeBytes(n)}serializeForScriptFunction(e){e.serializeU32AsUleb128(2),e.serialize(this)}static deserialize(e){return new Ts(e.deserializeU128())}},en=class zs extends L{constructor(e){super(),mt(e,BigInt(0),os),this.value=BigInt(e)}serialize(e){e.serializeU256(this.value)}serializeForEntryFunction(e){let n=this.bcsToBytes();e.serializeBytes(n)}serializeForScriptFunction(e){e.serializeU32AsUleb128(8),e.serialize(this)}static deserialize(e){return new zs(e.deserializeU256())}},D=class $e extends L{constructor(e){super(),this.values=e}serializeForEntryFunction(e){let n=this.bcsToBytes();e.serializeBytes(n)}serializeForScriptFunction(e){if(!(this.values[0]instanceof Oe)&&this.values[0]!==void 0)throw new Error("Script function arguments only accept u8 vectors");e.serializeU32AsUleb128(4),e.serialize(this)}static U8(e){let n;if(Array.isArray(e)&&typeof e[0]=="number")n=e;else if(typeof e=="string"){let r=Y.fromHexInput(e);n=Array.from(r.toUint8Array())}else if(e instanceof Uint8Array)n=Array.from(e);else throw new Error("Invalid input type");return new $e(n.map(r=>new Oe(r)))}static U16(e){return new $e(e.map(n=>new Xt(n)))}static U32(e){return new $e(e.map(n=>new Qt(n)))}static U64(e){return new $e(e.map(n=>new qe(n)))}static U128(e){return new $e(e.map(n=>new Jt(n)))}static U256(e){return new $e(e.map(n=>new en(n)))}static Bool(e){return new $e(e.map(n=>new se(n)))}static MoveString(e){return new $e(e.map(n=>new R(n)))}serialize(e){e.serializeVector(this.values)}static deserialize(e,n){let r=e.deserializeUleb128AsU32(),i=new Array;for(let s=0;s<r;s+=1)i.push(n.deserialize(e));return new $e(i)}},R=class Bs extends L{constructor(e){super(),this.value=e}serialize(e){e.serializeStr(this.value)}serializeForEntryFunction(e){let n=this.bcsToBytes();e.serializeBytes(n)}serializeForScriptFunction(e){let n=this.bcsToBytes().slice(1);D.U8(n).serializeForScriptFunction(e)}static deserialize(e){return new Bs(e.deserializeStr())}},En=class Ee extends L{constructor(e){super(),typeof e<"u"&&e!==null?this.vec=new D([e]):this.vec=new D([]),[this.value]=this.vec.values}serializeForEntryFunction(e){let n=this.bcsToBytes();e.serializeBytes(n)}unwrap(){if(this.isSome())return this.vec.values[0];throw new Error("Called unwrap on a MoveOption with no value")}isSome(){return this.vec.values.length===1}serialize(e){this.vec.serialize(e)}static U8(e){return new Ee(e!=null?new Oe(e):void 0)}static U16(e){return new Ee(e!=null?new Xt(e):void 0)}static U32(e){return new Ee(e!=null?new Qt(e):void 0)}static U64(e){return new Ee(e!=null?new qe(e):void 0)}static U128(e){return new Ee(e!=null?new Jt(e):void 0)}static U256(e){return new Ee(e!=null?new en(e):void 0)}static Bool(e){return new Ee(e!=null?new se(e):void 0)}static MoveString(e){return new Ee(e!=null?new R(e):void 0)}static deserialize(e,n){let r=D.deserialize(e,n);return new Ee(r.values[0])}};function Gc(t){return typeof t=="boolean"}function Ft(t){return typeof t=="string"}function Wn(t){return typeof t=="number"}function Zn(t){return typeof t=="number"||typeof t=="bigint"||typeof t=="string"}function jc(t){return t==null}function Wc(t){return ks(t)||Ls(t)||Hs(t)||Ns(t)||Ps(t)||qs(t)||Ks(t)||lr(t)||Is(t)||Zc(t)||t instanceof D||t instanceof En}function ks(t){return t instanceof se}function lr(t){return t instanceof w}function Is(t){return t instanceof R}function Zc(t){return t instanceof ur}function Ls(t){return t instanceof Oe}function Hs(t){return t instanceof Xt}function Ns(t){return t instanceof Qt}function Ps(t){return t instanceof qe}function qs(t){return t instanceof Jt}function Ks(t){return t instanceof en}function Yc(t){return"bytecode"in t}function G(t,e){throw new Error(`Type mismatch for argument ${e}, expected '${t}'`)}function Xc(t){let e=t.params.findIndex(n=>n!=="signer"&&n!=="&signer");return e<0?t.params.length:e}function Pn(t){let e=t.split("::");if(e.length!==3)throw new Error(`Invalid function ${t}`);let n=e[0],r=e[1],i=e[2];return{moduleAddress:n,moduleName:r,functionName:i}}var pe=class Os extends L{constructor(e){super(),this.identifier=e}serialize(e){e.serializeStr(this.identifier)}static deserialize(e){let n=e.deserializeStr();return new Os(n)}},J=class extends L{static deserialize(e){let n=e.deserializeUleb128AsU32();switch(n){case 0:return he.load(e);case 1:return St.load(e);case 2:return rt.load(e);case 3:return hr.load(e);case 4:return pt.load(e);case 5:return Sn.load(e);case 6:return Z.load(e);case 7:return C.load(e);case 8:return dr.load(e);case 9:return fr.load(e);case 10:return gr.load(e);case 255:return ee.load(e);default:throw new Error(`Unknown variant index for TypeTag: ${n}`)}}isBool(){return this instanceof he}isAddress(){return this instanceof pt}isGeneric(){return this instanceof ee}isSigner(){return this instanceof Sn}isVector(){return this instanceof Z}isStruct(){return this instanceof C}isU8(){return this instanceof St}isU16(){return this instanceof dr}isU32(){return this instanceof fr}isU64(){return this instanceof rt}isU128(){return this instanceof hr}isU256(){return this instanceof gr}},he=class Fs extends J{toString(){return"bool"}serialize(e){e.serializeU32AsUleb128(0)}static load(e){return new Fs}},St=class Ds extends J{toString(){return"u8"}serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new Ds}},dr=class Ms extends J{toString(){return"u16"}serialize(e){e.serializeU32AsUleb128(8)}static load(e){return new Ms}},fr=class Rs extends J{toString(){return"u32"}serialize(e){e.serializeU32AsUleb128(9)}static load(e){return new Rs}},rt=class Vs extends J{toString(){return"u64"}serialize(e){e.serializeU32AsUleb128(2)}static load(e){return new Vs}},hr=class Gs extends J{toString(){return"u128"}serialize(e){e.serializeU32AsUleb128(3)}static load(e){return new Gs}},gr=class js extends J{toString(){return"u256"}serialize(e){e.serializeU32AsUleb128(10)}static load(e){return new js}},pt=class Ws extends J{toString(){return"address"}serialize(e){e.serializeU32AsUleb128(4)}static load(e){return new Ws}},Sn=class Zs extends J{toString(){return"signer"}serialize(e){e.serializeU32AsUleb128(5)}static load(e){return new Zs}},Qc=class Ys extends J{constructor(e){super(),this.value=e}toString(){return`&${this.value.toString()}`}serialize(e){e.serializeU32AsUleb128(254)}static load(e){let n=J.deserialize(e);return new Ys(n)}},ee=class Xs extends J{constructor(e){if(super(),this.value=e,e<0)throw new Error("Generic type parameter index cannot be negative")}toString(){return`T${this.value}`}serialize(e){e.serializeU32AsUleb128(255),e.serializeU32(this.value)}static load(e){let n=e.deserializeU32();return new Xs(n)}},Z=class pr extends J{constructor(e){super(),this.value=e}toString(){return`vector<${this.value.toString()}>`}static u8(){return new pr(new St)}serialize(e){e.serializeU32AsUleb128(6),this.value.serialize(e)}static load(e){let n=J.deserialize(e);return new pr(n)}},C=class Qs extends J{constructor(e){super(),this.value=e}toString(){let e="";return this.value.typeArgs.length>0&&(e=`<${this.value.typeArgs.map(n=>n.toString()).join(", ")}>`),`${this.value.address.toString()}::${this.value.moduleName.identifier}::${this.value.name.identifier}${e}`}serialize(e){e.serializeU32AsUleb128(7),this.value.serialize(e)}static load(e){let n=qn.deserialize(e);return new Qs(n)}isTypeTag(e,n,r){return this.value.moduleName.identifier===n&&this.value.name.identifier===r&&this.value.address.equals(e)}isString(){return this.isTypeTag(w.ONE,"string","String")}isOption(){return this.isTypeTag(w.ONE,"option","Option")}isObject(){return this.isTypeTag(w.ONE,"object","Object")}},qn=class Js extends L{constructor(e,n,r,i){super(),this.address=e,this.moduleName=n,this.name=r,this.typeArgs=i}serialize(e){e.serialize(this.address),e.serialize(this.moduleName),e.serialize(this.name),e.serializeVector(this.typeArgs)}static deserialize(e){let n=w.deserialize(e),r=pe.deserialize(e),i=pe.deserialize(e),s=e.deserializeVector(J);return new Js(n,r,i,s)}};function F(){return new qn(w.ONE,new pe("string"),new pe("String"),[])}function ye(t){return new qn(w.ONE,new pe("object"),new pe("Object"),[t])}function vi(t){return!!t.match(/^[_a-zA-Z0-9]+$/)}function eo(t){return!!t.match(/\s/)}function Jc(t){return!!t.match(/^T[0-9]+$/)}function eu(t,e){let n=e;for(;n<t.length;n+=1){let r=t[n];if(!eo(r))break}return n}var tu=(t=>(t.InvalidTypeTag="unknown type",t.UnexpectedGenericType="unexpected generic type",t.UnexpectedTypeArgumentClose="unexpected '>'",t.UnexpectedWhitespaceCharacter="unexpected whitespace character",t.UnexpectedComma="unexpected ','",t.TypeArgumentCountMismatch="type argument count doesn't match expected amount",t.MissingTypeArgumentClose="no matching '>' for '<'",t.UnexpectedPrimitiveTypeArguments="primitive types not expected to have type arguments",t.UnexpectedVectorTypeArgumentCount="vector type expected to have exactly one type argument",t.UnexpectedStructFormat="unexpected struct format, must be of the form 0xaddress::module_name::struct_name",t.InvalidModuleNameCharacter="module name must only contain alphanumeric or '_' characters",t.InvalidStructNameCharacter="struct name must only contain alphanumeric or '_' characters",t))(tu||{}),V=class extends Error{constructor(e,n){super(`Failed to parse typeTag '${e}', ${n}`)}};function Ut(t,e){let n=(e==null?void 0:e.allowGenerics)??!1,r=[],i=[],s=[],o=0,a="",c=1;for(;o<t.length;){let u=t[o];if(u==="<")r.push({savedExpectedTypes:c,savedStr:a,savedTypes:s}),a="",s=[],c=1;else if(u===">"){if(a!==""){let m=an(a,i,n);s.push(m)}let d=r.pop();if(d===void 0)throw new V(t,"unexpected '>'");if(c!==s.length)throw new V(t,"type argument count doesn't match expected amount");let{savedStr:l,savedTypes:h,savedExpectedTypes:y}=d;i=s,s=h,a=l,c=y}else if(u===","){if(a.length!==0){let d=an(a,i,n);i=[],s.push(d),a="",c+=1}}else if(eo(u)){let d=!1;if(a.length!==0){let h=an(a,i,n);i=[],s.push(h),a="",d=!0}o=eu(t,o);let l=t[o];if(o<t.length&&d&&l!==","&&l!==">")throw new V(t,"unexpected whitespace character");continue}else a+=u;o+=1}if(r.length>0)throw new V(t,"no matching '>' for '<'");switch(s.length){case 0:return an(a,i,n);case 1:if(a==="")return s[0];throw new V(t,"unexpected ','");default:throw new V(t,"unexpected whitespace character")}}function an(t,e,n){switch(t){case"&signer":if(e.length>0)throw new V(t,"primitive types not expected to have type arguments");return new Qc(new Sn);case"signer":if(e.length>0)throw new V(t,"primitive types not expected to have type arguments");return new Sn;case"bool":if(e.length>0)throw new V(t,"primitive types not expected to have type arguments");return new he;case"address":if(e.length>0)throw new V(t,"primitive types not expected to have type arguments");return new pt;case"u8":if(e.length>0)throw new V(t,"primitive types not expected to have type arguments");return new St;case"u16":if(e.length>0)throw new V(t,"primitive types not expected to have type arguments");return new dr;case"u32":if(e.length>0)throw new V(t,"primitive types not expected to have type arguments");return new fr;case"u64":if(e.length>0)throw new V(t,"primitive types not expected to have type arguments");return new rt;case"u128":if(e.length>0)throw new V(t,"primitive types not expected to have type arguments");return new hr;case"u256":if(e.length>0)throw new V(t,"primitive types not expected to have type arguments");return new gr;case"vector":if(e.length!==1)throw new V(t,"vector type expected to have exactly one type argument");return new Z(e[0]);default:if(Jc(t)){if(n)return new ee(Number(t.split("T")[1]));throw new V(t,"unexpected generic type")}if(!t.match(/:/))throw new V(t,"unknown type");let r=t.split("::");if(r.length!==3)throw new V(t,"unexpected struct format, must be of the form 0xaddress::module_name::struct_name");if(!vi(r[1]))throw new V(t,"module name must only contain alphanumeric or '_' characters");if(!vi(r[2]))throw new V(t,"struct name must only contain alphanumeric or '_' characters");return new C(new qn(w.fromString(r[0]),new pe(r[1]),new pe(r[2]),e))}}var to=class extends L{toString(){let e=this.toUint8Array();return Y.fromHexInput(e).toString()}},Kn=class extends to{},tn=class extends L{toString(){let e=this.toUint8Array();return Y.fromHexInput(e).toString()}},On=t=>typeof t=="string"?Y.isValid(t).valid?t:Buffer.from(t,"utf8"):t;let no=class extends Fr{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Qa(e);const r=kn(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Et(this),this.iHash.update(e),this}digestInto(e){Et(this),Zt(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const ro=(t,e,n)=>new no(t,e).update(n).digest();ro.create=(t,e)=>new no(t,e);function nu(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}let ru=class extends Fr{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Gn(this.buffer)}update(e){Et(this);const{view:n,buffer:r,blockLen:i}=this;e=kn(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=Gn(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Et(this),ts(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let l=o;l<i;l++)n[l]=0;nu(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=Gn(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,d[l],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}};const cn=BigInt(2**32-1),yr=BigInt(32);function io(t,e=!1){return e?{h:Number(t&cn),l:Number(t>>yr&cn)}:{h:Number(t>>yr&cn)|0,l:Number(t&cn)|0}}function so(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=io(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const iu=(t,e)=>BigInt(t>>>0)<<yr|BigInt(e>>>0),su=(t,e,n)=>t>>>n,ou=(t,e,n)=>t<<32-n|e>>>n,au=(t,e,n)=>t>>>n|e<<32-n,cu=(t,e,n)=>t<<32-n|e>>>n,uu=(t,e,n)=>t<<64-n|e>>>n-32,lu=(t,e,n)=>t>>>n-32|e<<64-n,du=(t,e)=>e,fu=(t,e)=>t,oo=(t,e,n)=>t<<n|e>>>32-n,ao=(t,e,n)=>e<<n|t>>>32-n,co=(t,e,n)=>e<<n-32|t>>>64-n,uo=(t,e,n)=>t<<n-32|e>>>64-n;function hu(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const gu=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),pu=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,yu=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),wu=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,mu=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),bu=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,_u={fromBig:io,split:so,toBig:iu,shrSH:su,shrSL:ou,rotrSH:au,rotrSL:cu,rotrBH:uu,rotrBL:lu,rotr32H:du,rotr32L:fu,rotlSH:oo,rotlSL:ao,rotlBH:co,rotlBL:uo,add:hu,add3L:gu,add3H:pu,add4L:yu,add4H:wu,add5H:bu,add5L:mu},T=_u,[Au,xu]=(()=>T.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),je=new Uint32Array(80),We=new Uint32Array(80);let vu=class extends ru{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:u,El:d,Fh:l,Fl:h,Gh:y,Gl:m,Hh:f,Hl:p}=this;return[e,n,r,i,s,o,a,c,u,d,l,h,y,m,f,p]}set(e,n,r,i,s,o,a,c,u,d,l,h,y,m,f,p){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=d|0,this.Fh=l|0,this.Fl=h|0,this.Gh=y|0,this.Gl=m|0,this.Hh=f|0,this.Hl=p|0}process(e,n){for(let g=0;g<16;g++,n+=4)je[g]=e.getUint32(n),We[g]=e.getUint32(n+=4);for(let g=16;g<80;g++){const S=je[g-15]|0,A=We[g-15]|0,x=T.rotrSH(S,A,1)^T.rotrSH(S,A,8)^T.shrSH(S,A,7),U=T.rotrSL(S,A,1)^T.rotrSL(S,A,8)^T.shrSL(S,A,7),E=je[g-2]|0,H=We[g-2]|0,I=T.rotrSH(E,H,19)^T.rotrBH(E,H,61)^T.shrSH(E,H,6),B=T.rotrSL(E,H,19)^T.rotrBL(E,H,61)^T.shrSL(E,H,6),M=T.add4L(U,B,We[g-7],We[g-16]),j=T.add4H(M,x,I,je[g-7],je[g-16]);je[g]=j|0,We[g]=M|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:u,Dl:d,Eh:l,El:h,Fh:y,Fl:m,Gh:f,Gl:p,Hh:_,Hl:$}=this;for(let g=0;g<80;g++){const S=T.rotrSH(l,h,14)^T.rotrSH(l,h,18)^T.rotrBH(l,h,41),A=T.rotrSL(l,h,14)^T.rotrSL(l,h,18)^T.rotrBL(l,h,41),x=l&y^~l&f,U=h&m^~h&p,E=T.add5L($,A,U,xu[g],We[g]),H=T.add5H(E,_,S,x,Au[g],je[g]),I=E|0,B=T.rotrSH(r,i,28)^T.rotrBH(r,i,34)^T.rotrBH(r,i,39),M=T.rotrSL(r,i,28)^T.rotrBL(r,i,34)^T.rotrBL(r,i,39),j=r&s^r&a^s&a,le=i&o^i&c^o&c;_=f|0,$=p|0,f=y|0,p=m|0,y=l|0,m=h|0,{h:l,l:h}=T.add(u|0,d|0,H|0,I|0),u=a|0,d=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const b=T.add3L(I,M,le);r=T.add3H(b,H,B,j),i=b|0}({h:r,l:i}=T.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=T.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=T.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:d}=T.add(this.Dh|0,this.Dl|0,u|0,d|0),{h:l,l:h}=T.add(this.Eh|0,this.El|0,l|0,h|0),{h:y,l:m}=T.add(this.Fh|0,this.Fl|0,y|0,m|0),{h:f,l:p}=T.add(this.Gh|0,this.Gl|0,f|0,p|0),{h:_,l:$}=T.add(this.Hh|0,this.Hl|0,_|0,$|0),this.set(r,i,s,o,a,c,u,d,l,h,y,m,f,p,_,$)}roundClean(){je.fill(0),We.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const $u=rs(()=>new vu);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Un(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Eu(...t){const e=s=>s,n=(s,o)=>a=>s(o(a)),r=t.map(s=>s.encode).reduceRight(n,e),i=t.map(s=>s.decode).reduce(n,e);return{encode:r,decode:i}}function Su(t){return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map(n=>{if(n<0||n>=t.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${t.length})`);return t[n]})},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=t.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${t}`);return r})}}}function Uu(t=""){if(typeof t!="string")throw new Error("join separator should be string");return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of e)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return e.join(t)},decode:e=>{if(typeof e!="string")throw new Error("join.decode input should be string");return e.split(t)}}}function Cu(t,e="="){if(typeof e!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*t%8;)n.push(e);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let i of n)if(typeof i!="string")throw new Error(`padding.decode: non-string input=${i}`);let r=n.length;if(r*t%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if(!((r-1)*t%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function wr(t,e,n){if(e<2)throw new Error(`convertRadix: wrong from=${e}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(t))throw new Error("convertRadix: data should be array");if(!t.length)return[];let r=0;const i=[],s=Array.from(t);for(s.forEach(o=>{if(o<0||o>=e)throw new Error(`Wrong integer: ${o}`)});;){let o=0,a=!0;for(let c=r;c<s.length;c++){const u=s[c],d=e*o+u;if(!Number.isSafeInteger(d)||e*o/e!==o||d-u!==e*o)throw new Error("convertRadix: carry overflow");o=d%n;const l=Math.floor(d/n);if(s[c]=l,!Number.isSafeInteger(l)||l*n+o!==d)throw new Error("convertRadix: carry overflow");if(a)l?a=!1:r=c;else continue}if(i.push(o),a)break}for(let o=0;o<t.length-1&&t[o]===0;o++)i.push(0);return i.reverse()}const lo=(t,e)=>e?lo(e,t%e):t,Cn=(t,e)=>t+(e-lo(t,e));function mr(t,e,n,r){if(!Array.isArray(t))throw new Error("convertRadix2: data should be array");if(e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Cn(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${Cn(e,n)}`);let i=0,s=0;const o=2**n-1,a=[];for(const c of t){if(c>=2**e)throw new Error(`convertRadix2: invalid data word=${c} from=${e}`);if(i=i<<e|c,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=n;s-=n)a.push((i>>s-n&o)>>>0);i&=2**s-1}if(i=i<<n-s&o,!r&&s>=e)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&a.push(i>>>0),a}function Tu(t){return{encode:e=>{if(!Un(e))throw new Error("radix.encode input should be Uint8Array");return wr(Array.from(e),2**8,t)},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(wr(e,t,2**8))}}}function zu(t,e=!1){if(t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(Cn(8,t)>32||Cn(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!Un(n))throw new Error("radix2.encode input should be Uint8Array");return mr(Array.from(n),8,t,!e)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(mr(n,t,8,e))}}}function Bu(t,e){if(typeof e!="function")throw new Error("checksum fn should be function");return{encode(n){if(!Un(n))throw new Error("checksum.encode: input should be Uint8Array");const r=e(n).slice(0,t),i=new Uint8Array(n.length+t);return i.set(n),i.set(r,n.length),i},decode(n){if(!Un(n))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-t),i=e(r).slice(0,t),s=n.slice(-t);for(let o=0;o<t;o++)if(i[o]!==s[o])throw new Error("Invalid checksum");return r}}}const un={alphabet:Su,chain:Eu,checksum:Bu,convertRadix:wr,convertRadix2:mr,radix:Tu,radix2:zu,join:Uu,padding:Cu};/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const ku=t=>t[0]==="あいこくしん";function fo(t){if(typeof t!="string")throw new TypeError(`Invalid mnemonic type: ${typeof t}`);return t.normalize("NFKD")}function Iu(t){const e=fo(t),n=e.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:n}}function Lu(t){Wa(t,16,20,24,28,32)}function Hg(t,e=128){if(Ga(e),e%32!==0||e>256)throw new TypeError("Invalid entropy");return Pu(ja(e/8),t)}const Hu=t=>{const e=8-t.length/4;return new Uint8Array([Za(t)[0]>>e<<e])};function Nu(t){if(!Array.isArray(t)||t.length!==2048||typeof t[0]!="string")throw new Error("Wordlist: expected array of 2048 strings");return t.forEach(e=>{if(typeof e!="string")throw new Error(`Wordlist: non-string element: ${e}`)}),un.chain(un.checksum(1,Hu),un.radix2(11,!0),un.alphabet(t))}function Pu(t,e){return Lu(t),Nu(e).encode(t).join(ku(e)?"　":" ")}const qu=t=>fo(`mnemonic${t}`);function Ku(t,e=""){return Ra(Va,Iu(t).nfkd,qu(e),{c:2048,dkLen:64})}var Ou=/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'?$/,Fu=/^m\/44'\/637'\/[0-9]+'\/[0-9]+\/[0-9]+$/,Du=(t=>(t.ED25519="ed25519 seed",t))(Du||{}),Mu=2147483648;function Ru(t){return Fu.test(t)}function Vu(t){return Ou.test(t)}var ho=(t,e)=>{let n=ro.create($u,t).update(e).digest();return{key:n.slice(0,32),chainCode:n.slice(32)}},Gu=({key:t,chainCode:e},n)=>{let r=new ArrayBuffer(4);new DataView(r).setUint32(0,n);let i=new Uint8Array(r),s=new Uint8Array([0]),o=new Uint8Array([...s,...t,...i]);return ho(e,o)},ju=t=>t.replace("'",""),Wu=t=>t.split("/").slice(1).map(ju),go=t=>{let e=t.trim().split(/\s+/).map(n=>n.toLowerCase()).join(" ");return Ku(e)};const po=[],yo=[],wo=[],Zu=BigInt(0),Kt=BigInt(1),Yu=BigInt(2),Xu=BigInt(7),Qu=BigInt(256),Ju=BigInt(113);for(let t=0,e=Kt,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],po.push(2*(5*r+n)),yo.push((t+1)*(t+2)/2%64);let i=Zu;for(let s=0;s<7;s++)e=(e<<Kt^(e>>Xu)*Ju)%Qu,e&Yu&&(i^=Kt<<(Kt<<BigInt(s))-Kt);wo.push(i)}const[el,tl]=so(wo,!0),$i=(t,e,n)=>n>32?co(t,e,n):oo(t,e,n),Ei=(t,e,n)=>n>32?uo(t,e,n):ao(t,e,n);function nl(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],d=n[c+1],l=$i(u,d,1)^n[a],h=Ei(u,d,1)^n[a+1];for(let y=0;y<50;y+=10)t[o+y]^=l,t[o+y+1]^=h}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=yo[o],c=$i(i,s,a),u=Ei(i,s,a),d=po[o];i=t[d],s=t[d+1],t[d]=c,t[d+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=el[r],t[1]^=tl[r]}n.fill(0)}class Wr extends Fr{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,vn(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Ja(this.state)}keccak(){yi||wi(this.state32),nl(this.state32,this.rounds),yi||wi(this.state32),this.posOut=0,this.pos=0}update(e){Et(this);const{blockLen:n,state:r}=this;e=kn(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,n&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Et(this,!1),Zt(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return vn(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ts(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new Wr(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const rl=(t,e,n)=>rs(()=>new Wr(e,t,n)),nn=rl(6,136,256/8);var mo=class xt extends L{constructor(e){super();let{data:n}=e,r=Y.fromHexInput(n);if(r.toUint8Array().length!==xt.LENGTH)throw new Error(`Authentication Key length should be ${xt.LENGTH}`);this.data=r}serialize(e){e.serializeFixedBytes(this.data.toUint8Array())}static deserialize(e){let n=e.deserializeFixedBytes(xt.LENGTH);return new xt({data:n})}toString(){return this.data.toString()}toUint8Array(){return this.data.toUint8Array()}static fromSchemeAndBytes(e){let{scheme:n,input:r}=e,i=Y.fromHexInput(r).toUint8Array(),s=new Uint8Array([...i,n]),o=nn.create();o.update(s);let a=o.digest();return new xt({data:a})}static fromPublicKeyAndScheme(e){let{publicKey:n}=e;return n.authKey()}static fromPublicKey(e){let{publicKey:n}=e;return n.authKey()}derivedAddress(){return new w(this.data.toUint8Array())}};mo.LENGTH=32;var dt=mo,bo=class Dt extends Kn{constructor(e){super();let n=Y.fromHexInput(e);if(n.toUint8Array().length!==Dt.LENGTH)throw new Error(`PublicKey length should be ${Dt.LENGTH}`);this.key=n}verifySignature(e){let{message:n,signature:r}=e;if(!(r instanceof ce))return!1;let i=On(n),s=Y.fromHexInput(i).toUint8Array(),o=r.toUint8Array(),a=this.key.toUint8Array();return mn.sign.detached.verify(s,o,a)}authKey(){return dt.fromSchemeAndBytes({scheme:0,input:this.toUint8Array()})}toUint8Array(){return this.key.toUint8Array()}serialize(e){e.serializeBytes(this.key.toUint8Array())}static deserialize(e){let n=e.deserializeBytes();return new Dt(n)}static isPublicKey(e){return e instanceof Dt}};bo.LENGTH=32;var ae=bo,br=class fe extends L{constructor(e){super();let n=Y.fromHexInput(e);if(n.toUint8Array().length!==fe.LENGTH)throw new Error(`PrivateKey length should be ${fe.LENGTH}`);this.signingKeyPair=mn.sign.keyPair.fromSeed(n.toUint8Array().slice(0,fe.LENGTH))}static generate(){let e=mn.sign.keyPair();return new fe(e.secretKey.slice(0,fe.LENGTH))}static fromDerivationPath(e,n){if(!Vu(e))throw new Error(`Invalid derivation path ${e}`);return fe.fromDerivationPathInner(e,go(n))}static fromDerivationPathInner(e,n,r=Mu){let{key:i,chainCode:s}=ho(fe.SLIP_0010_SEED,n),o=Wu(e).map(c=>parseInt(c,10)),{key:a}=o.reduce((c,u)=>Gu(c,u+r),{key:i,chainCode:s});return new fe(a)}publicKey(){let e=this.signingKeyPair.publicKey;return new ae(e)}sign(e){let n=On(e),r=Y.fromHexInput(n).toUint8Array(),i=mn.sign.detached(r,this.signingKeyPair.secretKey);return new ce(i)}toUint8Array(){return this.signingKeyPair.secretKey.slice(0,fe.LENGTH)}toString(){return Y.fromHexInput(this.toUint8Array()).toString()}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let n=e.deserializeBytes();return new fe(n)}static isPrivateKey(e){return e instanceof fe}};br.LENGTH=32,br.SLIP_0010_SEED="ed25519 seed";var Ct=br,_o=class bn extends tn{constructor(e){super();let n=Y.fromHexInput(e);if(n.toUint8Array().length!==bn.LENGTH)throw new Error(`Signature length should be ${bn.LENGTH}`);this.data=n}toUint8Array(){return this.data.toUint8Array()}serialize(e){e.serializeBytes(this.data.toUint8Array())}static deserialize(e){let n=e.deserializeBytes();return new bn(n)}};_o.LENGTH=64;var ce=_o,_n=class tt extends Kn{constructor(e){super();let{publicKeys:n,threshold:r}=e;if(n.length>tt.MAX_KEYS||n.length<tt.MIN_KEYS)throw new Error(`Must have between ${tt.MIN_KEYS} and ${tt.MAX_KEYS} public keys, inclusive`);if(r<tt.MIN_THRESHOLD||r>n.length)throw new Error(`Threshold must be between ${tt.MIN_THRESHOLD} and ${n.length}, inclusive`);this.publicKeys=n,this.threshold=r}verifySignature(e){let{message:n,signature:r}=e;if(!(r instanceof Zr))return!1;let i=[];for(let s=0;s<4;s+=1)for(let o=0;o<8;o+=1)if(r.bitmap[s]&1<<7-o){let a=s*8+o;i.push(a)}if(i.length!==r.signatures.length)throw new Error("Bitmap and signatures length mismatch");if(i.length<this.threshold)throw new Error("Not enough signatures");for(let s=0;s<i.length;s+=1)if(!this.publicKeys[i[s]].verifySignature({message:n,signature:r.signatures[s]}))return!1;return!0}authKey(){return dt.fromSchemeAndBytes({scheme:1,input:this.toUint8Array()})}toUint8Array(){let e=new Uint8Array(this.publicKeys.length*ae.LENGTH+1);return this.publicKeys.forEach((n,r)=>{e.set(n.toUint8Array(),r*ae.LENGTH)}),e[this.publicKeys.length*ae.LENGTH]=this.threshold,e}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let n=e.deserializeBytes(),r=n[n.length-1],i=[];for(let s=0;s<n.length-1;s+=ae.LENGTH){let o=s;i.push(new ae(n.subarray(o,o+ae.LENGTH)))}return new tt({publicKeys:i,threshold:r})}};_n.MAX_KEYS=32,_n.MIN_KEYS=2,_n.MIN_THRESHOLD=1;var Ao=_n,_r=class Se extends tn{constructor(e){super();let{signatures:n,bitmap:r}=e;if(n.length>Se.MAX_SIGNATURES_SUPPORTED)throw new Error(`The number of signatures cannot be greater than ${Se.MAX_SIGNATURES_SUPPORTED}`);if(this.signatures=n,!(r instanceof Uint8Array))this.bitmap=Se.createBitmap({bits:r});else{if(r.length!==Se.BITMAP_LEN)throw new Error(`"bitmap" length should be ${Se.BITMAP_LEN}`);this.bitmap=r}}toUint8Array(){let e=new Uint8Array(this.signatures.length*ce.LENGTH+Se.BITMAP_LEN);return this.signatures.forEach((n,r)=>{e.set(n.toUint8Array(),r*ce.LENGTH)}),e.set(this.bitmap,this.signatures.length*ce.LENGTH),e}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let n=e.deserializeBytes(),r=n.subarray(n.length-4),i=[];for(let s=0;s<n.length-r.length;s+=ce.LENGTH){let o=s;i.push(new ce(n.subarray(o,o+ce.LENGTH)))}return new Se({signatures:i,bitmap:r})}static createBitmap(e){let{bits:n}=e,r=128,i=new Uint8Array([0,0,0,0]),s=new Set;return n.forEach((o,a)=>{if(o>=Se.MAX_SIGNATURES_SUPPORTED)throw new Error(`Cannot have a signature larger than ${Se.MAX_SIGNATURES_SUPPORTED-1}.`);if(s.has(o))throw new Error("Duplicate bits detected.");if(a>0&&o<=n[a-1])throw new Error("The bits need to be sorted in ascending order.");s.add(o);let c=Math.floor(o/8),u=i[c];u|=r>>o%8,i[c]=u}),i}};_r.MAX_SIGNATURES_SUPPORTED=32,_r.BITMAP_LEN=4;var Zr=_r;function Si(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function il(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Fn(t,...e){if(!il(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function sl(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Si(t.outputLen),Si(t.blockLen)}function Tn(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ol(t,e){Fn(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Yn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xn=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),xe=(t,e)=>t<<32-e|t>>>e;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function al(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Yr(t){return typeof t=="string"&&(t=al(t)),Fn(t),t}function cl(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Fn(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}let xo=class{clone(){return this._cloneInto()}};function ul(t){const e=r=>t().update(Yr(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function ll(t=32){if(Yn&&typeof Yn.getRandomValues=="function")return Yn.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function dl(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}const fl=(t,e,n)=>t&e^~t&n,hl=(t,e,n)=>t&e^t&n^e&n;let gl=class extends xo{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Xn(this.buffer)}update(e){Tn(this);const{view:n,buffer:r,blockLen:i}=this;e=Yr(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=Xn(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Tn(this),ol(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let l=o;l<i;l++)n[l]=0;dl(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=Xn(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,d[l],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}};const pl=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ze=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ye=new Uint32Array(64);let yl=class extends gl{constructor(){super(64,32,8,!1),this.A=Ze[0]|0,this.B=Ze[1]|0,this.C=Ze[2]|0,this.D=Ze[3]|0,this.E=Ze[4]|0,this.F=Ze[5]|0,this.G=Ze[6]|0,this.H=Ze[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let l=0;l<16;l++,n+=4)Ye[l]=e.getUint32(n,!1);for(let l=16;l<64;l++){const h=Ye[l-15],y=Ye[l-2],m=xe(h,7)^xe(h,18)^h>>>3,f=xe(y,17)^xe(y,19)^y>>>10;Ye[l]=f+Ye[l-7]+m+Ye[l-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:u,H:d}=this;for(let l=0;l<64;l++){const h=xe(a,6)^xe(a,11)^xe(a,25),y=d+h+fl(a,c,u)+pl[l]+Ye[l]|0,f=(xe(r,2)^xe(r,13)^xe(r,22))+hl(r,i,s)|0;d=u,u=c,c=a,a=o+y|0,o=s,s=i,i=r,r=y+f|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(r,i,s,o,a,c,u,d)}roundClean(){Ye.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const wl=ul(()=>new yl);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vo=BigInt(0),Dn=BigInt(1),ml=BigInt(2);function yt(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function rn(t){if(!yt(t))throw new Error("Uint8Array expected")}const bl=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Tt(t){rn(t);let e="";for(let n=0;n<t.length;n++)e+=bl[t[n]];return e}function $o(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function Xr(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}const Ie={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Ui(t){if(t>=Ie._0&&t<=Ie._9)return t-Ie._0;if(t>=Ie._A&&t<=Ie._F)return t-(Ie._A-10);if(t>=Ie._a&&t<=Ie._f)return t-(Ie._a-10)}function zt(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=Ui(t.charCodeAt(s)),a=Ui(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function ft(t){return Xr(Tt(t))}function Qr(t){return rn(t),Xr(Tt(Uint8Array.from(t).reverse()))}function Bt(t,e){return zt(t.toString(16).padStart(e*2,"0"))}function Jr(t,e){return Bt(t,e).reverse()}function _l(t){return zt($o(t))}function _e(t,e,n){let r;if(typeof e=="string")try{r=zt(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else if(yt(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function jt(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];rn(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}function Al(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function xl(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function vl(t){let e;for(e=0;t>vo;t>>=Dn,e+=1);return e}function $l(t,e){return t>>BigInt(e)&Dn}function El(t,e,n){return t|(n?Dn:vo)<<BigInt(e)}const ei=t=>(ml<<BigInt(t-1))-Dn,Qn=t=>new Uint8Array(t),Ci=t=>Uint8Array.from(t);function Eo(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Qn(t),i=Qn(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...l)=>n(i,r,...l),c=(l=Qn())=>{i=a(Ci([0]),l),r=a(),l.length!==0&&(i=a(Ci([1]),l),r=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const h=[];for(;l<e;){r=a();const y=r.slice();h.push(y),l+=r.length}return jt(...h)};return(l,h)=>{o(),c(l);let y;for(;!(y=h(u()));)c();return o(),y}}const Sl={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||yt(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function sn(t,e,n={}){const r=(i,s,o)=>{const a=Sl[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const Ul=Object.freeze(Object.defineProperty({__proto__:null,abytes:rn,bitGet:$l,bitLen:vl,bitMask:ei,bitSet:El,bytesToHex:Tt,bytesToNumberBE:ft,bytesToNumberLE:Qr,concatBytes:jt,createHmacDrbg:Eo,ensureBytes:_e,equalBytes:Al,hexToBytes:zt,hexToNumber:Xr,isBytes:yt,numberToBytesBE:Bt,numberToBytesLE:Jr,numberToHexUnpadded:$o,numberToVarBytesBE:_l,utf8ToBytes:xl,validateObject:sn},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Q=BigInt(0),W=BigInt(1),ct=BigInt(2),Cl=BigInt(3),Ar=BigInt(4),Ti=BigInt(5),zi=BigInt(8);BigInt(9);BigInt(16);function ne(t,e){const n=t%e;return n>=Q?n:e+n}function Tl(t,e,n){if(n<=Q||e<Q)throw new Error("Expected power/modulo > 0");if(n===W)return Q;let r=W;for(;e>Q;)e&W&&(r=r*t%n),t=t*t%n,e>>=W;return r}function de(t,e,n){let r=t;for(;e-- >Q;)r*=r,r%=n;return r}function xr(t,e){if(t===Q||e<=Q)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=ne(t,e),r=e,i=Q,s=W;for(;n!==Q;){const a=r/n,c=r%n,u=i-s*a;r=n,n=c,i=s,s=u}if(r!==W)throw new Error("invert: does not exist");return ne(i,e)}function zl(t){const e=(t-W)/ct;let n,r,i;for(n=t-W,r=0;n%ct===Q;n/=ct,r++);for(i=ct;i<t&&Tl(i,e,t)!==t-W;i++);if(r===1){const o=(t+W)/Ar;return function(c,u){const d=c.pow(u,o);if(!c.eql(c.sqr(d),u))throw new Error("Cannot find square root");return d}}const s=(n+W)/ct;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=r,d=a.pow(a.mul(a.ONE,i),n),l=a.pow(c,s),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let y=1;for(let f=a.sqr(h);y<u&&!a.eql(f,a.ONE);y++)f=a.sqr(f);const m=a.pow(d,W<<BigInt(u-y-1));d=a.sqr(m),l=a.mul(l,m),h=a.mul(h,d),u=y}return l}}function Bl(t){if(t%Ar===Cl){const e=(t+W)/Ar;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%zi===Ti){const e=(t-Ti)/zi;return function(r,i){const s=r.mul(i,ct),o=r.pow(s,e),a=r.mul(i,o),c=r.mul(r.mul(a,ct),o),u=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(u),i))throw new Error("Cannot find square root");return u}}return zl(t)}const kl=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Il(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=kl.reduce((r,i)=>(r[i]="function",r),e);return sn(t,n)}function Ll(t,e,n){if(n<Q)throw new Error("Expected power > 0");if(n===Q)return t.ONE;if(n===W)return e;let r=t.ONE,i=e;for(;n>Q;)n&W&&(r=t.mul(r,i)),i=t.sqr(i),n>>=W;return r}function Hl(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function So(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Nl(t,e,n=!1,r={}){if(t<=Q)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=So(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Bl(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:ei(i),ZERO:Q,ONE:W,create:c=>ne(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Q<=c&&c<t},is0:c=>c===Q,isOdd:c=>(c&W)===W,neg:c=>ne(-c,t),eql:(c,u)=>c===u,sqr:c=>ne(c*c,t),add:(c,u)=>ne(c+u,t),sub:(c,u)=>ne(c-u,t),mul:(c,u)=>ne(c*u,t),pow:(c,u)=>Ll(a,c,u),div:(c,u)=>ne(c*xr(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>xr(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>Hl(a,c),cmov:(c,u,d)=>d?u:c,toBytes:c=>n?Jr(c,s):Bt(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return n?Qr(c):ft(c)}});return Object.freeze(a)}function Uo(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Co(t){const e=Uo(t);return e+Math.ceil(e/2)}function Pl(t,e,n=!1){const r=t.length,i=Uo(e),s=Co(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=n?ft(t):Qr(t),a=ne(o,e-W)+W;return n?Jr(a,i):Bt(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ql=BigInt(0),Jn=BigInt(1);function Kl(t,e){const n=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(i,s){let o=t.ZERO,a=i;for(;s>ql;)s&Jn&&(o=o.add(a)),a=a.double(),s>>=Jn;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),c=[];let u=i,d=u;for(let l=0;l<o;l++){d=u,c.push(d);for(let h=1;h<a;h++)d=d.add(u),c.push(d);u=d.double()}return c},wNAF(i,s,o){const{windows:a,windowSize:c}=r(i);let u=t.ZERO,d=t.BASE;const l=BigInt(2**i-1),h=2**i,y=BigInt(i);for(let m=0;m<a;m++){const f=m*c;let p=Number(o&l);o>>=y,p>c&&(p-=h,o+=Jn);const _=f,$=f+Math.abs(p)-1,g=m%2!==0,S=p<0;p===0?d=d.add(n(g,s[_])):u=u.add(n(S,s[$]))}return{p:u,f:d}},wNAFCached(i,s,o,a){const c=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,c),c!==1&&s.set(i,a(u))),this.wNAF(c,u,o)}}}function To(t){return Il(t.Fp),sn(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...So(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ol(t){const e=To(t);sn(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:Fl,hexToBytes:Dl}=Ul,lt={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=lt;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:Fl(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=lt,n=typeof t=="string"?Dl(t):t;rn(n);let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=lt._parseInt(n.subarray(2)),{d:o,l:a}=lt._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(t){const e=u=>Number.parseInt(u[0],16)&8?"00"+u:u,n=u=>{const d=u.toString(16);return d.length&1?`0${d}`:d},r=e(n(t.s)),i=e(n(t.r)),s=r.length/2,o=i.length/2,a=n(s),c=n(o);return`30${n(o+s+4)}02${c}${i}02${a}${r}`}},Pe=BigInt(0),ge=BigInt(1);BigInt(2);const Bi=BigInt(3);BigInt(4);function Ml(t){const e=Ol(t),{Fp:n}=e,r=e.toBytes||((m,f,p)=>{const _=f.toAffine();return jt(Uint8Array.from([4]),n.toBytes(_.x),n.toBytes(_.y))}),i=e.fromBytes||(m=>{const f=m.subarray(1),p=n.fromBytes(f.subarray(0,n.BYTES)),_=n.fromBytes(f.subarray(n.BYTES,2*n.BYTES));return{x:p,y:_}});function s(m){const{a:f,b:p}=e,_=n.sqr(m),$=n.mul(_,m);return n.add(n.add($,n.mul(m,f)),p)}if(!n.eql(n.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(m){return typeof m=="bigint"&&Pe<m&&m<e.n}function a(m){if(!o(m))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(m){const{allowedPrivateKeyLengths:f,nByteLength:p,wrapPrivateKey:_,n:$}=e;if(f&&typeof m!="bigint"){if(yt(m)&&(m=Tt(m)),typeof m!="string"||!f.includes(m.length))throw new Error("Invalid key");m=m.padStart(p*2,"0")}let g;try{g=typeof m=="bigint"?m:ft(_e("private key",m,p))}catch{throw new Error(`private key must be ${p} bytes, hex or bigint, not ${typeof m}`)}return _&&(g=ne(g,$)),a(g),g}const u=new Map;function d(m){if(!(m instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(f,p,_){if(this.px=f,this.py=p,this.pz=_,f==null||!n.isValid(f))throw new Error("x required");if(p==null||!n.isValid(p))throw new Error("y required");if(_==null||!n.isValid(_))throw new Error("z required")}static fromAffine(f){const{x:p,y:_}=f||{};if(!f||!n.isValid(p)||!n.isValid(_))throw new Error("invalid affine point");if(f instanceof l)throw new Error("projective point not allowed");const $=g=>n.eql(g,n.ZERO);return $(p)&&$(_)?l.ZERO:new l(p,_,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(f){const p=n.invertBatch(f.map(_=>_.pz));return f.map((_,$)=>_.toAffine(p[$])).map(l.fromAffine)}static fromHex(f){const p=l.fromAffine(i(_e("pointHex",f)));return p.assertValidity(),p}static fromPrivateKey(f){return l.BASE.multiply(c(f))}_setWindowSize(f){this._WINDOW_SIZE=f,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:f,y:p}=this.toAffine();if(!n.isValid(f)||!n.isValid(p))throw new Error("bad point: x or y not FE");const _=n.sqr(p),$=s(f);if(!n.eql(_,$))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:f}=this.toAffine();if(n.isOdd)return!n.isOdd(f);throw new Error("Field doesn't support isOdd")}equals(f){d(f);const{px:p,py:_,pz:$}=this,{px:g,py:S,pz:A}=f,x=n.eql(n.mul(p,A),n.mul(g,$)),U=n.eql(n.mul(_,A),n.mul(S,$));return x&&U}negate(){return new l(this.px,n.neg(this.py),this.pz)}double(){const{a:f,b:p}=e,_=n.mul(p,Bi),{px:$,py:g,pz:S}=this;let A=n.ZERO,x=n.ZERO,U=n.ZERO,E=n.mul($,$),H=n.mul(g,g),I=n.mul(S,S),B=n.mul($,g);return B=n.add(B,B),U=n.mul($,S),U=n.add(U,U),A=n.mul(f,U),x=n.mul(_,I),x=n.add(A,x),A=n.sub(H,x),x=n.add(H,x),x=n.mul(A,x),A=n.mul(B,A),U=n.mul(_,U),I=n.mul(f,I),B=n.sub(E,I),B=n.mul(f,B),B=n.add(B,U),U=n.add(E,E),E=n.add(U,E),E=n.add(E,I),E=n.mul(E,B),x=n.add(x,E),I=n.mul(g,S),I=n.add(I,I),E=n.mul(I,B),A=n.sub(A,E),U=n.mul(I,H),U=n.add(U,U),U=n.add(U,U),new l(A,x,U)}add(f){d(f);const{px:p,py:_,pz:$}=this,{px:g,py:S,pz:A}=f;let x=n.ZERO,U=n.ZERO,E=n.ZERO;const H=e.a,I=n.mul(e.b,Bi);let B=n.mul(p,g),M=n.mul(_,S),j=n.mul($,A),le=n.add(p,_),b=n.add(g,S);le=n.mul(le,b),b=n.add(B,M),le=n.sub(le,b),b=n.add(p,$);let v=n.add(g,A);return b=n.mul(b,v),v=n.add(B,j),b=n.sub(b,v),v=n.add(_,$),x=n.add(S,A),v=n.mul(v,x),x=n.add(M,j),v=n.sub(v,x),E=n.mul(H,b),x=n.mul(I,j),E=n.add(x,E),x=n.sub(M,E),E=n.add(M,E),U=n.mul(x,E),M=n.add(B,B),M=n.add(M,B),j=n.mul(H,j),b=n.mul(I,b),M=n.add(M,j),j=n.sub(B,j),j=n.mul(H,j),b=n.add(b,j),B=n.mul(M,b),U=n.add(U,B),B=n.mul(v,b),x=n.mul(le,x),x=n.sub(x,B),B=n.mul(le,M),E=n.mul(v,E),E=n.add(E,B),new l(x,U,E)}subtract(f){return this.add(f.negate())}is0(){return this.equals(l.ZERO)}wNAF(f){return y.wNAFCached(this,u,f,p=>{const _=n.invertBatch(p.map($=>$.pz));return p.map(($,g)=>$.toAffine(_[g])).map(l.fromAffine)})}multiplyUnsafe(f){const p=l.ZERO;if(f===Pe)return p;if(a(f),f===ge)return this;const{endo:_}=e;if(!_)return y.unsafeLadder(this,f);let{k1neg:$,k1:g,k2neg:S,k2:A}=_.splitScalar(f),x=p,U=p,E=this;for(;g>Pe||A>Pe;)g&ge&&(x=x.add(E)),A&ge&&(U=U.add(E)),E=E.double(),g>>=ge,A>>=ge;return $&&(x=x.negate()),S&&(U=U.negate()),U=new l(n.mul(U.px,_.beta),U.py,U.pz),x.add(U)}multiply(f){a(f);let p=f,_,$;const{endo:g}=e;if(g){const{k1neg:S,k1:A,k2neg:x,k2:U}=g.splitScalar(p);let{p:E,f:H}=this.wNAF(A),{p:I,f:B}=this.wNAF(U);E=y.constTimeNegate(S,E),I=y.constTimeNegate(x,I),I=new l(n.mul(I.px,g.beta),I.py,I.pz),_=E.add(I),$=H.add(B)}else{const{p:S,f:A}=this.wNAF(p);_=S,$=A}return l.normalizeZ([_,$])[0]}multiplyAndAddUnsafe(f,p,_){const $=l.BASE,g=(A,x)=>x===Pe||x===ge||!A.equals($)?A.multiplyUnsafe(x):A.multiply(x),S=g(this,p).add(g(f,_));return S.is0()?void 0:S}toAffine(f){const{px:p,py:_,pz:$}=this,g=this.is0();f==null&&(f=g?n.ONE:n.inv($));const S=n.mul(p,f),A=n.mul(_,f),x=n.mul($,f);if(g)return{x:n.ZERO,y:n.ZERO};if(!n.eql(x,n.ONE))throw new Error("invZ was invalid");return{x:S,y:A}}isTorsionFree(){const{h:f,isTorsionFree:p}=e;if(f===ge)return!0;if(p)return p(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:f,clearCofactor:p}=e;return f===ge?this:p?p(l,this):this.multiplyUnsafe(e.h)}toRawBytes(f=!0){return this.assertValidity(),r(l,this,f)}toHex(f=!0){return Tt(this.toRawBytes(f))}}l.BASE=new l(e.Gx,e.Gy,n.ONE),l.ZERO=new l(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,y=Kl(l,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:o}}function Rl(t){const e=To(t);return sn(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Vl(t){const e=Rl(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(b){return Pe<b&&b<n.ORDER}function a(b){return ne(b,r)}function c(b){return xr(b,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:l,isWithinCurveOrder:h}=Ml({...e,toBytes(b,v,k){const O=v.toAffine(),q=n.toBytes(O.x),X=jt;return k?X(Uint8Array.from([v.hasEvenY()?2:3]),q):X(Uint8Array.from([4]),q,n.toBytes(O.y))},fromBytes(b){const v=b.length,k=b[0],O=b.subarray(1);if(v===i&&(k===2||k===3)){const q=ft(O);if(!o(q))throw new Error("Point is not on curve");const X=l(q);let re;try{re=n.sqrt(X)}catch(me){const Ve=me instanceof Error?": "+me.message:"";throw new Error("Point is not on curve"+Ve)}const ie=(re&ge)===ge;return(k&1)===1!==ie&&(re=n.neg(re)),{x:q,y:re}}else if(v===s&&k===4){const q=n.fromBytes(O.subarray(0,n.BYTES)),X=n.fromBytes(O.subarray(n.BYTES,2*n.BYTES));return{x:q,y:X}}else throw new Error(`Point of length ${v} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),y=b=>Tt(Bt(b,e.nByteLength));function m(b){const v=r>>ge;return b>v}function f(b){return m(b)?a(-b):b}const p=(b,v,k)=>ft(b.slice(v,k));class _{constructor(v,k,O){this.r=v,this.s=k,this.recovery=O,this.assertValidity()}static fromCompact(v){const k=e.nByteLength;return v=_e("compactSignature",v,k*2),new _(p(v,0,k),p(v,k,2*k))}static fromDER(v){const{r:k,s:O}=lt.toSig(_e("DER",v));return new _(k,O)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(v){return new _(this.r,this.s,v)}recoverPublicKey(v){const{r:k,s:O,recovery:q}=this,X=U(_e("msgHash",v));if(q==null||![0,1,2,3].includes(q))throw new Error("recovery id invalid");const re=q===2||q===3?k+e.n:k;if(re>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const ie=q&1?"03":"02",Re=u.fromHex(ie+y(re)),me=c(re),Ve=a(-X*me),qt=a(O*me),Ge=u.BASE.multiplyAndAddUnsafe(Re,Ve,qt);if(!Ge)throw new Error("point at infinify");return Ge.assertValidity(),Ge}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return zt(this.toDERHex())}toDERHex(){return lt.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return zt(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}const $={isValidPrivateKey(b){try{return d(b),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const b=Co(e.n);return Pl(e.randomBytes(b),e.n)},precompute(b=8,v=u.BASE){return v._setWindowSize(b),v.multiply(BigInt(3)),v}};function g(b,v=!0){return u.fromPrivateKey(b).toRawBytes(v)}function S(b){const v=yt(b),k=typeof b=="string",O=(v||k)&&b.length;return v?O===i||O===s:k?O===2*i||O===2*s:b instanceof u}function A(b,v,k=!0){if(S(b))throw new Error("first arg must be private key");if(!S(v))throw new Error("second arg must be public key");return u.fromHex(v).multiply(d(b)).toRawBytes(k)}const x=e.bits2int||function(b){const v=ft(b),k=b.length*8-e.nBitLength;return k>0?v>>BigInt(k):v},U=e.bits2int_modN||function(b){return a(x(b))},E=ei(e.nBitLength);function H(b){if(typeof b!="bigint")throw new Error("bigint expected");if(!(Pe<=b&&b<E))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Bt(b,e.nByteLength)}function I(b,v,k=B){if(["recovered","canonical"].some(ot=>ot in k))throw new Error("sign() legacy options not supported");const{hash:O,randomBytes:q}=e;let{lowS:X,prehash:re,extraEntropy:ie}=k;X==null&&(X=!0),b=_e("msgHash",b),re&&(b=_e("prehashed msgHash",O(b)));const Re=U(b),me=d(v),Ve=[H(me),H(Re)];if(ie!=null&&ie!==!1){const ot=ie===!0?q(n.BYTES):ie;Ve.push(_e("extraEntropy",ot))}const qt=jt(...Ve),Ge=Re;function Vn(ot){const bt=x(ot);if(!h(bt))return;const hi=c(bt),_t=u.BASE.multiply(bt).toAffine(),be=a(_t.x);if(be===Pe)return;const At=a(hi*a(Ge+be*me));if(At===Pe)return;let gi=(_t.x===be?0:2)|Number(_t.y&ge),pi=At;return X&&m(At)&&(pi=f(At),gi^=1),new _(be,pi,gi)}return{seed:qt,k2sig:Vn}}const B={lowS:e.lowS,prehash:!1},M={lowS:e.lowS,prehash:!1};function j(b,v,k=B){const{seed:O,k2sig:q}=I(b,v,k),X=e;return Eo(X.hash.outputLen,X.nByteLength,X.hmac)(O,q)}u.BASE._setWindowSize(8);function le(b,v,k,O=M){var _t;const q=b;if(v=_e("msgHash",v),k=_e("publicKey",k),"strict"in O)throw new Error("options.strict was renamed to lowS");const{lowS:X,prehash:re}=O;let ie,Re;try{if(typeof q=="string"||yt(q))try{ie=_.fromDER(q)}catch(be){if(!(be instanceof lt.Err))throw be;ie=_.fromCompact(q)}else if(typeof q=="object"&&typeof q.r=="bigint"&&typeof q.s=="bigint"){const{r:be,s:At}=q;ie=new _(be,At)}else throw new Error("PARSE");Re=u.fromHex(k)}catch(be){if(be.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(X&&ie.hasHighS())return!1;re&&(v=e.hash(v));const{r:me,s:Ve}=ie,qt=U(v),Ge=c(Ve),Vn=a(qt*Ge),ot=a(me*Ge),bt=(_t=u.BASE.multiplyAndAddUnsafe(Re,Vn,ot))==null?void 0:_t.toAffine();return bt?a(bt.x)===me:!1}return{CURVE:e,getPublicKey:g,getSharedSecret:A,sign:j,verify:le,ProjectivePoint:u,Signature:_,utils:$}}let zo=class extends xo{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,sl(e);const r=Yr(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Tn(this),this.iHash.update(e),this}digestInto(e){Tn(this),Fn(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Bo=(t,e,n)=>new zo(t,e).update(n).digest();Bo.create=(t,e)=>new zo(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Gl(t){return{hash:t,hmac:(e,...n)=>Bo(t,e,cl(...n)),randomBytes:ll}}function jl(t,e){const n=r=>Vl({...t,...Gl(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ko=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ki=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Wl=BigInt(1),vr=BigInt(2),Ii=(t,e)=>(t+e/vr)/e;function Zl(t){const e=ko,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,d=u*u*t%e,l=de(d,n,e)*d%e,h=de(l,n,e)*d%e,y=de(h,vr,e)*u%e,m=de(y,i,e)*y%e,f=de(m,s,e)*m%e,p=de(f,a,e)*f%e,_=de(p,c,e)*p%e,$=de(_,a,e)*f%e,g=de($,n,e)*d%e,S=de(g,o,e)*m%e,A=de(S,r,e)*u%e,x=de(A,vr,e);if(!$r.eql($r.sqr(x),t))throw new Error("Cannot find square root");return x}const $r=Nl(ko,void 0,void 0,{sqrt:Zl}),oe=jl({a:BigInt(0),b:BigInt(7),Fp:$r,n:ki,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=ki,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Wl*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=Ii(s*t,e),c=Ii(-r*t,e);let u=ne(t-a*n-c*i,e),d=ne(-a*r-c*s,e);const l=u>o,h=d>o;if(l&&(u=e-u),h&&(d=e-d),u>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:l,k1:u,k2neg:h,k2:d}}}},wl);BigInt(0);oe.ProjectivePoint;function Li(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function Yl(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Ce(t,...e){if(!Yl(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function Xl(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Li(t.outputLen),Li(t.blockLen)}function zn(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Ql(t,e){Ce(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $t=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),ve=(t,e)=>t<<32-e|t>>>e,ln=(t,e)=>t<<e|t>>>32-e>>>0;new Uint8Array(new Uint32Array([287454020]).buffer)[0];const Jl=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ed(t){Ce(t);let e="";for(let n=0;n<t.length;n++)e+=Jl[t[n]];return e}const Le={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Hi(t){if(t>=Le._0&&t<=Le._9)return t-Le._0;if(t>=Le._A&&t<=Le._F)return t-(Le._A-10);if(t>=Le._a&&t<=Le._f)return t-(Le._a-10)}function td(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=Hi(t.charCodeAt(s)),a=Hi(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function Io(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function ti(t){return typeof t=="string"&&(t=Io(t)),Ce(t),t}function dn(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Ce(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}class Lo{clone(){return this._cloneInto()}}function ni(t){const e=r=>t().update(ti(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}class Ho extends Lo{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Xl(e);const r=ti(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return zn(this),this.iHash.update(e),this}digestInto(e){zn(this),Ce(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Er=(t,e,n)=>new Ho(t,e).update(n).digest();Er.create=(t,e)=>new Ho(t,e);function nd(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}const rd=(t,e,n)=>t&e^~t&n,id=(t,e,n)=>t&e^t&n^e&n;class ri extends Lo{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=$t(this.buffer)}update(e){zn(this);const{view:n,buffer:r,blockLen:i}=this;e=ti(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=$t(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){zn(this),Ql(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let l=o;l<i;l++)n[l]=0;nd(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=$t(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,d[l],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}}const sd=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),No=new Uint8Array(new Array(16).fill(0).map((t,e)=>e)),od=No.map(t=>(9*t+5)%16);let ii=[No],si=[od];for(let t=0;t<4;t++)for(let e of[ii,si])e.push(e[t].map(n=>sd[n]));const Po=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),ad=ii.map((t,e)=>t.map(n=>Po[e][n])),cd=si.map((t,e)=>t.map(n=>Po[e][n])),ud=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),ld=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function Ni(t,e,n,r){return t===0?e^n^r:t===1?e&n|~e&r:t===2?(e|~n)^r:t===3?e&r|n&~r:e^(n|~r)}const fn=new Uint32Array(16);class dd extends ri{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:r,h3:i,h4:s}=this;return[e,n,r,i,s]}set(e,n,r,i,s){this.h0=e|0,this.h1=n|0,this.h2=r|0,this.h3=i|0,this.h4=s|0}process(e,n){for(let y=0;y<16;y++,n+=4)fn[y]=e.getUint32(n,!0);let r=this.h0|0,i=r,s=this.h1|0,o=s,a=this.h2|0,c=a,u=this.h3|0,d=u,l=this.h4|0,h=l;for(let y=0;y<5;y++){const m=4-y,f=ud[y],p=ld[y],_=ii[y],$=si[y],g=ad[y],S=cd[y];for(let A=0;A<16;A++){const x=ln(r+Ni(y,s,a,u)+fn[_[A]]+f,g[A])+l|0;r=l,l=u,u=ln(a,10)|0,a=s,s=x}for(let A=0;A<16;A++){const x=ln(i+Ni(m,o,c,d)+fn[$[A]]+p,S[A])+h|0;i=h,h=d,d=ln(c,10)|0,c=o,o=x}}this.set(this.h1+a+d|0,this.h2+u+h|0,this.h3+l+i|0,this.h4+r+o|0,this.h0+s+c|0)}roundClean(){fn.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const fd=ni(()=>new dd),hd=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Xe=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Qe=new Uint32Array(64);class gd extends ri{constructor(){super(64,32,8,!1),this.A=Xe[0]|0,this.B=Xe[1]|0,this.C=Xe[2]|0,this.D=Xe[3]|0,this.E=Xe[4]|0,this.F=Xe[5]|0,this.G=Xe[6]|0,this.H=Xe[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let l=0;l<16;l++,n+=4)Qe[l]=e.getUint32(n,!1);for(let l=16;l<64;l++){const h=Qe[l-15],y=Qe[l-2],m=ve(h,7)^ve(h,18)^h>>>3,f=ve(y,17)^ve(y,19)^y>>>10;Qe[l]=f+Qe[l-7]+m+Qe[l-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:u,H:d}=this;for(let l=0;l<64;l++){const h=ve(a,6)^ve(a,11)^ve(a,25),y=d+h+rd(a,c,u)+hd[l]+Qe[l]|0,f=(ve(r,2)^ve(r,13)^ve(r,22))+id(r,i,s)|0;d=u,u=c,c=a,a=o+y|0,o=s,s=i,i=r,r=y+f|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(r,i,s,o,a,c,u,d)}roundClean(){Qe.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const qo=ni(()=>new gd),hn=BigInt(2**32-1),Sr=BigInt(32);function Ko(t,e=!1){return e?{h:Number(t&hn),l:Number(t>>Sr&hn)}:{h:Number(t>>Sr&hn)|0,l:Number(t&hn)|0}}function pd(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Ko(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const yd=(t,e)=>BigInt(t>>>0)<<Sr|BigInt(e>>>0),wd=(t,e,n)=>t>>>n,md=(t,e,n)=>t<<32-n|e>>>n,bd=(t,e,n)=>t>>>n|e<<32-n,_d=(t,e,n)=>t<<32-n|e>>>n,Ad=(t,e,n)=>t<<64-n|e>>>n-32,xd=(t,e,n)=>t>>>n-32|e<<64-n,vd=(t,e)=>e,$d=(t,e)=>t,Ed=(t,e,n)=>t<<n|e>>>32-n,Sd=(t,e,n)=>e<<n|t>>>32-n,Ud=(t,e,n)=>e<<n-32|t>>>64-n,Cd=(t,e,n)=>t<<n-32|e>>>64-n;function Td(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const zd=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Bd=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,kd=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Id=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,Ld=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),Hd=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,Nd={fromBig:Ko,split:pd,toBig:yd,shrSH:wd,shrSL:md,rotrSH:bd,rotrSL:_d,rotrBH:Ad,rotrBL:xd,rotr32H:vd,rotr32L:$d,rotlSH:Ed,rotlSL:Sd,rotlBH:Ud,rotlBL:Cd,add:Td,add3L:zd,add3H:Bd,add4L:kd,add4H:Id,add5H:Hd,add5L:Ld},z=Nd,[Pd,qd]=(()=>z.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),Je=new Uint32Array(80),et=new Uint32Array(80);class Kd extends ri{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:u,El:d,Fh:l,Fl:h,Gh:y,Gl:m,Hh:f,Hl:p}=this;return[e,n,r,i,s,o,a,c,u,d,l,h,y,m,f,p]}set(e,n,r,i,s,o,a,c,u,d,l,h,y,m,f,p){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=d|0,this.Fh=l|0,this.Fl=h|0,this.Gh=y|0,this.Gl=m|0,this.Hh=f|0,this.Hl=p|0}process(e,n){for(let g=0;g<16;g++,n+=4)Je[g]=e.getUint32(n),et[g]=e.getUint32(n+=4);for(let g=16;g<80;g++){const S=Je[g-15]|0,A=et[g-15]|0,x=z.rotrSH(S,A,1)^z.rotrSH(S,A,8)^z.shrSH(S,A,7),U=z.rotrSL(S,A,1)^z.rotrSL(S,A,8)^z.shrSL(S,A,7),E=Je[g-2]|0,H=et[g-2]|0,I=z.rotrSH(E,H,19)^z.rotrBH(E,H,61)^z.shrSH(E,H,6),B=z.rotrSL(E,H,19)^z.rotrBL(E,H,61)^z.shrSL(E,H,6),M=z.add4L(U,B,et[g-7],et[g-16]),j=z.add4H(M,x,I,Je[g-7],Je[g-16]);Je[g]=j|0,et[g]=M|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:u,Dl:d,Eh:l,El:h,Fh:y,Fl:m,Gh:f,Gl:p,Hh:_,Hl:$}=this;for(let g=0;g<80;g++){const S=z.rotrSH(l,h,14)^z.rotrSH(l,h,18)^z.rotrBH(l,h,41),A=z.rotrSL(l,h,14)^z.rotrSL(l,h,18)^z.rotrBL(l,h,41),x=l&y^~l&f,U=h&m^~h&p,E=z.add5L($,A,U,qd[g],et[g]),H=z.add5H(E,_,S,x,Pd[g],Je[g]),I=E|0,B=z.rotrSH(r,i,28)^z.rotrBH(r,i,34)^z.rotrBH(r,i,39),M=z.rotrSL(r,i,28)^z.rotrBL(r,i,34)^z.rotrBL(r,i,39),j=r&s^r&a^s&a,le=i&o^i&c^o&c;_=f|0,$=p|0,f=y|0,p=m|0,y=l|0,m=h|0,{h:l,l:h}=z.add(u|0,d|0,H|0,I|0),u=a|0,d=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const b=z.add3L(I,M,le);r=z.add3H(b,H,B,j),i=b|0}({h:r,l:i}=z.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=z.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=z.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:d}=z.add(this.Dh|0,this.Dl|0,u|0,d|0),{h:l,l:h}=z.add(this.Eh|0,this.El|0,l|0,h|0),{h:y,l:m}=z.add(this.Fh|0,this.Fl|0,y|0,m|0),{h:f,l:p}=z.add(this.Gh|0,this.Gl|0,f|0,p|0),{h:_,l:$}=z.add(this.Hh|0,this.Hl|0,_|0,$|0),this.set(r,i,s,o,a,c,u,d,l,h,y,m,f,p,_,$)}roundClean(){Je.fill(0),et.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Pi=ni(()=>new Kd);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ur(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Oo(...t){const e=s=>s,n=(s,o)=>a=>s(o(a)),r=t.map(s=>s.encode).reduceRight(n,e),i=t.map(s=>s.decode).reduce(n,e);return{encode:r,decode:i}}function Od(t){return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map(n=>{if(n<0||n>=t.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${t.length})`);return t[n]})},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=t.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${t}`);return r})}}}function Fd(t=""){if(typeof t!="string")throw new Error("join separator should be string");return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of e)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return e.join(t)},decode:e=>{if(typeof e!="string")throw new Error("join.decode input should be string");return e.split(t)}}}function qi(t,e,n){if(e<2)throw new Error(`convertRadix: wrong from=${e}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(t))throw new Error("convertRadix: data should be array");if(!t.length)return[];let r=0;const i=[],s=Array.from(t);for(s.forEach(o=>{if(o<0||o>=e)throw new Error(`Wrong integer: ${o}`)});;){let o=0,a=!0;for(let c=r;c<s.length;c++){const u=s[c],d=e*o+u;if(!Number.isSafeInteger(d)||e*o/e!==o||d-u!==e*o)throw new Error("convertRadix: carry overflow");o=d%n;const l=Math.floor(d/n);if(s[c]=l,!Number.isSafeInteger(l)||l*n+o!==d)throw new Error("convertRadix: carry overflow");if(a)l?a=!1:r=c;else continue}if(i.push(o),a)break}for(let o=0;o<t.length-1&&t[o]===0;o++)i.push(0);return i.reverse()}function Dd(t){return{encode:e=>{if(!Ur(e))throw new Error("radix.encode input should be Uint8Array");return qi(Array.from(e),2**8,t)},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(qi(e,t,2**8))}}}function Md(t,e){if(typeof e!="function")throw new Error("checksum fn should be function");return{encode(n){if(!Ur(n))throw new Error("checksum.encode: input should be Uint8Array");const r=e(n).slice(0,t),i=new Uint8Array(n.length+t);return i.set(n),i.set(r,n.length),i},decode(n){if(!Ur(n))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-t),i=e(r).slice(0,t),s=n.slice(-t);for(let o=0;o<t;o++)if(i[o]!==s[o])throw new Error("Invalid checksum");return r}}}const Rd=t=>Oo(Dd(58),Od(t),Fd("")),Vd=Rd("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Gd=t=>Oo(Md(4,e=>t(t(e))),Vd);/*! scure-bip32 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const gn=oe.ProjectivePoint,er=Gd(qo);function Ki(t){return BigInt(`0x${ed(t)}`)}function jd(t){return td(t.toString(16).padStart(64,"0"))}const Wd=Io("Bitcoin seed"),tr={private:76066276,public:76067358},nr=2147483648,Zd=t=>fd(qo(t)),Yd=t=>$t(t).getUint32(0,!1),pn=t=>{if(!Number.isSafeInteger(t)||t<0||t>2**32-1)throw new Error(`Invalid number=${t}. Should be from 0 to 2 ** 32 - 1`);const e=new Uint8Array(4);return $t(e).setUint32(0,t,!1),e};class ut{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return Yd(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const e=this.privateKey;if(!e)throw new Error("No private key");return er.encode(this.serialize(this.versions.private,dn(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return er.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e,n=tr){if(Ce(e),8*e.length<128||8*e.length>512)throw new Error(`HDKey: wrong seed length=${e.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const r=Er(Pi,Wd,e);return new ut({versions:n,chainCode:r.slice(32),privateKey:r.slice(0,32)})}static fromExtendedKey(e,n=tr){const r=er.decode(e),i=$t(r),s=i.getUint32(0,!1),o={versions:n,depth:r[4],parentFingerprint:i.getUint32(5,!1),index:i.getUint32(9,!1),chainCode:r.slice(13,45)},a=r.slice(45),c=a[0]===0;if(s!==n[c?"private":"public"])throw new Error("Version mismatch");return c?new ut({...o,privateKey:a.slice(1)}):new ut({...o,publicKey:a})}static fromJSON(e){return ut.fromExtendedKey(e.xpriv)}constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||typeof e!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||tr,this.depth=e.depth||0,this.chainCode=e.chainCode||null,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!oe.utils.isValidPrivateKey(e.privateKey))throw new Error("Invalid private key");this.privKey=typeof e.privateKey=="bigint"?e.privateKey:Ki(e.privateKey),this.privKeyBytes=jd(this.privKey),this.pubKey=oe.getPublicKey(e.privateKey,!0)}else if(e.publicKey)this.pubKey=gn.fromHex(e.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=Zd(this.pubKey)}derive(e){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;const n=e.replace(/^[mM]'?\//,"").split("/");let r=this;for(const i of n){const s=/^(\d+)('?)$/.exec(i),o=s&&s[1];if(!s||s.length!==3||typeof o!="string")throw new Error(`Invalid child index: ${i}`);let a=+o;if(!Number.isSafeInteger(a)||a>=nr)throw new Error("Invalid index");s[2]==="'"&&(a+=nr),r=r.deriveChild(a)}return r}deriveChild(e){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let n=pn(e);if(e>=nr){const a=this.privateKey;if(!a)throw new Error("Could not derive hardened child key");n=dn(new Uint8Array([0]),a,n)}else n=dn(this.pubKey,n);const r=Er(Pi,this.chainCode,n),i=Ki(r.slice(0,32)),s=r.slice(32);if(!oe.utils.isValidPrivateKey(i))throw new Error("Tweak bigger than curve order");const o={versions:this.versions,chainCode:s,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){const a=ne(this.privKey+i,oe.CURVE.n);if(!oe.utils.isValidPrivateKey(a))throw new Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=a}else{const a=gn.fromHex(this.pubKey).add(gn.fromPrivateKey(i));if(a.equals(gn.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=a.toRawBytes(!0)}return new ut(o)}catch{return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw new Error("No privateKey set!");return Ce(e,32),oe.sign(e,this.privKey).toCompactRawBytes()}verify(e,n){if(Ce(e,32),Ce(n,64),!this.publicKey)throw new Error("No publicKey set!");let r;try{r=oe.Signature.fromCompact(n)}catch{return!1}return oe.verify(r,e,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,n){if(!this.chainCode)throw new Error("No chainCode set");return Ce(n,33),dn(pn(e),new Uint8Array([this.depth]),pn(this.parentFingerprint),pn(this.index),this.chainCode,n)}}var Fo=class Mt extends to{constructor(e){super();let n=Y.fromHexInput(e);if(n.toUint8Array().length!==Mt.LENGTH)throw new Error(`PublicKey length should be ${Mt.LENGTH}`);this.key=n}verifySignature(e){let{message:n,signature:r}=e;if(!(r instanceof Wt))return!1;let i=On(n),s=Y.fromHexInput(i).toUint8Array(),o=nn(s),a=r.toUint8Array();return oe.verify(a,o,this.key.toUint8Array())}toUint8Array(){return this.key.toUint8Array()}serialize(e){e.serializeBytes(this.key.toUint8Array())}static deserialize(e){let n=e.deserializeBytes();return new Mt(n)}static isPublicKey(e){return e instanceof Mt}};Fo.LENGTH=65;var Vt=Fo,Do=class nt extends L{constructor(e){super();let n=Y.fromHexInput(e);if(n.toUint8Array().length!==nt.LENGTH)throw new Error(`PrivateKey length should be ${nt.LENGTH}`);this.key=n}static generate(){let e=oe.utils.randomPrivateKey();return new nt(e)}static fromDerivationPath(e,n){if(!Ru(e))throw new Error(`Invalid derivation path ${e}`);return nt.fromDerivationPathInner(e,go(n))}static fromDerivationPathInner(e,n){let{privateKey:r}=ut.fromMasterSeed(n).derive(e);if(r===null)throw new Error("Invalid key");return new nt(r)}sign(e){let n=On(e),r=Y.fromHexInput(n),i=nn(r.toUint8Array()),s=oe.sign(i,this.key.toUint8Array());return new Wt(s.toCompactRawBytes())}publicKey(){let e=oe.getPublicKey(this.key.toUint8Array(),!1);return new Vt(e)}toUint8Array(){return this.key.toUint8Array()}toString(){return this.key.toString()}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let n=e.deserializeBytes();return new nt(n)}static isPrivateKey(e){return e instanceof nt}};Do.LENGTH=32;var Cr=Do,Mo=class An extends tn{constructor(e){super();let n=Y.fromHexInput(e);if(n.toUint8Array().length!==An.LENGTH)throw new Error(`Signature length should be ${An.LENGTH}, received ${n.toUint8Array().length}`);this.data=n}toUint8Array(){return this.data.toUint8Array()}serialize(e){e.serializeBytes(this.data.toUint8Array())}static deserialize(e){let n=e.deserializeBytes();return new An(n)}};Mo.LENGTH=64;var Wt=Mo,ht=class Tr extends Kn{constructor(e){if(super(),this.publicKey=e,e instanceof ae)this.variant=0;else if(e instanceof Vt)this.variant=1;else throw new Error("Unsupported public key type")}verifySignature(e){let{message:n,signature:r}=e;return r instanceof Ke?this.publicKey.verifySignature({message:n,signature:r.signature}):!1}authKey(){return dt.fromSchemeAndBytes({scheme:2,input:this.toUint8Array()})}toUint8Array(){return this.bcsToBytes()}serialize(e){e.serializeU32AsUleb128(this.variant),this.publicKey.serialize(e)}static deserialize(e){let n=e.deserializeUleb128AsU32(),r;switch(n){case 0:r=ae.deserialize(e);break;case 1:r=Vt.deserialize(e);break;default:throw new Error(`Unknown variant index for AnyPublicKey: ${n}`)}return new Tr(r)}static isPublicKey(e){return e instanceof Tr}isEd25519(){return this.publicKey instanceof ae}isSecp256k1PublicKey(){return this.publicKey instanceof Vt}},Ke=class Ro extends tn{constructor(e){if(super(),this.signature=e,e instanceof ce)this.variant=0;else if(e instanceof Wt)this.variant=1;else throw new Error("Unsupported signature type")}toUint8Array(){return this.bcsToBytes()}serialize(e){e.serializeU32AsUleb128(this.variant),this.signature.serialize(e)}static deserialize(e){let n=e.deserializeUleb128AsU32(),r;switch(n){case 0:r=ce.deserialize(e);break;case 1:r=Wt.deserialize(e);break;default:throw new Error(`Unknown variant index for AnySignature: ${n}`)}return new Ro(r)}};function Oi(t){let e=t;return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}var Xd=class Vo extends Kn{constructor(e){super();let{publicKeys:n,signaturesRequired:r}=e;if(r<1)throw new Error("The number of required signatures needs to be greater than 0");if(n.length<r)throw new Error(`Provided ${n.length} public keys is smaller than the ${r} required signatures`);this.publicKeys=n.map(i=>i instanceof ht?i:new ht(i)),this.signaturesRequired=r}verifySignature(e){throw new Error("not implemented")}authKey(){return dt.fromSchemeAndBytes({scheme:3,input:this.toUint8Array()})}toUint8Array(){return this.bcsToBytes()}serialize(e){e.serializeVector(this.publicKeys),e.serializeU8(this.signaturesRequired)}static deserialize(e){let n=e.deserializeVector(ht),r=e.deserializeU8();return new Vo({publicKeys:n,signaturesRequired:r})}createBitmap(e){let{bits:n}=e,r=128,i=new Uint8Array([0,0,0,0]),s=new Set;return n.forEach((o,a)=>{if(a+1>this.publicKeys.length)throw new Error(`Signature index ${a+1} is out of public keys range, ${this.publicKeys.length}.`);if(s.has(o))throw new Error(`Duplicate bit ${o} detected.`);s.add(o);let c=Math.floor(o/8),u=i[c];u|=r>>o%8,i[c]=u}),i}},rr=class He extends tn{constructor(e){super();let{signatures:n,bitmap:r}=e;if(n.length>He.MAX_SIGNATURES_SUPPORTED)throw new Error(`The number of signatures cannot be greater than ${He.MAX_SIGNATURES_SUPPORTED}`);if(this.signatures=n.map(s=>s instanceof Ke?s:new Ke(s)),!(r instanceof Uint8Array))this.bitmap=He.createBitmap({bits:r});else{if(r.length!==He.BITMAP_LEN)throw new Error(`"bitmap" length should be ${He.BITMAP_LEN}`);this.bitmap=r}let i=this.bitmap.reduce((s,o)=>s+Oi(o),0);if(i!==this.signatures.length)throw new Error(`Expecting ${i} signatures from the bitmap, but got ${this.signatures.length}`)}static createBitmap(e){let{bits:n}=e,r=128,i=new Uint8Array([0,0,0,0]),s=new Set;return n.forEach(o=>{if(o>=He.MAX_SIGNATURES_SUPPORTED)throw new Error(`Cannot have a signature larger than ${He.MAX_SIGNATURES_SUPPORTED-1}.`);if(s.has(o))throw new Error("Duplicate bits detected.");s.add(o);let a=Math.floor(o/8),c=i[a];c|=r>>o%8,i[a]=c}),i}toUint8Array(){return this.bcsToBytes()}serialize(e){e.serializeVector(this.signatures),e.serializeBytes(this.bitmap)}static deserialize(e){let n=e.deserializeBytes(),r=n.reduce((s,o)=>s+Oi(o),0),i=[];for(let s=0;s<r;s+=1){let o=Ke.deserialize(e);i.push(o)}return new He({signatures:i,bitmap:n})}};rr.BITMAP_LEN=4,rr.MAX_SIGNATURES_SUPPORTED=rr.BITMAP_LEN*8;var Te=class extends L{static deserialize(e){let n=e.deserializeUleb128AsU32();switch(n){case 0:return kt.load(e);case 1:return Fi.load(e);case 2:return wt.load(e);case 3:return zr.load(e);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${n}`)}}isEd25519(){return this instanceof kt}isMultiEd25519(){return this instanceof Fi}isSingleKey(){return this instanceof wt}isMultiKey(){return this instanceof zr}},kt=class Go extends Te{constructor(e,n){super(),this.public_key=e,this.signature=n}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let n=ae.deserialize(e),r=ce.deserialize(e);return new Go(n,r)}},Fi=class jo extends Te{constructor(e,n){super(),this.public_key=e,this.signature=n}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let n=Ao.deserialize(e),r=Zr.deserialize(e);return new jo(n,r)}},wt=class Wo extends Te{constructor(e,n){super(),this.public_key=e,this.signature=n}serialize(e){e.serializeU32AsUleb128(2),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let n=ht.deserialize(e),r=Ke.deserialize(e);return new Wo(n,r)}},zr=class Zo extends Te{constructor(e,n,r){super(),this.public_keys=e,this.signatures=n,this.signatures_bitmap=r}serialize(e){e.serializeU32AsUleb128(3),this.public_keys.serialize(e),e.serializeVector(this.signatures),e.serializeBytes(this.signatures_bitmap)}static load(e){let n=Xd.deserialize(e),r=e.deserializeVector(Ke),i=e.deserializeBytes();return new Zo(n,r,i)}},ir=class Br{constructor(e){this.signingScheme=0;let{privateKey:n,address:r}=e;this.privateKey=n,this.publicKey=n.publicKey(),this.accountAddress=r?w.from(r):this.publicKey.authKey().derivedAddress()}static generate(){let e=Ct.generate();return new Br({privateKey:e})}static fromDerivationPath(e){let{path:n,mnemonic:r}=e,i=Ct.fromDerivationPath(n,r);return new Br({privateKey:i})}verifySignature(e){return this.publicKey.verifySignature(e)}signWithAuthenticator(e){let n=this.privateKey.sign(e);return new kt(this.publicKey,n)}sign(e){return this.signWithAuthenticator(e).signature}},sr=class kr{constructor(e){this.signingScheme=2;let{privateKey:n,address:r}=e;this.privateKey=n,this.publicKey=new ht(n.publicKey()),this.accountAddress=r?w.from(r):this.publicKey.authKey().derivedAddress()}static generate(e={}){let{scheme:n=0}=e,r;switch(n){case 0:r=Ct.generate();break;case 2:r=Cr.generate();break;default:throw new Error(`Unsupported signature scheme ${n}`)}return new kr({privateKey:r})}static fromDerivationPath(e){let{scheme:n=0,path:r,mnemonic:i}=e,s;switch(n){case 0:s=Ct.fromDerivationPath(r,i);break;case 2:s=Cr.fromDerivationPath(r,i);break;default:throw new Error(`Unsupported signature scheme ${n}`)}return new kr({privateKey:s})}verifySignature(e){return this.publicKey.verifySignature(e)}signWithAuthenticator(e){let n=this.privateKey.sign(e),r=new Ke(n);return new wt(this.publicKey,r)}sign(e){return this.signWithAuthenticator(e).signature}},xn=class{static generate(e={}){let{scheme:n=0,legacy:r=!0}=e;return n===0&&r?ir.generate():sr.generate({scheme:n})}static fromPrivateKey(e){let{privateKey:n,address:r,legacy:i=!0}=e;return n instanceof Ct&&i?new ir({privateKey:n,address:r}):new sr({privateKey:n,address:r})}static fromPrivateKeyAndAddress(e){return this.fromPrivateKey(e)}static fromDerivationPath(e){let{scheme:n=0,mnemonic:r,path:i,legacy:s=!0}=e;return n===0&&s?ir.fromDerivationPath({mnemonic:r,path:i}):sr.fromDerivationPath({scheme:n,mnemonic:r,path:i})}static authKey(e){let{publicKey:n}=e;return n.authKey()}verifySignature(e){return this.publicKey.verifySignature(e)}};async function It(t){let{aptosConfig:e,accountAddress:n}=t,{data:r}=await De({aptosConfig:e,originMethod:"getInfo",path:`accounts/${w.from(n).toString()}`});return r}async function Qd(t){let{aptosConfig:e,accountAddress:n,options:r}=t;return Hn({aptosConfig:e,originMethod:"getModules",path:`accounts/${w.from(n).toString()}/modules`,params:{ledger_version:r==null?void 0:r.ledgerVersion,start:r==null?void 0:r.offset,limit:(r==null?void 0:r.limit)??1e3}})}async function Yo(t){var e;return((e=t.options)==null?void 0:e.ledgerVersion)!==void 0?Di(t):Vr(async()=>Di(t),`module-${t.accountAddress}-${t.moduleName}`,1e3*60*5)()}async function Di(t){let{aptosConfig:e,accountAddress:n,moduleName:r,options:i}=t,{data:s}=await De({aptosConfig:e,originMethod:"getModule",path:`accounts/${w.from(n).toString()}/module/${r}`,params:{ledger_version:i==null?void 0:i.ledgerVersion}});return s}async function Jd(t){let{aptosConfig:e,accountAddress:n,options:r}=t;return Hn({aptosConfig:e,originMethod:"getTransactions",path:`accounts/${w.from(n).toString()}/transactions`,params:{start:r==null?void 0:r.offset,limit:r==null?void 0:r.limit}})}async function ef(t){let{aptosConfig:e,accountAddress:n,options:r}=t;return Hn({aptosConfig:e,originMethod:"getResources",path:`accounts/${w.from(n).toString()}/resources`,params:{ledger_version:r==null?void 0:r.ledgerVersion,start:r==null?void 0:r.offset,limit:(r==null?void 0:r.limit)??999}})}async function Xo(t){let{aptosConfig:e,accountAddress:n,resourceType:r,options:i}=t,{data:s}=await De({aptosConfig:e,originMethod:"getResource",path:`accounts/${w.from(n).toString()}/resource/${r}`,params:{ledger_version:i==null?void 0:i.ledgerVersion}});return s.data}async function Qo(t){let{aptosConfig:e,authenticationKey:n,options:r}=t,i=await Xo({aptosConfig:e,accountAddress:"0x1",resourceType:"0x1::account::OriginatingAddress",options:r}),{address_map:{handle:s}}=i,o=w.from(n);try{let a=await ps({aptosConfig:e,handle:s,data:{key:o.toString(),key_type:"address",value_type:"address"},options:r});return w.from(a)}catch(a){if(a instanceof Rt&&a.data.error_code==="table_item_not_found")return o;throw a}}async function tf(t){let{aptosConfig:e,accountAddress:n}=t,r={owner_address:{_eq:w.from(n).toStringLong()},amount:{_gt:0}},i=await N({aptosConfig:e,query:{query:yc,variables:{where_condition:r}},originMethod:"getAccountTokensCount"});return i.current_token_ownerships_v2_aggregate.aggregate?i.current_token_ownerships_v2_aggregate.aggregate.count:0}async function nf(t){let{aptosConfig:e,accountAddress:n,options:r}=t,i={owner_address:{_eq:w.from(n).toStringLong()},amount:{_gt:0}};r!=null&&r.tokenStandard&&(i.token_standard={_eq:r==null?void 0:r.tokenStandard});let s={query:gc,variables:{where_condition:i,offset:r==null?void 0:r.offset,limit:r==null?void 0:r.limit,order_by:r==null?void 0:r.orderBy}};return(await N({aptosConfig:e,query:s,originMethod:"getAccountOwnedTokens"})).current_token_ownerships_v2}async function rf(t){let{aptosConfig:e,accountAddress:n,collectionAddress:r,options:i}=t,s=w.from(n).toStringLong(),o=w.from(r).toStringLong(),a={owner_address:{_eq:s},current_token_data:{collection_id:{_eq:o}},amount:{_gt:0}};i!=null&&i.tokenStandard&&(a.token_standard={_eq:i==null?void 0:i.tokenStandard});let c={query:pc,variables:{where_condition:a,offset:i==null?void 0:i.offset,limit:i==null?void 0:i.limit,order_by:i==null?void 0:i.orderBy}};return(await N({aptosConfig:e,query:c,originMethod:"getAccountOwnedTokensFromCollectionAddress"})).current_token_ownerships_v2}async function sf(t){let{aptosConfig:e,accountAddress:n,options:r}=t,i={owner_address:{_eq:w.from(n).toStringLong()},amount:{_gt:0}};r!=null&&r.tokenStandard&&(i.current_collection={token_standard:{_eq:r==null?void 0:r.tokenStandard}});let s={query:fc,variables:{where_condition:i,offset:r==null?void 0:r.offset,limit:r==null?void 0:r.limit,order_by:r==null?void 0:r.orderBy}};return(await N({aptosConfig:e,query:s,originMethod:"getAccountCollectionsWithOwnedTokens"})).current_collection_ownership_v2_view}async function of(t){let{aptosConfig:e,accountAddress:n}=t,r=w.from(n).toStringLong(),i=await N({aptosConfig:e,query:{query:wc,variables:{address:r}},originMethod:"getAccountTransactionsCount"});return i.account_transactions_aggregate.aggregate?i.account_transactions_aggregate.aggregate.count:0}async function af(t){let{aptosConfig:e,accountAddress:n,coinType:r}=t,i=w.from(n).toStringLong(),s=await Jo({aptosConfig:e,accountAddress:i,options:{where:{asset_type:{_eq:r}}}});return s[0]?s[0].amount:0}async function Jo(t){let{aptosConfig:e,accountAddress:n,options:r}=t,i=w.from(n).toStringLong(),s={...r==null?void 0:r.where,owner_address:{_eq:i}},o={query:dc,variables:{where_condition:s,offset:r==null?void 0:r.offset,limit:r==null?void 0:r.limit,order_by:r==null?void 0:r.orderBy}};return(await N({aptosConfig:e,query:o,originMethod:"getAccountCoinsData"})).current_fungible_asset_balances}async function cf(t){let{aptosConfig:e,accountAddress:n}=t,r=w.from(n).toStringLong(),i=await N({aptosConfig:e,query:{query:lc,variables:{address:r}},originMethod:"getAccountCoinsCount"});if(!i.current_fungible_asset_balances_aggregate.aggregate)throw Error("Failed to get the count of account coins");return i.current_fungible_asset_balances_aggregate.aggregate.count}async function uf(t){let{aptosConfig:e,accountAddress:n,options:r}=t,i={owner_address:{_eq:w.from(n).toStringLong()}},s={query:hc,variables:{where_condition:i,offset:r==null?void 0:r.offset,limit:r==null?void 0:r.limit,order_by:r==null?void 0:r.orderBy}};return(await N({aptosConfig:e,query:s,originMethod:"getAccountOwnedObjects"})).current_objects}async function lf(t){let{aptosConfig:e,privateKey:n}=t,r=new ht(n.publicKey());if(n instanceof Cr){let i=dt.fromPublicKeyAndScheme({publicKey:r,scheme:2}).derivedAddress();return xn.fromPrivateKeyAndAddress({privateKey:n,address:i})}if(n instanceof Ct){let i=dt.fromPublicKeyAndScheme({publicKey:r,scheme:2});if(await Mi({authKey:i,aptosConfig:e})){let o=i.derivedAddress();return xn.fromPrivateKeyAndAddress({privateKey:n,address:o,legacy:!1})}let s=dt.fromPublicKeyAndScheme({publicKey:r.publicKey,scheme:0});if(await Mi({authKey:s,aptosConfig:e})){let o=s.derivedAddress();return xn.fromPrivateKeyAndAddress({privateKey:n,address:o,legacy:!0})}}throw new Error(`Can't derive account from private key ${n}`)}async function Mi(t){let{aptosConfig:e,authKey:n}=t,r=await Qo({aptosConfig:e,authenticationKey:n.derivedAddress()});try{return await It({aptosConfig:e,accountAddress:r}),!0}catch(i){if(i.status===404)return!1;throw new Error(`Error while looking for an account info ${r.toString()}`)}}var df=new TextEncoder;function ea(t){return(t==null?void 0:t.map(e=>Ft(e)?Ut(e):e))??[]}async function ta(t,e,n,r){let i=await Yo({aptosConfig:r,accountAddress:t,moduleName:e});if(i.abi)return i.abi.exposed_functions.find(s=>s.name===n)}async function ff(t,e,n,r){let i=await ta(t,e,n,r);if(!i)throw new Error(`Could not find entry function ABI for '${t}::${e}::${n}'`);if(!i.is_entry)throw new Error(`'${t}::${e}::${n}' is not an entry function`);let s=Xc(i),o=[];for(let a=s;a<i.params.length;a+=1)o.push(Ut(i.params[a],{allowGenerics:!0}));return{signers:s,typeParameters:i.generic_type_params,parameters:o}}async function hf(t,e,n,r){let i=await ta(t,e,n,r);if(!i)throw new Error(`Could not find view function ABI for '${t}::${e}::${n}'`);if(!i.is_view)throw new Error(`'${t}::${e}::${n}' is not an view function`);let s=[];for(let a=0;a<i.params.length;a+=1)s.push(Ut(i.params[a],{allowGenerics:!0}));let o=[];for(let a=0;a<i.return.length;a+=1)o.push(Ut(i.return[a],{allowGenerics:!0}));return{typeParameters:i.generic_type_params,parameters:s,returnTypes:o}}function na(t,e,n,r,i){if(r>=e.parameters.length)throw new Error(`Too many arguments for '${t}', expected ${e.parameters.length}`);let s=e.parameters[r];return Gt(n,s,r,i)}function Gt(t,e,n,r){return Wc(t)?(Ir(e,t,n),t):gf(t,e,n,r)}function gf(t,e,n,r){if(e.isBool()){if(Gc(t))return new se(t);G("boolean",n)}if(e.isAddress()){if(Ft(t))return w.fromString(t);G("string | AccountAddress",n)}if(e.isU8()){if(Wn(t))return new Oe(t);G("number",n)}if(e.isU16()){if(Wn(t))return new Xt(t);G("number",n)}if(e.isU32()){if(Wn(t))return new Qt(t);G("number",n)}if(e.isU64()){if(Zn(t))return new qe(BigInt(t));G("bigint | number | string",n)}if(e.isU128()){if(Zn(t))return new Jt(BigInt(t));G("bigint | number | string",n)}if(e.isU256()){if(Zn(t))return new en(BigInt(t));G("bigint | number | string",n)}if(e.isGeneric()){let i=e.value;if(i<0||i>=r.length)throw new Error(`Generic argument ${e.toString()} is invalid for argument ${n}`);return Gt(t,r[i],n,r)}if(e.isVector()){if(e.value.isU8()){if(Ft(t))return D.U8(df.encode(t));if(t instanceof Uint8Array)return D.U8(t);if(t instanceof ArrayBuffer)return D.U8(new Uint8Array(t))}if(Array.isArray(t))return new D(t.map(i=>Gt(i,e.value,n,r)));throw new Error(`Type mismatch for argument ${n}, type '${e.toString()}'`)}if(e.isStruct()){if(e.isString()){if(Ft(t))return new R(t);G("string",n)}if(e.isObject()){if(Ft(t))return w.fromString(t);G("string | AccountAddress",n)}if(e.isOption())return jc(t)?new En(null):new En(Gt(t,e.value.typeArgs[0],n,r));throw new Error(`Unsupported struct input type for argument ${n}, type '${e.toString()}'`)}throw new Error(`Type mismatch for argument ${n}, type '${e.toString()}'`)}function Ir(t,e,n){if(t.isBool()){if(ks(e))return;G("Bool",n)}if(t.isAddress()){if(lr(e))return;G("AccountAddress",n)}if(t.isU8()){if(Ls(e))return;G("U8",n)}if(t.isU16()){if(Hs(e))return;G("U16",n)}if(t.isU32()){if(Ns(e))return;G("U32",n)}if(t.isU64()){if(Ps(e))return;G("U64",n)}if(t.isU128()){if(qs(e))return;G("U128",n)}if(t.isU256()){if(Ks(e))return;G("U256",n)}if(t.isVector()){if(e instanceof D){e.values.length>0&&Ir(t.value,e.values[0],n);return}G("MoveVector",n)}if(t instanceof C){if(t.isString()){if(Is(e))return;G("MoveString",n)}if(t.isObject()){if(lr(e))return;G("AccountAddress",n)}if(t.isOption()){if(e instanceof En){e.value!==void 0&&Ir(t.value.typeArgs[0],e.value,n);return}G("MoveOption",n)}}throw new Error(`Type mismatch for argument ${n}, expected '${t.toString()}'`)}var Ri=class Lr extends L{constructor(e,n){super(),this.address=e,this.name=n}static fromStr(e){let n=e.split("::");if(n.length!==2)throw new Error("Invalid module id.");return new Lr(w.fromString(n[0]),new pe(n[1]))}serialize(e){this.address.serialize(e),this.name.serialize(e)}static deserialize(e){let n=w.deserialize(e),r=pe.deserialize(e);return new Lr(n,r)}},pf=class ra extends L{constructor(e){super(),this.value=new ur(e)}serialize(e){e.serialize(this.value)}serializeForEntryFunction(e){e.serializeU32AsUleb128(this.value.value.length),e.serialize(this)}static deserialize(e,n){let r=ur.deserialize(e,n);return new ra(r.value)}};function yf(t){let e=t.deserializeUleb128AsU32();switch(e){case 0:return Oe.deserialize(t);case 1:return qe.deserialize(t);case 2:return Jt.deserialize(t);case 3:return w.deserialize(t);case 4:return D.deserialize(t,Oe);case 5:return se.deserialize(t);case 6:return Xt.deserialize(t);case 7:return Qt.deserialize(t);case 8:return en.deserialize(t);default:throw new Error(`Unknown variant index for ScriptTransactionArgument: ${e}`)}}var Mn=class extends L{static deserialize(e){let n=e.deserializeUleb128AsU32();switch(n){case 0:return ia.load(e);case 2:return oa.load(e);case 3:return ca.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${n}`)}}},ia=class sa extends Mn{constructor(e){super(),this.script=e}serialize(e){e.serializeU32AsUleb128(0),this.script.serialize(e)}static load(e){let n=la.deserialize(e);return new sa(n)}},oa=class aa extends Mn{constructor(e){super(),this.entryFunction=e}serialize(e){e.serializeU32AsUleb128(2),this.entryFunction.serialize(e)}static load(e){let n=Rn.deserialize(e);return new aa(n)}},ca=class ua extends Mn{constructor(e){super(),this.multiSig=e}serialize(e){e.serializeU32AsUleb128(3),this.multiSig.serialize(e)}static load(e){let n=fa.deserialize(e);return new ua(n)}},Rn=class Hr{constructor(e,n,r,i){this.module_name=e,this.function_name=n,this.type_args=r,this.args=i}static build(e,n,r,i){return new Hr(Ri.fromStr(e),new pe(n),r,i)}serialize(e){this.module_name.serialize(e),this.function_name.serialize(e),e.serializeVector(this.type_args),e.serializeU32AsUleb128(this.args.length),this.args.forEach(n=>{n.serializeForEntryFunction(e)})}static deserialize(e){let n=Ri.deserialize(e),r=pe.deserialize(e),i=e.deserializeVector(J),s=e.deserializeUleb128AsU32(),o=new Array;for(let a=0;a<s;a+=1){let c=e.deserializeUleb128AsU32(),u=pf.deserialize(e,c);o.push(u)}return new Hr(n,r,i,o)}},la=class da{constructor(e,n,r){this.bytecode=e,this.type_args=n,this.args=r}serialize(e){e.serializeBytes(this.bytecode),e.serializeVector(this.type_args),e.serializeU32AsUleb128(this.args.length),this.args.forEach(n=>{n.serializeForScriptFunction(e)})}static deserialize(e){let n=e.deserializeBytes(),r=e.deserializeVector(J),i=e.deserializeUleb128AsU32(),s=new Array;for(let o=0;o<i;o+=1){let a=yf(e);s.push(a)}return new da(n,r,s)}},fa=class ha{constructor(e,n){this.multisig_address=e,this.transaction_payload=n}serialize(e){this.multisig_address.serialize(e),this.transaction_payload===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.transaction_payload.serialize(e))}static deserialize(e){let n=w.deserialize(e),r=e.deserializeBool(),i;return r&&(i=ga.deserialize(e)),new ha(n,i)}},ga=class pa extends L{constructor(e){super(),this.transaction_payload=e}serialize(e){e.serializeU32AsUleb128(0),this.transaction_payload.serialize(e)}static deserialize(e){return e.deserializeUleb128AsU32(),new pa(Rn.deserialize(e))}},ya=class wa extends L{constructor(e){super(),this.chainId=e}serialize(e){e.serializeU8(this.chainId)}static deserialize(e){let n=e.deserializeU8();return new wa(n)}},Fe=class ma extends L{constructor(e,n,r,i,s,o,a){super(),this.sender=e,this.sequence_number=n,this.payload=r,this.max_gas_amount=i,this.gas_unit_price=s,this.expiration_timestamp_secs=o,this.chain_id=a}serialize(e){this.sender.serialize(e),e.serializeU64(this.sequence_number),this.payload.serialize(e),e.serializeU64(this.max_gas_amount),e.serializeU64(this.gas_unit_price),e.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(e)}static deserialize(e){let n=w.deserialize(e),r=e.deserializeU64(),i=Mn.deserialize(e),s=e.deserializeU64(),o=e.deserializeU64(),a=e.deserializeU64(),c=ya.deserialize(e);return new ma(n,r,i,s,o,a,c)}},ba=class extends L{static deserialize(e){let n=e.deserializeUleb128AsU32();switch(n){case 0:return Lt.load(e);case 1:return Ht.load(e);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${n}`)}}},Lt=class _a extends ba{constructor(e,n){super(),this.raw_txn=e,this.secondary_signer_addresses=n}serialize(e){e.serializeU32AsUleb128(0),this.raw_txn.serialize(e),e.serializeVector(this.secondary_signer_addresses)}static load(e){let n=Fe.deserialize(e),r=e.deserializeVector(w);return new _a(n,r)}},Ht=class Aa extends ba{constructor(e,n,r){super(),this.raw_txn=e,this.secondary_signer_addresses=n,this.fee_payer_address=r}serialize(e){e.serializeU32AsUleb128(1),this.raw_txn.serialize(e),e.serializeVector(this.secondary_signer_addresses),this.fee_payer_address.serialize(e)}static load(e){let n=Fe.deserialize(e),r=e.deserializeVector(w),i=w.deserialize(e);return new Aa(n,r,i)}},Nt=class extends L{static deserialize(e){let n=e.deserializeUleb128AsU32();switch(n){case 0:return oi.load(e);case 1:return wf.load(e);case 2:return ai.load(e);case 3:return ci.load(e);case 4:return ui.load(e);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${n}`)}}},oi=class xa extends Nt{constructor(e,n){super(),this.public_key=e,this.signature=n}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let n=ae.deserialize(e),r=ce.deserialize(e);return new xa(n,r)}},wf=class va extends Nt{constructor(e,n){super(),this.public_key=e,this.signature=n}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let n=Ao.deserialize(e),r=Zr.deserialize(e);return new va(n,r)}},ai=class $a extends Nt{constructor(e,n,r){super(),this.sender=e,this.secondary_signer_addresses=n,this.secondary_signers=r}serialize(e){e.serializeU32AsUleb128(2),this.sender.serialize(e),e.serializeVector(this.secondary_signer_addresses),e.serializeVector(this.secondary_signers)}static load(e){let n=Te.deserialize(e),r=e.deserializeVector(w),i=e.deserializeVector(Te);return new $a(n,r,i)}},ci=class Ea extends Nt{constructor(e,n,r,i){super(),this.sender=e,this.secondary_signer_addresses=n,this.secondary_signers=r,this.fee_payer=i}serialize(e){e.serializeU32AsUleb128(3),this.sender.serialize(e),e.serializeVector(this.secondary_signer_addresses),e.serializeVector(this.secondary_signers),this.fee_payer.address.serialize(e),this.fee_payer.authenticator.serialize(e)}static load(e){let n=Te.deserialize(e),r=e.deserializeVector(w),i=e.deserializeVector(Te),s=w.deserialize(e),o=Te.deserialize(e),a={address:s,authenticator:o};return new Ea(n,r,i,a)}},ui=class Sa extends Nt{constructor(e){super(),this.sender=e}serialize(e){e.serializeU32AsUleb128(4),this.sender.serialize(e)}static load(e){let n=Te.deserialize(e);return new Sa(n)}},gt=class Ua extends L{constructor(e,n){super(),this.raw_txn=e,this.authenticator=n}serialize(e){this.raw_txn.serialize(e),this.authenticator.serialize(e)}static deserialize(e){let n=Fe.deserialize(e),r=Nt.deserialize(e);return new Ua(n,r)}},mf=class Ca extends L{constructor(e,n){super(),this.rawTransaction=e,this.feePayerAddress=n}serialize(e){this.rawTransaction.serialize(e),this.feePayerAddress===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.feePayerAddress.serialize(e))}static deserialize(e){let n=Fe.deserialize(e),r=e.deserializeBool(),i;return r&&(i=w.deserialize(e)),new Ca(n,i)}},bf=class Ta extends L{constructor(e,n,r){super(),this.rawTransaction=e,this.feePayerAddress=r,this.secondarySignerAddresses=n}serialize(e){this.rawTransaction.serialize(e),e.serializeVector(this.secondarySignerAddresses),this.feePayerAddress===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.feePayerAddress.serialize(e))}static deserialize(e){let n=Fe.deserialize(e),r=e.deserializeVector(w),i=e.deserializeBool(),s;return i&&(s=w.deserialize(e)),new Ta(n,r,s)}},_f={mainnet:"https://api.mainnet.aptoslabs.com/v1/graphql",testnet:"https://api.testnet.aptoslabs.com/v1/graphql",devnet:"https://api.devnet.aptoslabs.com/v1/graphql",randomnet:"https://indexer-randomnet.hasura.app/v1/graphql",local:"http://127.0.0.1:8090/v1/graphql"},Af={mainnet:"https://api.mainnet.aptoslabs.com/v1",testnet:"https://api.testnet.aptoslabs.com/v1",devnet:"https://api.devnet.aptoslabs.com/v1",randomnet:"https://fullnode.random.aptoslabs.com/v1",local:"http://127.0.0.1:8080/v1"},xf={mainnet:"https://faucet.mainnet.aptoslabs.com",testnet:"https://faucet.testnet.aptoslabs.com",devnet:"https://faucet.devnet.aptoslabs.com",randomnet:"https://faucet.random.aptoslabs.com",local:"http://127.0.0.1:8081"},vf=(t=>(t.MAINNET="mainnet",t.TESTNET="testnet",t.DEVNET="devnet",t.RANDOMNET="randomnet",t.LOCAL="local",t.CUSTOM="custom",t))(vf||{}),Vi={mainnet:1,testnet:2,randomnet:70};async function or(t){if(Yc(t))return Uf(t);let{moduleAddress:e,moduleName:n,functionName:r}=Pn(t.function),i=await ka({key:"entry-function",moduleAddress:e,moduleName:n,functionName:r,aptosConfig:t.aptosConfig,abi:t.abi,fetch:ff});return $f({abi:i,...t})}function $f(t){let e=t.abi,{moduleAddress:n,moduleName:r,functionName:i}=Pn(t.function),s=ea(t.typeArguments);if(s.length!==e.typeParameters.length)throw new Error(`Type argument count mismatch, expected ${e.typeParameters.length}, received ${s.length}`);let o=t.functionArguments.map((c,u)=>na(t.function,e,c,u,s));if(o.length!==e.parameters.length)throw new Error(`Too few arguments for '${n}::${r}::${i}', expected ${e.parameters.length} but got ${o.length}`);let a=Rn.build(`${n}::${r}`,i,s,o);if("multisigAddress"in t){let c=w.from(t.multisigAddress);return new ca(new fa(c,new ga(a)))}return new oa(a)}async function Ef(t){let{moduleAddress:e,moduleName:n,functionName:r}=Pn(t.function),i=await ka({key:"view-function",moduleAddress:e,moduleName:n,functionName:r,aptosConfig:t.aptosConfig,abi:t.abi,fetch:hf});return Sf({abi:i,...t})}function Sf(t){var a;let e=t.abi,{moduleAddress:n,moduleName:r,functionName:i}=Pn(t.function),s=ea(t.typeArguments);if(s.length!==e.typeParameters.length)throw new Error(`Type argument count mismatch, expected ${e.typeParameters.length}, received ${s.length}`);let o=((a=t==null?void 0:t.functionArguments)==null?void 0:a.map((c,u)=>na(t.function,e,c,u,s)))??[];if(o.length!==e.parameters.length)throw new Error(`Too few arguments for '${n}::${r}::${i}', expected ${e.parameters.length} but got ${o.length}`);return Rn.build(`${n}::${r}`,i,s,o)}function Uf(t){return new ia(new la(Y.fromHexInput(t.bytecode).toUint8Array(),t.typeArguments??[],t.functionArguments))}async function Cf(t){let{aptosConfig:e,sender:n,payload:r,options:i,feePayerAddress:s}=t,o=Vi[e.network]?Promise.resolve({chain_id:Vi[e.network]}):gs({aptosConfig:e}),a=i!=null&&i.gasUnitPrice?Promise.resolve({gas_estimate:i.gasUnitPrice}):bs({aptosConfig:e}),[{chain_id:c},{gas_estimate:u}]=await Promise.all([o,a]),d=(i==null?void 0:i.accountSequenceNumber)!==void 0?Promise.resolve({sequence_number:i.accountSequenceNumber}):It({aptosConfig:e,accountAddress:n}),l;if(s&&w.from(s).equals(w.ZERO))try{let{sequence_number:f}=await d;l=f}catch{l="0"}else{let{sequence_number:f}=await d;l=f}let{maxGasAmount:h,gasUnitPrice:y,expireTimestamp:m}={maxGasAmount:i!=null&&i.maxGasAmount?BigInt(i.maxGasAmount):BigInt(2e5),gasUnitPrice:BigInt(u),expireTimestamp:BigInt(Math.floor(Date.now()/1e3)+20),...i};return new Fe(w.from(n),BigInt(l),r,BigInt(h),BigInt(y),BigInt(m),new ya(c))}async function Gi(t){var a;let{aptosConfig:e,sender:n,payload:r,options:i,feePayerAddress:s}=t,o=await Cf({aptosConfig:e,sender:n,payload:r,options:i,feePayerAddress:s});if("secondarySignerAddresses"in t){let c=((a=t.secondarySignerAddresses)==null?void 0:a.map(u=>w.from(u)))??[];return new bf(o,c,t.feePayerAddress?w.from(t.feePayerAddress):void 0)}return new mf(o,t.feePayerAddress?w.from(t.feePayerAddress):void 0)}function Tf(t){let{signerPublicKey:e,transaction:n,secondarySignersPublicKeys:r,feePayerPublicKey:i}=t,s=yn(e);if(n.feePayerAddress){let a=new Ht(n.rawTransaction,n.secondarySignerAddresses??[],n.feePayerAddress),c=[];r&&(c=r.map(l=>yn(l)));let u=yn(i),d=new ci(s,n.secondarySignerAddresses??[],c,{address:n.feePayerAddress,authenticator:u});return new gt(a.raw_txn,d).bcsToBytes()}if(n.secondarySignerAddresses){let a=new Lt(n.rawTransaction,n.secondarySignerAddresses),c=[];c=r.map(d=>yn(d));let u=new ai(s,n.secondarySignerAddresses,c);return new gt(a.raw_txn,u).bcsToBytes()}let o;if(s instanceof kt)o=new oi(s.public_key,s.signature);else if(s instanceof wt)o=new ui(s);else throw new Error("Invalid public key");return new gt(n.rawTransaction,o).bcsToBytes()}function yn(t){if(t instanceof ht){if(t.publicKey instanceof ae)return new wt(t,new Ke(new ce(new Uint8Array(64))));if(t.publicKey instanceof Vt)return new wt(t,new Ke(new Wt(new Uint8Array(64))))}return new kt(new ae(t.toUint8Array()),new ce(new Uint8Array(64)))}function zf(t){let{signer:e,transaction:n}=t,r=Ba(n);return e.signWithAuthenticator(r)}function Bf(t){let{transaction:e,senderAuthenticator:n,feePayerAuthenticator:r,additionalSignersAuthenticators:i}=t,s=za(e);if((r||i)&&(s instanceof Lt||s instanceof Ht))return If(s,n,r,i);if(n instanceof kt&&s instanceof Fe){let o=new oi(n.public_key,n.signature);return new gt(s,o).bcsToBytes()}if((n instanceof wt||n instanceof zr)&&s instanceof Fe){let o=new ui(n);return new gt(s,o).bcsToBytes()}throw new Error(`Cannot generate a signed transaction, ${n} is not a supported account authentication scheme`)}function kf(t){let e=nn.create();for(let n of t)e.update(n);return e.digest()}kf(["APTOS::Transaction"]);function za(t){return t.feePayerAddress?new Ht(t.rawTransaction,t.secondarySignerAddresses??[],t.feePayerAddress):t.secondarySignerAddresses?new Lt(t.rawTransaction,t.secondarySignerAddresses):t.rawTransaction}function If(t,e,n,r){if(t instanceof Ht){if(!n)throw new Error("Must provide a feePayerAuthenticator argument to generate a signed fee payer transaction");let i=new ci(e,t.secondary_signer_addresses,r??[],{address:t.fee_payer_address,authenticator:n});return new gt(t.raw_txn,i).bcsToBytes()}if(t instanceof Lt){if(!r)throw new Error("Must provide a additionalSignersAuthenticators argument to generate a signed multi agent transaction");let i=new ai(e,t.secondary_signer_addresses,r??[]);return new gt(t.raw_txn,i).bcsToBytes()}throw new Error(`Cannot prepare multi signers transaction to submission, ${typeof t} transaction is not supported`)}function Ba(t){let e=za(t),n=nn.create();if(e instanceof Fe)n.update(Kc);else if(e instanceof Lt)n.update(Ai);else if(e instanceof Ht)n.update(Ai);else throw new Error(`Unknown transaction type to sign on: ${e}`);let r=n.digest(),i=e.bcsToBytes(),s=new Uint8Array(r.length+i.length);return s.set(r),s.set(i,r.length),s}async function ka({key:t,moduleAddress:e,moduleName:n,functionName:r,aptosConfig:i,abi:s,fetch:o}){return s||Vr(async()=>o(e,n,r,i),`${t}-${i.network}-${e}-${n}-${r}`,1e3*60*5)()}var Lf=class extends L{constructor(e){super(),this.accountAddress=w.ONE,this.moduleName=new R("account"),this.structName=new R("RotationProofChallenge"),this.sequenceNumber=new qe(e.sequenceNumber),this.originator=e.originator,this.currentAuthKey=e.currentAuthKey,this.newPublicKey=D.U8(e.newPublicKey.toUint8Array())}serialize(e){e.serialize(this.accountAddress),e.serialize(this.moduleName),e.serialize(this.structName),e.serialize(this.sequenceNumber),e.serialize(this.originator),e.serialize(this.currentAuthKey),e.serialize(this.newPublicKey)}};async function P(t){let e=await Hf(t);return Nf(t,e)}async function Hf(t){let{aptosConfig:e,data:n}=t,r,i;return"bytecode"in n?i=await or(n):"multisigAddress"in n?(r={aptosConfig:e,multisigAddress:n.multisigAddress,function:n.function,functionArguments:n.functionArguments,typeArguments:n.typeArguments},i=await or(r)):(r={aptosConfig:e,function:n.function,functionArguments:n.functionArguments,typeArguments:n.typeArguments},i=await or(r)),i}async function Nf(t,e){let{aptosConfig:n,sender:r,options:i}=t,s;if(Pf(t)&&(s=w.ZERO.toString()),qf(t)){let{secondarySignerAddresses:o}=t;return Gi({aptosConfig:n,sender:r,payload:e,options:i,secondarySignerAddresses:o,feePayerAddress:s})}return Gi({aptosConfig:n,sender:r,payload:e,options:i,feePayerAddress:s})}function Pf(t){return t.withFeePayer===!0}function qf(t){return"secondarySignerAddresses"in t}function Kf(t){let{transaction:e}=t;return Ba(e)}function Nr(t){return zf({...t})}async function ji(t){var u,d,l;let{aptosConfig:e,transaction:n,signerPublicKey:r,secondarySignersPublicKeys:i,feePayerPublicKey:s,options:o}=t,a=Tf({transaction:n,signerPublicKey:r,secondarySignersPublicKeys:i,feePayerPublicKey:s,options:o}),{data:c}=await Ln({aptosConfig:e,body:a,path:"transactions/simulate",params:{estimate_gas_unit_price:((u=t.options)==null?void 0:u.estimateGasUnitPrice)??!1,estimate_max_gas_amount:((d=t.options)==null?void 0:d.estimateMaxGasAmount)??!1,estimate_prioritized_gas_unit_price:((l=t.options)==null?void 0:l.estimatePrioritizedGasUnitPrice)??!1},originMethod:"simulateTransaction",contentType:"application/x.aptos.signed_transaction+bcs"});return c}async function Pr(t){let{aptosConfig:e}=t,n=Bf({...t}),{data:r}=await Ln({aptosConfig:e,body:n,path:"transactions",originMethod:"submitTransaction",contentType:"application/x.aptos.signed_transaction+bcs"});return r}async function li(t){let{aptosConfig:e,signer:n,transaction:r}=t,i=Nr({signer:n,transaction:r});return Pr({aptosConfig:e,transaction:r,senderAuthenticator:i})}var Of={typeParameters:[],parameters:[Z.u8(),new Z(Z.u8())]};async function Ff(t){let{aptosConfig:e,account:n,metadataBytes:r,moduleBytecode:i,options:s}=t,o=i.map(a=>D.U8(a));return P({aptosConfig:e,sender:w.from(n),data:{function:"0x1::code::publish_package_txn",functionArguments:[D.U8(r),new D(o)],abi:Of},options:s})}var Df={typeParameters:[],parameters:[new St,Z.u8(),new St,Z.u8(),Z.u8(),Z.u8()]};async function Mf(t){let{aptosConfig:e,fromAccount:n,toNewPrivateKey:r}=t,i=await It({aptosConfig:e,accountAddress:n.accountAddress}),s=xn.fromPrivateKey({privateKey:r,legacy:!0}),o=new Lf({sequenceNumber:BigInt(i.sequence_number),originator:n.accountAddress,currentAuthKey:w.from(i.authentication_key),newPublicKey:s.publicKey}).bcsToBytes(),a=n.sign(o),c=s.sign(o),u=await P({aptosConfig:e,sender:n.accountAddress,data:{function:"0x1::account::rotate_authentication_key",functionArguments:[new Oe(n.signingScheme),D.U8(n.publicKey.toUint8Array()),new Oe(s.signingScheme),D.U8(s.publicKey.toUint8Array()),D.U8(a.toUint8Array()),D.U8(c.toUint8Array())],abi:Df}});return li({aptosConfig:e,signer:n,transaction:u})}async function Wi(t){let{aptosConfig:e,options:n}=t,r={query:vc,variables:{where_condition:n==null?void 0:n.where,limit:n==null?void 0:n.limit,offset:n==null?void 0:n.offset}};return(await N({aptosConfig:e,query:r,originMethod:"getFungibleAssetMetadata"})).fungible_asset_metadata}async function Rf(t){let{aptosConfig:e,options:n}=t,r={query:xc,variables:{where_condition:n==null?void 0:n.where,limit:n==null?void 0:n.limit,offset:n==null?void 0:n.offset}};return(await N({aptosConfig:e,query:r,originMethod:"getFungibleAssetActivities"})).fungible_asset_activities}async function Vf(t){let{aptosConfig:e,options:n}=t,r={query:bc,variables:{where_condition:n==null?void 0:n.where,limit:n==null?void 0:n.limit,offset:n==null?void 0:n.offset}};return(await N({aptosConfig:e,query:r,originMethod:"getCurrentFungibleAssetBalances"})).current_fungible_asset_balances}var Gf={typeParameters:[],parameters:[Ut("0x1::object::Object"),new pt,new rt]};async function jf(t){let{aptosConfig:e,sender:n,fungibleAssetMetadataAddress:r,recipient:i,amount:s,options:o}=t;return P({aptosConfig:e,sender:n.accountAddress,data:{function:"0x1::primary_fungible_store::transfer",typeArguments:["0x1::fungible_asset::Metadata"],functionArguments:[r,i,s],abi:Gf},options:o})}var Ia=class{constructor(e){this.config=e}async getFungibleAssetMetadata(e){return await K({config:this.config,minimumLedgerVersion:e==null?void 0:e.minimumLedgerVersion,processorType:"fungible_asset_processor"}),Wi({aptosConfig:this.config,...e})}async getFungibleAssetMetadataByAssetType(e){return await K({config:this.config,minimumLedgerVersion:e==null?void 0:e.minimumLedgerVersion,processorType:"fungible_asset_processor"}),(await Wi({aptosConfig:this.config,options:{where:{asset_type:{_eq:e.assetType}}}}))[0]}async getFungibleAssetActivities(e){return await K({config:this.config,minimumLedgerVersion:e==null?void 0:e.minimumLedgerVersion,processorType:"fungible_asset_processor"}),Rf({aptosConfig:this.config,...e})}async getCurrentFungibleAssetBalances(e){return await K({config:this.config,minimumLedgerVersion:e==null?void 0:e.minimumLedgerVersion,processorType:"fungible_asset_processor"}),Vf({aptosConfig:this.config,...e})}async transferFungibleAsset(e){return jf({aptosConfig:this.config,...e})}};async function Pt(t){let{aptosConfig:e,payload:n,options:r}=t,i=await Ef({...n,aptosConfig:e}),s=new Ne;i.serialize(s);let o=s.toUint8Array(),{data:a}=await Ln({aptosConfig:e,path:"view",originMethod:"view",contentType:"application/x.aptos.view_function+bcs",params:{ledger_version:r==null?void 0:r.ledgerVersion},body:o});return a}var La=class{constructor(e){this.config=e}async getLedgerInfo(){return gs({aptosConfig:this.config})}async getChainId(){return(await this.getLedgerInfo()).chain_id}async getBlockByVersion(e){return zc({aptosConfig:this.config,...e})}async getBlockByHeight(e){return Bc({aptosConfig:this.config,...e})}async getTableItem(e){return ps({aptosConfig:this.config,...e})}async view(e){return Pt({aptosConfig:this.config,...e})}async getChainTopUserTransactions(e){return kc({aptosConfig:this.config,...e})}async queryIndexer(e){return N({aptosConfig:this.config,...e})}async getIndexerLastSuccessVersion(){return ys({aptosConfig:this.config})}async getProcessorStatus(e){return ws({aptosConfig:this.config,processorType:e})}};async function Wf(t){let{aptosConfig:e,poolAddress:n}=t,r=w.from(n).toStringLong(),i=await N({aptosConfig:e,query:{query:us,variables:{where_condition:{pool_address:{_eq:r}}}}});return i.num_active_delegator_per_pool[0]?i.num_active_delegator_per_pool[0].num_active_delegator:0}async function Zf(t){let{aptosConfig:e,options:n}=t,r={query:us,variables:{order_by:n==null?void 0:n.orderBy}};return(await N({aptosConfig:e,query:r})).num_active_delegator_per_pool}async function Yf(t){let{aptosConfig:e,delegatorAddress:n,poolAddress:r}=t,i={query:_c,variables:{delegatorAddress:w.from(n).toStringLong(),poolAddress:w.from(r).toStringLong()}};return(await N({aptosConfig:e,query:i})).delegated_staking_activities}var Ha=class{constructor(e){this.config=e}async getNumberOfDelegators(e){return await K({config:this.config,minimumLedgerVersion:e==null?void 0:e.minimumLedgerVersion,processorType:"stake_processor"}),Wf({aptosConfig:this.config,...e})}async getNumberOfDelegatorsForAllPools(e){return await K({config:this.config,minimumLedgerVersion:e==null?void 0:e.minimumLedgerVersion,processorType:"stake_processor"}),Zf({aptosConfig:this.config,...e})}async getDelegatedStakingActivities(e){return await K({config:this.config,minimumLedgerVersion:e==null?void 0:e.minimumLedgerVersion,processorType:"stake_processor"}),Yf({aptosConfig:this.config,...e})}};function Zi(t,e,n){let r=n.value;return n.value=async function(...i){let[s]=i;if(s.transaction.feePayerAddress&&!s.feePayerAuthenticator)throw new Error("You are submitting a Fee Payer transaction but missing the feePayerAuthenticator");return r.apply(this,i)},n}function Yi(t,e,n){let r=n.value;return n.value=async function(...i){let[s]=i;if(s.transaction.feePayerAddress&&!s.feePayerPublicKey)throw new Error("You are simulating a Fee Payer transaction but missing the feePayerPublicKey");return r.apply(this,i)},n}var qr=class{constructor(e){this.config=e}async simple(e){return ji({aptosConfig:this.config,...e})}async multiAgent(e){return ji({aptosConfig:this.config,...e})}};Ae([Yi],qr.prototype,"simple",1),Ae([Yi],qr.prototype,"multiAgent",1);var Kr=class{constructor(e){this.config=e}async simple(e){return Pr({aptosConfig:this.config,...e})}async multiAgent(e){return Pr({aptosConfig:this.config,...e})}};Ae([Zi],Kr.prototype,"simple",1),Ae([Zi],Kr.prototype,"multiAgent",1);var Xf=class{constructor(t){this.config=t}async simple(t){return P({aptosConfig:this.config,...t})}async multiAgent(t){return P({aptosConfig:this.config,...t})}},wn=()=>Math.floor(Date.now()/1e3),Qf=class{constructor(t,e,n,r,i){this.lastUncommintedNumber=null,this.currentNumber=null,this.lock=!1,this.aptosConfig=t,this.account=e,this.maxWaitTime=n,this.maximumInFlight=r,this.sleepTime=i}async nextSequenceNumber(){for(;this.lock;)await vt(this.sleepTime);this.lock=!0;let t=BigInt(0);try{if((this.lastUncommintedNumber===null||this.currentNumber===null)&&await this.initialize(),this.currentNumber-this.lastUncommintedNumber>=this.maximumInFlight){await this.update();let e=wn();for(;this.currentNumber-this.lastUncommintedNumber>=this.maximumInFlight;)await vt(this.sleepTime),wn()-e>this.maxWaitTime?(console.warn(`Waited over 30 seconds for a transaction to commit, resyncing ${this.account.accountAddress.toString()}`),await this.initialize()):await this.update()}t=this.currentNumber,this.currentNumber+=BigInt(1)}catch(e){console.error("error in getting next sequence number for this account",e)}finally{this.lock=!1}return t}async initialize(){let{sequence_number:t}=await It({aptosConfig:this.aptosConfig,accountAddress:this.account.accountAddress});this.currentNumber=BigInt(t),this.lastUncommintedNumber=BigInt(t)}async update(){let{sequence_number:t}=await It({aptosConfig:this.aptosConfig,accountAddress:this.account.accountAddress});return this.lastUncommintedNumber=BigInt(t),this.lastUncommintedNumber}async synchronize(){if(this.lastUncommintedNumber!==this.currentNumber){for(;this.lock;)await vt(this.sleepTime);this.lock=!0;try{await this.update();let t=wn();for(;this.lastUncommintedNumber!==this.currentNumber;)wn()-t>this.maxWaitTime?(console.warn(`Waited over 30 seconds for a transaction to commit, resyncing ${this.account.accountAddress.toString()}`),await this.initialize()):(await vt(this.sleepTime),await this.update())}catch(t){console.error("error in synchronizing this account sequence number with the one on chain",t)}finally{this.lock=!1}}}},ar=class{constructor(){this.queue=[],this.pendingDequeue=[],this.cancelled=!1}enqueue(e){var n;if(this.cancelled=!1,this.pendingDequeue.length>0){(n=this.pendingDequeue.shift())==null||n.resolve(e);return}this.queue.push(e)}async dequeue(){return this.queue.length>0?Promise.resolve(this.queue.shift()):new Promise((e,n)=>{this.pendingDequeue.push({resolve:e,reject:n})})}isEmpty(){return this.queue.length===0}cancel(){this.cancelled=!0,this.pendingDequeue.forEach(async({reject:e})=>{e(new Or("Task cancelled"))}),this.pendingDequeue=[],this.queue.length=0}isCancelled(){return this.cancelled}pendingDequeueLength(){return this.pendingDequeue.length}},Or=class extends Error{},Xi="fulfilled",Jf=(t=>(t.TransactionSent="transactionSent",t.TransactionSendFailed="transactionSendFailed",t.TransactionExecuted="transactionExecuted",t.TransactionExecutionFailed="transactionExecutionFailed",t.ExecutionFinish="executionFinish",t))(Jf||{}),eh=class extends es{constructor(t,e,n=30,r=100,i=10){super(),this.taskQueue=new ar,this.transactionsQueue=new ar,this.outstandingTransactions=new ar,this.sentTransactions=[],this.executedTransactions=[],this.aptosConfig=t,this.account=e,this.started=!1,this.accountSequnceNumber=new Qf(t,e,n,r,i)}async submitNextTransaction(){try{for(;;){let t=await this.accountSequnceNumber.nextSequenceNumber();if(t===null)return;let e=await this.generateNextTransaction(this.account,t);if(!e)return;let n=li({aptosConfig:this.aptosConfig,transaction:e,signer:this.account});await this.outstandingTransactions.enqueue([n,t])}}catch(t){if(t instanceof Or)return;throw new Error(`Submit transaction failed for ${this.account.accountAddress.toString()} with error ${t}`)}}async processTransactions(){try{for(;;){let t=[],e=[],[n,r]=await this.outstandingTransactions.dequeue();for(t.push(n),e.push(r);!this.outstandingTransactions.isEmpty();)[n,r]=await this.outstandingTransactions.dequeue(),t.push(n),e.push(r);let i=await Promise.allSettled(t);for(let s=0;s<i.length&&s<e.length;s+=1){let o=i[s];r=e[s],o.status===Xi?(this.sentTransactions.push([o.value.hash,r,null]),this.emit("transactionSent",{message:`transaction hash ${o.value.hash} has been committed to chain`,transactionHash:o.value.hash}),await this.checkTransaction(o,r)):(this.sentTransactions.push([o.status,r,o.reason]),this.emit("transactionSendFailed",{message:`failed to commit transaction ${this.sentTransactions.length} with error ${o.reason}`,error:o.reason}))}this.emit("executionFinish",{message:`execute ${i.length} transactions finished`})}}catch(t){if(t instanceof Or)return;throw new Error(`Process execution failed for ${this.account.accountAddress.toString()} with error ${t}`)}}async checkTransaction(t,e){try{let n=[];n.push(jr({aptosConfig:this.aptosConfig,transactionHash:t.value.hash}));let r=await Promise.allSettled(n);for(let i=0;i<r.length;i+=1){let s=r[i];s.status===Xi?(this.executedTransactions.push([s.value.hash,e,null]),this.emit("transactionExecuted",{message:`transaction hash ${s.value.hash} has been executed on chain`,transactionHash:t.value.hash})):(this.executedTransactions.push([s.status,e,s.reason]),this.emit("transactionExecutionFailed",{message:`failed to execute transaction ${this.executedTransactions.length} with error ${s.reason}`,error:s.reason}))}}catch(n){throw new Error(`Check transaction failed for ${this.account.accountAddress.toString()} with error ${n}`)}}async push(t,e){this.transactionsQueue.enqueue([t,e])}async generateNextTransaction(t,e){if(this.transactionsQueue.isEmpty())return;let[n,r]=await this.transactionsQueue.dequeue();return P({aptosConfig:this.aptosConfig,sender:t.accountAddress,data:n,options:{...r,accountSequenceNumber:e}})}async run(){try{for(;!this.taskQueue.isCancelled();)await(await this.taskQueue.dequeue())()}catch(t){throw new Error(`Unable to start transaction batching: ${t}`)}}start(){if(this.started)throw new Error("worker has already started");this.started=!0,this.taskQueue.enqueue(()=>this.submitNextTransaction()),this.taskQueue.enqueue(()=>this.processTransactions()),this.run()}stop(){if(this.taskQueue.isCancelled())throw new Error("worker has already stopped");this.started=!1,this.taskQueue.cancel()}},th=class extends es{constructor(t){super(),this.config=t}start(t){let{sender:e}=t;this.account=e,this.transactionWorker=new eh(this.config,e),this.transactionWorker.start(),this.registerToEvents()}push(t){let{data:e,options:n}=t;for(let r of e)this.transactionWorker.push(r,n)}registerToEvents(){this.transactionWorker.on("transactionSent",async t=>{this.emit("transactionSent",t)}),this.transactionWorker.on("transactionSendFailed",async t=>{this.emit("transactionSendFailed",t)}),this.transactionWorker.on("transactionExecuted",async t=>{this.emit("transactionExecuted",t)}),this.transactionWorker.on("transactionExecutionFailed",async t=>{this.emit("transactionExecutionFailed",t)}),this.transactionWorker.on("executionFinish",async t=>{this.emit("executionFinish",t)})}forSingleAccount(t){try{let{sender:e,data:n,options:r}=t;this.start({sender:e}),this.push({data:n,options:r})}catch(e){throw new Error(`failed to submit transactions with error: ${e}`)}}},Na=class{constructor(e){this.config=e,this.build=new Xf(this.config),this.simulate=new qr(this.config),this.submit=new Kr(this.config),this.batch=new th(this.config)}async getTransactions(e){return Fc({aptosConfig:this.config,...e})}async getTransactionByVersion(e){return Dc({aptosConfig:this.config,...e})}async getTransactionByHash(e){return Gr({aptosConfig:this.config,...e})}async isPendingTransaction(e){return Mc({aptosConfig:this.config,...e})}async waitForTransaction(e){return jr({aptosConfig:this.config,...e})}async getGasPriceEstimation(){return bs({aptosConfig:this.config})}getSigningMessage(e){return Kf(e)}async publishPackageTransaction(e){return Ff({aptosConfig:this.config,...e})}async rotateAuthKey(e){return Mf({aptosConfig:this.config,...e})}sign(e){return Nr({...e})}signAsFeePayer(e){let{signer:n,transaction:r}=e;if(!r.feePayerAddress)throw new Error(`Transaction ${r} is not a Fee Payer transaction`);return r.feePayerAddress=n.accountAddress,Nr({signer:n,transaction:r})}async batchTransactionsForSingleAccount(e){try{let{sender:n,data:r,options:i}=e;this.batch.forSingleAccount({sender:n,data:r,options:i})}catch(n){throw new Error(`failed to submit transactions with error: ${n}`)}}async signAndSubmitTransaction(e){let{signer:n,transaction:r}=e;return li({aptosConfig:this.config,signer:n,transaction:r})}},Pa=class{constructor(e){this.config=e}async getAccountInfo(e){return It({aptosConfig:this.config,...e})}async getAccountModules(e){return Qd({aptosConfig:this.config,...e})}async getAccountModule(e){return Yo({aptosConfig:this.config,...e})}async getAccountTransactions(e){return Jd({aptosConfig:this.config,...e})}async getAccountResources(e){return ef({aptosConfig:this.config,...e})}async getAccountResource(e){return Xo({aptosConfig:this.config,...e})}async lookupOriginalAccountAddress(e){return Qo({aptosConfig:this.config,...e})}async getAccountTokensCount(e){return await K({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"account_transactions_processor"}),tf({aptosConfig:this.config,...e})}async getAccountOwnedTokens(e){return await K({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),nf({aptosConfig:this.config,...e})}async getAccountOwnedTokensFromCollectionAddress(e){return await K({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),rf({aptosConfig:this.config,...e})}async getAccountCollectionsWithOwnedTokens(e){return await K({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),sf({aptosConfig:this.config,...e})}async getAccountTransactionsCount(e){return await K({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"account_transactions_processor"}),of({aptosConfig:this.config,...e})}async getAccountCoinsData(e){return await K({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"fungible_asset_processor"}),Jo({aptosConfig:this.config,...e})}async getAccountCoinsCount(e){return await K({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"fungible_asset_processor"}),cf({aptosConfig:this.config,...e})}async getAccountAPTAmount(e){return this.getAccountCoinAmount({coinType:ms,...e})}async getAccountCoinAmount(e){return await K({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"fungible_asset_processor"}),af({aptosConfig:this.config,...e})}async getAccountOwnedObjects(e){return await K({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"default_processor"}),uf({aptosConfig:this.config,...e})}async deriveAccountFromPrivateKey(e){return lf({aptosConfig:this.config,...e})}},Qi=["A name must be between 3 and 63 characters long,","and can only contain lowercase a-z, 0-9, and hyphens.","A name may not start or end with a hyphen."].join(" ");function Ji(t){return!(!t||t.length<3||t.length>63||!/^[a-z\d][a-z\d-]{1,61}[a-z\d]$/.test(t))}function st(t){let[e,n,...r]=t.replace(/\.apt$/,"").split(".");if(r.length>0)throw new Error(`${t} is invalid. A name can only have two parts, a domain and a subdomain separated by a "."`);if(!Ji(e))throw new Error(`${e} is not valid. ${Qi}`);if(n&&!Ji(n))throw new Error(`${n} is not valid. ${Qi}`);return{domainName:n||e,subdomainName:n?e:void 0}}var nh="0x585fc9f0f0c54183b039ffc770ca282ebd87307916c215a3e692f2f8e4305e82",rh={testnet:"0x5f8fd2347449685cf41d4db97926ec3a096eaf381332be4f1318ad4d16a8497c",mainnet:"0x867ed1f6bf916171b1de3ee92849b8978b7d1b9e0a8cc982a3d19d535dfd9c0c",local:nh,custom:null,devnet:null,randomnet:null};function Me(t){let e=rh[t.network];if(!e)throw new Error(`The ANS contract is not deployed to ${t.network}`);return e}var Bn=t=>{if(t&&typeof t=="object"&&"vec"in t&&Array.isArray(t.vec))return t.vec[0]};async function ih(t){let{aptosConfig:e,name:n}=t,r=Me(e),{domainName:i,subdomainName:s}=st(n),o=await Pt({aptosConfig:e,payload:{function:`${r}::router::get_owner_addr`,functionArguments:[i,s]}}),a=Bn(o[0]);return a?w.from(a):void 0}async function sh(t){let{aptosConfig:e,expiration:n,name:r,sender:i,targetAddress:s,toAddress:o,options:a,transferable:c}=t,u=Me(e),{domainName:d,subdomainName:l}=st(r),h=n.policy==="subdomain:independent"||n.policy==="subdomain:follow-domain";if(l&&!h)throw new Error("Subdomains must have an expiration policy of either 'subdomain:independent' or 'subdomain:follow-domain'");if(h&&!l)throw new Error(`Policy is set to ${n.policy} but no subdomain was provided`);if(n.policy==="domain"){let f=n.years??1;if(f!==1)throw new Error("For now, names can only be registered for 1 year at a time");let p=f*31536e3;return await P({aptosConfig:e,sender:i.accountAddress.toString(),data:{function:`${u}::router::register_domain`,functionArguments:[d,p,s,o]},options:a})}if(!l)throw new Error(`${n.policy} requires a subdomain to be provided.`);let y=await qa({aptosConfig:e,name:d});if(!y)throw new Error("The domain does not exist");let m=n.policy==="subdomain:independent"?n.expirationDate:y;if(m>y)throw new Error("The subdomain expiration time cannot be greater than the domain expiration time");return await P({aptosConfig:e,sender:i.accountAddress.toString(),data:{function:`${u}::router::register_subdomain`,functionArguments:[d,l,Math.round(m/1e3),n.policy==="subdomain:follow-domain"?1:0,!!c,s,o]},options:a})}async function qa(t){let{aptosConfig:e,name:n}=t,r=Me(e),{domainName:i,subdomainName:s}=st(n);try{let o=await Pt({aptosConfig:e,payload:{function:`${r}::router::get_expiration`,functionArguments:[i,s]}});return Number(o[0])*1e3}catch{return}}async function oh(t){let{aptosConfig:e,address:n}=t,r=Me(e),i=await Pt({aptosConfig:e,payload:{function:`${r}::router::get_primary_name`,functionArguments:[w.from(n).toString()]}}),s=Bn(i[1]),o=Bn(i[0]);if(s)return[o,s].filter(Boolean).join(".")}async function ah(t){let{aptosConfig:e,sender:n,name:r,options:i}=t,s=Me(e);if(!r)return await P({aptosConfig:e,sender:n.accountAddress.toString(),data:{function:`${s}::router::clear_primary_name`,functionArguments:[]},options:i});let{domainName:o,subdomainName:a}=st(r);return await P({aptosConfig:e,sender:n.accountAddress.toString(),data:{function:`${s}::router::set_primary_name`,functionArguments:[o,a]},options:i})}async function ch(t){let{aptosConfig:e,name:n}=t,r=Me(e),{domainName:i,subdomainName:s}=st(n),o=await Pt({aptosConfig:e,payload:{function:`${r}::router::get_target_addr`,functionArguments:[i,s]}}),a=Bn(o[0]);return a?w.from(a):void 0}async function uh(t){let{aptosConfig:e,sender:n,name:r,address:i,options:s}=t,o=Me(e),{domainName:a,subdomainName:c}=st(r);return await P({aptosConfig:e,sender:n.accountAddress.toString(),data:{function:`${o}::router::set_target_addr`,functionArguments:[a,c,i]},options:s})}async function lh(t){let{aptosConfig:e,name:n}=t,{domainName:r,subdomainName:i=""}=st(n),s=(await N({aptosConfig:e,query:{query:Yt,variables:{where_condition:{domain:{_eq:r},subdomain:{_eq:i},is_active:{_eq:!0}},limit:1}},originMethod:"getName"})).current_aptos_names[0];return s&&(s=on(s)),s}async function dh(t){var s;let{aptosConfig:e,options:n,accountAddress:r}=t,i=await di({aptosConfig:e});return(await N({aptosConfig:e,originMethod:"getAccountNames",query:{query:Yt,variables:{limit:n==null?void 0:n.limit,offset:n==null?void 0:n.offset,order_by:n==null?void 0:n.orderBy,where_condition:{...((s=t.options)==null?void 0:s.where)??{},owner_address:{_eq:r.toString()},expiration_timestamp:{_gte:i}}}}})).current_aptos_names.map(on)}async function fh(t){var s;let{aptosConfig:e,options:n,accountAddress:r}=t,i=await di({aptosConfig:e});return(await N({aptosConfig:e,originMethod:"getAccountDomains",query:{query:Yt,variables:{limit:n==null?void 0:n.limit,offset:n==null?void 0:n.offset,order_by:n==null?void 0:n.orderBy,where_condition:{...((s=t.options)==null?void 0:s.where)??{},owner_address:{_eq:r.toString()},expiration_timestamp:{_gte:i},subdomain:{_eq:""}}}}})).current_aptos_names.map(on)}async function hh(t){var s;let{aptosConfig:e,options:n,accountAddress:r}=t,i=await di({aptosConfig:e});return(await N({aptosConfig:e,originMethod:"getAccountSubdomains",query:{query:Yt,variables:{limit:n==null?void 0:n.limit,offset:n==null?void 0:n.offset,order_by:n==null?void 0:n.orderBy,where_condition:{...((s=t.options)==null?void 0:s.where)??{},owner_address:{_eq:r.toString()},expiration_timestamp:{_gte:i},subdomain:{_neq:""}}}}})).current_aptos_names.map(on)}async function gh(t){var i;let{aptosConfig:e,options:n,domain:r}=t;return(await N({aptosConfig:e,originMethod:"getDomainSubdomains",query:{query:Yt,variables:{limit:n==null?void 0:n.limit,offset:n==null?void 0:n.offset,order_by:n==null?void 0:n.orderBy,where_condition:{...((i=t.options)==null?void 0:i.where)??{},domain:{_eq:r},subdomain:{_neq:""},is_active:{_eq:!0}}}}})).current_aptos_names.map(on)}async function di(t){let{aptosConfig:e}=t,n=Me(e),[r]=await Pt({aptosConfig:e,payload:{function:`${n}::config::reregistration_grace_sec`,functionArguments:[]}}),i=r/60/60/24,s=()=>new Date;return new Date(s().setDate(s().getDate()-i)).toISOString()}async function ph(t){let{aptosConfig:e,sender:n,name:r,years:i=1,options:s}=t,o=Me(e),a=i*31536e3,{domainName:c,subdomainName:u}=st(r);if(u)throw new Error("Subdomains cannot be renewed");if(i!==1)throw new Error("Currently, only 1 year renewals are supported");return await P({aptosConfig:e,sender:n.accountAddress.toString(),data:{function:`${o}::router::renew_domain`,functionArguments:[c,a]},options:s})}function on(t){return{...t,expiration_timestamp:new Date(t.expiration_timestamp).getTime()}}var Ka=class{constructor(t){this.config=t}async getOwnerAddress(t){return ih({aptosConfig:this.config,...t})}async getExpiration(t){return qa({aptosConfig:this.config,...t})}async getTargetAddress(t){return ch({aptosConfig:this.config,...t})}async setTargetAddress(t){return uh({aptosConfig:this.config,...t})}async getPrimaryName(t){return oh({aptosConfig:this.config,...t})}async setPrimaryName(t){return ah({aptosConfig:this.config,...t})}async registerName(t){return sh({aptosConfig:this.config,...t})}async renewDomain(t){return ph({aptosConfig:this.config,...t})}async getName(t){return lh({aptosConfig:this.config,...t})}async getAccountNames(t){return dh({aptosConfig:this.config,...t})}async getAccountDomains(t){return fh({aptosConfig:this.config,...t})}async getAccountSubdomains(t){return hh({aptosConfig:this.config,...t})}async getDomainSubdomains(t){return gh({aptosConfig:this.config,...t})}},yh=class{constructor(e){this.network=(e==null?void 0:e.network)??"devnet",this.fullnode=e==null?void 0:e.fullnode,this.faucet=e==null?void 0:e.faucet,this.indexer=e==null?void 0:e.indexer,this.client=(e==null?void 0:e.client)??{provider:Ya},this.clientConfig=(e==null?void 0:e.clientConfig)??{},this.fullnodeConfig=(e==null?void 0:e.fullnodeConfig)??{},this.indexerConfig=(e==null?void 0:e.indexerConfig)??{},this.faucetConfig=(e==null?void 0:e.faucetConfig)??{}}getRequestUrl(e){switch(e){case"Fullnode":if(this.fullnode!==void 0)return this.fullnode;if(this.network==="custom")throw new Error("Please provide a custom full node url");return Af[this.network];case"Faucet":if(this.faucet!==void 0)return this.faucet;if(this.network==="custom")throw new Error("Please provide a custom faucet url");return xf[this.network];case"Indexer":if(this.indexer!==void 0)return this.indexer;if(this.network==="custom")throw new Error("Please provide a custom indexer url");return _f[this.network];default:throw Error(`apiType ${e} is not supported`)}}},wh={typeParameters:[{constraints:[]}],parameters:[new pt,new rt]};async function mh(t){let{aptosConfig:e,sender:n,recipient:r,amount:i,coinType:s,options:o}=t;return P({aptosConfig:e,sender:n,data:{function:"0x1::aptos_account::transfer_coins",typeArguments:[s??ms],functionArguments:[r,i],abi:wh},options:o})}var Oa=class{constructor(e){this.config=e}async transferCoinTransaction(e){return mh({aptosConfig:this.config,...e})}},it={BOOLEAN:"bool",U8:"u8",U16:"u16",U32:"u32",U64:"u64",U128:"u128",U256:"u256",ADDRESS:"address",STRING:"0x1::string::String",ARRAY:"vector<u8>"},we="0x4::token::Token";async function bh(t){let{aptosConfig:e,digitalAssetAddress:n}=t,r={token_data_id:{_eq:w.from(n).toStringLong()}};return(await N({aptosConfig:e,query:{query:Ec,variables:{where_condition:r}},originMethod:"getDigitalAssetData"})).current_token_datas_v2[0]}async function _h(t){let{aptosConfig:e,digitalAssetAddress:n}=t,r={token_data_id:{_eq:w.from(n).toStringLong()},amount:{_gt:0}};return(await N({aptosConfig:e,query:{query:ds,variables:{where_condition:r}},originMethod:"getCurrentDigitalAssetOwnership"})).current_token_ownerships_v2[0]}async function Ah(t){let{aptosConfig:e,ownerAddress:n,options:r}=t,i={owner_address:{_eq:w.from(n).toStringLong()},amount:{_gt:0}},s={query:ds,variables:{where_condition:i,offset:r==null?void 0:r.offset,limit:r==null?void 0:r.limit,order_by:r==null?void 0:r.orderBy}};return(await N({aptosConfig:e,query:s,originMethod:"getOwnedDigitalAssets"})).current_token_ownerships_v2}async function xh(t){let{aptosConfig:e,digitalAssetAddress:n,options:r}=t,i={token_data_id:{_eq:w.from(n).toStringLong()}},s={query:$c,variables:{where_condition:i,offset:r==null?void 0:r.offset,limit:r==null?void 0:r.limit,order_by:r==null?void 0:r.orderBy}};return(await N({aptosConfig:e,query:s,originMethod:"getDigitalAssetActivity"})).token_activities_v2}var vh={typeParameters:[],parameters:[new C(F()),new rt,new C(F()),new C(F()),new he,new he,new he,new he,new he,new he,new he,new he,new he,new rt,new rt]};async function $h(t){let{aptosConfig:e,options:n,creator:r}=t;return P({aptosConfig:e,sender:r.accountAddress,data:{function:"0x4::aptos_token::create_collection",functionArguments:[new R(t.description),new qe(t.maxSupply??In),new R(t.name),new R(t.uri),new se(t.mutableDescription??!0),new se(t.mutableRoyalty??!0),new se(t.mutableURI??!0),new se(t.mutableTokenDescription??!0),new se(t.mutableTokenName??!0),new se(t.mutableTokenProperties??!0),new se(t.mutableTokenURI??!0),new se(t.tokensBurnableByCreator??!0),new se(t.tokensFreezableByCreator??!0),new qe(t.royaltyNumerator??0),new qe(t.royaltyDenominator??1)],abi:vh},options:n})}async function Fa(t){let{aptosConfig:e,creatorAddress:n,collectionName:r,options:i}=t,s=w.from(n),o={collection_name:{_eq:r},creator_address:{_eq:s.toStringLong()}};return i!=null&&i.tokenStandard&&(o.token_standard={_eq:(i==null?void 0:i.tokenStandard)??"v2"}),(await N({aptosConfig:e,query:{query:cs,variables:{where_condition:o}},originMethod:"getCollectionData"})).current_collections_v2[0]}async function Eh(t){let{aptosConfig:e,collectionId:n}=t,r={collection_id:{_eq:w.from(n).toStringLong()}};return(await N({aptosConfig:e,query:{query:cs,variables:{where_condition:r}},originMethod:"getCollectionData"})).current_collections_v2[0]}async function Sh(t){return(await Fa(t)).collection_id}var Uh={typeParameters:[],parameters:[new C(F()),new C(F()),new C(F()),new C(F()),new Z(new C(F())),new Z(new C(F())),new Z(Z.u8())]};async function Ch(t){let{aptosConfig:e,options:n,creator:r,collection:i,description:s,name:o,uri:a,propertyKeys:c,propertyTypes:u,propertyValues:d}=t,l=u==null?void 0:u.map(h=>it[h]);return P({aptosConfig:e,sender:r.accountAddress,data:{function:"0x4::aptos_token::mint",functionArguments:[new R(i),new R(s),new R(o),new R(a),D.MoveString(c??[]),D.MoveString(l??[]),Da(d??[],l??[])],abi:Uh},options:n})}var Th={typeParameters:[{constraints:["key"]}],parameters:[new C(ye(new ee(0))),new pt]};async function zh(t){let{aptosConfig:e,sender:n,digitalAssetAddress:r,recipient:i,digitalAssetType:s,options:o}=t;return P({aptosConfig:e,sender:n.accountAddress,data:{function:"0x1::object::transfer",typeArguments:[s??we],functionArguments:[w.from(r),w.from(i)],abi:Th},options:o})}var Bh={typeParameters:[],parameters:[new C(F()),new C(F()),new C(F()),new C(F()),new Z(new C(F())),new Z(new C(F())),new Z(Z.u8()),new pt]};async function kh(t){let{aptosConfig:e,account:n,collection:r,description:i,name:s,uri:o,recipient:a,propertyKeys:c,propertyTypes:u,propertyValues:d,options:l}=t;if((c==null?void 0:c.length)!==(d==null?void 0:d.length))throw new Error("Property keys and property values counts do not match");if((u==null?void 0:u.length)!==(d==null?void 0:d.length))throw new Error("Property types and property values counts do not match");let h=u==null?void 0:u.map(y=>it[y]);return P({aptosConfig:e,sender:n.accountAddress,data:{function:"0x4::aptos_token::mint_soul_bound",functionArguments:[r,i,s,o,D.MoveString(c??[]),D.MoveString(h??[]),Da(d??[],h??[]),a],abi:Bh},options:l})}var Ih={typeParameters:[{constraints:["key"]}],parameters:[new C(ye(new ee(0)))]};async function Lh(t){let{aptosConfig:e,creator:n,digitalAssetAddress:r,digitalAssetType:i,options:s}=t;return P({aptosConfig:e,sender:n.accountAddress,data:{function:"0x4::aptos_token::burn",typeArguments:[i??we],functionArguments:[w.from(r)],abi:Ih},options:s})}var Hh={typeParameters:[{constraints:["key"]}],parameters:[new C(ye(new ee(0)))]};async function Nh(t){let{aptosConfig:e,creator:n,digitalAssetAddress:r,digitalAssetType:i,options:s}=t;return P({aptosConfig:e,sender:n.accountAddress,data:{function:"0x4::aptos_token::freeze_transfer",typeArguments:[i??we],functionArguments:[r],abi:Hh},options:s})}var Ph={typeParameters:[{constraints:["key"]}],parameters:[new C(ye(new ee(0)))]};async function qh(t){let{aptosConfig:e,creator:n,digitalAssetAddress:r,digitalAssetType:i,options:s}=t;return P({aptosConfig:e,sender:n.accountAddress,data:{function:"0x4::aptos_token::unfreeze_transfer",typeArguments:[i??we],functionArguments:[r],abi:Ph},options:s})}var Kh={typeParameters:[{constraints:["key"]}],parameters:[new C(ye(new ee(0))),new C(F())]};async function Oh(t){let{aptosConfig:e,creator:n,description:r,digitalAssetAddress:i,digitalAssetType:s,options:o}=t;return P({aptosConfig:e,sender:n.accountAddress,data:{function:"0x4::aptos_token::set_description",typeArguments:[s??we],functionArguments:[w.from(i),new R(r)],abi:Kh},options:o})}var Fh={typeParameters:[{constraints:["key"]}],parameters:[new C(ye(new ee(0))),new C(F())]};async function Dh(t){let{aptosConfig:e,creator:n,name:r,digitalAssetAddress:i,digitalAssetType:s,options:o}=t;return P({aptosConfig:e,sender:n.accountAddress,data:{function:"0x4::aptos_token::set_name",typeArguments:[s??we],functionArguments:[w.from(i),new R(r)],abi:Fh},options:o})}var Mh={typeParameters:[{constraints:["key"]}],parameters:[new C(ye(new ee(0))),new C(F())]};async function Rh(t){let{aptosConfig:e,creator:n,uri:r,digitalAssetAddress:i,digitalAssetType:s,options:o}=t;return P({aptosConfig:e,sender:n.accountAddress,data:{function:"0x4::aptos_token::set_uri",typeArguments:[s??we],functionArguments:[w.from(i),new R(r)],abi:Mh},options:o})}var Vh={typeParameters:[{constraints:["key"]}],parameters:[new C(ye(new ee(0))),new C(F()),new C(F()),Z.u8()]};async function Gh(t){let{aptosConfig:e,creator:n,propertyKey:r,propertyType:i,propertyValue:s,digitalAssetAddress:o,digitalAssetType:a,options:c}=t;return P({aptosConfig:e,sender:n.accountAddress,data:{function:"0x4::aptos_token::add_property",typeArguments:[a??we],functionArguments:[w.from(o),new R(r),new R(it[i]),D.U8(fi(s,it[i]))],abi:Vh},options:c})}var jh={typeParameters:[{constraints:["key"]}],parameters:[new C(ye(new ee(0))),new C(F())]};async function Wh(t){let{aptosConfig:e,creator:n,propertyKey:r,digitalAssetAddress:i,digitalAssetType:s,options:o}=t;return P({aptosConfig:e,sender:n.accountAddress,data:{function:"0x4::aptos_token::remove_property",typeArguments:[s??we],functionArguments:[w.from(i),new R(r)],abi:jh},options:o})}var Zh={typeParameters:[{constraints:["key"]}],parameters:[new C(ye(new ee(0))),new C(F()),new C(F()),Z.u8()]};async function Yh(t){let{aptosConfig:e,creator:n,propertyKey:r,propertyType:i,propertyValue:s,digitalAssetAddress:o,digitalAssetType:a,options:c}=t;return P({aptosConfig:e,sender:n.accountAddress,data:{function:"0x4::aptos_token::update_property",typeArguments:[a??we],functionArguments:[w.from(o),new R(r),new R(it[i]),fi(s,it[i])],abi:Zh},options:c})}var Xh={typeParameters:[{constraints:["key"]},{constraints:[]}],parameters:[new C(ye(new ee(0))),new C(F()),new ee(1)]};async function Qh(t){let{aptosConfig:e,creator:n,propertyKey:r,propertyType:i,propertyValue:s,digitalAssetAddress:o,digitalAssetType:a,options:c}=t;return P({aptosConfig:e,sender:n.accountAddress,data:{function:"0x4::aptos_token::add_typed_property",typeArguments:[a??we,it[i]],functionArguments:[w.from(o),new R(r),s],abi:Xh},options:c})}var Jh={typeParameters:[{constraints:["key"]},{constraints:[]}],parameters:[new C(ye(new ee(0))),new C(F()),new ee(1)]};async function eg(t){let{aptosConfig:e,creator:n,propertyKey:r,propertyType:i,propertyValue:s,digitalAssetAddress:o,digitalAssetType:a,options:c}=t;return P({aptosConfig:e,sender:n.accountAddress,data:{function:"0x4::aptos_token::update_typed_property",typeArguments:[a??we,it[i]],functionArguments:[w.from(o),new R(r),s],abi:Jh},options:c})}function Da(t,e){let n=new Array;return e.forEach((r,i)=>{n.push(fi(t[i],r))}),n}function fi(t,e){let n=Ut(e);return Gt(t,n,0,[]).bcsToBytes()}var Ma=class{constructor(t){this.config=t}async getCollectionData(t){return await K({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"token_v2_processor"}),Fa({aptosConfig:this.config,...t})}async getCollectionDataByCollectionId(t){return await K({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"token_v2_processor"}),Eh({aptosConfig:this.config,...t})}async getCollectionId(t){return await K({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"token_v2_processor"}),Sh({aptosConfig:this.config,...t})}async getDigitalAssetData(t){return await K({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"token_v2_processor"}),bh({aptosConfig:this.config,...t})}async getCurrentDigitalAssetOwnership(t){return await K({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"token_v2_processor"}),_h({aptosConfig:this.config,...t})}async getOwnedDigitalAssets(t){return await K({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"token_v2_processor"}),Ah({aptosConfig:this.config,...t})}async getDigitalAssetActivity(t){return await K({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"token_v2_processor"}),xh({aptosConfig:this.config,...t})}async createCollectionTransaction(t){return $h({aptosConfig:this.config,...t})}async mintDigitalAssetTransaction(t){return Ch({aptosConfig:this.config,...t})}async transferDigitalAssetTransaction(t){return zh({aptosConfig:this.config,...t})}async mintSoulBoundTransaction(t){return kh({aptosConfig:this.config,...t})}async burnDigitalAssetTransaction(t){return Lh({aptosConfig:this.config,...t})}async freezeDigitalAssetTransaferTransaction(t){return Nh({aptosConfig:this.config,...t})}async unfreezeDigitalAssetTransaferTransaction(t){return qh({aptosConfig:this.config,...t})}async setDigitalAssetDescriptionTransaction(t){return Oh({aptosConfig:this.config,...t})}async setDigitalAssetNameTransaction(t){return Dh({aptosConfig:this.config,...t})}async setDigitalAssetURITransaction(t){return Rh({aptosConfig:this.config,...t})}async addDigitalAssetPropertyTransaction(t){return Gh({aptosConfig:this.config,...t})}async removeDigitalAssetPropertyTransaction(t){return Wh({aptosConfig:this.config,...t})}async updateDigitalAssetPropertyTransaction(t){return Yh({aptosConfig:this.config,...t})}async addDigitalAssetTypedPropertyTransaction(t){return Qh({aptosConfig:this.config,...t})}async updateDigitalAssetTypedPropertyTransaction(t){return eg({aptosConfig:this.config,...t})}},ze=class{constructor(t){this.config=new yh(t),this.account=new Pa(this.config),this.ans=new Ka(this.config),this.coin=new Oa(this.config),this.digitalAsset=new Ma(this.config),this.event=new As(this.config),this.faucet=new xs(this.config),this.fungibleAsset=new Ia(this.config),this.general=new La(this.config),this.staking=new Ha(this.config),this.transaction=new Na(this.config)}};function Be(t,e,n){Object.getOwnPropertyNames(e.prototype).forEach(r=>{let i=Object.getOwnPropertyDescriptor(e.prototype,r);i&&(i.value=function(...s){return this[n][r](...s)},Object.defineProperty(t.prototype,r,i))})}Be(ze,Pa,"account");Be(ze,Ka,"ans");Be(ze,Oa,"coin");Be(ze,Ma,"digitalAsset");Be(ze,As,"event");Be(ze,xs,"faucet");Be(ze,Ia,"fungibleAsset");Be(ze,La,"general");Be(ze,Ha,"staking");Be(ze,Na,"transaction");var tg=(t=>(t.JSON="application/json",t.BCS="application/x-bcs",t.BCS_SIGNED_TRANSACTION="application/x.aptos.signed_transaction+bcs",t.BCS_VIEW_FUNCTION="application/x.aptos.view_function+bcs",t))(tg||{}),ng=(t=>(t[t.Bool=0]="Bool",t[t.U8=1]="U8",t[t.U64=2]="U64",t[t.U128=3]="U128",t[t.Address=4]="Address",t[t.Signer=5]="Signer",t[t.Vector=6]="Vector",t[t.Struct=7]="Struct",t[t.U16=8]="U16",t[t.U32=9]="U32",t[t.U256=10]="U256",t[t.Reference=254]="Reference",t[t.Generic=255]="Generic",t))(ng||{}),rg=(t=>(t[t.U8=0]="U8",t[t.U64=1]="U64",t[t.U128=2]="U128",t[t.Address=3]="Address",t[t.U8Vector=4]="U8Vector",t[t.Bool=5]="Bool",t[t.U16=6]="U16",t[t.U32=7]="U32",t[t.U256=8]="U256",t))(rg||{}),ig=(t=>(t[t.Script=0]="Script",t[t.EntryFunction=2]="EntryFunction",t[t.Multisig=3]="Multisig",t))(ig||{}),sg=(t=>(t[t.MultiAgentTransaction=0]="MultiAgentTransaction",t[t.FeePayerTransaction=1]="FeePayerTransaction",t))(sg||{}),og=(t=>(t[t.Ed25519=0]="Ed25519",t[t.MultiEd25519=1]="MultiEd25519",t[t.MultiAgent=2]="MultiAgent",t[t.FeePayer=3]="FeePayer",t[t.SingleSender=4]="SingleSender",t))(og||{}),ag=(t=>(t[t.Ed25519=0]="Ed25519",t[t.MultiEd25519=1]="MultiEd25519",t[t.SingleKey=2]="SingleKey",t[t.MultiKey=3]="MultiKey",t))(ag||{}),cg=(t=>(t[t.Ed25519=0]="Ed25519",t[t.Secp256k1=1]="Secp256k1",t))(cg||{}),ug=(t=>(t[t.Ed25519=0]="Ed25519",t[t.Secp256k1=1]="Secp256k1",t))(ug||{}),lg=(t=>(t.Pending="pending_transaction",t.User="user_transaction",t.Genesis="genesis_transaction",t.BlockMetadata="block_metadata_transaction",t.StateCheckpoint="state_checkpoint_transaction",t.Validator="validator_transaction",t))(lg||{}),dg=(t=>(t.PRIVATE="private",t.PUBLIC="public",t.FRIEND="friend",t))(dg||{}),fg=(t=>(t.STORE="store",t.DROP="drop",t.KEY="key",t.COPY="copy",t))(fg||{}),hg=(t=>(t.VALIDATOR="validator",t.FULL_NODE="full_node",t))(hg||{}),gg=(t=>(t[t.Ed25519=0]="Ed25519",t[t.MultiEd25519=1]="MultiEd25519",t[t.SingleKey=2]="SingleKey",t[t.MultiKey=3]="MultiKey",t))(gg||{}),pg=(t=>(t[t.Ed25519=0]="Ed25519",t[t.Secp256k1Ecdsa=2]="Secp256k1Ecdsa",t))(pg||{}),yg=(t=>(t[t.DeriveAuid=251]="DeriveAuid",t[t.DeriveObjectAddressFromObject=252]="DeriveObjectAddressFromObject",t[t.DeriveObjectAddressFromGuid=253]="DeriveObjectAddressFromGuid",t[t.DeriveObjectAddressFromSeed=254]="DeriveObjectAddressFromSeed",t[t.DeriveResourceAccountAddress=255]="DeriveResourceAccountAddress",t))(yg||{});export{L as B,gg as R,Ct as U,ze as a,ht as b,w as c,Ao as d,vf as e,Xd as f,Hg as g,ae as h,pg as i,Ku as m,xn as o,yh as t};
