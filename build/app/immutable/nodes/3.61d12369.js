import{S as Pe,i as We,s as qe,k as u,q as L,a as V,l as f,m as _,r as N,h as a,c as I,n as m,M as Ae,b as S,D as s,L as Ie,H as Ce,N as Fe,y as te,z as le,A as se,d as F,f as ze,g as z,B as ae,o as Je,v as Qe,u as _e,J as Ke}from"../chunks/index.831d07df.js";import{H as Xe}from"../chunks/Header.4364769c.js";import{N as Ye,B as Ze,S as et}from"../chunks/NoReviewFound.6aeca16c.js";import{f as tt,G as lt}from"../chunks/queries.ea52ebc0.js";function st(b){let t,l,r,n,v,i,c,k,h,o,p,d,g;return{c(){t=u("div"),l=u("button"),r=L("Reviews"),n=V(),v=u("div"),i=u("div"),c=u("button"),k=L("✕"),h=V(),o=u("h3"),p=L("Reviews"),this.h()},l(D){t=f(D,"DIV",{class:!0});var x=_(t);l=f(x,"BUTTON",{class:!0});var A=_(l);r=N(A,"Reviews"),A.forEach(a),n=I(x),v=f(x,"DIV",{class:!0});var U=_(v);i=f(U,"DIV",{class:!0});var $=_(i);c=f($,"BUTTON",{class:!0});var O=_(c);k=N(O,"✕"),O.forEach(a),h=I($),o=f($,"H3",{class:!0});var w=_(o);p=N(w,"Reviews"),w.forEach(a),$.forEach(a),U.forEach(a),x.forEach(a),this.h()},h(){m(l,"class","btn px-4 py-2 rounded-md "),m(c,"class","btn btn-sm btn-circle absolute right-2 top-2"),m(o,"class","font-bold text-3xl mt-5"),m(i,"class","modal-box bg-white text-black dark:bg-gray-900 dark:text-white"),m(v,"class","modal modal-bottom sm:modal-middle"),Ae(v,"modal-open",b[0]),m(t,"class","grid flex-grow")},m(D,x){S(D,t,x),s(t,l),s(l,r),s(t,n),s(t,v),s(v,i),s(i,c),s(c,k),s(i,h),s(i,o),s(o,p),d||(g=[Ie(l,"click",b[1]),Ie(c,"click",b[2])],d=!0)},p(D,[x]){x&1&&Ae(v,"modal-open",D[0])},i:Ce,o:Ce,d(D){D&&a(t),d=!1,Fe(g)}}}function at(b,t,l){let r=!1;return[r,()=>{l(0,r=!0)},()=>{l(0,r=!1)}]}class rt extends Pe{constructor(t){super(),We(this,t,at,st,qe,{})}}async function ot(){return new Promise(b=>{chrome.tabs.captureVisibleTab(null,{},function(t){b(t)})})}const nt=()=>{ot()};function Ge(b,t,l){const r=b.slice();return r[15]=t[l][0],r[16]=t[l][1],r}function it(b){let t,l;return t=new Ye({props:{error:b[0]}}),{c(){te(t.$$.fragment)},l(r){le(t.$$.fragment,r)},m(r,n){se(t,r,n),l=!0},p(r,n){const v={};n&1&&(v.error=r[0]),t.$set(v)},i(r){l||(z(t.$$.fragment,r),l=!0)},o(r){F(t.$$.fragment,r),l=!1},d(r){ae(t,r)}}}function ct(b){let t,l,r,n,v,i=(b[2]??"loading..")+"",c,k,h,o,p,d,g,D=(b[3]??"...")+"",x,A,U,$,O,w,y,J,Z=(b[6]??"Loading..")+"",re,me,C,oe,ne,ie,M,B,Q,be,pe,ge,we,ce,j,P,Ee,W,ke,K,$e,ue,fe,de,ve,q,ye,Re;C=new Ze({props:{data:b[5],type:"donut"}});let X=Object.entries(b[4]),R=[];for(let e=0;e<X.length;e+=1)R[e]=Me(Ge(b,X,e));return P=new rt({}),W=new et({}),{c(){t=u("div"),l=u("div"),r=u("div"),n=u("div"),v=u("h1"),c=L(i),k=V(),h=u("div"),o=u("div"),p=u("div"),d=u("div"),g=u("p"),x=L(D),A=L("/5"),U=V(),$=u("br"),O=V(),w=u("div"),y=u("div"),J=u("h1"),re=L(Z),me=V(),te(C.$$.fragment),oe=V(),ne=u("br"),ie=V(),M=u("div"),B=u("div"),Q=u("h2"),be=L("What people say"),pe=V(),ge=u("br"),we=V();for(let e=0;e<R.length;e+=1)R[e].c();ce=V(),j=u("div"),te(P.$$.fragment),Ee=V(),te(W.$$.fragment),ke=V(),K=u("button"),$e=L("Screenshot"),ue=V(),fe=u("br"),de=V(),ve=u("br"),this.h()},l(e){t=f(e,"DIV",{class:!0});var E=_(t);l=f(E,"DIV",{class:!0});var H=_(l);r=f(H,"DIV",{class:!0});var T=_(r);n=f(T,"DIV",{class:!0});var ee=_(n);v=f(ee,"H1",{class:!0});var Se=_(v);c=N(Se,i),Se.forEach(a),ee.forEach(a),T.forEach(a),H.forEach(a),k=I(E),h=f(E,"DIV",{class:!0});var xe=_(h);o=f(xe,"DIV",{class:!0});var Te=_(o);p=f(Te,"DIV",{class:!0});var Be=_(p);d=f(Be,"DIV",{class:!0});var Oe=_(d);g=f(Oe,"P",{class:!0});var De=_(g);x=N(De,D),A=N(De,"/5"),De.forEach(a),Oe.forEach(a),Be.forEach(a),Te.forEach(a),xe.forEach(a),E.forEach(a),U=I(e),$=f(e,"BR",{}),O=I(e),w=f(e,"DIV",{class:!0});var je=_(w);y=f(je,"DIV",{class:!0});var he=_(y);J=f(he,"H1",{class:!0});var He=_(J);re=N(He,Z),He.forEach(a),me=I(he),le(C.$$.fragment,he),he.forEach(a),je.forEach(a),oe=I(e),ne=f(e,"BR",{}),ie=I(e),M=f(e,"DIV",{class:!0});var Le=_(M);B=f(Le,"DIV",{class:!0});var G=_(B);Q=f(G,"H2",{class:!0});var Ne=_(Q);be=N(Ne,"What people say"),Ne.forEach(a),pe=I(G),ge=f(G,"BR",{}),we=I(G);for(let Ve=0;Ve<R.length;Ve+=1)R[Ve].l(G);ce=I(G),j=f(G,"DIV",{class:!0});var Y=_(j);le(P.$$.fragment,Y),Ee=I(Y),le(W.$$.fragment,Y),ke=I(Y),K=f(Y,"BUTTON",{});var Ue=_(K);$e=N(Ue,"Screenshot"),Ue.forEach(a),Y.forEach(a),G.forEach(a),Le.forEach(a),ue=I(e),fe=f(e,"BR",{}),de=I(e),ve=f(e,"BR",{}),this.h()},h(){m(v,"class","font-bold text-lg overflow-hidden"),m(n,"class","block rounded-lg dark:bg-gray-900 dark:text-white shadow-lg p-4 w-auto h-auto content-around"),m(r,"class","justify-center"),m(l,"class","flex-1 w-72"),m(g,"class","font-bold text-lg"),m(d,"class","rounded-full shadow-lg w-6 h-auto"),m(p,"class","block rounded-lg shadow-lg p-4 w-auto h-auto content-around"),m(o,"class","flex justify-center"),m(h,"class","flex-none"),m(t,"class","flex gap-4"),m(J,"class","font-bold text-3xl text-center uppercase"),m(y,"class","block rounded-lg shadow-lg p-5 w-auto h-auto"),m(w,"class","justify-center"),m(Q,"class","py-3 px-5 text-lg font-bold text-center"),m(j,"class","card-actions justify-center"),m(B,"class","card-body"),m(M,"class","w-auto shadow-xl rounded-lg")},m(e,E){S(e,t,E),s(t,l),s(l,r),s(r,n),s(n,v),s(v,c),s(t,k),s(t,h),s(h,o),s(o,p),s(p,d),s(d,g),s(g,x),s(g,A),S(e,U,E),S(e,$,E),S(e,O,E),S(e,w,E),s(w,y),s(y,J),s(J,re),s(y,me),se(C,y,null),S(e,oe,E),S(e,ne,E),S(e,ie,E),S(e,M,E),s(M,B),s(B,Q),s(Q,be),s(B,pe),s(B,ge),s(B,we);for(let H=0;H<R.length;H+=1)R[H]&&R[H].m(B,null);s(B,ce),s(B,j),se(P,j,null),s(j,Ee),se(W,j,null),s(j,ke),s(j,K),s(K,$e),S(e,ue,E),S(e,fe,E),S(e,de,E),S(e,ve,E),q=!0,ye||(Re=Ie(K,"click",nt),ye=!0)},p(e,E){(!q||E&4)&&i!==(i=(e[2]??"loading..")+"")&&_e(c,i),(!q||E&8)&&D!==(D=(e[3]??"...")+"")&&_e(x,D),(!q||E&64)&&Z!==(Z=(e[6]??"Loading..")+"")&&_e(re,Z);const H={};if(E&32&&(H.data=e[5]),C.$set(H),E&18){X=Object.entries(e[4]);let T;for(T=0;T<X.length;T+=1){const ee=Ge(e,X,T);R[T]?R[T].p(ee,E):(R[T]=Me(ee),R[T].c(),R[T].m(B,ce))}for(;T<R.length;T+=1)R[T].d(1);R.length=X.length}},i(e){q||(z(C.$$.fragment,e),z(P.$$.fragment,e),z(W.$$.fragment,e),q=!0)},o(e){F(C.$$.fragment,e),F(P.$$.fragment,e),F(W.$$.fragment,e),q=!1},d(e){e&&a(t),e&&a(U),e&&a($),e&&a(O),e&&a(w),ae(C),e&&a(oe),e&&a(ne),e&&a(ie),e&&a(M),Ke(R,e),ae(P),ae(W),e&&a(ue),e&&a(fe),e&&a(de),e&&a(ve),ye=!1,Re()}}}function Me(b){let t,l,r=b[15].toLocaleUpperCase()+"",n,v,i,c,k;return{c(){t=u("div"),l=u("div"),n=L(r),v=V(),i=u("div"),c=u("progress"),this.h()},l(h){t=f(h,"DIV",{class:!0});var o=_(t);l=f(o,"DIV",{class:!0});var p=_(l);n=N(p,r),p.forEach(a),v=I(o),i=f(o,"DIV",{class:!0});var d=_(i);c=f(d,"PROGRESS",{class:!0,max:!0}),_(c).forEach(a),d.forEach(a),o.forEach(a),this.h()},h(){var h;m(l,"class","flex-none w-28 h-14 font-semibold"),m(c,"class","progress w-40"),c.value=k=b[16]/((h=b[1])==null?void 0:h.length)*100,m(c,"max","100"),m(i,"class","flex-initial w-auto ..."),m(t,"class","flex")},m(h,o){S(h,t,o),s(t,l),s(l,n),s(t,v),s(t,i),s(i,c)},p(h,o){var p;o&16&&r!==(r=h[15].toLocaleUpperCase()+"")&&_e(n,r),o&18&&k!==(k=h[16]/((p=h[1])==null?void 0:p.length)*100)&&(c.value=k)},d(h){h&&a(t)}}}function ut(b){let t,l,r,n,v,i,c,k;l=new Xe({});const h=[ct,it],o=[];function p(d,g){return d[0].length<1?0:1}return i=p(b),c=o[i]=h[i](b),{c(){t=u("div"),te(l.$$.fragment),r=V(),n=u("br"),v=V(),c.c(),this.h()},l(d){t=f(d,"DIV",{class:!0});var g=_(t);le(l.$$.fragment,g),r=I(g),n=f(g,"BR",{}),v=I(g),c.l(g),g.forEach(a),this.h()},h(){m(t,"class","p-5 mb-5 pb-5")},m(d,g){S(d,t,g),se(l,t,null),s(t,r),s(t,n),s(t,v),o[i].m(t,null),k=!0},p(d,[g]){let D=i;i=p(d),i===D?o[i].p(d,g):(Qe(),F(o[D],1,1,()=>{o[D]=null}),ze(),c=o[i],c?c.p(d,g):(c=o[i]=h[i](d),c.c()),z(c,1),c.m(t,null))},i(d){k||(z(l.$$.fragment,d),z(c),k=!0)},o(d){F(l.$$.fragment,d),F(c),k=!1},d(d){d&&a(t),ae(l),o[i].d()}}}function ft(b,t,l){let{error:r=""}=t,n,v,i=[],c=[],k,h,o={},p={},d={labels:[],datasets:[{values:[]}]},g;const D=async()=>{let $=await tt(lt,{url:k});if($.reviewCreateds.length<1){l(0,r="No reviews found..");return}l(1,n=$.reviewCreateds),A(),U()},x=async()=>{const[$]=await chrome.tabs.query({active:!0,currentWindow:!0});k=$.url},A=()=>{if(n!=null&&n.length){let $=[];n==null||n.map(y=>{$.push(y.siteTag)});for(let y of $)o[y]?l(4,o[y]+=1,o):l(4,o[y]=1,o);let O=0;for(let y of Object.keys(o))O+=o[y];let w=o.genuine?o.genuine:0;l(3,h=Math.round(w/O*5))}},U=()=>{if(n!=null&&n.length){let $=[];n==null||n.map(w=>{$.push(w.siteSafety)});for(let w of $)p[w]?p[w]+=1:p[w]=1;let O=0;for(let w of Object.keys(p))O+=p[w];for(let[w,y]of Object.entries(p))c.push(w),i.push(y);l(6,g=Object.entries(p).reduce((w,y)=>y[1]>w[1]?y:w)[0]),l(5,d={labels:c,datasets:[{values:i}]})}};return Je(async()=>{await x(),await D(),l(2,v=(k==null?void 0:k.substring(0,23))+"...")}),b.$$set=$=>{"error"in $&&l(0,r=$.error)},[r,n,v,h,o,d,g]}class mt extends Pe{constructor(t){super(),We(this,t,ft,ut,qe,{error:0})}}export{mt as component};
