import{S as z,i as G,s as M,k as g,a as A,e as _e,l as v,m as b,h as f,c as V,n as w,b as I,H as D,J as ce,I as Ie,o as ne,q as S,r as L,D as h,K as ue,u as ee,L as le,y as Q,z as X,A as Z,v as De,d as H,f as Te,g as O,B as x}from"../chunks/index.89e71670.js";import{c as We,H as Re}from"../chunks/Header.cf7b0240.js";import{L as Ae}from"../chunks/Loader.ef1f0f41.js";import{w as Ve}from"../chunks/index.41201598.js";import{P as Pe}from"../chunks/public.6087a87e.js";const Se=!0,nt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Se},Symbol.toStringTag,{value:"Module"}));function ge(l,e,r){const t=l.slice();return t[6]=e[r].id,t}function ve(l,e,r){const t=l.slice();return t[6]=e[r].id,t[9]=e[r].label,t}function be(l){let e,r=l[9]+"",t,s,o,c,i;function n(){return l[4](l[6])}return{c(){e=g("button"),t=S(r),s=A(),this.h()},l(u){e=v(u,"BUTTON",{class:!0});var a=b(e);t=L(a,r),s=V(a),a.forEach(f),this.h()},h(){w(e,"class",o=`tab ${l[1]===l[6]?"active":""}`)},m(u,a){I(u,e,a),h(e,t),h(e,s),c||(i=ue(e,"click",n),c=!0)},p(u,a){l=u,a&1&&r!==(r=l[9]+"")&&ee(t,r),a&3&&o!==(o=`tab ${l[1]===l[6]?"active":""}`)&&w(e,"class",o)},d(u){u&&f(e),c=!1,i()}}}function we(l){let e,r;return{c(){e=g("div"),this.h()},l(t){e=v(t,"DIV",{class:!0,id:!0});var s=b(e);s.forEach(f),this.h()},h(){w(e,"class","tab-content"),w(e,"id",r=`tab-content-${l[6]}`),le(e,"show",l[1]===l[6])},m(t,s){I(t,e,s)},p(t,s){s&1&&r!==(r=`tab-content-${t[6]}`)&&w(e,"id",r),s&3&&le(e,"show",t[1]===t[6])},d(t){t&&f(e)}}}function Le(l){let e,r,t,s=l[0],o=[];for(let n=0;n<s.length;n+=1)o[n]=be(ve(l,s,n));let c=l[0],i=[];for(let n=0;n<c.length;n+=1)i[n]=we(ge(l,c,n));return{c(){e=g("div");for(let n=0;n<o.length;n+=1)o[n].c();r=A();for(let n=0;n<i.length;n+=1)i[n].c();t=_e(),this.h()},l(n){e=v(n,"DIV",{class:!0});var u=b(e);for(let a=0;a<o.length;a+=1)o[a].l(u);u.forEach(f),r=V(n);for(let a=0;a<i.length;a+=1)i[a].l(n);t=_e(),this.h()},h(){w(e,"class","p-1 flex border border-[#263238] dark:border-[#11D9C5] rounded-md mb-6 mx-auto w-11/12")},m(n,u){I(n,e,u);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);I(n,r,u);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(n,u);I(n,t,u)},p(n,[u]){if(u&11){s=n[0];let a;for(a=0;a<s.length;a+=1){const p=ve(n,s,a);o[a]?o[a].p(p,u):(o[a]=be(p),o[a].c(),o[a].m(e,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=s.length}if(u&3){c=n[0];let a;for(a=0;a<c.length;a+=1){const p=ge(n,c,a);i[a]?i[a].p(p,u):(i[a]=we(p),i[a].c(),i[a].m(t.parentNode,t))}for(;a<i.length;a+=1)i[a].d(1);i.length=c.length}},i:D,o:D,d(n){n&&f(e),ce(o,n),n&&f(r),ce(i,n),n&&f(t)}}}function Ue(l,e,r){let t,{tabs:s=[]}=e,o=Ve(s.length>0?s[0].id:null);Ie(l,o,n=>r(1,t=n));function c(n){o.set(n)}ne(()=>{s.forEach(({id:n,component:u,props:a})=>{const p=document.getElementById(`tab-content-${n}`);p&&new u({target:p,props:a})})});const i=n=>c(n);return l.$$set=n=>{"tabs"in n&&r(0,s=n.tabs)},[s,t,o,c,i]}class je extends z{constructor(e){super(),G(this,e,Ue,Le,M,{tabs:0})}}function Ce(l){let e,r,t,s,o;return{c(){e=g("div"),r=g("button"),t=S("read reviews"),this.h()},l(c){e=v(c,"DIV",{class:!0});var i=b(e);r=v(i,"BUTTON",{class:!0});var n=b(r);t=L(n,"read reviews"),n.forEach(f),i.forEach(f),this.h()},h(){w(r,"class","btn secondary-button"),w(e,"class","grid flex-grow")},m(c,i){I(c,e,i),h(e,r),h(r,t),s||(o=ue(r,"click",l[0]),s=!0)},p:D,i:D,o:D,d(c){c&&f(e),s=!1,o()}}}function Ne(l,e,r){let{urlWithoutProtocol:t}=e;function s(){window.open(`https://app.netsepio.com/#/reviews/${t}`,"_blank")}return l.$$set=o=>{"urlWithoutProtocol"in o&&r(1,t=o.urlWithoutProtocol)},[s,t]}class Be extends z{constructor(e){super(),G(this,e,Ne,Ce,M,{urlWithoutProtocol:1})}}function Fe(l){let e,r,t,s,o;return{c(){e=g("div"),r=g("button"),t=S("Submit Review"),this.h()},l(c){e=v(c,"DIV",{class:!0});var i=b(e);r=v(i,"BUTTON",{class:!0});var n=b(r);t=L(n,"Submit Review"),n.forEach(f),i.forEach(f),this.h()},h(){w(r,"class","btn primary-button"),w(e,"class","grid flex-grow")},m(c,i){I(c,e,i),h(e,r),h(r,t),s||(o=ue(r,"click",l[0]),s=!0)},p:D,i:D,o:D,d(c){c&&f(e),s=!1,o()}}}function He(l,e,r){let{urlWithoutProtocol:t}=e;function s(){window.open(`https://app.netsepio.com/#/my-reviews?siteUrl=https://${t}`,"_blank")}return l.$$set=o=>{"urlWithoutProtocol"in o&&r(1,t=o.urlWithoutProtocol)},[s,t]}class Oe extends z{constructor(e){super(),G(this,e,He,Fe,M,{urlWithoutProtocol:1})}}function $e(l,e,r){const t=l.slice();return t[11]=e[r],t}function ye(l){let e,r,t=l[11].description+"",s,o;return{c(){e=g("div"),r=g("p"),s=S(t),o=A(),this.h()},l(c){e=v(c,"DIV",{class:!0});var i=b(e);r=v(i,"P",{});var n=b(r);s=L(n,t),n.forEach(f),o=V(i),i.forEach(f),this.h()},h(){w(e,"class","reviews")},m(c,i){I(c,e,i),h(e,r),h(r,s),h(e,o)},p(c,i){i&1&&t!==(t=c[11].description+"")&&ee(s,t)},d(c){c&&f(e)}}}function qe(l){let e,r,t;return{c(){e=g("a"),r=g("button"),t=S("Submit Review"),this.h()},l(s){e=v(s,"A",{href:!0});var o=b(e);r=v(o,"BUTTON",{class:!0});var c=b(r);t=L(c,"Submit Review"),c.forEach(f),o.forEach(f),this.h()},h(){w(r,"class","btn primary-button"),w(e,"href","/submit-review")},m(s,o){I(s,e,o),h(e,r),h(r,t)},p:D,i:D,o:D,d(s){s&&f(e)}}}function ze(l){let e,r;return e=new Oe({props:{urlWithoutProtocol:l[4]}}),{c(){Q(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,s){Z(e,t,s),r=!0},p(t,s){const o={};s&16&&(o.urlWithoutProtocol=t[4]),e.$set(o)},i(t){r||(O(e.$$.fragment,t),r=!0)},o(t){H(e.$$.fragment,t),r=!1},d(t){x(e,t)}}}function Ge(l){let e,r,t,s,o,c,i,n,u,a,p,_,d,P,k,C,re,te,U,q,j,N,ae,T,W,J,K=l[0].slice(0,2),$=[];for(let m=0;m<K.length;m+=1)$[m]=ye($e(l,K,m));N=new Be({props:{urlWithoutProtocol:l[4]}});const fe=[ze,qe],B=[];function he(m,y){return m[3]==!1?0:1}return T=he(l),W=B[T]=fe[T](l),{c(){e=g("div"),r=g("div"),t=g("div"),s=g("h3"),o=S("Ratings"),c=A(),i=g("span"),n=S(l[2]),u=S("% safe"),a=A(),p=g("div"),_=g("span"),P=A(),k=g("div"),C=g("h3"),re=S("Reviews"),te=A(),U=g("div");for(let m=0;m<$.length;m+=1)$[m].c();q=A(),j=g("div"),Q(N.$$.fragment),ae=A(),W.c(),this.h()},l(m){e=v(m,"DIV",{});var y=b(e);r=v(y,"DIV",{});var R=b(r);t=v(R,"DIV",{class:!0});var F=b(t);s=v(F,"H3",{class:!0});var E=b(s);o=L(E,"Ratings"),E.forEach(f),c=V(F),i=v(F,"SPAN",{class:!0});var Y=b(i);n=L(Y,l[2]),u=L(Y,"% safe"),Y.forEach(f),F.forEach(f),a=V(R),p=v(R,"DIV",{class:!0});var de=b(p);_=v(de,"SPAN",{style:!0,class:!0}),b(_).forEach(f),de.forEach(f),R.forEach(f),P=V(y),k=v(y,"DIV",{class:!0});var se=b(k);C=v(se,"H3",{class:!0});var me=b(C);re=L(me,"Reviews"),me.forEach(f),te=V(se),U=v(se,"DIV",{class:!0});var pe=b(U);for(let ie=0;ie<$.length;ie+=1)$[ie].l(pe);pe.forEach(f),se.forEach(f),q=V(y),j=v(y,"DIV",{class:!0});var oe=b(j);X(N.$$.fragment,oe),ae=V(oe),W.l(oe),oe.forEach(f),y.forEach(f),this.h()},h(){w(s,"class","text-xl font-bold"),w(i,"class","text-xs"),w(t,"class","flex justify-between items-center mt-2"),w(_,"style",d=`width: ${l[1]}%`),w(_,"class","h-8 block my-auto bg-#263238 dark:bg-[#11D9C5]"),w(p,"class","mt-4 h-2 w-full overflow-hidden rounded-lg bg-[#FFFFFF0D] dark:bg-#2F3A65 shadow-light"),w(C,"class","text-xl font-bold"),w(U,"class","flex flex-col gap-4"),w(k,"class","my-4"),w(j,"class","grid grid-cols-2 gap-x-2")},m(m,y){I(m,e,y),h(e,r),h(r,t),h(t,s),h(s,o),h(t,c),h(t,i),h(i,n),h(i,u),h(r,a),h(r,p),h(p,_),h(e,P),h(e,k),h(k,C),h(C,re),h(k,te),h(k,U);for(let R=0;R<$.length;R+=1)$[R]&&$[R].m(U,null);h(e,q),h(e,j),Z(N,j,null),h(j,ae),B[T].m(j,null),J=!0},p(m,[y]){if((!J||y&4)&&ee(n,m[2]),(!J||y&2&&d!==(d=`width: ${m[1]}%`))&&w(_,"style",d),y&1){K=m[0].slice(0,2);let E;for(E=0;E<K.length;E+=1){const Y=$e(m,K,E);$[E]?$[E].p(Y,y):($[E]=ye(Y),$[E].c(),$[E].m(U,null))}for(;E<$.length;E+=1)$[E].d(1);$.length=K.length}const R={};y&16&&(R.urlWithoutProtocol=m[4]),N.$set(R);let F=T;T=he(m),T===F?B[T].p(m,y):(De(),H(B[F],1,1,()=>{B[F]=null}),Te(),W=B[T],W?W.p(m,y):(W=B[T]=fe[T](m),W.c()),O(W,1),W.m(j,null))},i(m){J||(O(N.$$.fragment,m),O(W),J=!0)},o(m){H(N.$$.fragment,m),H(W),J=!1},d(m){m&&f(e),ce($,m),x(N),B[T].d()}}}function Me(l,e,r){let t,{url:s}=e,o,c=[],i=0,n=0,u;const a=async()=>{var d;try{const[P]=await chrome.tabs.query({active:!0,currentWindow:!0});r(6,o=(d=P.url)==null?void 0:d.toLocaleLowerCase())}catch(P){console.log(P)}finally{}},p=d=>d==null?void 0:d.replace("ipfs://",""),_=async()=>{try{const d={method:"GET",headers:{"Content-Type":"application/json"}},k=await(await fetch(`${Pe}/getreviews?page=1&domain=${t}`,d)).json();Array.isArray(k.payload)&&k.payload.length>0&&k.payload.forEach(async C=>{const te=await(await fetch(`https://nftstorage.link/ipfs/${p(C.metaDataUri)}`)).json();r(0,c=[...c,te]),r(1,i=c.reduce((U,q)=>U+(q==null?void 0:q.siteRating),0)/c.length*10),r(2,n=i/100*100)})}catch(d){console.error("An error occurred:",d)}};return ne(async()=>{await a(),await _(),r(3,[u]=await We(),u)}),l.$$set=d=>{"url"in d&&r(5,s=d.url)},l.$$.update=()=>{l.$$.dirty&64&&r(4,t=o==null?void 0:o.replace(/^https?:\/\/([^/]+)\/.*/,"$1"))},[c,i,n,u,t,s,o]}class ke extends z{constructor(e){super(),G(this,e,Me,Ge,M,{url:5})}}function Je(l){let e,r;return{c(){e=g("p"),r=S(l[0])},l(t){e=v(t,"P",{});var s=b(e);r=L(s,l[0]),s.forEach(f)},m(t,s){I(t,e,s),h(e,r)},p(t,s){s&1&&ee(r,t[0])},d(t){t&&f(e)}}}function Ke(l){let e,r;return{c(){e=g("p"),r=S(l[1])},l(t){e=v(t,"P",{});var s=b(e);r=L(s,l[1]),s.forEach(f)},m(t,s){I(t,e,s),h(e,r)},p(t,s){s&2&&ee(r,t[1])},d(t){t&&f(e)}}}function Ye(l){let e;function r(o,c){return o[1]==="Insight generation in progress"?Ke:Je}let t=r(l),s=t(l);return{c(){e=g("div"),s.c(),this.h()},l(o){e=v(o,"DIV",{class:!0});var c=b(e);s.l(c),c.forEach(f),this.h()},h(){w(e,"class","reviews")},m(o,c){I(o,e,c),s.m(e,null)},p(o,[c]){t===(t=r(o))&&s?s.p(o,c):(s.d(1),s=t(o),s&&(s.c(),s.m(e,null)))},i:D,o:D,d(o){o&&f(e),s.d()}}}function Qe(l,e,r){let{url:t}=e,s,o="",c;const i=async()=>{var u;try{const[a]=await chrome.tabs.query({active:!0,currentWindow:!0});s=(u=a.url)==null?void 0:u.toLocaleLowerCase()}catch(a){console.log(a)}finally{}},n=async()=>{const u={method:"GET",headers:{"Content-Type":"application/json"}},p=await(await fetch(`${Pe}/site-insight?siteUrl=${s}`,u)).json();return r(1,c=p.message),p.payload.insight&&r(0,o=p.payload.insight),o};return ne(async()=>{await i(),await n()}),l.$$set=u=>{"url"in u&&r(2,t=u.url)},[o,c,t]}class Ee extends z{constructor(e){super(),G(this,e,Qe,Ye,M,{url:2})}}function Xe(l){let e,r,t,s,o,c,i,n,u,a,p;return r=new Re({}),i=new je({props:{tabs:[{id:"tab2",label:"AI's summary",component:Ee,props:{url:l[1]}},{id:"tab1",label:"Reviews",component:ke,props:{url:l[1]}}]}}),a=new Ae({}),{c(){e=g("div"),Q(r.$$.fragment),t=A(),s=g("h2"),o=S(l[1]),c=A(),Q(i.$$.fragment),n=A(),u=g("div"),Q(a.$$.fragment),this.h()},l(_){e=v(_,"DIV",{});var d=b(e);X(r.$$.fragment,d),t=V(d),s=v(d,"H2",{class:!0});var P=b(s);o=L(P,l[1]),P.forEach(f),c=V(d),X(i.$$.fragment,d),n=V(d),u=v(d,"DIV",{class:!0});var k=b(u);X(a.$$.fragment,k),k.forEach(f),d.forEach(f),this.h()},h(){w(s,"class","pb-2 text-center text-black dark:text-white my-6 text-2xl"),w(u,"class","modal h-screen z-10 absolute top-0 flex justify-center items-center"),le(u,"modal-open",l[0])},m(_,d){I(_,e,d),Z(r,e,null),h(e,t),h(e,s),h(s,o),h(e,c),Z(i,e,null),h(e,n),h(e,u),Z(a,u,null),p=!0},p(_,[d]){(!p||d&2)&&ee(o,_[1]);const P={};d&2&&(P.tabs=[{id:"tab2",label:"AI's summary",component:Ee,props:{url:_[1]}},{id:"tab1",label:"Reviews",component:ke,props:{url:_[1]}}]),i.$set(P),(!p||d&1)&&le(u,"modal-open",_[0])},i(_){p||(O(r.$$.fragment,_),O(i.$$.fragment,_),O(a.$$.fragment,_),p=!0)},o(_){H(r.$$.fragment,_),H(i.$$.fragment,_),H(a.$$.fragment,_),p=!1},d(_){_&&f(e),x(r),x(i),x(a)}}}function Ze(l,e,r){let t,s,o=!1;const c=async()=>{var i;r(0,o=!0);try{const[n]=await chrome.tabs.query({active:!0,currentWindow:!0});r(2,s=(i=n.url)==null?void 0:i.toLocaleLowerCase())}catch(n){console.log(n)}finally{r(0,o=!1)}};return ne(async()=>{await c()}),l.$$.update=()=>{l.$$.dirty&4&&r(1,t=s==null?void 0:s.replace(/^https?:\/\/([^/]+)\/.*/,"$1"))},[o,t,s]}class xe extends z{constructor(e){super(),G(this,e,Ze,Xe,M,{})}}function et(l){let e,r;return e=new xe({}),{c(){Q(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,s){Z(e,t,s),r=!0},p:D,i(t){r||(O(e.$$.fragment,t),r=!0)},o(t){H(e.$$.fragment,t),r=!1},d(t){x(e,t)}}}class at extends z{constructor(e){super(),G(this,e,null,et,M,{})}}export{at as component,nt as universal};
