import{S as q,i as x,s as z,k as _,a as W,e as ve,l as v,m as g,h as f,c as R,n as b,b as E,H as P,J as ue,I as Pe,o as oe,q as V,r as S,D as h,K as fe,u as ee,L as se,y as Y,z as Q,A as X,v as De,d as H,f as Ie,g as M,B as Z}from"../chunks/index.89e71670.js";import{c as Te,H as We}from"../chunks/Header.a642babc.js";import{L as Re}from"../chunks/Loader.ef1f0f41.js";import{w as Ve}from"../chunks/index.41201598.js";import{P as Ee}from"../chunks/public.2e09b8bb.js";const Se=!0,lt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Se},Symbol.toStringTag,{value:"Module"}));function ge(a,e,r){const t=a.slice();return t[6]=e[r].id,t}function be(a,e,r){const t=a.slice();return t[6]=e[r].id,t[9]=e[r].label,t}function $e(a){let e,r=a[9]+"",t,s,o,c,i;function n(){return a[4](a[6])}return{c(){e=_("button"),t=V(r),s=W(),this.h()},l(u){e=v(u,"BUTTON",{class:!0});var l=g(e);t=S(l,r),s=R(l),l.forEach(f),this.h()},h(){b(e,"class",o=`tab ${a[1]===a[6]?"active":""}`)},m(u,l){E(u,e,l),h(e,t),h(e,s),c||(i=fe(e,"click",n),c=!0)},p(u,l){a=u,l&1&&r!==(r=a[9]+"")&&ee(t,r),l&3&&o!==(o=`tab ${a[1]===a[6]?"active":""}`)&&b(e,"class",o)},d(u){u&&f(e),c=!1,i()}}}function we(a){let e,r;return{c(){e=_("div"),this.h()},l(t){e=v(t,"DIV",{class:!0,id:!0});var s=g(e);s.forEach(f),this.h()},h(){b(e,"class","tab-content"),b(e,"id",r=`tab-content-${a[6]}`),se(e,"show",a[1]===a[6])},m(t,s){E(t,e,s)},p(t,s){s&1&&r!==(r=`tab-content-${t[6]}`)&&b(e,"id",r),s&3&&se(e,"show",t[1]===t[6])},d(t){t&&f(e)}}}function Ae(a){let e,r,t,s=a[0],o=[];for(let n=0;n<s.length;n+=1)o[n]=$e(be(a,s,n));let c=a[0],i=[];for(let n=0;n<c.length;n+=1)i[n]=we(ge(a,c,n));return{c(){e=_("div");for(let n=0;n<o.length;n+=1)o[n].c();r=W();for(let n=0;n<i.length;n+=1)i[n].c();t=ve(),this.h()},l(n){e=v(n,"DIV",{class:!0});var u=g(e);for(let l=0;l<o.length;l+=1)o[l].l(u);u.forEach(f),r=R(n);for(let l=0;l<i.length;l+=1)i[l].l(n);t=ve(),this.h()},h(){b(e,"class","p-1 flex border border-[#263238] dark:border-[#11D9C5] rounded-md mb-6 mx-auto w-11/12")},m(n,u){E(n,e,u);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(e,null);E(n,r,u);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(n,u);E(n,t,u)},p(n,[u]){if(u&11){s=n[0];let l;for(l=0;l<s.length;l+=1){const p=be(n,s,l);o[l]?o[l].p(p,u):(o[l]=$e(p),o[l].c(),o[l].m(e,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=s.length}if(u&3){c=n[0];let l;for(l=0;l<c.length;l+=1){const p=ge(n,c,l);i[l]?i[l].p(p,u):(i[l]=we(p),i[l].c(),i[l].m(t.parentNode,t))}for(;l<i.length;l+=1)i[l].d(1);i.length=c.length}},i:P,o:P,d(n){n&&f(e),ue(o,n),n&&f(r),ue(i,n),n&&f(t)}}}function Le(a,e,r){let t,{tabs:s=[]}=e,o=Ve(s.length>0?s[0].id:null);Pe(a,o,n=>r(1,t=n));function c(n){o.set(n)}oe(()=>{s.forEach(({id:n,component:u,props:l})=>{const p=document.getElementById(`tab-content-${n}`);p&&new u({target:p,props:l||{}})})});const i=n=>c(n);return a.$$set=n=>{"tabs"in n&&r(0,s=n.tabs)},[s,t,o,c,i]}class Ue extends q{constructor(e){super(),x(this,e,Le,Ae,z,{tabs:0})}}function je(a){let e,r,t,s,o;return{c(){e=_("div"),r=_("button"),t=V("read reviews"),this.h()},l(c){e=v(c,"DIV",{class:!0});var i=g(e);r=v(i,"BUTTON",{class:!0});var n=g(r);t=S(n,"read reviews"),n.forEach(f),i.forEach(f),this.h()},h(){b(r,"class","btn secondary-button"),b(e,"class","grid flex-grow")},m(c,i){E(c,e,i),h(e,r),h(r,t),s||(o=fe(r,"click",a[0]),s=!0)},p:P,i:P,o:P,d(c){c&&f(e),s=!1,o()}}}function Ce(a,e,r){let{urlWithoutProtocol:t}=e;function s(){window.open(`https://app.netsepio.com/reviews/${t}`,"_blank")}return a.$$set=o=>{"urlWithoutProtocol"in o&&r(1,t=o.urlWithoutProtocol)},[s,t]}class Ne extends q{constructor(e){super(),x(this,e,Ce,je,z,{urlWithoutProtocol:1})}}function Be(a){let e,r,t,s,o;return{c(){e=_("div"),r=_("button"),t=V("Submit Review"),this.h()},l(c){e=v(c,"DIV",{class:!0});var i=g(e);r=v(i,"BUTTON",{class:!0});var n=g(r);t=S(n,"Submit Review"),n.forEach(f),i.forEach(f),this.h()},h(){b(r,"class","btn primary-button"),b(e,"class","grid flex-grow")},m(c,i){E(c,e,i),h(e,r),h(r,t),s||(o=fe(r,"click",a[0]),s=!0)},p:P,i:P,o:P,d(c){c&&f(e),s=!1,o()}}}function Fe(a,e,r){let{urlWithoutProtocol:t}=e;function s(){window.open(`https://app.netsepio.com/dashboard?siteUrl=https://${t}`,"_blank")}return a.$$set=o=>{"urlWithoutProtocol"in o&&r(1,t=o.urlWithoutProtocol)},[s,t]}class He extends q{constructor(e){super(),x(this,e,Fe,Be,z,{urlWithoutProtocol:1})}}function ye(a,e,r){const t=a.slice();return t[9]=e[r],t}function ke(a){let e,r,t=a[9].description+"",s,o;return{c(){e=_("div"),r=_("p"),s=V(t),o=W(),this.h()},l(c){e=v(c,"DIV",{class:!0});var i=g(e);r=v(i,"P",{});var n=g(r);s=S(n,t),n.forEach(f),o=R(i),i.forEach(f),this.h()},h(){b(e,"class","reviews")},m(c,i){E(c,e,i),h(e,r),h(r,s),h(e,o)},p(c,i){i&1&&t!==(t=c[9].description+"")&&ee(s,t)},d(c){c&&f(e)}}}function Me(a){let e,r,t;return{c(){e=_("a"),r=_("button"),t=V("Submit Review"),this.h()},l(s){e=v(s,"A",{href:!0});var o=g(e);r=v(o,"BUTTON",{class:!0});var c=g(r);t=S(c,"Submit Review"),c.forEach(f),o.forEach(f),this.h()},h(){b(r,"class","btn primary-button"),b(e,"href","/submit-review")},m(s,o){E(s,e,o),h(e,r),h(r,t)},p:P,i:P,o:P,d(s){s&&f(e)}}}function Oe(a){let e,r;return e=new He({props:{urlWithoutProtocol:a[3]}}),{c(){Y(e.$$.fragment)},l(t){Q(e.$$.fragment,t)},m(t,s){X(e,t,s),r=!0},p(t,s){const o={};s&8&&(o.urlWithoutProtocol=t[3]),e.$set(o)},i(t){r||(M(e.$$.fragment,t),r=!0)},o(t){H(e.$$.fragment,t),r=!1},d(t){Z(e,t)}}}function qe(a){let e,r,t,s,o,c,i,n=Math.round(a[1]*10)+"",u,l,p,m,$,U,j,A,C,ne,ae,O,le,L,N,ie,D,I,G,J=a[0].slice(0,2),w=[];for(let d=0;d<J.length;d+=1)w[d]=ke(ye(a,J,d));N=new Ne({props:{urlWithoutProtocol:a[3]}});const he=[Oe,Me],B=[];function de(d,y){return d[2]==!1?0:1}return D=de(a),I=B[D]=he[D](a),{c(){e=_("div"),r=_("div"),t=_("div"),s=_("h3"),o=V("Ratings"),c=W(),i=_("span"),u=V(n),l=V("% safe"),p=W(),m=_("div"),$=_("span"),j=W(),A=_("div"),C=_("h3"),ne=V("Reviews"),ae=W(),O=_("div");for(let d=0;d<w.length;d+=1)w[d].c();le=W(),L=_("div"),Y(N.$$.fragment),ie=W(),I.c(),this.h()},l(d){e=v(d,"DIV",{});var y=g(e);r=v(y,"DIV",{});var T=g(r);t=v(T,"DIV",{class:!0});var F=g(t);s=v(F,"H3",{class:!0});var k=g(s);o=S(k,"Ratings"),k.forEach(f),c=R(F),i=v(F,"SPAN",{class:!0});var K=g(i);u=S(K,n),l=S(K,"% safe"),K.forEach(f),F.forEach(f),p=R(T),m=v(T,"DIV",{class:!0});var pe=g(m);$=v(pe,"SPAN",{style:!0,class:!0}),g($).forEach(f),pe.forEach(f),T.forEach(f),j=R(y),A=v(y,"DIV",{class:!0});var te=g(A);C=v(te,"H3",{class:!0});var me=g(C);ne=S(me,"Reviews"),me.forEach(f),ae=R(te),O=v(te,"DIV",{class:!0});var _e=g(O);for(let ce=0;ce<w.length;ce+=1)w[ce].l(_e);_e.forEach(f),te.forEach(f),le=R(y),L=v(y,"DIV",{class:!0});var re=g(L);Q(N.$$.fragment,re),ie=R(re),I.l(re),re.forEach(f),y.forEach(f),this.h()},h(){b(s,"class","text-xl font-bold"),b(i,"class","text-xs"),b(t,"class","flex justify-between items-center mt-2"),b($,"style",U=`width: ${Math.round(a[1]*10)}%`),b($,"class","h-8 block my-auto bg-#263238 dark:bg-[#11D9C5]"),b(m,"class","mt-4 h-2 w-full overflow-hidden rounded-lg bg-[#FFFFFF0D] dark:bg-#2F3A65 shadow-light"),b(C,"class","text-xl font-bold"),b(O,"class","flex flex-col gap-4"),b(A,"class","my-4"),b(L,"class","grid grid-cols-2 gap-x-2")},m(d,y){E(d,e,y),h(e,r),h(r,t),h(t,s),h(s,o),h(t,c),h(t,i),h(i,u),h(i,l),h(r,p),h(r,m),h(m,$),h(e,j),h(e,A),h(A,C),h(C,ne),h(A,ae),h(A,O);for(let T=0;T<w.length;T+=1)w[T]&&w[T].m(O,null);h(e,le),h(e,L),X(N,L,null),h(L,ie),B[D].m(L,null),G=!0},p(d,[y]){if((!G||y&2)&&n!==(n=Math.round(d[1]*10)+"")&&ee(u,n),(!G||y&2&&U!==(U=`width: ${Math.round(d[1]*10)}%`))&&b($,"style",U),y&1){J=d[0].slice(0,2);let k;for(k=0;k<J.length;k+=1){const K=ye(d,J,k);w[k]?w[k].p(K,y):(w[k]=ke(K),w[k].c(),w[k].m(O,null))}for(;k<w.length;k+=1)w[k].d(1);w.length=J.length}const T={};y&8&&(T.urlWithoutProtocol=d[3]),N.$set(T);let F=D;D=de(d),D===F?B[D].p(d,y):(De(),H(B[F],1,1,()=>{B[F]=null}),Ie(),I=B[D],I?I.p(d,y):(I=B[D]=he[D](d),I.c()),M(I,1),I.m(L,null))},i(d){G||(M(N.$$.fragment,d),M(I),G=!0)},o(d){H(N.$$.fragment,d),H(I),G=!1},d(d){d&&f(e),ue(w,d),Z(N),B[D].d()}}}function xe(a,e,r){let t,s,o=[],c=0,i;const n=async()=>{var p;try{const[m]=await chrome.tabs.query({active:!0,currentWindow:!0});r(4,s=(p=m.url)==null?void 0:p.toLocaleLowerCase())}catch(m){console.log(m)}finally{}},u=p=>p==null?void 0:p.replace("ipfs://",""),l=async()=>{try{const p={method:"GET",headers:{"Content-Type":"application/json"}},$=await(await fetch(`${Ee}/getreviews?page=1&domain=${t}`,p)).json();r(1,c=$.payload.averageRating),$.payload.reviews&&$.payload.reviews.forEach(async j=>{const C=await(await fetch(`https://nftstorage.link/ipfs/${u(j.metaDataUri)}`)).json();r(0,o=[...o,C])})}catch(p){console.error("An error occurred:",p)}};return oe(async()=>{await n(),await l(),r(2,[i]=await Te(),i)}),a.$$.update=()=>{a.$$.dirty&16&&r(3,t=s==null?void 0:s.replace(/^https?:\/\/([^/]+)\/.*/,"$1"))},[o,c,i,t,s]}class ze extends q{constructor(e){super(),x(this,e,xe,qe,z,{})}}function Ge(a){let e,r;return{c(){e=_("p"),r=V(a[0])},l(t){e=v(t,"P",{});var s=g(e);r=S(s,a[0]),s.forEach(f)},m(t,s){E(t,e,s),h(e,r)},p(t,s){s&1&&ee(r,t[0])},d(t){t&&f(e)}}}function Je(a){let e,r;return{c(){e=_("p"),r=V(a[1])},l(t){e=v(t,"P",{});var s=g(e);r=S(s,a[1]),s.forEach(f)},m(t,s){E(t,e,s),h(e,r)},p(t,s){s&2&&ee(r,t[1])},d(t){t&&f(e)}}}function Ke(a){let e;function r(o,c){return o[1]==="Insight generation in progress"?Je:Ge}let t=r(a),s=t(a);return{c(){e=_("div"),s.c(),this.h()},l(o){e=v(o,"DIV",{class:!0});var c=g(e);s.l(c),c.forEach(f),this.h()},h(){b(e,"class","reviews")},m(o,c){E(o,e,c),s.m(e,null)},p(o,[c]){t===(t=r(o))&&s?s.p(o,c):(s.d(1),s=t(o),s&&(s.c(),s.m(e,null)))},i:P,o:P,d(o){o&&f(e),s.d()}}}function Ye(a,e,r){let t,s="",o;const c=async()=>{var n;try{const[u]=await chrome.tabs.query({active:!0,currentWindow:!0});t=(n=u.url)==null?void 0:n.toLocaleLowerCase()}catch(u){console.log(u)}finally{}},i=async()=>{const n={method:"GET",headers:{"Content-Type":"application/json"}},l=await(await fetch(`${Ee}/site-insight?siteUrl=${t}`,n)).json();return r(1,o=l.message),l.payload.insight&&r(0,s=l.payload.insight),s};return oe(async()=>{await c(),setTimeout(await i(),3e4)}),[s,o]}class Qe extends q{constructor(e){super(),x(this,e,Ye,Ke,z,{})}}function Xe(a){let e,r,t,s,o,c,i,n,u,l,p;return r=new We({}),i=new Ue({props:{tabs:[{id:"tab2",label:"AI's summary",component:Qe},{id:"tab1",label:"Reviews",component:ze}]}}),l=new Re({}),{c(){e=_("div"),Y(r.$$.fragment),t=W(),s=_("h2"),o=V(a[1]),c=W(),Y(i.$$.fragment),n=W(),u=_("div"),Y(l.$$.fragment),this.h()},l(m){e=v(m,"DIV",{});var $=g(e);Q(r.$$.fragment,$),t=R($),s=v($,"H2",{class:!0});var U=g(s);o=S(U,a[1]),U.forEach(f),c=R($),Q(i.$$.fragment,$),n=R($),u=v($,"DIV",{class:!0});var j=g(u);Q(l.$$.fragment,j),j.forEach(f),$.forEach(f),this.h()},h(){b(s,"class","pb-2 text-center text-black dark:text-white my-6 text-2xl"),b(u,"class","modal h-screen z-10 absolute top-0 flex justify-center items-center"),se(u,"modal-open",a[0])},m(m,$){E(m,e,$),X(r,e,null),h(e,t),h(e,s),h(s,o),h(e,c),X(i,e,null),h(e,n),h(e,u),X(l,u,null),p=!0},p(m,[$]){(!p||$&2)&&ee(o,m[1]),(!p||$&1)&&se(u,"modal-open",m[0])},i(m){p||(M(r.$$.fragment,m),M(i.$$.fragment,m),M(l.$$.fragment,m),p=!0)},o(m){H(r.$$.fragment,m),H(i.$$.fragment,m),H(l.$$.fragment,m),p=!1},d(m){m&&f(e),Z(r),Z(i),Z(l)}}}function Ze(a,e,r){let t,s,o=!1;const c=async()=>{var i;r(0,o=!0);try{const[n]=await chrome.tabs.query({active:!0,currentWindow:!0});r(2,s=(i=n.url)==null?void 0:i.toLocaleLowerCase())}catch(n){console.log(n)}finally{r(0,o=!1)}};return oe(async()=>{await c()}),a.$$.update=()=>{a.$$.dirty&4&&r(1,t=s==null?void 0:s.replace(/^https?:\/\/([^/]+)\/.*/,"$1"))},[o,t,s]}class et extends q{constructor(e){super(),x(this,e,Ze,Xe,z,{})}}function tt(a){let e,r;return e=new et({}),{c(){Y(e.$$.fragment)},l(t){Q(e.$$.fragment,t)},m(t,s){X(e,t,s),r=!0},p:P,i(t){r||(M(e.$$.fragment,t),r=!0)},o(t){H(e.$$.fragment,t),r=!1},d(t){Z(e,t)}}}class it extends q{constructor(e){super(),x(this,e,null,tt,z,{})}}export{it as component,lt as universal};
