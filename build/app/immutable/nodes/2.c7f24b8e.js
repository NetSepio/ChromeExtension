import{S as q,i as z,s as G,k as b,a as U,e as ge,l as w,m as y,h as d,c as A,n as m,b as D,H as j,J as ue,I as xe,o as oe,q as P,r as T,G as p,K as ke,u as ee,L as re,y as Y,z as J,A as K,g as Q,d as X,B as Z,M as Ie,p as De}from"../chunks/index.646fb00c.js";import{H as Pe}from"../chunks/Header.8dc83ba2.js";import{L as Te}from"../chunks/Loader.beb7dc29.js";import{w as Re}from"../chunks/index.0baec375.js";import{c as Ue}from"../chunks/secondAuth.00ff7b34.js";import{P as Ee}from"../chunks/public.cf41ef09.js";import{j as Ae,u as We}from"../chunks/___vite-browser-external_commonjs-proxy.e51226d5.js";const Le=!0,ct=Object.freeze(Object.defineProperty({__proto__:null,prerender:Le},Symbol.toStringTag,{value:"Module"}));function _e(r,e,a){const t=r.slice();return t[7]=e[a].id,t}function ve(r,e,a){const t=r.slice();return t[7]=e[a].id,t[10]=e[a].label,t}function be(r){let e,a=r[10]+"",t,s,o,i,c;function g(){return r[5](r[7])}return{c(){e=b("button"),t=P(a),s=U(),this.h()},l(n){e=w(n,"BUTTON",{class:!0});var f=y(e);t=T(f,a),s=A(f),f.forEach(d),this.h()},h(){m(e,"class",o=`text-[10px] m-1 font-semibold h-full whitespace-nowrap tab ${r[2]===r[7]?"active":""}`)},m(n,f){D(n,e,f),p(e,t),p(e,s),i||(c=ke(e,"click",g),i=!0)},p(n,f){r=n,f&1&&a!==(a=r[10]+"")&&ee(t,a),f&5&&o!==(o=`text-[10px] m-1 font-semibold h-full whitespace-nowrap tab ${r[2]===r[7]?"active":""}`)&&m(e,"class",o)},d(n){n&&d(e),i=!1,c()}}}function Ne(r){let e,a;return{c(){e=b("span"),a=P("User-Driven Insights"),this.h()},l(t){e=w(t,"SPAN",{class:!0});var s=y(e);a=T(s,"User-Driven Insights"),s.forEach(d),this.h()},h(){m(e,"class","whitespace-nowrap semiBold text-lg")},m(t,s){D(t,e,s),p(e,a)},p:j,d(t){t&&d(e)}}}function Se(r){let e,a,t,s;return{c(){e=b("span"),a=P("You're Currently Browsing "),t=b("span"),s=P(r[1]),this.h()},l(o){e=w(o,"SPAN",{class:!0});var i=y(e);a=T(i,"You're Currently Browsing "),i.forEach(d),t=w(o,"SPAN",{});var c=y(t);s=T(c,r[1]),c.forEach(d),this.h()},h(){m(e,"class","whitespace-nowrap semiBold text-lg")},m(o,i){D(o,e,i),p(e,a),D(o,t,i),p(t,s)},p(o,i){i&2&&ee(s,o[1])},d(o){o&&d(e),o&&d(t)}}}function we(r){let e,a;return{c(){e=b("div"),this.h()},l(t){e=w(t,"DIV",{class:!0,id:!0});var s=y(e);s.forEach(d),this.h()},h(){m(e,"class","tab-content h-max"),m(e,"id",a=`tab-content-${r[7]}`),re(e,"show",r[2]===r[7])},m(t,s){D(t,e,s)},p(t,s){s&1&&a!==(a=`tab-content-${t[7]}`)&&m(e,"id",a),s&5&&re(e,"show",t[2]===t[7])},d(t){t&&d(e)}}}function Ve(r){let e,a,t,s,o,i=r[0],c=[];for(let l=0;l<i.length;l+=1)c[l]=be(ve(r,i,l));function g(l,$){return l[2]==="tab2"?Se:Ne}let n=g(r),f=n(r),_=r[0],u=[];for(let l=0;l<_.length;l+=1)u[l]=we(_e(r,_,l));return{c(){e=b("div");for(let l=0;l<c.length;l+=1)c[l].c();a=U(),t=b("h2"),f.c(),s=U();for(let l=0;l<u.length;l+=1)u[l].c();o=ge(),this.h()},l(l){e=w(l,"DIV",{class:!0});var $=y(e);for(let v=0;v<c.length;v+=1)c[v].l($);$.forEach(d),a=A(l),t=w(l,"H2",{class:!0});var h=y(t);f.l(h),h.forEach(d),s=A(l);for(let v=0;v<u.length;v+=1)u[v].l(l);o=ge(),this.h()},h(){m(e,"class","flex border border-[#263238] dark:border-[#11D9C5] rounded-[3px] mx-auto w-[80%] mt-[10%] h-auto"),m(t,"class","pb-2 mx-auto w-[80%] text-center mt-[5%] mb-[3%] text-black flex flex-col items-start dark:text-white text-lg semiBold capitalize leading-[30px]")},m(l,$){D(l,e,$);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(e,null);D(l,a,$),D(l,t,$),f.m(t,null),D(l,s,$);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(l,$);D(l,o,$)},p(l,[$]){if($&21){i=l[0];let h;for(h=0;h<i.length;h+=1){const v=ve(l,i,h);c[h]?c[h].p(v,$):(c[h]=be(v),c[h].c(),c[h].m(e,null))}for(;h<c.length;h+=1)c[h].d(1);c.length=i.length}if(n===(n=g(l))&&f?f.p(l,$):(f.d(1),f=n(l),f&&(f.c(),f.m(t,null))),$&5){_=l[0];let h;for(h=0;h<_.length;h+=1){const v=_e(l,_,h);u[h]?u[h].p(v,$):(u[h]=we(v),u[h].c(),u[h].m(o.parentNode,o))}for(;h<u.length;h+=1)u[h].d(1);u.length=_.length}},i:j,o:j,d(l){l&&d(e),ue(c,l),l&&d(a),l&&d(t),f.d(),l&&d(s),ue(u,l),l&&d(o)}}}function je(r,e,a){let t,{tabs:s=[]}=e,{header:o=""}=e,i=Re(s.length>0?s[0].id:null);xe(r,i,n=>a(2,t=n));function c(n){i.set(n)}oe(()=>{s.forEach(({id:n,component:f,props:_})=>{const u=document.getElementById(`tab-content-${n}`);u&&new f({target:u,props:_||{}})})});const g=n=>c(n);return r.$$set=n=>{"tabs"in n&&a(0,s=n.tabs),"header"in n&&a(1,o=n.header)},[s,o,t,i,c,g]}class Be extends q{constructor(e){super(),z(this,e,je,Ve,G,{tabs:0,header:1})}}function Me(r){let e,a,t,s,o;return{c(){e=b("div"),a=b("button"),t=P("read reviews"),this.h()},l(i){e=w(i,"DIV",{class:!0});var c=y(e);a=w(c,"BUTTON",{class:!0});var g=y(a);t=T(g,"read reviews"),g.forEach(d),c.forEach(d),this.h()},h(){m(a,"class","secondary-button"),m(e,"class","grid flex-grow")},m(i,c){D(i,e,c),p(e,a),p(a,t),s||(o=ke(a,"click",r[0]),s=!0)},p:j,i:j,o:j,d(i){i&&d(e),s=!1,o()}}}function Ce(r,e,a){let{urlWithoutProtocol:t}=e;function s(){window.open(`https://app.netsepio.com/reviews/${t}`,"_blank")}return r.$$set=o=>{"urlWithoutProtocol"in o&&a(1,t=o.urlWithoutProtocol)},[s,t]}class He extends q{constructor(e){super(),z(this,e,Ce,Me,G,{urlWithoutProtocol:1})}}function ye(r,e,a){const t=r.slice();return t[10]=e[a],t}function $e(r){let e,a,t,s=r[3](r[10].description,15)+"",o,i,c,g,n,f,_,u,l,$,h;return{c(){e=b("div"),a=b("p"),t=P('"'),o=P(s),i=P('"'),c=U(),g=b("button"),n=b("img"),_=U(),u=b("a"),l=P("Review as NFT"),h=U(),this.h()},l(v){e=w(v,"DIV",{style:!0,class:!0});var k=y(e);a=w(k,"P",{class:!0});var W=y(a);t=T(W,'"'),o=T(W,s),i=T(W,'"'),W.forEach(d),c=A(k),g=w(k,"BUTTON",{class:!0});var S=y(g);n=w(S,"IMG",{width:!0,height:!0,src:!0,alt:!0,class:!0}),_=A(S),u=w(S,"A",{target:!0,href:!0,class:!0});var L=y(u);l=T(L,"Review as NFT"),L.forEach(d),S.forEach(d),h=A(k),k.forEach(d),this.h()},h(){var v;m(a,"class","text-[11px]"),m(n,"width",12),m(n,"height",12),Ie(n.src,f="/img.svg")||m(n,"src",f),m(n,"alt","img"),m(n,"class",""),m(u,"target","_blank"),m(u,"href",$=`https://explorer.aptoslabs.com/txn/${(v=r[10])==null?void 0:v.transactionHash}/?network=mainnet`),m(u,"class","text-[8px] whitespace-nowrap text-white"),m(g,"class","flex items-center mt-2 bg-secondary dark:bg-action dark:bg-opacity-60 hover:scale-105 cursor-pointer duration-200 active:scale-100 w-[84px] h-[19px] gap-1 pt-[1px] px-[5px] pb-[2px] rounded-[5px]"),De(e,"box-shadow","0px 2px 4px 0px rgba(38, 50, 56, 0.2)"),m(e,"class","reviews border border-secondary dark:border-action dark:shadow-action dark:border-opacity-10 border-opacity-10 h-[85px]")},m(v,k){D(v,e,k),p(e,a),p(a,t),p(a,o),p(a,i),p(e,c),p(e,g),p(g,n),p(g,_),p(g,u),p(u,l),p(e,h)},p(v,k){var W;k&1&&s!==(s=v[3](v[10].description,15)+"")&&ee(o,s),k&1&&$!==($=`https://explorer.aptoslabs.com/txn/${(W=v[10])==null?void 0:W.transactionHash}/?network=mainnet`)&&m(u,"href",$)},d(v){v&&d(e)}}}function Oe(r){let e,a,t,s,o,i,c,g=Math.round(r[1]*10)+"",n,f,_,u,l,$,h,v,k,W,S,L,te,V,B,ne,M,C,le,H,O=r[0].slice(2,4),x=[];for(let E=0;E<O.length;E+=1)x[E]=$e(ye(r,O,E));return B=new He({props:{urlWithoutProtocol:r[2]}}),{c(){e=b("div"),a=b("div"),t=b("div"),s=b("h3"),o=P("Ratings"),i=U(),c=b("span"),n=P(g),f=P("% safe"),_=U(),u=b("div"),l=b("span"),h=U(),v=b("div"),k=b("h3"),W=P("Reviews"),S=U(),L=b("div");for(let E=0;E<x.length;E+=1)x[E].c();te=U(),V=b("div"),Y(B.$$.fragment),ne=U(),M=b("a"),C=b("button"),le=P("Write Reviews"),this.h()},l(E){e=w(E,"DIV",{class:!0});var R=y(e);a=w(R,"DIV",{class:!0});var N=y(a);t=w(N,"DIV",{class:!0});var I=y(t);s=w(I,"H3",{class:!0});var F=y(s);o=T(F,"Ratings"),F.forEach(d),i=A(I),c=w(I,"SPAN",{class:!0});var ie=y(c);n=T(ie,g),f=T(ie,"% safe"),ie.forEach(d),I.forEach(d),_=A(N),u=w(N,"DIV",{class:!0});var he=y(u);l=w(he,"SPAN",{style:!0,class:!0}),y(l).forEach(d),he.forEach(d),N.forEach(d),h=A(R),v=w(R,"DIV",{class:!0});var se=y(v);k=w(se,"H3",{class:!0});var fe=y(k);W=T(fe,"Reviews"),fe.forEach(d),S=A(se),L=w(se,"DIV",{class:!0});var de=y(L);for(let ce=0;ce<x.length;ce+=1)x[ce].l(de);de.forEach(d),se.forEach(d),te=A(R),V=w(R,"DIV",{class:!0});var ae=y(V);J(B.$$.fragment,ae),ne=A(ae),M=w(ae,"A",{href:!0});var pe=y(M);C=w(pe,"BUTTON",{class:!0});var me=y(C);le=T(me,"Write Reviews"),me.forEach(d),pe.forEach(d),ae.forEach(d),R.forEach(d),this.h()},h(){m(s,"class","text-sm dark:font-medium font-semibold"),m(c,"class","text-[10px]"),m(t,"class","flex justify-between items-center mt-2"),m(l,"style",$=`width: ${Math.round(r[1]*10)}%`),m(l,"class","h-[8px] block my-auto shad rounded-[5px] bg-[#263238] dark:bg-[#11D9C5]"),m(u,"class","mt-4 h-2 w-full rounded-lg bg-white/5 shadow-sm shadow-appGray dark:shadow-none dark:bg-[#2F3A65] shadow-light"),m(a,"class","mb-[10%]"),m(k,"class","text-sm mb-3 dark:font-medium font-semibold"),m(L,"class","flex flex-col gap-3"),m(v,"class",""),m(C,"class","primary-button"),m(M,"href","/submit-review/create-review"),m(V,"class","grid grid-cols-2 mt-[10%] gap-x-4"),m(e,"class","w-[75%] mx-auto mt-[6%]")},m(E,R){D(E,e,R),p(e,a),p(a,t),p(t,s),p(s,o),p(t,i),p(t,c),p(c,n),p(c,f),p(a,_),p(a,u),p(u,l),p(e,h),p(e,v),p(v,k),p(k,W),p(v,S),p(v,L);for(let N=0;N<x.length;N+=1)x[N]&&x[N].m(L,null);p(e,te),p(e,V),K(B,V,null),p(V,ne),p(V,M),p(M,C),p(C,le),H=!0},p(E,[R]){if((!H||R&2)&&g!==(g=Math.round(E[1]*10)+"")&&ee(n,g),(!H||R&2&&$!==($=`width: ${Math.round(E[1]*10)}%`))&&m(l,"style",$),R&9){O=E[0].slice(2,4);let I;for(I=0;I<O.length;I+=1){const F=ye(E,O,I);x[I]?x[I].p(F,R):(x[I]=$e(F),x[I].c(),x[I].m(L,null))}for(;I<x.length;I+=1)x[I].d(1);x.length=O.length}const N={};R&4&&(N.urlWithoutProtocol=E[2]),B.$set(N)},i(E){H||(Q(B.$$.fragment,E),H=!0)},o(E){X(B.$$.fragment,E),H=!1},d(E){E&&d(e),ue(x,E),Z(B)}}}function qe(r,e,a){let t,s,o=[],i=0;const c=async()=>{var _;try{const[u]=await chrome.tabs.query({active:!0,currentWindow:!0});a(4,s=(_=u.url)==null?void 0:_.toLocaleLowerCase())}catch(u){console.log(u)}finally{}},g=_=>_==null?void 0:_.replace("ipfs://",""),n=async()=>{var u,l,$;let _="";Ae.subscribe(h=>_=h);try{const h={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`}},k=await(await fetch(`${Ee}/getreviews?page=1&domain=${t}`,h)).json();a(1,i=((u=k==null?void 0:k.payload)==null?void 0:u.averageRating)??0),((l=k==null?void 0:k.payload)==null?void 0:l.reviews)&&(($=k==null?void 0:k.payload)==null||$.reviews.forEach(async S=>{const L=`https://nftstorage.link/ipfs/${g(S.metaDataUri)}`,V=await(await fetch(L)).json();V.transactionHash=S.transactionHash,a(0,o=[...o,V])}))}catch(h){console.error("An error occurred:",h)}},f=(_,u)=>{const l=_.split(" "),h=l.slice(0,u).join(" "),v=l.length>u;return h.concat(v?"..":"")};return oe(async()=>{await c(),await n(),await Ue()}),r.$$.update=()=>{r.$$.dirty&16&&a(2,t=s==null?void 0:s.replace(/^https?:\/\/([^/]+)\/.*/,"$1"))},[o,i,t,f,s]}class ze extends q{constructor(e){super(),z(this,e,qe,Oe,G,{})}}function Ge(r){let e,a;return{c(){e=b("p"),a=P(r[0]),this.h()},l(t){e=w(t,"P",{class:!0});var s=y(e);a=T(s,r[0]),s.forEach(d),this.h()},h(){m(e,"class","text-[11px] font-normal")},m(t,s){D(t,e,s),p(e,a)},p(t,s){s&1&&ee(a,t[0])},d(t){t&&d(e)}}}function Fe(r){let e,a;return{c(){e=b("p"),a=P("Insight generation in progress"),this.h()},l(t){e=w(t,"P",{class:!0});var s=y(e);a=T(s,"Insight generation in progress"),s.forEach(d),this.h()},h(){m(e,"class","p-5 capitalize")},m(t,s){D(t,e,s),p(e,a)},p:j,d(t){t&&d(e)}}}function Ye(r){let e;function a(o,i){if(o[1])return Fe;if(o[0]!=="")return Ge}let t=a(r),s=t&&t(r);return{c(){e=b("div"),s&&s.c(),this.h()},l(o){e=w(o,"DIV",{class:!0});var i=y(e);s&&s.l(i),i.forEach(d),this.h()},h(){m(e,"class","reviews w-[80%] h-[315px] mx-auto")},m(o,i){D(o,e,i),s&&s.m(e,null)},p(o,[i]){t===(t=a(o))&&s?s.p(o,i):(s&&s.d(1),s=t&&t(o),s&&(s.c(),s.m(e,null)))},i:j,o:j,d(o){o&&d(e),s&&s.d()}}}function Je(r,e,a){let t,s="",o=!1;const i=async()=>{var g;a(1,o=!0);try{const[n]=await chrome.tabs.query({active:!0,currentWindow:!0});t=(g=n.url)==null?void 0:g.toLocaleLowerCase()}catch(n){console.log(n)}finally{a(1,o=!1)}},c=async()=>{var _;a(1,o=!0);const g={method:"GET",headers:{"Content-Type":"application/json"}},f=await(await fetch(`${Ee}/site-insight?siteUrl=${new URL(t).origin}`,g)).json();return f.message,(_=f.payload)!=null&&_.insight&&a(0,s=f.payload.insight),a(1,o=!1),s};return oe(async()=>{await i(),await c()}),[s,o]}class Ke extends q{constructor(e){super(),z(this,e,Je,Ye,G,{})}}function Qe(r){let e,a,t,s,o,i,c,g;return a=new Pe({}),s=new Be({props:{header:r[1],tabs:[{id:"tab2",label:"AI Summary",component:Ke},{id:"tab1",label:"Reviews",component:ze}]}}),c=new Te({}),{c(){e=b("div"),Y(a.$$.fragment),t=U(),Y(s.$$.fragment),o=U(),i=b("div"),Y(c.$$.fragment),this.h()},l(n){e=w(n,"DIV",{class:!0});var f=y(e);J(a.$$.fragment,f),t=A(f),J(s.$$.fragment,f),o=A(f),i=w(f,"DIV",{class:!0});var _=y(i);J(c.$$.fragment,_),_.forEach(d),f.forEach(d),this.h()},h(){m(i,"class","modal h-screen z-10 absolute top-0 flex justify-center items-center"),re(i,"modal-open",r[0]),m(e,"class","h-full")},m(n,f){D(n,e,f),K(a,e,null),p(e,t),K(s,e,null),p(e,o),p(e,i),K(c,i,null),g=!0},p(n,[f]){const _={};f&2&&(_.header=n[1]),s.$set(_),(!g||f&1)&&re(i,"modal-open",n[0])},i(n){g||(Q(a.$$.fragment,n),Q(s.$$.fragment,n),Q(c.$$.fragment,n),g=!0)},o(n){X(a.$$.fragment,n),X(s.$$.fragment,n),X(c.$$.fragment,n),g=!1},d(n){n&&d(e),Z(a),Z(s),Z(c)}}}let Xe="";function Ze(r,e,a){let t,s,o=!1;const i=async()=>{var c;a(0,o=!0);try{const[g]=await chrome.tabs.query({active:!0,currentWindow:!0});a(2,s=(c=g.url)==null?void 0:c.toLocaleLowerCase());const n=new URL(s).origin,f=new URL(s);console.log(f.origin,f.pathname),chrome.storage.local.get("urlMappings",_=>{const u=_.urlMappings||{};u[n]||(u[n]=[]),u[n].includes(f.pathname)||u[n].push(f.pathname),chrome.storage.local.set({urlMappings:u},()=>{We.set(u)})}),console.log(Xe)}catch(g){console.log(g)}finally{a(0,o=!1)}};return oe(async()=>{JSON.parse(localStorage.getItem("unlocked")||"true")||(window.location.href="/signIn"),await i()}),r.$$.update=()=>{r.$$.dirty&4&&a(1,t=s==null?void 0:s.replace(/^https?:\/\/([^/]+)\/.*/,"$1"))},[o,t,s]}class et extends q{constructor(e){super(),z(this,e,Ze,Qe,G,{})}}function tt(r){let e,a;return e=new et({}),{c(){Y(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,s){K(e,t,s),a=!0},p:j,i(t){a||(Q(e.$$.fragment,t),a=!0)},o(t){X(e.$$.fragment,t),a=!1},d(t){Z(e,t)}}}class ut extends q{constructor(e){super(),z(this,e,null,tt,G,{})}}export{ut as component,ct as universal};
