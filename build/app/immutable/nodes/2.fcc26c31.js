import{S as SvelteComponent,i as init,s as safe_not_equal,k as element,q as text,l as claim_element,m as children,r as claim_text,h as detach,n as attr,b as insert_hydration,D as append_hydration,J as listen,H as noop$2,a as space,y as create_component,c as claim_space,z as claim_component,K as toggle_class,A as mount_component,g as transition_in,d as transition_out,B as destroy_component,L as run_all,o as onMount,M as select_value,N as to_number,O as add_render_callback,P as select_option,Q as set_input_value,R as onDestroy,T as bubble,w as binding_callbacks,u as set_data,v as group_outros,f as check_outros,e as empty$1,I as component_subscribe,U as src_url_equal}from"../chunks/index.f3b06f47.js";import{H as Header}from"../chunks/Header.b7ab37a3.js";import{g as getDefaultExportFromCjs,c as commonjsGlobal,a as getAugmentedNamespace,j as jwtToken,o as onboardingStepsLeft}from"../chunks/store.26750aee.js";import{P as PUBLIC_NFT_STORAGE_API_KEY,a as PUBLIC_GATEWAY_URL}from"../chunks/public.02ab71de.js";import{c as checkAuth}from"../chunks/secondAuth.f9ee4b2a.js";import{L as Loader}from"../chunks/Loader.d36557e7.js";const prerender=!0,_page=Object.freeze(Object.defineProperty({__proto__:null,prerender},Symbol.toStringTag,{value:"Module"}));function create_fragment$4(r){let e,t,n,o,a;return{c(){e=element("div"),t=element("button"),n=text("Reviews"),this.h()},l(s){e=claim_element(s,"DIV",{class:!0});var l=children(e);t=claim_element(l,"BUTTON",{class:!0});var f=children(t);n=claim_text(f,"Reviews"),f.forEach(detach),l.forEach(detach),this.h()},h(){attr(t,"class","btn px-4 py-2 rounded-md"),attr(e,"class","grid flex-grow")},m(s,l){insert_hydration(s,e,l),append_hydration(e,t),append_hydration(t,n),o||(a=listen(t,"click",r[0]),o=!0)},p:noop$2,i:noop$2,o:noop$2,d(s){s&&detach(e),o=!1,a()}}}function instance$4(r,e,t){let{urlWithoutProtocol:n}=e;function o(){window.open(`https://testnet.netsepio.com/#/reviews/${n}`,"_blank")}return r.$$set=a=>{"urlWithoutProtocol"in a&&t(1,n=a.urlWithoutProtocol)},[o,n]}class Review extends SvelteComponent{constructor(e){super(),init(this,e,instance$4,create_fragment$4,safe_not_equal,{urlWithoutProtocol:1})}}function getIterator(r){if(typeof r.next=="function")return r;if(typeof r[Symbol.iterator]=="function")return r[Symbol.iterator]();if(typeof r[Symbol.asyncIterator]=="function")return r[Symbol.asyncIterator]();throw new TypeError('"values" does not to conform to any of the iterator or iterable protocols')}function defer(){let r,e;return{promise:new Promise((n,o)=>{e=n,r=o}),reject:r,resolve:e}}function _transform(r,e,t){const n=getIterator(t),o=[],a=[];let s=!1,l=!1,f=0,h=null;function d(){for(;a.length>0&&o.length>0;){const{resolve:y}=a.shift(),E=o.shift();y({done:!1,value:E})}for(;a.length>0&&f===0&&s;){const{resolve:y,reject:E}=a.shift();h?(E(h),h=null):y({done:!0,value:void 0})}}async function m(){if(s){d();return}if(!l&&!(f+o.length>=r)){l=!0,f++;try{const{done:y,value:E}=await n.next();y?(s=!0,f--,d()):_(E)}catch(y){s=!0,f--,h=y,d()}l=!1,m()}}async function _(y){try{const E=await e(y);o.push(E)}catch(E){s=!0,h=E}f--,d(),m()}async function b(){if(o.length===0){const E=defer();return a.push(E),m(),E.promise}const y=o.shift();return m(),{done:!1,value:y}}const w={next:b,[Symbol.asyncIterator]:()=>w};return w}function transform$1(r,e,t){return e===void 0?(n,o)=>o?transform$1(r,n,o):transform$1(r,n):t===void 0?n=>transform$1(r,e,n):_transform(r,e,t)}var pRetry$2={exports:{}},retry$2={};function RetryOperation(r,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(r)),this._timeouts=r,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var retry_operation=RetryOperation;RetryOperation.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};RetryOperation.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};RetryOperation.prototype.retry=function(r){if(this._timeout&&clearTimeout(this._timeout),!r)return!1;var e=new Date().getTime();if(r&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(r),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(r);var t=this._timeouts.shift();if(t===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),t=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},t),this._options.unref&&this._timer.unref(),!0};RetryOperation.prototype.attempt=function(r,e){this._fn=r,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var t=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){t._operationTimeoutCb()},t._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};RetryOperation.prototype.try=function(r){console.log("Using RetryOperation.try() is deprecated"),this.attempt(r)};RetryOperation.prototype.start=function(r){console.log("Using RetryOperation.start() is deprecated"),this.attempt(r)};RetryOperation.prototype.start=RetryOperation.prototype.try;RetryOperation.prototype.errors=function(){return this._errors};RetryOperation.prototype.attempts=function(){return this._attempts};RetryOperation.prototype.mainError=function(){if(this._errors.length===0)return null;for(var r={},e=null,t=0,n=0;n<this._errors.length;n++){var o=this._errors[n],a=o.message,s=(r[a]||0)+1;r[a]=s,s>=t&&(e=o,t=s)}return e};(function(r){var e=retry_operation;r.operation=function(t){var n=r.timeouts(t);return new e(n,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},r.timeouts=function(t){if(t instanceof Array)return[].concat(t);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var o in t)n[o]=t[o];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var a=[],s=0;s<n.retries;s++)a.push(this.createTimeout(s,n));return t&&t.forever&&!a.length&&a.push(this.createTimeout(s,n)),a.sort(function(l,f){return l-f}),a},r.createTimeout=function(t,n){var o=n.randomize?Math.random()+1:1,a=Math.round(o*Math.max(n.minTimeout,1)*Math.pow(n.factor,t));return a=Math.min(a,n.maxTimeout),a},r.wrap=function(t,n,o){if(n instanceof Array&&(o=n,n=null),!o){o=[];for(var a in t)typeof t[a]=="function"&&o.push(a)}for(var s=0;s<o.length;s++){var l=o[s],f=t[l];t[l]=(function(d){var m=r.operation(n),_=Array.prototype.slice.call(arguments,1),b=_.pop();_.push(function(w){m.retry(w)||(w&&(arguments[0]=m.mainError()),b.apply(this,arguments))}),m.attempt(function(){d.apply(t,_)})}).bind(t,f),t[l].options=n}}})(retry$2);var retry$1=retry$2;const retry=retry$1,networkErrorMsgs=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class AbortError extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const decorateErrorWithCounts=(r,e,t)=>{const n=t.retries-(e-1);return r.attemptNumber=e,r.retriesLeft=n,r},isNetworkError=r=>networkErrorMsgs.includes(r),pRetry=(r,e)=>new Promise((t,n)=>{e={onFailedAttempt:()=>{},retries:10,...e};const o=retry.operation(e);o.attempt(async a=>{try{t(await r(a))}catch(s){if(!(s instanceof Error)){n(new TypeError(`Non-error was thrown: "${s}". You should only throw errors.`));return}if(s instanceof AbortError)o.stop(),n(s.originalError);else if(s instanceof TypeError&&!isNetworkError(s.message))o.stop(),n(s);else{decorateErrorWithCounts(s,a,e);try{await e.onFailedAttempt(s)}catch(l){n(l);return}o.retry(s)||n(o.mainError())}}})});pRetry$2.exports=pRetry;pRetry$2.exports.default=pRetry;var AbortError_1=pRetry$2.exports.AbortError=AbortError,pRetryExports=pRetry$2.exports;const pRetry$1=getDefaultExportFromCjs(pRetryExports);var encode_1$1=encode$9,MSB$3=128,REST$3=127,MSBALL$1=~REST$3,INT$1=Math.pow(2,31);function encode$9(r,e,t){if(Number.MAX_SAFE_INTEGER&&r>Number.MAX_SAFE_INTEGER)throw encode$9.bytes=0,new RangeError("Could not encode varint");e=e||[],t=t||0;for(var n=t;r>=INT$1;)e[t++]=r&255|MSB$3,r/=128;for(;r&MSBALL$1;)e[t++]=r&255|MSB$3,r>>>=7;return e[t]=r|0,encode$9.bytes=t-n+1,e}var decode$a=read$1,MSB$2=128,REST$2=127;function read$1(r,n){var t=0,n=n||0,o=0,a=n,s,l=r.length;do{if(a>=l||o>49)throw read$1.bytes=0,new RangeError("Could not decode varint");s=r[a++],t+=o<28?(s&REST$2)<<o:(s&REST$2)*Math.pow(2,o),o+=7}while(s>=MSB$2);return read$1.bytes=a-n,t}var N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),N8$1=Math.pow(2,56),N9$1=Math.pow(2,63),length$1=function(r){return r<N1$1?1:r<N2$1?2:r<N3$1?3:r<N4$1?4:r<N5$1?5:r<N6$1?6:r<N7$1?7:r<N8$1?8:r<N9$1?9:10},varint$1={encode:encode_1$1,decode:decode$a,encodingLength:length$1};const varint$2=getDefaultExportFromCjs(varint$1);var encode_1=encode$8,MSB=128,REST=127,MSBALL=~REST,INT=Math.pow(2,31);function encode$8(r,e,t){e=e||[],t=t||0;for(var n=t;r>=INT;)e[t++]=r&255|MSB,r/=128;for(;r&MSBALL;)e[t++]=r&255|MSB,r>>>=7;return e[t]=r|0,encode$8.bytes=t-n+1,e}var decode$9=read,MSB$1=128,REST$1=127;function read(r,n){var t=0,n=n||0,o=0,a=n,s,l=r.length;do{if(a>=l)throw read.bytes=0,new RangeError("Could not decode varint");s=r[a++],t+=o<28?(s&REST$1)<<o:(s&REST$1)*Math.pow(2,o),o+=7}while(s>=MSB$1);return read.bytes=a-n,t}var N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(r){return r<N1?1:r<N2?2:r<N3?3:r<N4?4:r<N5?5:r<N6?6:r<N7?7:r<N8?8:r<N9?9:10},varint={encode:encode_1,decode:decode$9,encodingLength:length},_brrp_varint=varint;const decode$8=(r,e=0)=>[_brrp_varint.decode(r,e),_brrp_varint.decode.bytes],encodeTo=(r,e,t=0)=>(_brrp_varint.encode(r,e,t),e),encodingLength=r=>_brrp_varint.encodingLength(r),empty=new Uint8Array(0),fromHex=r=>{const e=r.match(/../g);return e?new Uint8Array(e.map(t=>parseInt(t,16))):empty},equals$1=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},coerce=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},fromString$3=r=>new TextEncoder().encode(r),toString$1=r=>new TextDecoder().decode(r),create$4=(r,e)=>{const t=e.byteLength,n=encodingLength(r),o=n+encodingLength(t),a=new Uint8Array(o+t);return encodeTo(r,a,0),encodeTo(t,a,n),a.set(e,o),new Digest(r,t,e,a)},decode$7=r=>{const e=coerce(r),[t,n]=decode$8(e),[o,a]=decode$8(e.subarray(n)),s=e.subarray(n+a);if(s.byteLength!==o)throw new Error("Incorrect length");return new Digest(t,o,s,e)},equals=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&equals$1(r.bytes,e.bytes);class Digest{constructor(e,t,n,o){this.code=e,this.size=t,this.digest=n,this.bytes=o}}function base(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<r.length;o++){var a=r.charAt(o),s=a.charCodeAt(0);if(t[s]!==255)throw new TypeError(a+" is ambiguous");t[s]=o}var l=r.length,f=r.charAt(0),h=Math.log(l)/Math.log(256),d=Math.log(256)/Math.log(l);function m(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var y=0,E=0,T=0,N=w.length;T!==N&&w[T]===0;)T++,y++;for(var D=(N-T)*d+1>>>0,C=new Uint8Array(D);T!==N;){for(var A=w[T],S=0,I=D-1;(A!==0||S<E)&&I!==-1;I--,S++)A+=256*C[I]>>>0,C[I]=A%l>>>0,A=A/l>>>0;if(A!==0)throw new Error("Non-zero carry");E=S,T++}for(var L=D-E;L!==D&&C[L]===0;)L++;for(var x=f.repeat(y);L<D;++L)x+=r.charAt(C[L]);return x}function _(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var y=0;if(w[y]!==" "){for(var E=0,T=0;w[y]===f;)E++,y++;for(var N=(w.length-y)*h+1>>>0,D=new Uint8Array(N);w[y];){var C=t[w.charCodeAt(y)];if(C===255)return;for(var A=0,S=N-1;(C!==0||A<T)&&S!==-1;S--,A++)C+=l*D[S]>>>0,D[S]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");T=A,y++}if(w[y]!==" "){for(var I=N-T;I!==N&&D[I]===0;)I++;for(var L=new Uint8Array(E+(N-I)),x=E;I!==N;)L[x++]=D[I++];return L}}}function b(w){var y=_(w);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:m,decodeUnsafe:_,decode:b}}var src$3=base,_brrp__multiformats_scope_baseX=src$3;class Encoder{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or(this,e)}}class ComposedDecoder{constructor(e){this.decoders=e}or(e){return or(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or=(r,e)=>new ComposedDecoder({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class Codec{constructor(e,t,n,o){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=o,this.encoder=new Encoder(e,t,n),this.decoder=new Decoder(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from$1=({name:r,prefix:e,encode:t,decode:n})=>new Codec(r,e,t,n),baseX=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:o}=_brrp__multiformats_scope_baseX(t,e);return from$1({prefix:r,name:e,encode:n,decode:a=>coerce(o(a))})},decode$6=(r,e,t,n)=>{const o={};for(let d=0;d<e.length;++d)o[e[d]]=d;let a=r.length;for(;r[a-1]==="=";)--a;const s=new Uint8Array(a*t/8|0);let l=0,f=0,h=0;for(let d=0;d<a;++d){const m=o[r[d]];if(m===void 0)throw new SyntaxError(`Non-${n} character`);f=f<<t|m,l+=t,l>=8&&(l-=8,s[h++]=255&f>>l)}if(l>=t||255&f<<8-l)throw new SyntaxError("Unexpected end of data");return s},encode$7=(r,e,t)=>{const n=e[e.length-1]==="=",o=(1<<t)-1;let a="",s=0,l=0;for(let f=0;f<r.length;++f)for(l=l<<8|r[f],s+=8;s>t;)s-=t,a+=e[o&l>>s];if(s&&(a+=e[o&l<<t-s]),n)for(;a.length*t&7;)a+="=";return a},rfc4648=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>from$1({prefix:e,name:r,encode(o){return encode$7(o,n,t)},decode(o){return decode$6(o,n,t,r)}}),base58btc=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58=Object.freeze(Object.defineProperty({__proto__:null,base58btc,base58flickr},Symbol.toStringTag,{value:"Module"})),base32=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$1=Object.freeze(Object.defineProperty({__proto__:null,base32,base32hex,base32hexpad,base32hexpadupper,base32hexupper,base32pad,base32padupper,base32upper,base32z},Symbol.toStringTag,{value:"Module"}));class CID{constructor(e,t,n,o){this.code=t,this.version=e,this.multihash=n,this.bytes=o,this.byteOffset=o.byteOffset,this.byteLength=o.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:hidden,byteLength:hidden,code:readonly$1,version:readonly$1,multihash:readonly$1,bytes:readonly$1,_baseCache:hidden,asCID:hidden})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:t}=this;if(e!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(t)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,n=create$4(e,t);return CID.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&equals(this.multihash,e.multihash)}toString(e){const{bytes:t,version:n,_baseCache:o}=this;switch(n){case 0:return toStringV0(t,o,e||base58btc.encoder);default:return toStringV1(t,o,e||base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return deprecate(/^0\.0/,IS_CID_DEPRECATION),!!(e&&(e[cidSymbol]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof CID)return e;if(e!=null&&e.asCID===e){const{version:t,code:n,multihash:o,bytes:a}=e;return new CID(t,n,o,a||encodeCID(t,n,o.bytes))}else if(e!=null&&e[cidSymbol]===!0){const{version:t,multihash:n,code:o}=e,a=decode$7(n);return CID.create(t,o,a)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID(e,t,n,n.bytes)}case 1:{const o=encodeCID(e,t,n.bytes);return new CID(e,t,n,o)}default:throw new Error("Invalid version")}}static createV0(e){return CID.create(0,DAG_PB_CODE,e)}static createV1(e,t){return CID.create(1,e,t)}static decode(e){const[t,n]=CID.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=CID.inspectBytes(e),n=t.size-t.multihashSize,o=coerce(e.subarray(n,n+t.multihashSize));if(o.byteLength!==t.multihashSize)throw new Error("Incorrect length");const a=o.subarray(t.multihashSize-t.digestSize),s=new Digest(t.multihashCode,t.digestSize,a,o);return[t.version===0?CID.createV0(s):CID.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0;const n=()=>{const[m,_]=decode$8(e.subarray(t));return t+=_,m};let o=n(),a=DAG_PB_CODE;if(o===18?(o=0,t=0):o===1&&(a=n()),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const s=t,l=n(),f=n(),h=t+f,d=h-s;return{version:o,codec:a,multihashCode:l,digestSize:f,multihashSize:d,size:h}}static parse(e,t){const[n,o]=parseCIDtoBytes(e,t),a=CID.decode(o);return a._baseCache.set(n,e),a}}const parseCIDtoBytes=(r,e)=>{switch(r[0]){case"Q":{const t=e||base58btc;return[base58btc.prefix,t.decode(`${base58btc.prefix}${r}`)]}case base58btc.prefix:{const t=e||base58btc;return[base58btc.prefix,t.decode(r)]}case base32.prefix:{const t=e||base32;return[base32.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},toStringV0=(r,e,t)=>{const{prefix:n}=t;if(n!==base58btc.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const o=e.get(n);if(o==null){const a=t.encode(r).slice(1);return e.set(n,a),a}else return o},toStringV1=(r,e,t)=>{const{prefix:n}=t,o=e.get(n);if(o==null){const a=t.encode(r);return e.set(n,a),a}else return o},DAG_PB_CODE=112,SHA_256_CODE=18,encodeCID=(r,e,t)=>{const n=encodingLength(r),o=n+encodingLength(e),a=new Uint8Array(o+t.byteLength);return encodeTo(r,a,0),encodeTo(e,a,n),a.set(t,o),a},cidSymbol=Symbol.for("@ipld/js-cid/CID"),readonly$1={writable:!1,configurable:!1,enumerable:!0},hidden={writable:!1,enumerable:!1,configurable:!1},version="0.0.0-dev",deprecate=(r,e)=>{if(r.test(version))console.warn(e);else throw new Error(e)},IS_CID_DEPRECATION=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,typeofs=["string","number","bigint","symbol"],objectTypeNames=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";const e=typeof r;if(typeofs.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(r))return"Array";if(isBuffer$1(r))return"Buffer";const t=getObjectType(r);return t||"Object"}function isBuffer$1(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function getObjectType(r){const e=Object.prototype.toString.call(r).slice(8,-1);if(objectTypeNames.includes(e))return e}class Type{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}Type.uint=new Type(0,"uint",!0);Type.negint=new Type(1,"negint",!0);Type.bytes=new Type(2,"bytes",!0);Type.string=new Type(3,"string",!0);Type.array=new Type(4,"array",!1);Type.map=new Type(5,"map",!1);Type.tag=new Type(6,"tag",!1);Type.float=new Type(7,"float",!0);Type.false=new Type(7,"false",!0);Type.true=new Type(7,"true",!0);Type.null=new Type(7,"null",!0);Type.undefined=new Type(7,"undefined",!0);Type.break=new Type(7,"break",!0);let Token$1=class{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};const useBuffer=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",textDecoder$1=new TextDecoder,textEncoder$2=new TextEncoder;function isBuffer(r){return useBuffer&&globalThis.Buffer.isBuffer(r)}function asU8A(r){return r instanceof Uint8Array?isBuffer(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}const toString=useBuffer?(r,e,t)=>t-e>64?globalThis.Buffer.from(r.subarray(e,t)).toString("utf8"):utf8Slice(r,e,t):(r,e,t)=>t-e>64?textDecoder$1.decode(r.subarray(e,t)):utf8Slice(r,e,t),fromString$2=useBuffer?r=>r.length>64?globalThis.Buffer.from(r):utf8ToBytes(r):r=>r.length>64?textEncoder$2.encode(r):utf8ToBytes(r),fromArray=r=>Uint8Array.from(r),slice=useBuffer?(r,e,t)=>isBuffer(r)?new Uint8Array(r.subarray(e,t)):r.slice(e,t):(r,e,t)=>r.slice(e,t),concat$2=useBuffer?(r,e)=>(r=r.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),asU8A(globalThis.Buffer.concat(r,e))):(r,e)=>{const t=new Uint8Array(e);let n=0;for(let o of r)n+o.length>t.length&&(o=o.subarray(0,t.length-n)),t.set(o,n),n+=o.length;return t},alloc=useBuffer?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r);function compare(r,e){if(isBuffer(r)&&isBuffer(e))return r.compare(e);for(let t=0;t<r.length;t++)if(r[t]!==e[t])return r[t]<e[t]?-1:1;return 0}function utf8ToBytes(r,e=1/0){let t;const n=r.length;let o=null;const a=[];for(let s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!o){if(t>56319){(e-=3)>-1&&a.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&a.push(239,191,189);continue}o=t;continue}if(t<56320){(e-=3)>-1&&a.push(239,191,189),o=t;continue}t=(o-55296<<10|t-56320)+65536}else o&&(e-=3)>-1&&a.push(239,191,189);if(o=null,t<128){if((e-=1)<0)break;a.push(t)}else if(t<2048){if((e-=2)<0)break;a.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;a.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;a.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return a}function utf8Slice(r,e,t){const n=[];for(;e<t;){const o=r[e];let a=null,s=o>239?4:o>223?3:o>191?2:1;if(e+s<=t){let l,f,h,d;switch(s){case 1:o<128&&(a=o);break;case 2:l=r[e+1],(l&192)===128&&(d=(o&31)<<6|l&63,d>127&&(a=d));break;case 3:l=r[e+1],f=r[e+2],(l&192)===128&&(f&192)===128&&(d=(o&15)<<12|(l&63)<<6|f&63,d>2047&&(d<55296||d>57343)&&(a=d));break;case 4:l=r[e+1],f=r[e+2],h=r[e+3],(l&192)===128&&(f&192)===128&&(h&192)===128&&(d=(o&15)<<18|(l&63)<<12|(f&63)<<6|h&63,d>65535&&d<1114112&&(a=d))}}a===null?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),e+=s}return decodeCodePointsArray(n)}const MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(r){const e=r.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=MAX_ARGUMENTS_LENGTH));return t}const defaultChunkSize=256;class Bl{constructor(e=defaultChunkSize){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const o=t.length-(this.maxCursor-this.cursor)-1;t.set(e,o)}else{if(t){const o=t.length-(this.maxCursor-this.cursor)-1;o<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,o),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=alloc(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){const n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=slice(n,0,this.cursor)}else t=concat$2(this.chunks,this.cursor);return e&&this.reset(),t}}const decodeErrPrefix="CBOR decode error:",encodeErrPrefix="CBOR encode error:";function assertEnoughData(r,e,t){if(r.length-e<t)throw new Error(`${decodeErrPrefix} not enough data for type`)}const uintBoundaries=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8(r,e,t){assertEnoughData(r,e,1);const n=r[e];if(t.strict===!0&&n<uintBoundaries[0])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint16(r,e,t){assertEnoughData(r,e,2);const n=r[e]<<8|r[e+1];if(t.strict===!0&&n<uintBoundaries[1])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint32(r,e,t){assertEnoughData(r,e,4);const n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3];if(t.strict===!0&&n<uintBoundaries[2])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint64(r,e,t){assertEnoughData(r,e,8);const n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3],o=r[e+4]*16777216+(r[e+5]<<16)+(r[e+6]<<8)+r[e+7],a=(BigInt(n)<<BigInt(32))+BigInt(o);if(t.strict===!0&&a<uintBoundaries[3])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);if(a<=Number.MAX_SAFE_INTEGER)return Number(a);if(t.allowBigInt===!0)return a;throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`)}function decodeUint8(r,e,t,n){return new Token$1(Type.uint,readUint8(r,e+1,n),2)}function decodeUint16(r,e,t,n){return new Token$1(Type.uint,readUint16(r,e+1,n),3)}function decodeUint32(r,e,t,n){return new Token$1(Type.uint,readUint32(r,e+1,n),5)}function decodeUint64(r,e,t,n){return new Token$1(Type.uint,readUint64(r,e+1,n),9)}function encodeUint(r,e){return encodeUintValue(r,0,e.value)}function encodeUintValue(r,e,t){if(t<uintBoundaries[0]){const n=Number(t);r.push([e|n])}else if(t<uintBoundaries[1]){const n=Number(t);r.push([e|24,n])}else if(t<uintBoundaries[2]){const n=Number(t);r.push([e|25,n>>>8,n&255])}else if(t<uintBoundaries[3]){const n=Number(t);r.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{const n=BigInt(t);if(n<uintBoundaries[4]){const o=[e|27,0,0,0,0,0,0,0];let a=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=a&255,a=a>>8,o[7]=a&255,a=a>>8,o[6]=a&255,a=a>>8,o[5]=a&255,o[4]=s&255,s=s>>8,o[3]=s&255,s=s>>8,o[2]=s&255,s=s>>8,o[1]=s&255,r.push(o)}else throw new Error(`${decodeErrPrefix} encountered BigInt larger than allowable range`)}}encodeUint.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};encodeUintValue.encodedSize=function(e){return e<uintBoundaries[0]?1:e<uintBoundaries[1]?2:e<uintBoundaries[2]?3:e<uintBoundaries[3]?5:9};encodeUint.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};function decodeNegint8(r,e,t,n){return new Token$1(Type.negint,-1-readUint8(r,e+1,n),2)}function decodeNegint16(r,e,t,n){return new Token$1(Type.negint,-1-readUint16(r,e+1,n),3)}function decodeNegint32(r,e,t,n){return new Token$1(Type.negint,-1-readUint32(r,e+1,n),5)}const neg1b=BigInt(-1),pos1b=BigInt(1);function decodeNegint64(r,e,t,n){const o=readUint64(r,e+1,n);if(typeof o!="bigint"){const a=-1-o;if(a>=Number.MIN_SAFE_INTEGER)return new Token$1(Type.negint,a,9)}if(n.allowBigInt!==!0)throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`);return new Token$1(Type.negint,neg1b-BigInt(o),9)}function encodeNegint(r,e){const t=e.value,n=typeof t=="bigint"?t*neg1b-pos1b:t*-1-1;encodeUintValue(r,e.type.majorEncoded,n)}encodeNegint.encodedSize=function(e){const t=e.value,n=typeof t=="bigint"?t*neg1b-pos1b:t*-1-1;return n<uintBoundaries[0]?1:n<uintBoundaries[1]?2:n<uintBoundaries[2]?3:n<uintBoundaries[3]?5:9};encodeNegint.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};function toToken$3(r,e,t,n){assertEnoughData(r,e,t+n);const o=slice(r,e+t,e+t+n);return new Token$1(Type.bytes,o,t+n)}function decodeBytesCompact(r,e,t,n){return toToken$3(r,e,1,t)}function decodeBytes8(r,e,t,n){return toToken$3(r,e,2,readUint8(r,e+1,n))}function decodeBytes16(r,e,t,n){return toToken$3(r,e,3,readUint16(r,e+1,n))}function decodeBytes32(r,e,t,n){return toToken$3(r,e,5,readUint32(r,e+1,n))}function decodeBytes64(r,e,t,n){const o=readUint64(r,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`);return toToken$3(r,e,9,o)}function tokenBytes(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===Type.string?fromString$2(r.value):r.value),r.encodedBytes}function encodeBytes(r,e){const t=tokenBytes(e);encodeUintValue(r,e.type.majorEncoded,t.length),r.push(t)}encodeBytes.encodedSize=function(e){const t=tokenBytes(e);return encodeUintValue.encodedSize(t.length)+t.length};encodeBytes.compareTokens=function(e,t){return compareBytes(tokenBytes(e),tokenBytes(t))};function compareBytes(r,e){return r.length<e.length?-1:r.length>e.length?1:compare(r,e)}function toToken$2(r,e,t,n,o){const a=t+n;assertEnoughData(r,e,a);const s=new Token$1(Type.string,toString(r,e+t,e+a),a);return o.retainStringBytes===!0&&(s.byteValue=slice(r,e+t,e+a)),s}function decodeStringCompact(r,e,t,n){return toToken$2(r,e,1,t,n)}function decodeString8(r,e,t,n){return toToken$2(r,e,2,readUint8(r,e+1,n),n)}function decodeString16(r,e,t,n){return toToken$2(r,e,3,readUint16(r,e+1,n),n)}function decodeString32(r,e,t,n){return toToken$2(r,e,5,readUint32(r,e+1,n),n)}function decodeString64(r,e,t,n){const o=readUint64(r,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer string lengths not supported`);return toToken$2(r,e,9,o,n)}const encodeString=encodeBytes;function toToken$1(r,e,t,n){return new Token$1(Type.array,n,t)}function decodeArrayCompact(r,e,t,n){return toToken$1(r,e,1,t)}function decodeArray8(r,e,t,n){return toToken$1(r,e,2,readUint8(r,e+1,n))}function decodeArray16(r,e,t,n){return toToken$1(r,e,3,readUint16(r,e+1,n))}function decodeArray32(r,e,t,n){return toToken$1(r,e,5,readUint32(r,e+1,n))}function decodeArray64(r,e,t,n){const o=readUint64(r,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer array lengths not supported`);return toToken$1(r,e,9,o)}function decodeArrayIndefinite(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken$1(r,e,1,1/0)}function encodeArray(r,e){encodeUintValue(r,Type.array.majorEncoded,e.value)}encodeArray.compareTokens=encodeUint.compareTokens;encodeArray.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};function toToken(r,e,t,n){return new Token$1(Type.map,n,t)}function decodeMapCompact(r,e,t,n){return toToken(r,e,1,t)}function decodeMap8(r,e,t,n){return toToken(r,e,2,readUint8(r,e+1,n))}function decodeMap16(r,e,t,n){return toToken(r,e,3,readUint16(r,e+1,n))}function decodeMap32(r,e,t,n){return toToken(r,e,5,readUint32(r,e+1,n))}function decodeMap64(r,e,t,n){const o=readUint64(r,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer map lengths not supported`);return toToken(r,e,9,o)}function decodeMapIndefinite(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken(r,e,1,1/0)}function encodeMap(r,e){encodeUintValue(r,Type.map.majorEncoded,e.value)}encodeMap.compareTokens=encodeUint.compareTokens;encodeMap.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};function decodeTagCompact(r,e,t,n){return new Token$1(Type.tag,t,1)}function decodeTag8(r,e,t,n){return new Token$1(Type.tag,readUint8(r,e+1,n),2)}function decodeTag16(r,e,t,n){return new Token$1(Type.tag,readUint16(r,e+1,n),3)}function decodeTag32(r,e,t,n){return new Token$1(Type.tag,readUint32(r,e+1,n),5)}function decodeTag64(r,e,t,n){return new Token$1(Type.tag,readUint64(r,e+1,n),9)}function encodeTag(r,e){encodeUintValue(r,Type.tag.majorEncoded,e.value)}encodeTag.compareTokens=encodeUint.compareTokens;encodeTag.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};const MINOR_FALSE=20,MINOR_TRUE=21,MINOR_NULL=22,MINOR_UNDEFINED=23;function decodeUndefined(r,e,t,n){if(n.allowUndefined===!1)throw new Error(`${decodeErrPrefix} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new Token$1(Type.null,null,1):new Token$1(Type.undefined,void 0,1)}function decodeBreak(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return new Token$1(Type.break,void 0,1)}function createToken(r,e,t){if(t){if(t.allowNaN===!1&&Number.isNaN(r))throw new Error(`${decodeErrPrefix} NaN values are not supported`);if(t.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${decodeErrPrefix} Infinity values are not supported`)}return new Token$1(Type.float,r,e)}function decodeFloat16(r,e,t,n){return createToken(readFloat16(r,e+1),3,n)}function decodeFloat32(r,e,t,n){return createToken(readFloat32(r,e+1),5,n)}function decodeFloat64(r,e,t,n){return createToken(readFloat64(r,e+1),9,n)}function encodeFloat(r,e,t){const n=e.value;if(n===!1)r.push([Type.float.majorEncoded|MINOR_FALSE]);else if(n===!0)r.push([Type.float.majorEncoded|MINOR_TRUE]);else if(n===null)r.push([Type.float.majorEncoded|MINOR_NULL]);else if(n===void 0)r.push([Type.float.majorEncoded|MINOR_UNDEFINED]);else{let o,a=!1;(!t||t.float64!==!0)&&(encodeFloat16(n),o=readFloat16(ui8a,1),n===o||Number.isNaN(n)?(ui8a[0]=249,r.push(ui8a.slice(0,3)),a=!0):(encodeFloat32(n),o=readFloat32(ui8a,1),n===o&&(ui8a[0]=250,r.push(ui8a.slice(0,5)),a=!0))),a||(encodeFloat64(n),o=readFloat64(ui8a,1),ui8a[0]=251,r.push(ui8a.slice(0,9)))}}encodeFloat.encodedSize=function(e,t){const n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){encodeFloat16(n);let o=readFloat16(ui8a,1);if(n===o||Number.isNaN(n))return 3;if(encodeFloat32(n),o=readFloat32(ui8a,1),n===o)return 5}return 9};const buffer$1=new ArrayBuffer(9),dataView=new DataView(buffer$1,1),ui8a=new Uint8Array(buffer$1,0);function encodeFloat16(r){if(r===1/0)dataView.setUint16(0,31744,!1);else if(r===-1/0)dataView.setUint16(0,64512,!1);else if(Number.isNaN(r))dataView.setUint16(0,32256,!1);else{dataView.setFloat32(0,r);const e=dataView.getUint32(0),t=(e&2139095040)>>23,n=e&8388607;if(t===255)dataView.setUint16(0,31744,!1);else if(t===0)dataView.setUint16(0,(r&2147483648)>>16|n>>13,!1);else{const o=t-127;o<-24?dataView.setUint16(0,0):o<-14?dataView.setUint16(0,(e&2147483648)>>16|1<<24+o,!1):dataView.setUint16(0,(e&2147483648)>>16|o+15<<10|n>>13,!1)}}}function readFloat16(r,e){if(r.length-e<2)throw new Error(`${decodeErrPrefix} not enough data for float16`);const t=(r[e]<<8)+r[e+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;const n=t>>10&31,o=t&1023;let a;return n===0?a=o*2**-24:n!==31?a=(o+1024)*2**(n-25):a=o===0?1/0:NaN,t&32768?-a:a}function encodeFloat32(r){dataView.setFloat32(0,r,!1)}function readFloat32(r,e){if(r.length-e<4)throw new Error(`${decodeErrPrefix} not enough data for float32`);const t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,4).getFloat32(0,!1)}function encodeFloat64(r){dataView.setFloat64(0,r,!1)}function readFloat64(r,e){if(r.length-e<8)throw new Error(`${decodeErrPrefix} not enough data for float64`);const t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,8).getFloat64(0,!1)}encodeFloat.compareTokens=encodeUint.compareTokens;function invalidMinor(r,e,t){throw new Error(`${decodeErrPrefix} encountered invalid minor (${t}) for major ${r[e]>>>5}`)}function errorer(r){return()=>{throw new Error(`${decodeErrPrefix} ${r}`)}}const jump=[];for(let r=0;r<=23;r++)jump[r]=invalidMinor;jump[24]=decodeUint8;jump[25]=decodeUint16;jump[26]=decodeUint32;jump[27]=decodeUint64;jump[28]=invalidMinor;jump[29]=invalidMinor;jump[30]=invalidMinor;jump[31]=invalidMinor;for(let r=32;r<=55;r++)jump[r]=invalidMinor;jump[56]=decodeNegint8;jump[57]=decodeNegint16;jump[58]=decodeNegint32;jump[59]=decodeNegint64;jump[60]=invalidMinor;jump[61]=invalidMinor;jump[62]=invalidMinor;jump[63]=invalidMinor;for(let r=64;r<=87;r++)jump[r]=decodeBytesCompact;jump[88]=decodeBytes8;jump[89]=decodeBytes16;jump[90]=decodeBytes32;jump[91]=decodeBytes64;jump[92]=invalidMinor;jump[93]=invalidMinor;jump[94]=invalidMinor;jump[95]=errorer("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)jump[r]=decodeStringCompact;jump[120]=decodeString8;jump[121]=decodeString16;jump[122]=decodeString32;jump[123]=decodeString64;jump[124]=invalidMinor;jump[125]=invalidMinor;jump[126]=invalidMinor;jump[127]=errorer("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)jump[r]=decodeArrayCompact;jump[152]=decodeArray8;jump[153]=decodeArray16;jump[154]=decodeArray32;jump[155]=decodeArray64;jump[156]=invalidMinor;jump[157]=invalidMinor;jump[158]=invalidMinor;jump[159]=decodeArrayIndefinite;for(let r=160;r<=183;r++)jump[r]=decodeMapCompact;jump[184]=decodeMap8;jump[185]=decodeMap16;jump[186]=decodeMap32;jump[187]=decodeMap64;jump[188]=invalidMinor;jump[189]=invalidMinor;jump[190]=invalidMinor;jump[191]=decodeMapIndefinite;for(let r=192;r<=215;r++)jump[r]=decodeTagCompact;jump[216]=decodeTag8;jump[217]=decodeTag16;jump[218]=decodeTag32;jump[219]=decodeTag64;jump[220]=invalidMinor;jump[221]=invalidMinor;jump[222]=invalidMinor;jump[223]=invalidMinor;for(let r=224;r<=243;r++)jump[r]=errorer("simple values are not supported");jump[244]=invalidMinor;jump[245]=invalidMinor;jump[246]=invalidMinor;jump[247]=decodeUndefined;jump[248]=errorer("simple values are not supported");jump[249]=decodeFloat16;jump[250]=decodeFloat32;jump[251]=decodeFloat64;jump[252]=invalidMinor;jump[253]=invalidMinor;jump[254]=invalidMinor;jump[255]=decodeBreak;const quick=[];for(let r=0;r<24;r++)quick[r]=new Token$1(Type.uint,r,1);for(let r=-1;r>=-24;r--)quick[31-r]=new Token$1(Type.negint,r,1);quick[64]=new Token$1(Type.bytes,new Uint8Array(0),1);quick[96]=new Token$1(Type.string,"",1);quick[128]=new Token$1(Type.array,0,1);quick[160]=new Token$1(Type.map,0,1);quick[244]=new Token$1(Type.false,!1,1);quick[245]=new Token$1(Type.true,!0,1);quick[246]=new Token$1(Type.null,null,1);function quickEncodeToken(r){switch(r.type){case Type.false:return fromArray([244]);case Type.true:return fromArray([245]);case Type.null:return fromArray([246]);case Type.bytes:return r.value.length?void 0:fromArray([64]);case Type.string:return r.value===""?fromArray([96]):void 0;case Type.array:return r.value===0?fromArray([128]):void 0;case Type.map:return r.value===0?fromArray([160]):void 0;case Type.uint:return r.value<24?fromArray([Number(r.value)]):void 0;case Type.negint:if(r.value>=-24)return fromArray([31-Number(r.value)])}}const defaultEncodeOptions={float64:!1,mapSorter,quickEncodeToken};function makeCborEncoders(){const r=[];return r[Type.uint.major]=encodeUint,r[Type.negint.major]=encodeNegint,r[Type.bytes.major]=encodeBytes,r[Type.string.major]=encodeString,r[Type.array.major]=encodeArray,r[Type.map.major]=encodeMap,r[Type.tag.major]=encodeTag,r[Type.float.major]=encodeFloat,r}const cborEncoders=makeCborEncoders(),buf=new Bl;class Ref{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${encodeErrPrefix} object contains circular references`);return new Ref(t,e)}}const simpleTokens={null:new Token$1(Type.null,null),undefined:new Token$1(Type.undefined,void 0),true:new Token$1(Type.true,!0),false:new Token$1(Type.false,!1),emptyArray:new Token$1(Type.array,0),emptyMap:new Token$1(Type.map,0)},typeEncoders={number(r,e,t,n){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new Token$1(Type.float,r):r>=0?new Token$1(Type.uint,r):new Token$1(Type.negint,r)},bigint(r,e,t,n){return r>=BigInt(0)?new Token$1(Type.uint,r):new Token$1(Type.negint,r)},Uint8Array(r,e,t,n){return new Token$1(Type.bytes,r)},string(r,e,t,n){return new Token$1(Type.string,r)},boolean(r,e,t,n){return r?simpleTokens.true:simpleTokens.false},null(r,e,t,n){return simpleTokens.null},undefined(r,e,t,n){return simpleTokens.undefined},ArrayBuffer(r,e,t,n){return new Token$1(Type.bytes,new Uint8Array(r))},DataView(r,e,t,n){return new Token$1(Type.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,e,t,n){if(!r.length)return t.addBreakTokens===!0?[simpleTokens.emptyArray,new Token$1(Type.break)]:simpleTokens.emptyArray;n=Ref.createCheck(n,r);const o=[];let a=0;for(const s of r)o[a++]=objectToTokens(s,t,n);return t.addBreakTokens?[new Token$1(Type.array,r.length),o,new Token$1(Type.break)]:[new Token$1(Type.array,r.length),o]},Object(r,e,t,n){const o=e!=="Object",a=o?r.keys():Object.keys(r),s=o?r.size:a.length;if(!s)return t.addBreakTokens===!0?[simpleTokens.emptyMap,new Token$1(Type.break)]:simpleTokens.emptyMap;n=Ref.createCheck(n,r);const l=[];let f=0;for(const h of a)l[f++]=[objectToTokens(h,t,n),objectToTokens(o?r.get(h):r[h],t,n)];return sortMapEntries(l,t),t.addBreakTokens?[new Token$1(Type.map,s),l,new Token$1(Type.break)]:[new Token$1(Type.map,s),l]}};typeEncoders.Map=typeEncoders.Object;typeEncoders.Buffer=typeEncoders.Uint8Array;for(const r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders[`${r}Array`]=typeEncoders.DataView;function objectToTokens(r,e={},t){const n=is(r),o=e&&e.typeEncoders&&e.typeEncoders[n]||typeEncoders[n];if(typeof o=="function"){const s=o(r,n,e,t);if(s!=null)return s}const a=typeEncoders[n];if(!a)throw new Error(`${encodeErrPrefix} unsupported type: ${n}`);return a(r,n,e,t)}function sortMapEntries(r,e){e.mapSorter&&r.sort(e.mapSorter)}function mapSorter(r,e){const t=Array.isArray(r[0])?r[0][0]:r[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(t.type!==n.type)return t.type.compare(n.type);const o=t.type.major,a=cborEncoders[o].compareTokens(t,n);return a===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),a}function tokensToEncoded(r,e,t,n){if(Array.isArray(e))for(const o of e)tokensToEncoded(r,o,t,n);else t[e.type.major](r,e,n)}function encodeCustom(r,e,t){const n=objectToTokens(r,t);if(!Array.isArray(n)&&t.quickEncodeToken){const o=t.quickEncodeToken(n);if(o)return o;const a=e[n.type.major];if(a.encodedSize){const s=a.encodedSize(n,t),l=new Bl(s);if(a(l,n,t),l.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return asU8A(l.chunks[0])}}return buf.reset(),tokensToEncoded(buf,n,e,t),buf.toBytes(!0)}function encode$6(r,e){return e=Object.assign({},defaultEncodeOptions,e),encodeCustom(r,cborEncoders,e)}const defaultDecodeOptions={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Tokeniser{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){const e=this.data[this.pos];let t=quick[e];if(t===void 0){const n=jump[e];if(!n)throw new Error(`${decodeErrPrefix} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const o=e&31;t=n(this.data,this.pos,o,this.options)}return this.pos+=t.encodedLength,t}}const DONE=Symbol.for("DONE"),BREAK=Symbol.for("BREAK");function tokenToArray(r,e,t){const n=[];for(let o=0;o<r.value;o++){const a=tokensToObject(e,t);if(a===BREAK){if(r.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed array`)}if(a===DONE)throw new Error(`${decodeErrPrefix} found array but not enough entries (got ${o}, expected ${r.value})`);n[o]=a}return n}function tokenToMap(r,e,t){const n=t.useMaps===!0,o=n?void 0:{},a=n?new Map:void 0;for(let s=0;s<r.value;s++){const l=tokensToObject(e,t);if(l===BREAK){if(r.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed map`)}if(l===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${s} [no key], expected ${r.value})`);if(n!==!0&&typeof l!="string")throw new Error(`${decodeErrPrefix} non-string keys not supported (got ${typeof l})`);if(t.rejectDuplicateMapKeys===!0&&(n&&a.has(l)||!n&&l in o))throw new Error(`${decodeErrPrefix} found repeat map key "${l}"`);const f=tokensToObject(e,t);if(f===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${s} [no value], expected ${r.value})`);n?a.set(l,f):o[l]=f}return n?a:o}function tokensToObject(r,e){if(r.done())return DONE;const t=r.next();if(t.type===Type.break)return BREAK;if(t.type.terminal)return t.value;if(t.type===Type.array)return tokenToArray(t,r,e);if(t.type===Type.map)return tokenToMap(t,r,e);if(t.type===Type.tag){if(e.tags&&typeof e.tags[t.value]=="function"){const n=tokensToObject(r,e);return e.tags[t.value](n)}throw new Error(`${decodeErrPrefix} tag not supported (${t.value})`)}throw new Error("unsupported")}function decode$5(r,e){if(!(r instanceof Uint8Array))throw new Error(`${decodeErrPrefix} data to decode must be a Uint8Array`);e=Object.assign({},defaultDecodeOptions,e);const t=e.tokenizer||new Tokeniser(r,e),n=tokensToObject(t,e);if(n===DONE)throw new Error(`${decodeErrPrefix} did not find any content to decode`);if(n===BREAK)throw new Error(`${decodeErrPrefix} got unexpected break`);if(!t.done())throw new Error(`${decodeErrPrefix} too many terminals, data makes no sense`);return n}const CID_CBOR_TAG$1=42;function cidEncoder$1(r){if(r.asCID!==r)return null;const e=CID.asCID(r);if(!e)return null;const t=new Uint8Array(e.bytes.byteLength+1);return t.set(e.bytes,1),[new Token$1(Type.tag,CID_CBOR_TAG$1),new Token$1(Type.bytes,t)]}function undefinedEncoder$1(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder$1(r){if(Number.isNaN(r))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(r===1/0||r===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions$1={float64:!0,typeEncoders:{Object:cidEncoder$1,undefined:undefinedEncoder$1,number:numberEncoder$1}};function cidDecoder$1(r){if(r[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID.decode(r.subarray(1))}const decodeOptions$1={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions$1.tags[CID_CBOR_TAG$1]=cidDecoder$1;const encode$5=r=>encode$6(r,encodeOptions$1),decode$4=r=>decode$5(r,decodeOptions$1),CIDV0_BYTES={SHA2_256:18,LENGTH:32,DAG_PB:112};async function readVarint(r){const e=await r.upTo(8),t=varint$2.decode(e);return r.seek(varint$2.decode.bytes),t}async function readHeader(r){const e=await readVarint(r);if(e===0)throw new Error("Invalid CAR header (zero length)");const t=await r.exactly(e);r.seek(e);const n=decode$4(t);if(n==null||Array.isArray(n)||typeof n!="object")throw new Error("Invalid CAR header format");if(n.version!==1)throw typeof n.version=="string"?new Error(`Invalid CAR version: "${n.version}"`):new Error(`Invalid CAR version: ${n.version}`);if(!Array.isArray(n.roots))throw new Error("Invalid CAR header format");if(Object.keys(n).filter(o=>o!=="roots"&&o!=="version").length)throw new Error("Invalid CAR header format");return n}async function readMultihash(r){const e=await r.upTo(8);varint$2.decode(e);const t=varint$2.decode.bytes,n=varint$2.decode(e.subarray(varint$2.decode.bytes)),o=varint$2.decode.bytes,a=t+o+n,s=await r.exactly(a);return r.seek(a),s}async function readCid(r){const e=await r.exactly(2);if(e[0]===CIDV0_BYTES.SHA2_256&&e[1]===CIDV0_BYTES.LENGTH){const s=await r.exactly(34);r.seek(34);const l=decode$7(s);return CID.create(0,CIDV0_BYTES.DAG_PB,l)}const t=await readVarint(r);if(t!==1)throw new Error(`Unexpected CID version (${t})`);const n=await readVarint(r),o=await readMultihash(r),a=decode$7(o);return CID.create(t,n,a)}async function readBlockHead(r){const e=r.pos;let t=await readVarint(r);if(t===0)throw new Error("Invalid CAR section (zero length)");t+=r.pos-e;const n=await readCid(r),o=t-(r.pos-e);return{cid:n,length:t,blockLength:o}}async function readBlock(r){const{cid:e,blockLength:t}=await readBlockHead(r),n=await r.exactly(t);return r.seek(t),{bytes:n,cid:e}}async function readBlockIndex(r){const e=r.pos,{cid:t,length:n,blockLength:o}=await readBlockHead(r),a={cid:t,length:n,blockLength:o,offset:e,blockOffset:r.pos};return r.seek(a.blockLength),a}function createDecoder(r){const e=readHeader(r);return{header:()=>e,async*blocks(){for(await e;(await r.upTo(8)).length>0;)yield await readBlock(r)},async*blocksIndex(){for(await e;(await r.upTo(8)).length>0;)yield await readBlockIndex(r)}}}function bytesReader(r){let e=0;return{async upTo(t){return r.subarray(e,e+Math.min(t,r.length-e))},async exactly(t){if(t>r.length-e)throw new Error("Unexpected end of data");return r.subarray(e,e+t)},seek(t){e+=t},get pos(){return e}}}function chunkReader(r){let e=0,t=0,n=0,o=new Uint8Array(0);const a=async s=>{t=o.length-n;const l=[o.subarray(n)];for(;t<s;){const h=await r();if(h==null)break;t<0?h.length>t&&l.push(h.subarray(-t)):l.push(h),t+=h.length}o=new Uint8Array(l.reduce((h,d)=>h+d.length,0));let f=0;for(const h of l)o.set(h,f),f+=h.length;n=0};return{async upTo(s){return o.length-n<s&&await a(s),o.subarray(n,n+Math.min(o.length-n,s))},async exactly(s){if(o.length-n<s&&await a(s),o.length-n<s)throw new Error("Unexpected end of data");return o.subarray(n,n+s)},seek(s){e+=s,n+=s},get pos(){return e}}}function asyncIterableReader(r){const e=r[Symbol.asyncIterator]();async function t(){const n=await e.next();return n.done?null:n.value}return chunkReader(t)}class CarReader{constructor(e,t,n){this._version=e,this._roots=t,this._blocks=n,this._keys=n.map(o=>o.cid.toString())}get version(){return this._version}async getRoots(){return this._roots}async has(e){return this._keys.indexOf(e.toString())>-1}async get(e){const t=this._keys.indexOf(e.toString());return t>-1?this._blocks[t]:void 0}async*blocks(){for(const e of this._blocks)yield e}async*cids(){for(const e of this._blocks)yield e.cid}static async fromBytes(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return decodeReaderComplete(bytesReader(e))}static async fromIterable(e){if(!e||typeof e[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return decodeReaderComplete(asyncIterableReader(e))}}async function decodeReaderComplete(r){const e=createDecoder(r),{version:t,roots:n}=await e.header(),o=[];for await(const a of e.blocks())o.push(a);return new CarReader(t,n,o)}function createHeader(r){const e=encode$5({version:1,roots:r}),t=varint$2.encode(e.length),n=new Uint8Array(t.length+e.length);return n.set(t,0),n.set(e,t.length),n}function createEncoder(r){return{async setRoots(e){const t=createHeader(e);await r.write(t)},async writeBlock(e){const{cid:t,bytes:n}=e;await r.write(new Uint8Array(varint$2.encode(t.bytes.length+n.length))),await r.write(t.bytes),n.length&&await r.write(n)},async close(){return r.end()}}}function noop$1(){}function create$3(){const r=[];let e=null,t=noop$1,n=!1,o=null,a=noop$1;const s=()=>(e||(e=new Promise(h=>{t=()=>{e=null,t=noop$1,h()}})),e),l={write(h){r.push(h);const d=s();return a(),d},async end(){n=!0;const h=s();return a(),h}},f={async next(){const h=r.shift();return h?(r.length===0&&t(),{done:!1,value:h}):n?(t(),{done:!0,value:void 0}):(o||(o=new Promise(d=>{a=()=>(o=null,a=noop$1,d(f.next()))})),o)}};return{writer:l,iterator:f}}class CarWriter{constructor(e,t){this._encoder=t,this._mutex=t.setRoots(e),this._ended=!1}async put(e){if(!(e.bytes instanceof Uint8Array)||!e.cid)throw new TypeError("Can only write {cid, bytes} objects");if(this._ended)throw new Error("Already closed");const t=CID.asCID(e.cid);if(!t)throw new TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then(()=>this._encoder.writeBlock({cid:t,bytes:e.bytes})),this._mutex}async close(){if(this._ended)throw new Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}static create(e){e=toRoots(e);const{encoder:t,iterator:n}=encodeWriter(),o=new CarWriter(e,t),a=new CarWriterOut(n);return{writer:o,out:a}}static createAppender(){const{encoder:e,iterator:t}=encodeWriter();e.setRoots=()=>Promise.resolve();const n=new CarWriter([],e),o=new CarWriterOut(t);return{writer:n,out:o}}static async updateRootsInBytes(e,t){const n=bytesReader(e);await readHeader(n);const o=createHeader(t);if(n.pos!==o.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${n.pos} bytes, new header is ${o.length} bytes)`);return e.set(o,0),e}}class CarWriterOut{constructor(e){this._iterator=e}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}}function encodeWriter(){const r=create$3(),{writer:e,iterator:t}=r;return{encoder:createEncoder(e),iterator:t}}function toRoots(r){if(r===void 0)return[];if(!Array.isArray(r)){const t=CID.asCID(r);if(!t)throw new TypeError("roots must be a single CID or an array of CIDs");return[t]}const e=[];for(const t of r){const n=CID.asCID(t);if(!n)throw new TypeError("roots must be a single CID or an array of CIDs");e.push(n)}return e}const from=({name:r,code:e,encode:t})=>new Hasher(r,e,t);class Hasher{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?create$4(this.code,t):t.then(n=>create$4(this.code,n))}else throw Error("Unknown type, must be binary type")}}const readonly=({enumerable:r=!0,configurable:e=!1}={})=>({enumerable:r,configurable:e,writable:!1}),links=function*(r,e){if(r!=null&&!(r instanceof Uint8Array))for(const[t,n]of Object.entries(r)){const o=[...e,t];if(n!=null&&typeof n=="object")if(Array.isArray(n))for(const[a,s]of n.entries()){const l=[...o,a],f=CID.asCID(s);f?yield[l.join("/"),f]:typeof s=="object"&&(yield*links(s,l))}else{const a=CID.asCID(n);a?yield[o.join("/"),a]:yield*links(n,o)}}},tree=function*(r,e){if(r!=null)for(const[t,n]of Object.entries(r)){const o=[...e,t];if(yield o.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!CID.asCID(n))if(Array.isArray(n))for(const[a,s]of n.entries()){const l=[...o,a];yield l.join("/"),typeof s=="object"&&!CID.asCID(s)&&(yield*tree(s,l))}else yield*tree(n,o)}},get=(r,e)=>{let t=r;for(const[n,o]of e.entries()){if(t=t[o],t==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(s=>`[${JSON.stringify(s)}]`).join("")}`);const a=CID.asCID(t);if(a)return{value:a,remaining:e.slice(n+1).join("/")}}return{value:t}};class Block{constructor({cid:e,bytes:t,value:n}){if(!e||!t||typeof n>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=t,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:readonly(),bytes:readonly(),value:readonly(),asBlock:readonly()})}links(){return links(this.value,[])}tree(){return tree(this.value,[])}get(e="/"){return get(this.value,e.split("/").filter(Boolean))}}const encode$4=async({value:r,codec:e,hasher:t})=>{if(typeof r>"u")throw new Error('Missing required argument "value"');if(!e||!t)throw new Error("Missing required argument: codec or hasher");const n=e.encode(r),o=await t.digest(n),a=CID.create(1,e.code,o);return new Block({value:r,bytes:n,cid:a})},name$2="raw",code$3=85,encode$3=r=>coerce(r),decode$3=r=>coerce(r),raw=Object.freeze(Object.defineProperty({__proto__:null,code:code$3,decode:decode$3,encode:encode$3,name:name$2},Symbol.toStringTag,{value:"Module"})),CID_CBOR_TAG=42;function cidEncoder(r){if(r.asCID!==r)return null;const e=CID.asCID(r);if(!e)return null;const t=new Uint8Array(e.bytes.byteLength+1);return t.set(e.bytes,1),[new Token$1(Type.tag,CID_CBOR_TAG),new Token$1(Type.bytes,t)]}function undefinedEncoder(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder(r){if(Number.isNaN(r))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(r===1/0||r===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions={float64:!0,typeEncoders:{Object:cidEncoder,undefined:undefinedEncoder,number:numberEncoder}};function cidDecoder(r){if(r[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID.decode(r.subarray(1))}const decodeOptions={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions.tags[CID_CBOR_TAG]=cidDecoder;const name$1="dag-cbor",code$2=113,encode$2=r=>encode$6(r,encodeOptions),decode$2=r=>decode$5(r,decodeOptions),dagCbor=Object.freeze(Object.defineProperty({__proto__:null,code:code$2,decode:decode$2,encode:encode$2,name:name$1},Symbol.toStringTag,{value:"Module"})),textDecoder=new TextDecoder;function decodeVarint(r,e){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=r.length)throw new Error("protobuf: unexpected end of data");const o=r[e++];if(t+=n<28?(o&127)<<n:(o&127)*2**n,o<128)break}return[t,e]}function decodeBytes(r,e){let t;[t,e]=decodeVarint(r,e);const n=e+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>r.length)throw new Error("protobuf: unexpected end of data");return[r.subarray(e,n),n]}function decodeKey(r,e){let t;return[t,e]=decodeVarint(r,e),[t&7,t>>3,e]}function decodeLink(r){const e={},t=r.length;let n=0;for(;n<t;){let o,a;if([o,a,n]=decodeKey(r,n),a===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=decodeBytes(r,n)}else if(a===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let s;[s,n]=decodeBytes(r,n),e.Name=textDecoder.decode(s)}else if(a===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[e.Tsize,n]=decodeVarint(r,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${a}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function decodeNode(r){const e=r.length;let t=0,n,o=!1,a;for(;t<e;){let l,f;if([l,f,t]=decodeKey(r,t),l!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${l}`);if(f===1){if(a)throw new Error("protobuf: (PBNode) duplicate Data section");[a,t]=decodeBytes(r,t),n&&(o=!0)}else if(f===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let h;[h,t]=decodeBytes(r,t),n.push(decodeLink(h))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${f}`)}if(t>e)throw new Error("protobuf: (PBNode) unexpected end of data");const s={};return a&&(s.Data=a),s.Links=n||[],s}const textEncoder$1=new TextEncoder,maxInt32=2**32,maxUInt32=2**31;function encodeLink(r,e){let t=e.length;if(typeof r.Tsize=="number"){if(r.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(r.Tsize))throw new Error("Tsize too large for encoding");t=encodeVarint(e,t,r.Tsize)-1,e[t]=24}if(typeof r.Name=="string"){const n=textEncoder$1.encode(r.Name);t-=n.length,e.set(n,t),t=encodeVarint(e,t,n.length)-1,e[t]=18}return r.Hash&&(t-=r.Hash.length,e.set(r.Hash,t),t=encodeVarint(e,t,r.Hash.length)-1,e[t]=10),e.length-t}function encodeNode(r){const e=sizeNode(r),t=new Uint8Array(e);let n=e;if(r.Data&&(n-=r.Data.length,t.set(r.Data,n),n=encodeVarint(t,n,r.Data.length)-1,t[n]=10),r.Links)for(let o=r.Links.length-1;o>=0;o--){const a=encodeLink(r.Links[o],t.subarray(0,n));n-=a,n=encodeVarint(t,n,a)-1,t[n]=18}return t}function sizeLink(r){let e=0;if(r.Hash){const t=r.Hash.length;e+=1+t+sov(t)}if(typeof r.Name=="string"){const t=textEncoder$1.encode(r.Name).length;e+=1+t+sov(t)}return typeof r.Tsize=="number"&&(e+=1+sov(r.Tsize)),e}function sizeNode(r){let e=0;if(r.Data){const t=r.Data.length;e+=1+t+sov(t)}if(r.Links)for(const t of r.Links){const n=sizeLink(t);e+=1+n+sov(n)}return e}function encodeVarint(r,e,t){e-=sov(t);const n=e;for(;t>=maxUInt32;)r[e++]=t&127|128,t/=128;for(;t>=128;)r[e++]=t&127|128,t>>>=7;return r[e]=t,n}function sov(r){return r%2===0&&r++,Math.floor((len64(r)+6)/7)}function len64(r){let e=0;return r>=maxInt32&&(r=Math.floor(r/maxInt32),e=32),r>=65536&&(r>>>=16,e+=16),r>=256&&(r>>>=8,e+=8),e+len8tab[r]}const len8tab=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],pbNodeProperties=["Data","Links"],pbLinkProperties=["Hash","Name","Tsize"],textEncoder=new TextEncoder;function linkComparator(r,e){if(r===e)return 0;const t=r.Name?textEncoder.encode(r.Name):[],n=e.Name?textEncoder.encode(e.Name):[];let o=t.length,a=n.length;for(let s=0,l=Math.min(o,a);s<l;++s)if(t[s]!==n[s]){o=t[s],a=n[s];break}return o<a?-1:a<o?1:0}function hasOnlyProperties(r,e){return!Object.keys(r).some(t=>!e.includes(t))}function asLink(r){if(typeof r.asCID=="object"){const t=CID.asCID(r);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if(typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");const e={};if(r.Hash){let t=CID.asCID(r.Hash);try{t||(typeof r.Hash=="string"?t=CID.parse(r.Hash):r.Hash instanceof Uint8Array&&(t=CID.decode(r.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}t&&(e.Hash=t)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof r.Name=="string"&&(e.Name=r.Name),typeof r.Tsize=="number"&&(e.Tsize=r.Tsize),e}function prepare(r){if((r instanceof Uint8Array||typeof r=="string")&&(r={Data:r}),typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");const e={};if(r.Data!==void 0)if(typeof r.Data=="string")e.Data=textEncoder.encode(r.Data);else if(r.Data instanceof Uint8Array)e.Data=r.Data;else throw new TypeError("Invalid DAG-PB form");if(r.Links!==void 0)if(Array.isArray(r.Links))e.Links=r.Links.map(asLink),e.Links.sort(linkComparator);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function validate(r){if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");if(!hasOnlyProperties(r,pbNodeProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(r.Data!==void 0&&!(r.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(r.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<r.Links.length;e++){const t=r.Links[e];if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!hasOnlyProperties(t,pbLinkProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!t.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash.asCID!==t.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0&&(typeof t.Tsize!="number"||t.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&linkComparator(t,r.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function createNode(r,e=[]){return prepare({Data:r,Links:e})}function createLink(r,e,t){return asLink({Hash:t,Name:r,Tsize:e})}const name="dag-pb",code$1=112;function encode$1(r){validate(r);const e={};return r.Links&&(e.Links=r.Links.map(t=>{const n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),r.Data&&(e.Data=r.Data),encodeNode(e)}function decode$1(r){const e=decodeNode(r),t={};return e.Data&&(t.Data=e.Data),e.Links&&(t.Links=e.Links.map(n=>{const o={};try{o.Hash=CID.decode(n.Hash)}catch{}if(!o.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(o.Name=n.Name),n.Tsize!==void 0&&(o.Tsize=n.Tsize),o})),t}const dagPb=Object.freeze(Object.defineProperty({__proto__:null,code:code$1,createLink,createNode,decode:decode$1,encode:encode$1,name,prepare,validate},Symbol.toStringTag,{value:"Module"}));class TreewalkCarSplitter{constructor(e,t,n={}){if(typeof t!="number"||t<=0)throw new Error("invalid target chunk size");this._reader=e,this._targetSize=t,this._decoders=[dagPb,raw,dagCbor,...n.decoders||[]]}async*cars(){const e=await this._reader.getRoots();if(e.length!==1)throw new Error(`unexpected number of roots: ${e.length}`);let t;for await(const n of this._cars(e[0]))t=n.channel,n.out&&(yield n.out);if(!t)throw new Error("missing CAR writer channel");t.writer.close(),yield t.out}async _get(e){const t=await this._reader.get(e);if(!t)throw new Error(`missing block for ${e}`);const{bytes:n}=t,o=this._decoders.find(a=>a.code===e.code);if(!o)throw new Error(`missing decoder for ${e.code}`);return new Block({cid:e,bytes:n,value:o.decode(n)})}async*_cars(e,t=[],n=void 0){const o=await this._get(e);if(n=n||Object.assign(CarWriter.create(e),{size:0}),n.size>0&&n.size+o.bytes.byteLength>=this._targetSize){n.writer.close();const{out:a}=n;n=newCar(t),yield{channel:n,out:a}}t=t.concat(o),n.size+=o.bytes.byteLength,n.writer.put(o);for(const[,a]of o.links())for await(const s of this._cars(a,t,n))n=s.channel,yield s;if(!n)throw new Error("missing CAR writer channel");yield{channel:n}}static async fromIterable(e,t,n){const o=await CarReader.fromIterable(e);return new TreewalkCarSplitter(o,t,n)}static async fromBlob(e,t,n){const o=await e.arrayBuffer(),a=await CarReader.fromBytes(new Uint8Array(o));return new TreewalkCarSplitter(a,t,n)}}function newCar(r){const e=Object.assign(CarWriter.create(r[0].cid),{size:r.reduce((t,n)=>t+n.bytes.byteLength,0)});for(const t of r)e.writer.put(t);return e}const last=async r=>{let e;for await(const t of r)e=t;return e};var itLast=last;const last$1=getDefaultExportFromCjs(itLast);var itPipe={exports:{}};const rawPipe=(...r)=>{let e;for(;r.length;)e=r.shift()(e);return e},isIterable$1=r=>r&&(typeof r[Symbol.asyncIterator]=="function"||typeof r[Symbol.iterator]=="function"||typeof r.next=="function"),isDuplex=r=>r&&typeof r.sink=="function"&&isIterable$1(r.source),duplexPipelineFn=r=>e=>(r.sink(e),r.source),pipe=(...r)=>{if(isDuplex(r[0])){const e=r[0];r[0]=()=>e.source}else if(isIterable$1(r[0])){const e=r[0];r[0]=()=>e}if(r.length>1&&isDuplex(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let e=1;e<r.length-1;e++)isDuplex(r[e])&&(r[e]=duplexPipelineFn(r[e]));return rawPipe(...r)};itPipe.exports=pipe;itPipe.exports.pipe=pipe;itPipe.exports.rawPipe=rawPipe;itPipe.exports.isIterable=isIterable$1;itPipe.exports.isDuplex=isDuplex;var itPipeExports=itPipe.exports;const pipe$1=getDefaultExportFromCjs(itPipeExports);async function*batch$1(r,e=1){let t=[];e<1&&(e=1);for await(const n of r)for(t.push(n);t.length>=e;)yield t.slice(0,e),t=t.slice(e);for(;t.length;)yield t.slice(0,e),t=t.slice(e)}var itBatch=batch$1;const batch$2=getDefaultExportFromCjs(itBatch),batch=itBatch;async function*parallelBatch(r,e=1){for await(const t of batch(r,e)){const n=t.map(o=>o().then(a=>({ok:!0,value:a}),a=>({ok:!1,err:a})));for(let o=0;o<n.length;o++){const a=await n[o];if(a.ok)yield a.value;else throw a.err}}}var itParallelBatch=parallelBatch;const parallelBatch$1=getDefaultExportFromCjs(itParallelBatch);var isPlainObj=r=>{if(Object.prototype.toString.call(r)!=="[object Object]")return!1;const e=Object.getPrototypeOf(r);return e===null||e===Object.prototype};const isOptionObject=isPlainObj,{hasOwnProperty}=Object.prototype,{propertyIsEnumerable}=Object,defineProperty=(r,e,t)=>Object.defineProperty(r,e,{value:t,writable:!0,enumerable:!0,configurable:!0}),globalThis$1=commonjsGlobal,defaultMergeOptions={concatArrays:!1,ignoreUndefined:!1},getEnumerableOwnPropertyKeys=r=>{const e=[];for(const t in r)hasOwnProperty.call(r,t)&&e.push(t);if(Object.getOwnPropertySymbols){const t=Object.getOwnPropertySymbols(r);for(const n of t)propertyIsEnumerable.call(r,n)&&e.push(n)}return e};function clone$1(r){return Array.isArray(r)?cloneArray(r):isOptionObject(r)?cloneOptionObject(r):r}function cloneArray(r){const e=r.slice(0,0);return getEnumerableOwnPropertyKeys(r).forEach(t=>{defineProperty(e,t,clone$1(r[t]))}),e}function cloneOptionObject(r){const e=Object.getPrototypeOf(r)===null?Object.create(null):{};return getEnumerableOwnPropertyKeys(r).forEach(t=>{defineProperty(e,t,clone$1(r[t]))}),e}const mergeKeys=(r,e,t,n)=>(t.forEach(o=>{typeof e[o]>"u"&&n.ignoreUndefined||(o in r&&r[o]!==Object.getPrototypeOf(r)?defineProperty(r,o,merge(r[o],e[o],n)):defineProperty(r,o,clone$1(e[o])))}),r),concatArrays=(r,e,t)=>{let n=r.slice(0,0),o=0;return[r,e].forEach(a=>{const s=[];for(let l=0;l<a.length;l++)hasOwnProperty.call(a,l)&&(s.push(String(l)),a===r?defineProperty(n,o++,a[l]):defineProperty(n,o++,clone$1(a[l])));n=mergeKeys(n,a,getEnumerableOwnPropertyKeys(a).filter(l=>!s.includes(l)),t)}),n};function merge(r,e,t){return t.concatArrays&&Array.isArray(r)&&Array.isArray(e)?concatArrays(r,e,t):!isOptionObject(e)||!isOptionObject(r)?clone$1(e):mergeKeys(r,e,getEnumerableOwnPropertyKeys(e),t)}var mergeOptions=function(...r){const e=merge(clone$1(defaultMergeOptions),this!==globalThis$1&&this||{},defaultMergeOptions);let t={_:{}};for(const n of r)if(n!==void 0){if(!isOptionObject(n))throw new TypeError("`"+n+"` is not an Option Object");t=merge(t,{_:n},e)}return t._};const mergeOptions$1=getDefaultExportFromCjs(mergeOptions),sha=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),sha256=from({name:"sha2-256",code:18,encode:sha("SHA-256")});var murmurHash3js={exports:{}};(function(r,e){(function(t,n){var o={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function a(y){if(!Array.isArray(y)&&!ArrayBuffer.isView(y))return!1;for(var E=0;E<y.length;E++)if(!Number.isInteger(y[E])||y[E]<0||y[E]>255)return!1;return!0}function s(y,E){return(y&65535)*E+(((y>>>16)*E&65535)<<16)}function l(y,E){return y<<E|y>>>32-E}function f(y){return y^=y>>>16,y=s(y,2246822507),y^=y>>>13,y=s(y,3266489909),y^=y>>>16,y}function h(y,E){y=[y[0]>>>16,y[0]&65535,y[1]>>>16,y[1]&65535],E=[E[0]>>>16,E[0]&65535,E[1]>>>16,E[1]&65535];var T=[0,0,0,0];return T[3]+=y[3]+E[3],T[2]+=T[3]>>>16,T[3]&=65535,T[2]+=y[2]+E[2],T[1]+=T[2]>>>16,T[2]&=65535,T[1]+=y[1]+E[1],T[0]+=T[1]>>>16,T[1]&=65535,T[0]+=y[0]+E[0],T[0]&=65535,[T[0]<<16|T[1],T[2]<<16|T[3]]}function d(y,E){y=[y[0]>>>16,y[0]&65535,y[1]>>>16,y[1]&65535],E=[E[0]>>>16,E[0]&65535,E[1]>>>16,E[1]&65535];var T=[0,0,0,0];return T[3]+=y[3]*E[3],T[2]+=T[3]>>>16,T[3]&=65535,T[2]+=y[2]*E[3],T[1]+=T[2]>>>16,T[2]&=65535,T[2]+=y[3]*E[2],T[1]+=T[2]>>>16,T[2]&=65535,T[1]+=y[1]*E[3],T[0]+=T[1]>>>16,T[1]&=65535,T[1]+=y[2]*E[2],T[0]+=T[1]>>>16,T[1]&=65535,T[1]+=y[3]*E[1],T[0]+=T[1]>>>16,T[1]&=65535,T[0]+=y[0]*E[3]+y[1]*E[2]+y[2]*E[1]+y[3]*E[0],T[0]&=65535,[T[0]<<16|T[1],T[2]<<16|T[3]]}function m(y,E){return E%=64,E===32?[y[1],y[0]]:E<32?[y[0]<<E|y[1]>>>32-E,y[1]<<E|y[0]>>>32-E]:(E-=32,[y[1]<<E|y[0]>>>32-E,y[0]<<E|y[1]>>>32-E])}function _(y,E){return E%=64,E===0?y:E<32?[y[0]<<E|y[1]>>>32-E,y[1]<<E]:[y[1]<<E-32,0]}function b(y,E){return[y[0]^E[0],y[1]^E[1]]}function w(y){return y=b(y,[0,y[0]>>>1]),y=d(y,[4283543511,3981806797]),y=b(y,[0,y[0]>>>1]),y=d(y,[3301882366,444984403]),y=b(y,[0,y[0]>>>1]),y}o.x86.hash32=function(y,E){if(o.inputValidation&&!a(y))return n;E=E||0;for(var T=y.length%4,N=y.length-T,D=E,C=0,A=3432918353,S=461845907,I=0;I<N;I=I+4)C=y[I]|y[I+1]<<8|y[I+2]<<16|y[I+3]<<24,C=s(C,A),C=l(C,15),C=s(C,S),D^=C,D=l(D,13),D=s(D,5)+3864292196;switch(C=0,T){case 3:C^=y[I+2]<<16;case 2:C^=y[I+1]<<8;case 1:C^=y[I],C=s(C,A),C=l(C,15),C=s(C,S),D^=C}return D^=y.length,D=f(D),D>>>0},o.x86.hash128=function(y,E){if(o.inputValidation&&!a(y))return n;E=E||0;for(var T=y.length%16,N=y.length-T,D=E,C=E,A=E,S=E,I=0,L=0,x=0,R=0,M=597399067,K=2869860233,Y=951274213,ee=2716044179,F=0;F<N;F=F+16)I=y[F]|y[F+1]<<8|y[F+2]<<16|y[F+3]<<24,L=y[F+4]|y[F+5]<<8|y[F+6]<<16|y[F+7]<<24,x=y[F+8]|y[F+9]<<8|y[F+10]<<16|y[F+11]<<24,R=y[F+12]|y[F+13]<<8|y[F+14]<<16|y[F+15]<<24,I=s(I,M),I=l(I,15),I=s(I,K),D^=I,D=l(D,19),D+=C,D=s(D,5)+1444728091,L=s(L,K),L=l(L,16),L=s(L,Y),C^=L,C=l(C,17),C+=A,C=s(C,5)+197830471,x=s(x,Y),x=l(x,17),x=s(x,ee),A^=x,A=l(A,15),A+=S,A=s(A,5)+2530024501,R=s(R,ee),R=l(R,18),R=s(R,M),S^=R,S=l(S,13),S+=D,S=s(S,5)+850148119;switch(I=0,L=0,x=0,R=0,T){case 15:R^=y[F+14]<<16;case 14:R^=y[F+13]<<8;case 13:R^=y[F+12],R=s(R,ee),R=l(R,18),R=s(R,M),S^=R;case 12:x^=y[F+11]<<24;case 11:x^=y[F+10]<<16;case 10:x^=y[F+9]<<8;case 9:x^=y[F+8],x=s(x,Y),x=l(x,17),x=s(x,ee),A^=x;case 8:L^=y[F+7]<<24;case 7:L^=y[F+6]<<16;case 6:L^=y[F+5]<<8;case 5:L^=y[F+4],L=s(L,K),L=l(L,16),L=s(L,Y),C^=L;case 4:I^=y[F+3]<<24;case 3:I^=y[F+2]<<16;case 2:I^=y[F+1]<<8;case 1:I^=y[F],I=s(I,M),I=l(I,15),I=s(I,K),D^=I}return D^=y.length,C^=y.length,A^=y.length,S^=y.length,D+=C,D+=A,D+=S,C+=D,A+=D,S+=D,D=f(D),C=f(C),A=f(A),S=f(S),D+=C,D+=A,D+=S,C+=D,A+=D,S+=D,("00000000"+(D>>>0).toString(16)).slice(-8)+("00000000"+(C>>>0).toString(16)).slice(-8)+("00000000"+(A>>>0).toString(16)).slice(-8)+("00000000"+(S>>>0).toString(16)).slice(-8)},o.x64.hash128=function(y,E){if(o.inputValidation&&!a(y))return n;E=E||0;for(var T=y.length%16,N=y.length-T,D=[0,E],C=[0,E],A=[0,0],S=[0,0],I=[2277735313,289559509],L=[1291169091,658871167],x=0;x<N;x=x+16)A=[y[x+4]|y[x+5]<<8|y[x+6]<<16|y[x+7]<<24,y[x]|y[x+1]<<8|y[x+2]<<16|y[x+3]<<24],S=[y[x+12]|y[x+13]<<8|y[x+14]<<16|y[x+15]<<24,y[x+8]|y[x+9]<<8|y[x+10]<<16|y[x+11]<<24],A=d(A,I),A=m(A,31),A=d(A,L),D=b(D,A),D=m(D,27),D=h(D,C),D=h(d(D,[0,5]),[0,1390208809]),S=d(S,L),S=m(S,33),S=d(S,I),C=b(C,S),C=m(C,31),C=h(C,D),C=h(d(C,[0,5]),[0,944331445]);switch(A=[0,0],S=[0,0],T){case 15:S=b(S,_([0,y[x+14]],48));case 14:S=b(S,_([0,y[x+13]],40));case 13:S=b(S,_([0,y[x+12]],32));case 12:S=b(S,_([0,y[x+11]],24));case 11:S=b(S,_([0,y[x+10]],16));case 10:S=b(S,_([0,y[x+9]],8));case 9:S=b(S,[0,y[x+8]]),S=d(S,L),S=m(S,33),S=d(S,I),C=b(C,S);case 8:A=b(A,_([0,y[x+7]],56));case 7:A=b(A,_([0,y[x+6]],48));case 6:A=b(A,_([0,y[x+5]],40));case 5:A=b(A,_([0,y[x+4]],32));case 4:A=b(A,_([0,y[x+3]],24));case 3:A=b(A,_([0,y[x+2]],16));case 2:A=b(A,_([0,y[x+1]],8));case 1:A=b(A,[0,y[x]]),A=d(A,I),A=m(A,31),A=d(A,L),D=b(D,A)}return D=b(D,[0,y.length]),C=b(C,[0,y.length]),D=h(D,C),C=h(C,D),D=w(D),C=w(C),D=h(D,C),C=h(C,D),("00000000"+(D[0]>>>0).toString(16)).slice(-8)+("00000000"+(D[1]>>>0).toString(16)).slice(-8)+("00000000"+(C[0]>>>0).toString(16)).slice(-8)+("00000000"+(C[1]>>>0).toString(16)).slice(-8)},r.exports&&(e=r.exports=o),e.murmurHash3=o})()})(murmurHash3js,murmurHash3js.exports);var murmurHash3jsExports=murmurHash3js.exports,murmurhash3jsRevisited=murmurHash3jsExports;const mur=getDefaultExportFromCjs(murmurhash3jsRevisited),murmur3128=from({name:"murmur3-128",code:34,encode:r=>fromHex(mur.x64.hash128(r))});async function hamtHashFn(r){return(await murmur3128.encode(r)).slice(0,8).reverse()}const defaultOptions={chunker:"fixed",strategy:"balanced",rawLeaves:!1,onlyHash:!1,reduceSingleLeafToSelf:!0,hasher:sha256,leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:!1,recursive:!1,hidden:!1,timeout:void 0,hamtHashFn,hamtHashCode:34,hamtBucketBits:8},defaultOptions$1=(r={})=>mergeOptions$1.bind({ignoreUndefined:!0})(defaultOptions,r);function assign(r,e){for(const t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function createError(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return assign(r,t)}catch{t.message=r.message,t.stack=r.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(r)),assign(new o,t)}}var errCode=createError;const errCode$1=getDefaultExportFromCjs(errCode);var indexMinimal={},minimal$1={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;hasRequiredAspromise=1,aspromise=r;function r(e,t){for(var n=new Array(arguments.length-1),o=0,a=2,s=!0;a<arguments.length;)n[o++]=arguments[a++];return new Promise(function(f,h){n[o]=function(m){if(s)if(s=!1,m)h(m);else{for(var _=new Array(arguments.length-1),b=0;b<_.length;)_[b++]=arguments[b];f.apply(null,_)}};try{e.apply(t||null,n)}catch(d){s&&(s=!1,h(d))}})}return aspromise}var base64$3={},hasRequiredBase64;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,function(r){var e=r;e.length=function(l){var f=l.length;if(!f)return 0;for(var h=0;--f%4>1&&l.charAt(f)==="=";)++h;return Math.ceil(l.length*3)/4-h};for(var t=new Array(64),n=new Array(123),o=0;o<64;)n[t[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;e.encode=function(l,f,h){for(var d=null,m=[],_=0,b=0,w;f<h;){var y=l[f++];switch(b){case 0:m[_++]=t[y>>2],w=(y&3)<<4,b=1;break;case 1:m[_++]=t[w|y>>4],w=(y&15)<<2,b=2;break;case 2:m[_++]=t[w|y>>6],m[_++]=t[y&63],b=0;break}_>8191&&((d||(d=[])).push(String.fromCharCode.apply(String,m)),_=0)}return b&&(m[_++]=t[w],m[_++]=61,b===1&&(m[_++]=61)),d?(_&&d.push(String.fromCharCode.apply(String,m.slice(0,_))),d.join("")):String.fromCharCode.apply(String,m.slice(0,_))};var a="invalid encoding";e.decode=function(l,f,h){for(var d=h,m=0,_,b=0;b<l.length;){var w=l.charCodeAt(b++);if(w===61&&m>1)break;if((w=n[w])===void 0)throw Error(a);switch(m){case 0:_=w,m=1;break;case 1:f[h++]=_<<2|(w&48)>>4,_=w,m=2;break;case 2:f[h++]=(_&15)<<4|(w&60)>>2,_=w,m=3;break;case 3:f[h++]=(_&3)<<6|w,m=0;break}}if(m===1)throw Error(a);return h-d},e.test=function(l){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(l)}}(base64$3)),base64$3}var eventemitter,hasRequiredEventemitter;function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;hasRequiredEventemitter=1,eventemitter=r;function r(){this._listeners={}}return r.prototype.on=function(t,n,o){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:n,ctx:o||this}),this},r.prototype.off=function(t,n){if(t===void 0)this._listeners={};else if(n===void 0)this._listeners[t]=[];else for(var o=this._listeners[t],a=0;a<o.length;)o[a].fn===n?o.splice(a,1):++a;return this},r.prototype.emit=function(t){var n=this._listeners[t];if(n){for(var o=[],a=1;a<arguments.length;)o.push(arguments[a++]);for(a=0;a<n.length;)n[a].fn.apply(n[a++].ctx,o)}return this},eventemitter}var float,hasRequiredFloat;function requireFloat(){if(hasRequiredFloat)return float;hasRequiredFloat=1,float=r(r);function r(a){return typeof Float32Array<"u"?function(){var s=new Float32Array([-0]),l=new Uint8Array(s.buffer),f=l[3]===128;function h(b,w,y){s[0]=b,w[y]=l[0],w[y+1]=l[1],w[y+2]=l[2],w[y+3]=l[3]}function d(b,w,y){s[0]=b,w[y]=l[3],w[y+1]=l[2],w[y+2]=l[1],w[y+3]=l[0]}a.writeFloatLE=f?h:d,a.writeFloatBE=f?d:h;function m(b,w){return l[0]=b[w],l[1]=b[w+1],l[2]=b[w+2],l[3]=b[w+3],s[0]}function _(b,w){return l[3]=b[w],l[2]=b[w+1],l[1]=b[w+2],l[0]=b[w+3],s[0]}a.readFloatLE=f?m:_,a.readFloatBE=f?_:m}():function(){function s(f,h,d,m){var _=h<0?1:0;if(_&&(h=-h),h===0)f(1/h>0?0:2147483648,d,m);else if(isNaN(h))f(2143289344,d,m);else if(h>34028234663852886e22)f((_<<31|2139095040)>>>0,d,m);else if(h<11754943508222875e-54)f((_<<31|Math.round(h/1401298464324817e-60))>>>0,d,m);else{var b=Math.floor(Math.log(h)/Math.LN2),w=Math.round(h*Math.pow(2,-b)*8388608)&8388607;f((_<<31|b+127<<23|w)>>>0,d,m)}}a.writeFloatLE=s.bind(null,e),a.writeFloatBE=s.bind(null,t);function l(f,h,d){var m=f(h,d),_=(m>>31)*2+1,b=m>>>23&255,w=m&8388607;return b===255?w?NaN:_*(1/0):b===0?_*1401298464324817e-60*w:_*Math.pow(2,b-150)*(w+8388608)}a.readFloatLE=l.bind(null,n),a.readFloatBE=l.bind(null,o)}(),typeof Float64Array<"u"?function(){var s=new Float64Array([-0]),l=new Uint8Array(s.buffer),f=l[7]===128;function h(b,w,y){s[0]=b,w[y]=l[0],w[y+1]=l[1],w[y+2]=l[2],w[y+3]=l[3],w[y+4]=l[4],w[y+5]=l[5],w[y+6]=l[6],w[y+7]=l[7]}function d(b,w,y){s[0]=b,w[y]=l[7],w[y+1]=l[6],w[y+2]=l[5],w[y+3]=l[4],w[y+4]=l[3],w[y+5]=l[2],w[y+6]=l[1],w[y+7]=l[0]}a.writeDoubleLE=f?h:d,a.writeDoubleBE=f?d:h;function m(b,w){return l[0]=b[w],l[1]=b[w+1],l[2]=b[w+2],l[3]=b[w+3],l[4]=b[w+4],l[5]=b[w+5],l[6]=b[w+6],l[7]=b[w+7],s[0]}function _(b,w){return l[7]=b[w],l[6]=b[w+1],l[5]=b[w+2],l[4]=b[w+3],l[3]=b[w+4],l[2]=b[w+5],l[1]=b[w+6],l[0]=b[w+7],s[0]}a.readDoubleLE=f?m:_,a.readDoubleBE=f?_:m}():function(){function s(f,h,d,m,_,b){var w=m<0?1:0;if(w&&(m=-m),m===0)f(0,_,b+h),f(1/m>0?0:2147483648,_,b+d);else if(isNaN(m))f(0,_,b+h),f(2146959360,_,b+d);else if(m>17976931348623157e292)f(0,_,b+h),f((w<<31|2146435072)>>>0,_,b+d);else{var y;if(m<22250738585072014e-324)y=m/5e-324,f(y>>>0,_,b+h),f((w<<31|y/4294967296)>>>0,_,b+d);else{var E=Math.floor(Math.log(m)/Math.LN2);E===1024&&(E=1023),y=m*Math.pow(2,-E),f(y*4503599627370496>>>0,_,b+h),f((w<<31|E+1023<<20|y*1048576&1048575)>>>0,_,b+d)}}}a.writeDoubleLE=s.bind(null,e,0,4),a.writeDoubleBE=s.bind(null,t,4,0);function l(f,h,d,m,_){var b=f(m,_+h),w=f(m,_+d),y=(w>>31)*2+1,E=w>>>20&2047,T=4294967296*(w&1048575)+b;return E===2047?T?NaN:y*(1/0):E===0?y*5e-324*T:y*Math.pow(2,E-1075)*(T+4503599627370496)}a.readDoubleLE=l.bind(null,n,0,4),a.readDoubleBE=l.bind(null,o,4,0)}(),a}function e(a,s,l){s[l]=a&255,s[l+1]=a>>>8&255,s[l+2]=a>>>16&255,s[l+3]=a>>>24}function t(a,s,l){s[l]=a>>>24,s[l+1]=a>>>16&255,s[l+2]=a>>>8&255,s[l+3]=a&255}function n(a,s){return(a[s]|a[s+1]<<8|a[s+2]<<16|a[s+3]<<24)>>>0}function o(a,s){return(a[s]<<24|a[s+1]<<16|a[s+2]<<8|a[s+3])>>>0}return float}var inquire_1,hasRequiredInquire;function requireInquire(){if(hasRequiredInquire)return inquire_1;hasRequiredInquire=1,inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}return inquire_1}var utf8$2={},hasRequiredUtf8;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,function(r){var e=r;e.length=function(n){for(var o=0,a=0,s=0;s<n.length;++s)a=n.charCodeAt(s),a<128?o+=1:a<2048?o+=2:(a&64512)===55296&&(n.charCodeAt(s+1)&64512)===56320?(++s,o+=4):o+=3;return o},e.read=function(n,o,a){var s=a-o;if(s<1)return"";for(var l=null,f=[],h=0,d;o<a;)d=n[o++],d<128?f[h++]=d:d>191&&d<224?f[h++]=(d&31)<<6|n[o++]&63:d>239&&d<365?(d=((d&7)<<18|(n[o++]&63)<<12|(n[o++]&63)<<6|n[o++]&63)-65536,f[h++]=55296+(d>>10),f[h++]=56320+(d&1023)):f[h++]=(d&15)<<12|(n[o++]&63)<<6|n[o++]&63,h>8191&&((l||(l=[])).push(String.fromCharCode.apply(String,f)),h=0);return l?(h&&l.push(String.fromCharCode.apply(String,f.slice(0,h))),l.join("")):String.fromCharCode.apply(String,f.slice(0,h))},e.write=function(n,o,a){for(var s=a,l,f,h=0;h<n.length;++h)l=n.charCodeAt(h),l<128?o[a++]=l:l<2048?(o[a++]=l>>6|192,o[a++]=l&63|128):(l&64512)===55296&&((f=n.charCodeAt(h+1))&64512)===56320?(l=65536+((l&1023)<<10)+(f&1023),++h,o[a++]=l>>18|240,o[a++]=l>>12&63|128,o[a++]=l>>6&63|128,o[a++]=l&63|128):(o[a++]=l>>12|224,o[a++]=l>>6&63|128,o[a++]=l&63|128);return a-s}}(utf8$2)),utf8$2}var pool_1,hasRequiredPool;function requirePool(){if(hasRequiredPool)return pool_1;hasRequiredPool=1,pool_1=r;function r(e,t,n){var o=n||8192,a=o>>>1,s=null,l=o;return function(h){if(h<1||h>a)return e(h);l+h>o&&(s=e(o),l=0);var d=t.call(s,l,l+=h);return l&7&&(l=(l|7)+1),d}}return pool_1}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=e;var r=requireMinimal();function e(a,s){this.lo=a>>>0,this.hi=s>>>0}var t=e.zero=new e(0,0);t.toNumber=function(){return 0},t.zzEncode=t.zzDecode=function(){return this},t.length=function(){return 1};var n=e.zeroHash="\0\0\0\0\0\0\0\0";e.fromNumber=function(s){if(s===0)return t;var l=s<0;l&&(s=-s);var f=s>>>0,h=(s-f)/4294967296>>>0;return l&&(h=~h>>>0,f=~f>>>0,++f>4294967295&&(f=0,++h>4294967295&&(h=0))),new e(f,h)},e.from=function(s){if(typeof s=="number")return e.fromNumber(s);if(r.isString(s))if(r.Long)s=r.Long.fromString(s);else return e.fromNumber(parseInt(s,10));return s.low||s.high?new e(s.low>>>0,s.high>>>0):t},e.prototype.toNumber=function(s){if(!s&&this.hi>>>31){var l=~this.lo+1>>>0,f=~this.hi>>>0;return l||(f=f+1>>>0),-(l+f*4294967296)}return this.lo+this.hi*4294967296},e.prototype.toLong=function(s){return r.Long?new r.Long(this.lo|0,this.hi|0,!!s):{low:this.lo|0,high:this.hi|0,unsigned:!!s}};var o=String.prototype.charCodeAt;return e.fromHash=function(s){return s===n?t:new e((o.call(s,0)|o.call(s,1)<<8|o.call(s,2)<<16|o.call(s,3)<<24)>>>0,(o.call(s,4)|o.call(s,5)<<8|o.call(s,6)<<16|o.call(s,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var s=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^s)>>>0,this.lo=(this.lo<<1^s)>>>0,this},e.prototype.zzDecode=function(){var s=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^s)>>>0,this.hi=(this.hi>>>1^s)>>>0,this},e.prototype.length=function(){var s=this.lo,l=(this.lo>>>28|this.hi<<4)>>>0,f=this.hi>>>24;return f===0?l===0?s<16384?s<128?1:2:s<2097152?3:4:l<16384?l<128?5:6:l<2097152?7:8:f<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(r){var e=r;e.asPromise=requireAspromise(),e.base64=requireBase64(),e.EventEmitter=requireEventemitter(),e.float=requireFloat(),e.inquire=requireInquire(),e.utf8=requireUtf8(),e.pool=requirePool(),e.LongBits=requireLongbits(),e.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a},e.isString=function(a){return typeof a=="string"||a instanceof String},e.isObject=function(a){return a&&typeof a=="object"},e.isset=e.isSet=function(a,s){var l=a[s];return l!=null&&a.hasOwnProperty(s)?typeof l!="object"||(Array.isArray(l)?l.length:Object.keys(l).length)>0:!1},e.Buffer=function(){try{var o=e.inquire("buffer").Buffer;return o.prototype.utf8Write?o:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(a){return typeof a=="number"?e.Buffer?e._Buffer_allocUnsafe(a):new e.Array(a):e.Buffer?e._Buffer_from(a):typeof Uint8Array>"u"?a:new Uint8Array(a)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(a){return a?e.LongBits.from(a).toHash():e.LongBits.zeroHash},e.longFromHash=function(a,s){var l=e.LongBits.fromHash(a);return e.Long?e.Long.fromBits(l.lo,l.hi,s):l.toNumber(!!s)};function t(o,a,s){for(var l=Object.keys(a),f=0;f<l.length;++f)(o[l[f]]===void 0||!s)&&(o[l[f]]=a[l[f]]);return o}e.merge=t,e.lcFirst=function(a){return a.charAt(0).toLowerCase()+a.substring(1)};function n(o){function a(s,l){if(!(this instanceof a))return new a(s,l);Object.defineProperty(this,"message",{get:function(){return s}}),Error.captureStackTrace?Error.captureStackTrace(this,a):Object.defineProperty(this,"stack",{value:new Error().stack||""}),l&&t(this,l)}return(a.prototype=Object.create(Error.prototype)).constructor=a,Object.defineProperty(a.prototype,"name",{get:function(){return o}}),a.prototype.toString=function(){return this.name+": "+this.message},a}e.newError=n,e.ProtocolError=n("ProtocolError"),e.oneOfGetter=function(a){for(var s={},l=0;l<a.length;++l)s[a[l]]=1;return function(){for(var f=Object.keys(this),h=f.length-1;h>-1;--h)if(s[f[h]]===1&&this[f[h]]!==void 0&&this[f[h]]!==null)return f[h]}},e.oneOfSetter=function(a){return function(s){for(var l=0;l<a.length;++l)a[l]!==s&&delete this[a[l]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var o=e.Buffer;if(!o){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=o.from!==Uint8Array.from&&o.from||function(s,l){return new o(s,l)},e._Buffer_allocUnsafe=o.allocUnsafe||function(s){return new o(s)}}}(minimal$1)),minimal$1}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64$2=util$4.base64,utf8$1=util$4.utf8;function Op(r,e,t){this.fn=r,this.len=e,this.next=void 0,this.val=t}function noop(){}function State(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$2=function r(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$2();Writer$1.alloc=function r(e){return new util$4.Array(e)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function r(e,t,n){return this.tail=this.tail.next=new Op(e,t,n),this.len+=t,this};function writeByte(r,e,t){e[t]=r&255}function writeVarint32(r,e,t){for(;r>127;)e[t++]=r&127|128,r>>>=7;e[t]=r}function VarintOp(r,e){this.len=r,this.next=void 0,this.val=e}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function r(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Writer$1.prototype.int32=function r(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)};Writer$1.prototype.sint32=function r(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(r,e,t){for(;r.hi;)e[t++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[t++]=r.lo&127|128,r.lo=r.lo>>>7;e[t++]=r.lo}Writer$1.prototype.uint64=function r(e){var t=LongBits$1.from(e);return this._push(writeVarint64,t.length(),t)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function r(e){var t=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)};Writer$1.prototype.bool=function r(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}Writer$1.prototype.fixed32=function r(e){return this._push(writeFixed32,4,e>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function r(e){var t=LongBits$1.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function r(e){return this._push(util$4.float.writeFloatLE,4,e)};Writer$1.prototype.double=function r(e){return this._push(util$4.float.writeDoubleLE,8,e)};var writeBytes=util$4.Array.prototype.set?function r(e,t,n){t.set(e,n)}:function r(e,t,n){for(var o=0;o<e.length;++o)t[n+o]=e[o]};Writer$1.prototype.bytes=function r(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(util$4.isString(e)){var n=Writer$1.alloc(t=base64$2.length(e));base64$2.decode(e,n,0),e=n}return this.uint32(t)._push(writeBytes,t,e)};Writer$1.prototype.string=function r(e){var t=utf8$1.length(e);return t?this.uint32(t)._push(utf8$1.write,t,e):this._push(writeByte,1,0)};Writer$1.prototype.fork=function r(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function r(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function r(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this};Writer$1.prototype.finish=function r(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t};Writer$1._configure=function(r){BufferWriter$1=r,Writer$1.create=create$2(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var o=0;o<e.length;)t[n++]=e[o++]}};BufferWriter.prototype.bytes=function r(e){util$3.isString(e)&&(e=util$3._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(BufferWriter.writeBytesBuffer,t,e),this};function writeStringBuffer(r,e,t){r.length<40?util$3.utf8.write(r,e,t):e.utf8Write?e.utf8Write(r,t):e.write(r,t)}BufferWriter.prototype.string=function r(e){var t=util$3.Buffer.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this};BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(r,e){return RangeError("index out of range: "+r.pos+" + "+(e||1)+" > "+r.len)}function Reader$1(r){this.buf=r,this.pos=0,this.len=r.length}var create_array=typeof Uint8Array<"u"?function r(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function r(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create$1=function r(){return util$2.Buffer?function(t){return(Reader$1.create=function(o){return util$2.Buffer.isBuffer(o)?new BufferReader$1(o):create_array(o)})(t)}:create_array};Reader$1.create=create$1();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function r(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}}();Reader$1.prototype.int32=function r(){return this.uint32()|0};Reader$1.prototype.sint32=function r(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var r=new LongBits(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,r}if(this.len-this.pos>4){for(;e<5;++e)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function r(){return this.uint32()!==0};function readFixed32_end(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}Reader$1.prototype.fixed32=function r(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function r(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function r(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Reader$1.prototype.double=function r(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Reader$1.prototype.bytes=function r(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)};Reader$1.prototype.string=function r(){var e=this.bytes();return utf8.read(e,0,e.length)};Reader$1.prototype.skip=function r(e){if(typeof e=="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this};Reader$1._configure=function(r){BufferReader$1=r,Reader$1.create=create$1(),BufferReader$1._configure();var e=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(r){Reader.call(this,r)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function r(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure();var rpc={},service=Service,util=requireMinimal();(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(r,e,t){if(typeof r!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=!!e,this.responseDelimited=!!t}Service.prototype.rpcCall=function r(e,t,n,o,a){if(!o)throw TypeError("request must be specified");var s=this;if(!a)return util.asPromise(r,s,e,t,n,o);if(!s.rpcImpl){setTimeout(function(){a(Error("already ended"))},0);return}try{return s.rpcImpl(e,t[s.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(f,h){if(f)return s.emit("error",f,e),a(f);if(h===null){s.end(!0);return}if(!(h instanceof n))try{h=n[s.responseDelimited?"decodeDelimited":"decode"](h)}catch(d){return s.emit("error",d,e),a(d)}return s.emit("data",h,e),a(null,h)})}catch(l){s.emit("error",l,e),setTimeout(function(){a(l)},0);return}};Service.prototype.end=function r(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(r){var e=r;e.Service=service})(rpc);var roots={};(function(r){var e=r;e.build="minimal",e.Writer=writer,e.BufferWriter=writer_buffer,e.Reader=reader,e.BufferReader=reader_buffer,e.util=requireMinimal(),e.rpc=rpc,e.roots=roots,e.configure=t;function t(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}t()})(indexMinimal);var minimal=indexMinimal;const $protobuf=getDefaultExportFromCjs(minimal),$Reader=$protobuf.Reader,$Writer=$protobuf.Writer,$util=$protobuf.util,$root=$protobuf.roots["ipfs-unixfs"]||($protobuf.roots["ipfs-unixfs"]={}),Data=$root.Data=(()=>{function r(e){if(this.blocksizes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.Type=0,r.prototype.Data=$util.newBuffer([]),r.prototype.filesize=$util.Long?$util.Long.fromBits(0,0,!0):0,r.prototype.blocksizes=$util.emptyArray,r.prototype.hashType=$util.Long?$util.Long.fromBits(0,0,!0):0,r.prototype.fanout=$util.Long?$util.Long.fromBits(0,0,!0):0,r.prototype.mode=0,r.prototype.mtime=null,r.encode=function(t,n){if(n||(n=$Writer.create()),n.uint32(8).int32(t.Type),t.Data!=null&&Object.hasOwnProperty.call(t,"Data")&&n.uint32(18).bytes(t.Data),t.filesize!=null&&Object.hasOwnProperty.call(t,"filesize")&&n.uint32(24).uint64(t.filesize),t.blocksizes!=null&&t.blocksizes.length)for(var o=0;o<t.blocksizes.length;++o)n.uint32(32).uint64(t.blocksizes[o]);return t.hashType!=null&&Object.hasOwnProperty.call(t,"hashType")&&n.uint32(40).uint64(t.hashType),t.fanout!=null&&Object.hasOwnProperty.call(t,"fanout")&&n.uint32(48).uint64(t.fanout),t.mode!=null&&Object.hasOwnProperty.call(t,"mode")&&n.uint32(56).uint32(t.mode),t.mtime!=null&&Object.hasOwnProperty.call(t,"mtime")&&$root.UnixTime.encode(t.mtime,n.uint32(66).fork()).ldelim(),n},r.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));for(var o=n===void 0?t.len:t.pos+n,a=new $root.Data;t.pos<o;){var s=t.uint32();switch(s>>>3){case 1:a.Type=t.int32();break;case 2:a.Data=t.bytes();break;case 3:a.filesize=t.uint64();break;case 4:if(a.blocksizes&&a.blocksizes.length||(a.blocksizes=[]),(s&7)===2)for(var l=t.uint32()+t.pos;t.pos<l;)a.blocksizes.push(t.uint64());else a.blocksizes.push(t.uint64());break;case 5:a.hashType=t.uint64();break;case 6:a.fanout=t.uint64();break;case 7:a.mode=t.uint32();break;case 8:a.mtime=$root.UnixTime.decode(t,t.uint32());break;default:t.skipType(s&7);break}}if(!a.hasOwnProperty("Type"))throw $util.ProtocolError("missing required 'Type'",{instance:a});return a},r.fromObject=function(t){if(t instanceof $root.Data)return t;var n=new $root.Data;switch(t.Type){case"Raw":case 0:n.Type=0;break;case"Directory":case 1:n.Type=1;break;case"File":case 2:n.Type=2;break;case"Metadata":case 3:n.Type=3;break;case"Symlink":case 4:n.Type=4;break;case"HAMTShard":case 5:n.Type=5;break}if(t.Data!=null&&(typeof t.Data=="string"?$util.base64.decode(t.Data,n.Data=$util.newBuffer($util.base64.length(t.Data)),0):t.Data.length&&(n.Data=t.Data)),t.filesize!=null&&($util.Long?(n.filesize=$util.Long.fromValue(t.filesize)).unsigned=!0:typeof t.filesize=="string"?n.filesize=parseInt(t.filesize,10):typeof t.filesize=="number"?n.filesize=t.filesize:typeof t.filesize=="object"&&(n.filesize=new $util.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0))),t.blocksizes){if(!Array.isArray(t.blocksizes))throw TypeError(".Data.blocksizes: array expected");n.blocksizes=[];for(var o=0;o<t.blocksizes.length;++o)$util.Long?(n.blocksizes[o]=$util.Long.fromValue(t.blocksizes[o])).unsigned=!0:typeof t.blocksizes[o]=="string"?n.blocksizes[o]=parseInt(t.blocksizes[o],10):typeof t.blocksizes[o]=="number"?n.blocksizes[o]=t.blocksizes[o]:typeof t.blocksizes[o]=="object"&&(n.blocksizes[o]=new $util.LongBits(t.blocksizes[o].low>>>0,t.blocksizes[o].high>>>0).toNumber(!0))}if(t.hashType!=null&&($util.Long?(n.hashType=$util.Long.fromValue(t.hashType)).unsigned=!0:typeof t.hashType=="string"?n.hashType=parseInt(t.hashType,10):typeof t.hashType=="number"?n.hashType=t.hashType:typeof t.hashType=="object"&&(n.hashType=new $util.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0))),t.fanout!=null&&($util.Long?(n.fanout=$util.Long.fromValue(t.fanout)).unsigned=!0:typeof t.fanout=="string"?n.fanout=parseInt(t.fanout,10):typeof t.fanout=="number"?n.fanout=t.fanout:typeof t.fanout=="object"&&(n.fanout=new $util.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0))),t.mode!=null&&(n.mode=t.mode>>>0),t.mtime!=null){if(typeof t.mtime!="object")throw TypeError(".Data.mtime: object expected");n.mtime=$root.UnixTime.fromObject(t.mtime)}return n},r.toObject=function(t,n){n||(n={});var o={};if((n.arrays||n.defaults)&&(o.blocksizes=[]),n.defaults){if(o.Type=n.enums===String?"Raw":0,n.bytes===String?o.Data="":(o.Data=[],n.bytes!==Array&&(o.Data=$util.newBuffer(o.Data))),$util.Long){var a=new $util.Long(0,0,!0);o.filesize=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else o.filesize=n.longs===String?"0":0;if($util.Long){var a=new $util.Long(0,0,!0);o.hashType=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else o.hashType=n.longs===String?"0":0;if($util.Long){var a=new $util.Long(0,0,!0);o.fanout=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else o.fanout=n.longs===String?"0":0;o.mode=0,o.mtime=null}if(t.Type!=null&&t.hasOwnProperty("Type")&&(o.Type=n.enums===String?$root.Data.DataType[t.Type]:t.Type),t.Data!=null&&t.hasOwnProperty("Data")&&(o.Data=n.bytes===String?$util.base64.encode(t.Data,0,t.Data.length):n.bytes===Array?Array.prototype.slice.call(t.Data):t.Data),t.filesize!=null&&t.hasOwnProperty("filesize")&&(typeof t.filesize=="number"?o.filesize=n.longs===String?String(t.filesize):t.filesize:o.filesize=n.longs===String?$util.Long.prototype.toString.call(t.filesize):n.longs===Number?new $util.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0):t.filesize),t.blocksizes&&t.blocksizes.length){o.blocksizes=[];for(var s=0;s<t.blocksizes.length;++s)typeof t.blocksizes[s]=="number"?o.blocksizes[s]=n.longs===String?String(t.blocksizes[s]):t.blocksizes[s]:o.blocksizes[s]=n.longs===String?$util.Long.prototype.toString.call(t.blocksizes[s]):n.longs===Number?new $util.LongBits(t.blocksizes[s].low>>>0,t.blocksizes[s].high>>>0).toNumber(!0):t.blocksizes[s]}return t.hashType!=null&&t.hasOwnProperty("hashType")&&(typeof t.hashType=="number"?o.hashType=n.longs===String?String(t.hashType):t.hashType:o.hashType=n.longs===String?$util.Long.prototype.toString.call(t.hashType):n.longs===Number?new $util.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0):t.hashType),t.fanout!=null&&t.hasOwnProperty("fanout")&&(typeof t.fanout=="number"?o.fanout=n.longs===String?String(t.fanout):t.fanout:o.fanout=n.longs===String?$util.Long.prototype.toString.call(t.fanout):n.longs===Number?new $util.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0):t.fanout),t.mode!=null&&t.hasOwnProperty("mode")&&(o.mode=t.mode),t.mtime!=null&&t.hasOwnProperty("mtime")&&(o.mtime=$root.UnixTime.toObject(t.mtime,n)),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},r.DataType=function(){const e={},t=Object.create(e);return t[e[0]="Raw"]=0,t[e[1]="Directory"]=1,t[e[2]="File"]=2,t[e[3]="Metadata"]=3,t[e[4]="Symlink"]=4,t[e[5]="HAMTShard"]=5,t}(),r})();$root.UnixTime=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.Seconds=$util.Long?$util.Long.fromBits(0,0,!1):0,r.prototype.FractionalNanoseconds=0,r.encode=function(t,n){return n||(n=$Writer.create()),n.uint32(8).int64(t.Seconds),t.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(t,"FractionalNanoseconds")&&n.uint32(21).fixed32(t.FractionalNanoseconds),n},r.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));for(var o=n===void 0?t.len:t.pos+n,a=new $root.UnixTime;t.pos<o;){var s=t.uint32();switch(s>>>3){case 1:a.Seconds=t.int64();break;case 2:a.FractionalNanoseconds=t.fixed32();break;default:t.skipType(s&7);break}}if(!a.hasOwnProperty("Seconds"))throw $util.ProtocolError("missing required 'Seconds'",{instance:a});return a},r.fromObject=function(t){if(t instanceof $root.UnixTime)return t;var n=new $root.UnixTime;return t.Seconds!=null&&($util.Long?(n.Seconds=$util.Long.fromValue(t.Seconds)).unsigned=!1:typeof t.Seconds=="string"?n.Seconds=parseInt(t.Seconds,10):typeof t.Seconds=="number"?n.Seconds=t.Seconds:typeof t.Seconds=="object"&&(n.Seconds=new $util.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber())),t.FractionalNanoseconds!=null&&(n.FractionalNanoseconds=t.FractionalNanoseconds>>>0),n},r.toObject=function(t,n){n||(n={});var o={};if(n.defaults){if($util.Long){var a=new $util.Long(0,0,!1);o.Seconds=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else o.Seconds=n.longs===String?"0":0;o.FractionalNanoseconds=0}return t.Seconds!=null&&t.hasOwnProperty("Seconds")&&(typeof t.Seconds=="number"?o.Seconds=n.longs===String?String(t.Seconds):t.Seconds:o.Seconds=n.longs===String?$util.Long.prototype.toString.call(t.Seconds):n.longs===Number?new $util.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber():t.Seconds),t.FractionalNanoseconds!=null&&t.hasOwnProperty("FractionalNanoseconds")&&(o.FractionalNanoseconds=t.FractionalNanoseconds),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},r})();$root.Metadata=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.MimeType="",r.encode=function(t,n){return n||(n=$Writer.create()),t.MimeType!=null&&Object.hasOwnProperty.call(t,"MimeType")&&n.uint32(10).string(t.MimeType),n},r.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));for(var o=n===void 0?t.len:t.pos+n,a=new $root.Metadata;t.pos<o;){var s=t.uint32();switch(s>>>3){case 1:a.MimeType=t.string();break;default:t.skipType(s&7);break}}return a},r.fromObject=function(t){if(t instanceof $root.Metadata)return t;var n=new $root.Metadata;return t.MimeType!=null&&(n.MimeType=String(t.MimeType)),n},r.toObject=function(t,n){n||(n={});var o={};return n.defaults&&(o.MimeType=""),t.MimeType!=null&&t.hasOwnProperty("MimeType")&&(o.MimeType=t.MimeType),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},r})();const PBData=Data,types=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],dirTypes=["directory","hamt-sharded-directory"],DEFAULT_FILE_MODE=parseInt("0644",8),DEFAULT_DIRECTORY_MODE=parseInt("0755",8);function parseMode(r){if(r!=null)return typeof r=="number"?r&4095:(r=r.toString(),r.substring(0,1)==="0"?parseInt(r,8)&4095:parseInt(r,10)&4095)}function parseMtime(r){if(r==null)return;let e;if(r.secs!=null&&(e={secs:r.secs,nsecs:r.nsecs}),r.Seconds!=null&&(e={secs:r.Seconds,nsecs:r.FractionalNanoseconds}),Array.isArray(r)&&(e={secs:r[0],nsecs:r[1]}),r instanceof Date){const t=r.getTime(),n=Math.floor(t/1e3);e={secs:n,nsecs:(t-n*1e3)*1e3}}if(Object.prototype.hasOwnProperty.call(e,"secs")){if(e!=null&&e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw errCode$1(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}class UnixFS{static unmarshal(e){const t=PBData.decode(e),n=PBData.toObject(t,{defaults:!1,arrays:!0,longs:Number,objects:!1}),o=new UnixFS({type:types[n.Type],data:n.Data,blockSizes:n.blocksizes,mode:n.mode,mtime:n.mtime?{secs:n.mtime.Seconds,nsecs:n.mtime.FractionalNanoseconds}:void 0});return o._originalMode=n.mode||0,o}constructor(e={type:"file"}){const{type:t,data:n,blockSizes:o,hashType:a,fanout:s,mtime:l,mode:f}=e;if(t&&!types.includes(t))throw errCode$1(new Error("Type: "+t+" is not valid"),"ERR_INVALID_TYPE");this.type=t||"file",this.data=n,this.hashType=a,this.fanout=s,this.blockSizes=o||[],this._originalMode=0,this.mode=parseMode(f),l&&(this.mtime=parseMtime(l),this.mtime&&!this.mtime.nsecs&&(this.mtime.nsecs=0))}set mode(e){this._mode=this.isDirectory()?DEFAULT_DIRECTORY_MODE:DEFAULT_FILE_MODE;const t=parseMode(e);t!==void 0&&(this._mode=t)}get mode(){return this._mode}isDirectory(){return!!(this.type&&dirTypes.includes(this.type))}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0;let e=0;return this.blockSizes.forEach(t=>{e+=t}),this.data&&(e+=this.data.length),e}marshal(){let e;switch(this.type){case"raw":e=PBData.DataType.Raw;break;case"directory":e=PBData.DataType.Directory;break;case"file":e=PBData.DataType.File;break;case"metadata":e=PBData.DataType.Metadata;break;case"symlink":e=PBData.DataType.Symlink;break;case"hamt-sharded-directory":e=PBData.DataType.HAMTShard;break;default:throw errCode$1(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE")}let t=this.data;(!this.data||!this.data.length)&&(t=void 0);let n;this.mode!=null&&(n=this._originalMode&4294963200|(parseMode(this.mode)||0),n===DEFAULT_FILE_MODE&&!this.isDirectory()&&(n=void 0),n===DEFAULT_DIRECTORY_MODE&&this.isDirectory()&&(n=void 0));let o;if(this.mtime!=null){const s=parseMtime(this.mtime);s&&(o={Seconds:s.secs,FractionalNanoseconds:s.nsecs},o.FractionalNanoseconds===0&&delete o.FractionalNanoseconds)}const a={Type:e,Data:t,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:n,mtime:o};return PBData.encode(a).finish()}}const persist=async(r,e,t)=>{t.codec||(t.codec=dagPb),t.hasher||(t.hasher=sha256),t.cidVersion===void 0&&(t.cidVersion=1),t.codec===dagPb&&t.hasher!==sha256&&(t.cidVersion=1);const n=await t.hasher.digest(r),o=CID.create(t.cidVersion,t.codec.code,n);return t.onlyHash||await e.put(o,r,{signal:t.signal}),o},dirBuilder=async(r,e,t)=>{const n=new UnixFS({type:"directory",mtime:r.mtime,mode:r.mode}),o=encode$1(prepare({Data:n.marshal()})),a=await persist(o,e,t),s=r.path;return{cid:a,path:s,unixfs:n,size:o.length}},all=async r=>{const e=[];for await(const t of r)e.push(t);return e};var itAll=all;const all$1=getDefaultExportFromCjs(itAll);async function flat(r,e){return e(await all$1(r))}function balanced(r,e,t){return reduceToParents(r,e,t)}async function reduceToParents(r,e,t){const n=[];for await(const o of batch$2(r,t.maxChildrenPerNode))n.push(await e(o));return n.length>1?reduceToParents(n,e,t):n[0]}async function trickleStream(r,e,t){const n=new Root(t.layerRepeat);let o=0,a=1,s=n;for await(const l of batch$2(r,t.maxChildrenPerNode))s.isFull()&&(s!==n&&n.addChild(await s.reduce(e)),o&&o%t.layerRepeat===0&&a++,s=new SubTree(a,t.layerRepeat,o),o++),s.append(l);return s&&s!==n&&n.addChild(await s.reduce(e)),n.reduce(e)}class SubTree{constructor(e,t,n=0){this.maxDepth=e,this.layerRepeat=t,this.currentDepth=1,this.iteration=n,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:e,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;const e=this._findParent(this.node,this.currentDepth);return e?(this._addNextNodeToParent(e),!1):!0}_addNextNodeToParent(e){this.parent=e;const t={children:[],depth:e.depth+1,parent:e,maxDepth:this.maxDepth,maxChildren:Math.floor(e.children.length/this.layerRepeat)*this.layerRepeat};e.children.push(t),this.currentDepth=t.depth,this.node=t}append(e){this.node.data=e}reduce(e){return this._reduce(this.root,e)}async _reduce(e,t){let n=[];return e.children.length&&(n=await Promise.all(e.children.filter(o=>o.data).map(o=>this._reduce(o,t)))),t((e.data||[]).concat(n))}_findParent(e,t){const n=e.parent;if(!(!n||n.depth===0))return n.children.length===n.maxChildren||!n.maxChildren?this._findParent(n,t):n}}class Root extends SubTree{constructor(e){super(0,e),this.root.depth=0,this.currentDepth=1}addChild(e){this.root.children.push(e)}reduce(e){return e((this.root.data||[]).concat(this.root.children))}}async function*bufferImporter(r,e,t){for await(let n of r.content)yield async()=>{t.progress(n.length,r.path);let o;const a={codec:dagPb,cidVersion:t.cidVersion,hasher:t.hasher,onlyHash:t.onlyHash};return t.rawLeaves?(a.codec=raw,a.cidVersion=1):(o=new UnixFS({type:t.leafType,data:n}),n=encode$1({Data:o.marshal(),Links:[]})),{cid:await persist(n,e,a),unixfs:o,size:n.length}}}const dagBuilders={flat,balanced,trickle:trickleStream};async function*buildFileBatch(r,e,t){let n=-1,o,a;typeof t.bufferImporter=="function"?a=t.bufferImporter:a=bufferImporter;for await(const s of parallelBatch$1(a(r,e,t),t.blockWriteConcurrency)){if(n++,n===0){o=s;continue}else n===1&&o&&(yield o,o=null);yield s}o&&(o.single=!0,yield o)}const reduce=(r,e,t)=>{async function n(o){if(o.length===1&&o[0].single&&t.reduceSingleLeafToSelf){const d=o[0];if(r.mtime!==void 0||r.mode!==void 0){let m=await e.get(d.cid);d.unixfs=new UnixFS({type:"file",mtime:r.mtime,mode:r.mode,data:m}),m=encode$1(prepare({Data:d.unixfs.marshal()})),d.cid=await persist(m,e,{...t,codec:dagPb,hasher:t.hasher,cidVersion:t.cidVersion}),d.size=m.length}return{cid:d.cid,path:r.path,unixfs:d.unixfs,size:d.size}}const a=new UnixFS({type:"file",mtime:r.mtime,mode:r.mode}),s=o.filter(d=>d.cid.code===code$3&&d.size||d.unixfs&&!d.unixfs.data&&d.unixfs.fileSize()?!0:!!(d.unixfs&&d.unixfs.data&&d.unixfs.data.length)).map(d=>d.cid.code===code$3?(a.addBlockSize(d.size),{Name:"",Tsize:d.size,Hash:d.cid}):(!d.unixfs||!d.unixfs.data?a.addBlockSize(d.unixfs&&d.unixfs.fileSize()||0):a.addBlockSize(d.unixfs.data.length),{Name:"",Tsize:d.size,Hash:d.cid})),l={Data:a.marshal(),Links:s},f=encode$1(prepare(l));return{cid:await persist(f,e,t),path:r.path,unixfs:a,size:f.length+l.Links.reduce((d,m)=>d+m.Tsize,0)}}return n};function fileBuilder(r,e,t){const n=dagBuilders[t.strategy];if(!n)throw errCode$1(new Error(`Unknown importer build strategy name: ${t.strategy}`),"ERR_BAD_STRATEGY");return n(buildFileBatch(r,e,t),reduce(r,e,t),t)}var buffer={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function byteLength(r){var e=getLens(r),t=e[0],n=e[1];return(t+n)*3/4-n}function _byteLength(r,e,t){return(e+t)*3/4-t}function toByteArray(r){var e,t=getLens(r),n=t[0],o=t[1],a=new Arr(_byteLength(r,n,o)),s=0,l=o>0?n-4:n,f;for(f=0;f<l;f+=4)e=revLookup[r.charCodeAt(f)]<<18|revLookup[r.charCodeAt(f+1)]<<12|revLookup[r.charCodeAt(f+2)]<<6|revLookup[r.charCodeAt(f+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=e&255;return o===2&&(e=revLookup[r.charCodeAt(f)]<<2|revLookup[r.charCodeAt(f+1)]>>4,a[s++]=e&255),o===1&&(e=revLookup[r.charCodeAt(f)]<<10|revLookup[r.charCodeAt(f+1)]<<4|revLookup[r.charCodeAt(f+2)]>>2,a[s++]=e>>8&255,a[s++]=e&255),a}function tripletToBase64(r){return lookup[r>>18&63]+lookup[r>>12&63]+lookup[r>>6&63]+lookup[r&63]}function encodeChunk(r,e,t){for(var n,o=[],a=e;a<t;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(r[a+2]&255),o.push(tripletToBase64(n));return o.join("")}function fromByteArray(r){for(var e,t=r.length,n=t%3,o=[],a=16383,s=0,l=t-n;s<l;s+=a)o.push(encodeChunk(r,s,s+a>l?l:s+a));return n===1?(e=r[t-1],o.push(lookup[e>>2]+lookup[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],o.push(lookup[e>>10]+lookup[e>>4&63]+lookup[e<<2&63]+"=")),o.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(r,e,t,n,o){var a,s,l=o*8-n-1,f=(1<<l)-1,h=f>>1,d=-7,m=t?o-1:0,_=t?-1:1,b=r[e+m];for(m+=_,a=b&(1<<-d)-1,b>>=-d,d+=l;d>0;a=a*256+r[e+m],m+=_,d-=8);for(s=a&(1<<-d)-1,a>>=-d,d+=n;d>0;s=s*256+r[e+m],m+=_,d-=8);if(a===0)a=1-h;else{if(a===f)return s?NaN:(b?-1:1)*(1/0);s=s+Math.pow(2,n),a=a-h}return(b?-1:1)*s*Math.pow(2,a-n)};ieee754.write=function(r,e,t,n,o,a){var s,l,f,h=a*8-o-1,d=(1<<h)-1,m=d>>1,_=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=n?0:a-1,w=n?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,s=d):(s=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-s))<1&&(s--,f*=2),s+m>=1?e+=_/f:e+=_*Math.pow(2,1-m),e*f>=2&&(s++,f/=2),s+m>=d?(l=0,s=d):s+m>=1?(l=(e*f-1)*Math.pow(2,o),s=s+m):(l=e*Math.pow(2,m-1)*Math.pow(2,o),s=0));o>=8;r[t+b]=l&255,b+=w,l/=256,o-=8);for(s=s<<o|l,h+=o;h>0;r[t+b]=s&255,b+=w,s/=256,h-=8);r[t+b-w]|=y*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=base64Js,t=ieee754,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=l,r.SlowBuffer=N,r.INSPECT_MAX_BYTES=50;const o=2147483647;r.kMaxLength=o,l.TYPED_ARRAY_SUPPORT=a(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const p=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(p,c),p.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function s(p){if(p>o)throw new RangeError('The value "'+p+'" is invalid for option "size"');const c=new Uint8Array(p);return Object.setPrototypeOf(c,l.prototype),c}function l(p,c,u){if(typeof p=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(p)}return f(p,c,u)}l.poolSize=8192;function f(p,c,u){if(typeof p=="string")return _(p,c);if(ArrayBuffer.isView(p))return w(p);if(p==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p);if(ie(p,ArrayBuffer)||p&&ie(p.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ie(p,SharedArrayBuffer)||p&&ie(p.buffer,SharedArrayBuffer)))return y(p,c,u);if(typeof p=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const g=p.valueOf&&p.valueOf();if(g!=null&&g!==p)return l.from(g,c,u);const v=E(p);if(v)return v;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof p[Symbol.toPrimitive]=="function")return l.from(p[Symbol.toPrimitive]("string"),c,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p)}l.from=function(p,c,u){return f(p,c,u)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function h(p){if(typeof p!="number")throw new TypeError('"size" argument must be of type number');if(p<0)throw new RangeError('The value "'+p+'" is invalid for option "size"')}function d(p,c,u){return h(p),p<=0?s(p):c!==void 0?typeof u=="string"?s(p).fill(c,u):s(p).fill(c):s(p)}l.alloc=function(p,c,u){return d(p,c,u)};function m(p){return h(p),s(p<0?0:T(p)|0)}l.allocUnsafe=function(p){return m(p)},l.allocUnsafeSlow=function(p){return m(p)};function _(p,c){if((typeof c!="string"||c==="")&&(c="utf8"),!l.isEncoding(c))throw new TypeError("Unknown encoding: "+c);const u=D(p,c)|0;let g=s(u);const v=g.write(p,c);return v!==u&&(g=g.slice(0,v)),g}function b(p){const c=p.length<0?0:T(p.length)|0,u=s(c);for(let g=0;g<c;g+=1)u[g]=p[g]&255;return u}function w(p){if(ie(p,Uint8Array)){const c=new Uint8Array(p);return y(c.buffer,c.byteOffset,c.byteLength)}return b(p)}function y(p,c,u){if(c<0||p.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(p.byteLength<c+(u||0))throw new RangeError('"length" is outside of buffer bounds');let g;return c===void 0&&u===void 0?g=new Uint8Array(p):u===void 0?g=new Uint8Array(p,c):g=new Uint8Array(p,c,u),Object.setPrototypeOf(g,l.prototype),g}function E(p){if(l.isBuffer(p)){const c=T(p.length)|0,u=s(c);return u.length===0||p.copy(u,0,0,c),u}if(p.length!==void 0)return typeof p.length!="number"||se(p.length)?s(0):b(p);if(p.type==="Buffer"&&Array.isArray(p.data))return b(p.data)}function T(p){if(p>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return p|0}function N(p){return+p!=p&&(p=0),l.alloc(+p)}l.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==l.prototype},l.compare=function(c,u){if(ie(c,Uint8Array)&&(c=l.from(c,c.offset,c.byteLength)),ie(u,Uint8Array)&&(u=l.from(u,u.offset,u.byteLength)),!l.isBuffer(c)||!l.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===u)return 0;let g=c.length,v=u.length;for(let k=0,B=Math.min(g,v);k<B;++k)if(c[k]!==u[k]){g=c[k],v=u[k];break}return g<v?-1:v<g?1:0},l.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(c,u){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return l.alloc(0);let g;if(u===void 0)for(u=0,g=0;g<c.length;++g)u+=c[g].length;const v=l.allocUnsafe(u);let k=0;for(g=0;g<c.length;++g){let B=c[g];if(ie(B,Uint8Array))k+B.length>v.length?(l.isBuffer(B)||(B=l.from(B)),B.copy(v,k)):Uint8Array.prototype.set.call(v,B,k);else if(l.isBuffer(B))B.copy(v,k);else throw new TypeError('"list" argument must be an Array of Buffers');k+=B.length}return v};function D(p,c){if(l.isBuffer(p))return p.length;if(ArrayBuffer.isView(p)||ie(p,ArrayBuffer))return p.byteLength;if(typeof p!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof p);const u=p.length,g=arguments.length>2&&arguments[2]===!0;if(!g&&u===0)return 0;let v=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return ae(p).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return W(p).length;default:if(v)return g?-1:ae(p).length;c=(""+c).toLowerCase(),v=!0}}l.byteLength=D;function C(p,c,u){let g=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,c>>>=0,u<=c))return"";for(p||(p="utf8");;)switch(p){case"hex":return he(this,c,u);case"utf8":case"utf-8":return ee(this,c,u);case"ascii":return fe(this,c,u);case"latin1":case"binary":return Ve(this,c,u);case"base64":return Y(this,c,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return We(this,c,u);default:if(g)throw new TypeError("Unknown encoding: "+p);p=(p+"").toLowerCase(),g=!0}}l.prototype._isBuffer=!0;function A(p,c,u){const g=p[c];p[c]=p[u],p[u]=g}l.prototype.swap16=function(){const c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<c;u+=2)A(this,u,u+1);return this},l.prototype.swap32=function(){const c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<c;u+=4)A(this,u,u+3),A(this,u+1,u+2);return this},l.prototype.swap64=function(){const c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<c;u+=8)A(this,u,u+7),A(this,u+1,u+6),A(this,u+2,u+5),A(this,u+3,u+4);return this},l.prototype.toString=function(){const c=this.length;return c===0?"":arguments.length===0?ee(this,0,c):C.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(c){if(!l.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:l.compare(this,c)===0},l.prototype.inspect=function(){let c="";const u=r.INSPECT_MAX_BYTES;return c=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(c+=" ... "),"<Buffer "+c+">"},n&&(l.prototype[n]=l.prototype.inspect),l.prototype.compare=function(c,u,g,v,k){if(ie(c,Uint8Array)&&(c=l.from(c,c.offset,c.byteLength)),!l.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(u===void 0&&(u=0),g===void 0&&(g=c?c.length:0),v===void 0&&(v=0),k===void 0&&(k=this.length),u<0||g>c.length||v<0||k>this.length)throw new RangeError("out of range index");if(v>=k&&u>=g)return 0;if(v>=k)return-1;if(u>=g)return 1;if(u>>>=0,g>>>=0,v>>>=0,k>>>=0,this===c)return 0;let B=k-v,U=g-u;const j=Math.min(B,U),V=this.slice(v,k),z=c.slice(u,g);for(let H=0;H<j;++H)if(V[H]!==z[H]){B=V[H],U=z[H];break}return B<U?-1:U<B?1:0};function S(p,c,u,g,v){if(p.length===0)return-1;if(typeof u=="string"?(g=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,se(u)&&(u=v?0:p.length-1),u<0&&(u=p.length+u),u>=p.length){if(v)return-1;u=p.length-1}else if(u<0)if(v)u=0;else return-1;if(typeof c=="string"&&(c=l.from(c,g)),l.isBuffer(c))return c.length===0?-1:I(p,c,u,g,v);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?v?Uint8Array.prototype.indexOf.call(p,c,u):Uint8Array.prototype.lastIndexOf.call(p,c,u):I(p,[c],u,g,v);throw new TypeError("val must be string, number or Buffer")}function I(p,c,u,g,v){let k=1,B=p.length,U=c.length;if(g!==void 0&&(g=String(g).toLowerCase(),g==="ucs2"||g==="ucs-2"||g==="utf16le"||g==="utf-16le")){if(p.length<2||c.length<2)return-1;k=2,B/=2,U/=2,u/=2}function j(z,H){return k===1?z[H]:z.readUInt16BE(H*k)}let V;if(v){let z=-1;for(V=u;V<B;V++)if(j(p,V)===j(c,z===-1?0:V-z)){if(z===-1&&(z=V),V-z+1===U)return z*k}else z!==-1&&(V-=V-z),z=-1}else for(u+U>B&&(u=B-U),V=u;V>=0;V--){let z=!0;for(let H=0;H<U;H++)if(j(p,V+H)!==j(c,H)){z=!1;break}if(z)return V}return-1}l.prototype.includes=function(c,u,g){return this.indexOf(c,u,g)!==-1},l.prototype.indexOf=function(c,u,g){return S(this,c,u,g,!0)},l.prototype.lastIndexOf=function(c,u,g){return S(this,c,u,g,!1)};function L(p,c,u,g){u=Number(u)||0;const v=p.length-u;g?(g=Number(g),g>v&&(g=v)):g=v;const k=c.length;g>k/2&&(g=k/2);let B;for(B=0;B<g;++B){const U=parseInt(c.substr(B*2,2),16);if(se(U))return B;p[u+B]=U}return B}function x(p,c,u,g){return re(ae(c,p.length-u),p,u,g)}function R(p,c,u,g){return re(Ge(c),p,u,g)}function M(p,c,u,g){return re(W(c),p,u,g)}function K(p,c,u,g){return re(ze(c,p.length-u),p,u,g)}l.prototype.write=function(c,u,g,v){if(u===void 0)v="utf8",g=this.length,u=0;else if(g===void 0&&typeof u=="string")v=u,g=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(g)?(g=g>>>0,v===void 0&&(v="utf8")):(v=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const k=this.length-u;if((g===void 0||g>k)&&(g=k),c.length>0&&(g<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");v||(v="utf8");let B=!1;for(;;)switch(v){case"hex":return L(this,c,u,g);case"utf8":case"utf-8":return x(this,c,u,g);case"ascii":case"latin1":case"binary":return R(this,c,u,g);case"base64":return M(this,c,u,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,c,u,g);default:if(B)throw new TypeError("Unknown encoding: "+v);v=(""+v).toLowerCase(),B=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Y(p,c,u){return c===0&&u===p.length?e.fromByteArray(p):e.fromByteArray(p.slice(c,u))}function ee(p,c,u){u=Math.min(p.length,u);const g=[];let v=c;for(;v<u;){const k=p[v];let B=null,U=k>239?4:k>223?3:k>191?2:1;if(v+U<=u){let j,V,z,H;switch(U){case 1:k<128&&(B=k);break;case 2:j=p[v+1],(j&192)===128&&(H=(k&31)<<6|j&63,H>127&&(B=H));break;case 3:j=p[v+1],V=p[v+2],(j&192)===128&&(V&192)===128&&(H=(k&15)<<12|(j&63)<<6|V&63,H>2047&&(H<55296||H>57343)&&(B=H));break;case 4:j=p[v+1],V=p[v+2],z=p[v+3],(j&192)===128&&(V&192)===128&&(z&192)===128&&(H=(k&15)<<18|(j&63)<<12|(V&63)<<6|z&63,H>65535&&H<1114112&&(B=H))}}B===null?(B=65533,U=1):B>65535&&(B-=65536,g.push(B>>>10&1023|55296),B=56320|B&1023),g.push(B),v+=U}return He(g)}const F=4096;function He(p){const c=p.length;if(c<=F)return String.fromCharCode.apply(String,p);let u="",g=0;for(;g<c;)u+=String.fromCharCode.apply(String,p.slice(g,g+=F));return u}function fe(p,c,u){let g="";u=Math.min(p.length,u);for(let v=c;v<u;++v)g+=String.fromCharCode(p[v]&127);return g}function Ve(p,c,u){let g="";u=Math.min(p.length,u);for(let v=c;v<u;++v)g+=String.fromCharCode(p[v]);return g}function he(p,c,u){const g=p.length;(!c||c<0)&&(c=0),(!u||u<0||u>g)&&(u=g);let v="";for(let k=c;k<u;++k)v+=qe[p[k]];return v}function We(p,c,u){const g=p.slice(c,u);let v="";for(let k=0;k<g.length-1;k+=2)v+=String.fromCharCode(g[k]+g[k+1]*256);return v}l.prototype.slice=function(c,u){const g=this.length;c=~~c,u=u===void 0?g:~~u,c<0?(c+=g,c<0&&(c=0)):c>g&&(c=g),u<0?(u+=g,u<0&&(u=0)):u>g&&(u=g),u<c&&(u=c);const v=this.subarray(c,u);return Object.setPrototypeOf(v,l.prototype),v};function G(p,c,u){if(p%1!==0||p<0)throw new RangeError("offset is not uint");if(p+c>u)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(c,u,g){c=c>>>0,u=u>>>0,g||G(c,u,this.length);let v=this[c],k=1,B=0;for(;++B<u&&(k*=256);)v+=this[c+B]*k;return v},l.prototype.readUintBE=l.prototype.readUIntBE=function(c,u,g){c=c>>>0,u=u>>>0,g||G(c,u,this.length);let v=this[c+--u],k=1;for(;u>0&&(k*=256);)v+=this[c+--u]*k;return v},l.prototype.readUint8=l.prototype.readUInt8=function(c,u){return c=c>>>0,u||G(c,1,this.length),this[c]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(c,u){return c=c>>>0,u||G(c,2,this.length),this[c]|this[c+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(c,u){return c=c>>>0,u||G(c,2,this.length),this[c]<<8|this[c+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(c,u){return c=c>>>0,u||G(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(c,u){return c=c>>>0,u||G(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},l.prototype.readBigUInt64LE=Q(function(c){c=c>>>0,pe(c,"offset");const u=this[c],g=this[c+7];(u===void 0||g===void 0)&&ye(c,this.length-8);const v=u+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,k=this[++c]+this[++c]*2**8+this[++c]*2**16+g*2**24;return BigInt(v)+(BigInt(k)<<BigInt(32))}),l.prototype.readBigUInt64BE=Q(function(c){c=c>>>0,pe(c,"offset");const u=this[c],g=this[c+7];(u===void 0||g===void 0)&&ye(c,this.length-8);const v=u*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],k=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+g;return(BigInt(v)<<BigInt(32))+BigInt(k)}),l.prototype.readIntLE=function(c,u,g){c=c>>>0,u=u>>>0,g||G(c,u,this.length);let v=this[c],k=1,B=0;for(;++B<u&&(k*=256);)v+=this[c+B]*k;return k*=128,v>=k&&(v-=Math.pow(2,8*u)),v},l.prototype.readIntBE=function(c,u,g){c=c>>>0,u=u>>>0,g||G(c,u,this.length);let v=u,k=1,B=this[c+--v];for(;v>0&&(k*=256);)B+=this[c+--v]*k;return k*=128,B>=k&&(B-=Math.pow(2,8*u)),B},l.prototype.readInt8=function(c,u){return c=c>>>0,u||G(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},l.prototype.readInt16LE=function(c,u){c=c>>>0,u||G(c,2,this.length);const g=this[c]|this[c+1]<<8;return g&32768?g|4294901760:g},l.prototype.readInt16BE=function(c,u){c=c>>>0,u||G(c,2,this.length);const g=this[c+1]|this[c]<<8;return g&32768?g|4294901760:g},l.prototype.readInt32LE=function(c,u){return c=c>>>0,u||G(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},l.prototype.readInt32BE=function(c,u){return c=c>>>0,u||G(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},l.prototype.readBigInt64LE=Q(function(c){c=c>>>0,pe(c,"offset");const u=this[c],g=this[c+7];(u===void 0||g===void 0)&&ye(c,this.length-8);const v=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(g<<24);return(BigInt(v)<<BigInt(32))+BigInt(u+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)}),l.prototype.readBigInt64BE=Q(function(c){c=c>>>0,pe(c,"offset");const u=this[c],g=this[c+7];(u===void 0||g===void 0)&&ye(c,this.length-8);const v=(u<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(v)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+g)}),l.prototype.readFloatLE=function(c,u){return c=c>>>0,u||G(c,4,this.length),t.read(this,c,!0,23,4)},l.prototype.readFloatBE=function(c,u){return c=c>>>0,u||G(c,4,this.length),t.read(this,c,!1,23,4)},l.prototype.readDoubleLE=function(c,u){return c=c>>>0,u||G(c,8,this.length),t.read(this,c,!0,52,8)},l.prototype.readDoubleBE=function(c,u){return c=c>>>0,u||G(c,8,this.length),t.read(this,c,!1,52,8)};function q(p,c,u,g,v,k){if(!l.isBuffer(p))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>v||c<k)throw new RangeError('"value" argument is out of bounds');if(u+g>p.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(c,u,g,v){if(c=+c,u=u>>>0,g=g>>>0,!v){const U=Math.pow(2,8*g)-1;q(this,c,u,g,U,0)}let k=1,B=0;for(this[u]=c&255;++B<g&&(k*=256);)this[u+B]=c/k&255;return u+g},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(c,u,g,v){if(c=+c,u=u>>>0,g=g>>>0,!v){const U=Math.pow(2,8*g)-1;q(this,c,u,g,U,0)}let k=g-1,B=1;for(this[u+k]=c&255;--k>=0&&(B*=256);)this[u+k]=c/B&255;return u+g},l.prototype.writeUint8=l.prototype.writeUInt8=function(c,u,g){return c=+c,u=u>>>0,g||q(this,c,u,1,255,0),this[u]=c&255,u+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(c,u,g){return c=+c,u=u>>>0,g||q(this,c,u,2,65535,0),this[u]=c&255,this[u+1]=c>>>8,u+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(c,u,g){return c=+c,u=u>>>0,g||q(this,c,u,2,65535,0),this[u]=c>>>8,this[u+1]=c&255,u+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(c,u,g){return c=+c,u=u>>>0,g||q(this,c,u,4,4294967295,0),this[u+3]=c>>>24,this[u+2]=c>>>16,this[u+1]=c>>>8,this[u]=c&255,u+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(c,u,g){return c=+c,u=u>>>0,g||q(this,c,u,4,4294967295,0),this[u]=c>>>24,this[u+1]=c>>>16,this[u+2]=c>>>8,this[u+3]=c&255,u+4};function Ue(p,c,u,g,v){ce(c,g,v,p,u,7);let k=Number(c&BigInt(4294967295));p[u++]=k,k=k>>8,p[u++]=k,k=k>>8,p[u++]=k,k=k>>8,p[u++]=k;let B=Number(c>>BigInt(32)&BigInt(4294967295));return p[u++]=B,B=B>>8,p[u++]=B,B=B>>8,p[u++]=B,B=B>>8,p[u++]=B,u}function $e(p,c,u,g,v){ce(c,g,v,p,u,7);let k=Number(c&BigInt(4294967295));p[u+7]=k,k=k>>8,p[u+6]=k,k=k>>8,p[u+5]=k,k=k>>8,p[u+4]=k;let B=Number(c>>BigInt(32)&BigInt(4294967295));return p[u+3]=B,B=B>>8,p[u+2]=B,B=B>>8,p[u+1]=B,B=B>>8,p[u]=B,u+8}l.prototype.writeBigUInt64LE=Q(function(c,u=0){return Ue(this,c,u,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Q(function(c,u=0){return $e(this,c,u,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(c,u,g,v){if(c=+c,u=u>>>0,!v){const j=Math.pow(2,8*g-1);q(this,c,u,g,j-1,-j)}let k=0,B=1,U=0;for(this[u]=c&255;++k<g&&(B*=256);)c<0&&U===0&&this[u+k-1]!==0&&(U=1),this[u+k]=(c/B>>0)-U&255;return u+g},l.prototype.writeIntBE=function(c,u,g,v){if(c=+c,u=u>>>0,!v){const j=Math.pow(2,8*g-1);q(this,c,u,g,j-1,-j)}let k=g-1,B=1,U=0;for(this[u+k]=c&255;--k>=0&&(B*=256);)c<0&&U===0&&this[u+k+1]!==0&&(U=1),this[u+k]=(c/B>>0)-U&255;return u+g},l.prototype.writeInt8=function(c,u,g){return c=+c,u=u>>>0,g||q(this,c,u,1,127,-128),c<0&&(c=255+c+1),this[u]=c&255,u+1},l.prototype.writeInt16LE=function(c,u,g){return c=+c,u=u>>>0,g||q(this,c,u,2,32767,-32768),this[u]=c&255,this[u+1]=c>>>8,u+2},l.prototype.writeInt16BE=function(c,u,g){return c=+c,u=u>>>0,g||q(this,c,u,2,32767,-32768),this[u]=c>>>8,this[u+1]=c&255,u+2},l.prototype.writeInt32LE=function(c,u,g){return c=+c,u=u>>>0,g||q(this,c,u,4,2147483647,-2147483648),this[u]=c&255,this[u+1]=c>>>8,this[u+2]=c>>>16,this[u+3]=c>>>24,u+4},l.prototype.writeInt32BE=function(c,u,g){return c=+c,u=u>>>0,g||q(this,c,u,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[u]=c>>>24,this[u+1]=c>>>16,this[u+2]=c>>>8,this[u+3]=c&255,u+4},l.prototype.writeBigInt64LE=Q(function(c,u=0){return Ue(this,c,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Q(function(c,u=0){return $e(this,c,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Z(p,c,u,g,v,k){if(u+g>p.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function Ne(p,c,u,g,v){return c=+c,u=u>>>0,v||Z(p,c,u,4),t.write(p,c,u,g,23,4),u+4}l.prototype.writeFloatLE=function(c,u,g){return Ne(this,c,u,!0,g)},l.prototype.writeFloatBE=function(c,u,g){return Ne(this,c,u,!1,g)};function le(p,c,u,g,v){return c=+c,u=u>>>0,v||Z(p,c,u,8),t.write(p,c,u,g,52,8),u+8}l.prototype.writeDoubleLE=function(c,u,g){return le(this,c,u,!0,g)},l.prototype.writeDoubleBE=function(c,u,g){return le(this,c,u,!1,g)},l.prototype.copy=function(c,u,g,v){if(!l.isBuffer(c))throw new TypeError("argument should be a Buffer");if(g||(g=0),!v&&v!==0&&(v=this.length),u>=c.length&&(u=c.length),u||(u=0),v>0&&v<g&&(v=g),v===g||c.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("sourceEnd out of bounds");v>this.length&&(v=this.length),c.length-u<v-g&&(v=c.length-u+g);const k=v-g;return this===c&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,g,v):Uint8Array.prototype.set.call(c,this.subarray(g,v),u),k},l.prototype.fill=function(c,u,g,v){if(typeof c=="string"){if(typeof u=="string"?(v=u,u=0,g=this.length):typeof g=="string"&&(v=g,g=this.length),v!==void 0&&typeof v!="string")throw new TypeError("encoding must be a string");if(typeof v=="string"&&!l.isEncoding(v))throw new TypeError("Unknown encoding: "+v);if(c.length===1){const B=c.charCodeAt(0);(v==="utf8"&&B<128||v==="latin1")&&(c=B)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(u<0||this.length<u||this.length<g)throw new RangeError("Out of range index");if(g<=u)return this;u=u>>>0,g=g===void 0?this.length:g>>>0,c||(c=0);let k;if(typeof c=="number")for(k=u;k<g;++k)this[k]=c;else{const B=l.isBuffer(c)?c:l.from(c,v),U=B.length;if(U===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(k=0;k<g-u;++k)this[k+u]=B[k%U]}return this};const de={};function _e(p,c,u){de[p]=class extends u{constructor(){super(),Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${p}]`,this.stack,delete this.name}get code(){return p}set code(v){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:v,writable:!0})}toString(){return`${this.name} [${p}]: ${this.message}`}}}_e("ERR_BUFFER_OUT_OF_BOUNDS",function(p){return p?`${p} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),_e("ERR_INVALID_ARG_TYPE",function(p,c){return`The "${p}" argument must be of type number. Received type ${typeof c}`},TypeError),_e("ERR_OUT_OF_RANGE",function(p,c,u){let g=`The value of "${p}" is out of range.`,v=u;return Number.isInteger(u)&&Math.abs(u)>2**32?v=te(String(u)):typeof u=="bigint"&&(v=String(u),(u>BigInt(2)**BigInt(32)||u<-(BigInt(2)**BigInt(32)))&&(v=te(v)),v+="n"),g+=` It must be ${c}. Received ${v}`,g},RangeError);function te(p){let c="",u=p.length;const g=p[0]==="-"?1:0;for(;u>=g+4;u-=3)c=`_${p.slice(u-3,u)}${c}`;return`${p.slice(0,u)}${c}`}function Me(p,c,u){pe(c,"offset"),(p[c]===void 0||p[c+u]===void 0)&&ye(c,p.length-(u+1))}function ce(p,c,u,g,v,k){if(p>u||p<c){const B=typeof c=="bigint"?"n":"";let U;throw k>3?c===0||c===BigInt(0)?U=`>= 0${B} and < 2${B} ** ${(k+1)*8}${B}`:U=`>= -(2${B} ** ${(k+1)*8-1}${B}) and < 2 ** ${(k+1)*8-1}${B}`:U=`>= ${c}${B} and <= ${u}${B}`,new de.ERR_OUT_OF_RANGE("value",U,p)}Me(g,v,k)}function pe(p,c){if(typeof p!="number")throw new de.ERR_INVALID_ARG_TYPE(c,"number",p)}function ye(p,c,u){throw Math.floor(p)!==p?(pe(p,u),new de.ERR_OUT_OF_RANGE(u||"offset","an integer",p)):c<0?new de.ERR_BUFFER_OUT_OF_BOUNDS:new de.ERR_OUT_OF_RANGE(u||"offset",`>= ${u?1:0} and <= ${c}`,p)}const ne=/[^+/0-9A-Za-z-_]/g;function je(p){if(p=p.split("=")[0],p=p.trim().replace(ne,""),p.length<2)return"";for(;p.length%4!==0;)p=p+"=";return p}function ae(p,c){c=c||1/0;let u;const g=p.length;let v=null;const k=[];for(let B=0;B<g;++B){if(u=p.charCodeAt(B),u>55295&&u<57344){if(!v){if(u>56319){(c-=3)>-1&&k.push(239,191,189);continue}else if(B+1===g){(c-=3)>-1&&k.push(239,191,189);continue}v=u;continue}if(u<56320){(c-=3)>-1&&k.push(239,191,189),v=u;continue}u=(v-55296<<10|u-56320)+65536}else v&&(c-=3)>-1&&k.push(239,191,189);if(v=null,u<128){if((c-=1)<0)break;k.push(u)}else if(u<2048){if((c-=2)<0)break;k.push(u>>6|192,u&63|128)}else if(u<65536){if((c-=3)<0)break;k.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((c-=4)<0)break;k.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return k}function Ge(p){const c=[];for(let u=0;u<p.length;++u)c.push(p.charCodeAt(u)&255);return c}function ze(p,c){let u,g,v;const k=[];for(let B=0;B<p.length&&!((c-=2)<0);++B)u=p.charCodeAt(B),g=u>>8,v=u%256,k.push(v),k.push(g);return k}function W(p){return e.toByteArray(je(p))}function re(p,c,u,g){let v;for(v=0;v<g&&!(v+u>=c.length||v>=p.length);++v)c[v+u]=p[v];return v}function ie(p,c){return p instanceof c||p!=null&&p.constructor!=null&&p.constructor.name!=null&&p.constructor.name===c.name}function se(p){return p!==p}const qe=function(){const p="0123456789abcdef",c=new Array(256);for(let u=0;u<16;++u){const g=u*16;for(let v=0;v<16;++v)c[g+v]=p[u]+p[v]}return c}();function Q(p){return typeof BigInt>"u"?Ye:p}function Ye(){throw new Error("BigInt not supported")}})(buffer);const{Buffer}=buffer,symbol=Symbol.for("BufferList");function BufferList(r){if(!(this instanceof BufferList))return new BufferList(r);BufferList._init.call(this,r)}BufferList._init=function r(e){Object.defineProperty(this,symbol,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};BufferList.prototype._new=function r(e){return new BufferList(e)};BufferList.prototype._offset=function r(e){if(e===0)return[0,0];let t=0;for(let n=0;n<this._bufs.length;n++){const o=t+this._bufs[n].length;if(e<o||n===this._bufs.length-1)return[n,e-t];t=o}};BufferList.prototype._reverseOffset=function(r){const e=r[0];let t=r[1];for(let n=0;n<e;n++)t+=this._bufs[n].length;return t};BufferList.prototype.get=function r(e){if(e>this.length||e<0)return;const t=this._offset(e);return this._bufs[t[0]][t[1]]};BufferList.prototype.slice=function r(e,t){return typeof e=="number"&&e<0&&(e+=this.length),typeof t=="number"&&t<0&&(t+=this.length),this.copy(null,0,e,t)};BufferList.prototype.copy=function r(e,t,n,o){if((typeof n!="number"||n<0)&&(n=0),(typeof o!="number"||o>this.length)&&(o=this.length),n>=this.length||o<=0)return e||Buffer.alloc(0);const a=!!e,s=this._offset(n),l=o-n;let f=l,h=a&&t||0,d=s[1];if(n===0&&o===this.length){if(!a)return this._bufs.length===1?this._bufs[0]:Buffer.concat(this._bufs,this.length);for(let m=0;m<this._bufs.length;m++)this._bufs[m].copy(e,h),h+=this._bufs[m].length;return e}if(f<=this._bufs[s[0]].length-d)return a?this._bufs[s[0]].copy(e,t,d,d+f):this._bufs[s[0]].slice(d,d+f);a||(e=Buffer.allocUnsafe(l));for(let m=s[0];m<this._bufs.length;m++){const _=this._bufs[m].length-d;if(f>_)this._bufs[m].copy(e,h,d),h+=_;else{this._bufs[m].copy(e,h,d,d+f),h+=_;break}f-=_,d&&(d=0)}return e.length>h?e.slice(0,h):e};BufferList.prototype.shallowSlice=function r(e,t){if(e=e||0,t=typeof t!="number"?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return this._new();const n=this._offset(e),o=this._offset(t),a=this._bufs.slice(n[0],o[0]+1);return o[1]===0?a.pop():a[a.length-1]=a[a.length-1].slice(0,o[1]),n[1]!==0&&(a[0]=a[0].slice(n[1])),this._new(a)};BufferList.prototype.toString=function r(e,t,n){return this.slice(t,n).toString(e)};BufferList.prototype.consume=function r(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};BufferList.prototype.duplicate=function r(){const e=this._new();for(let t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e};BufferList.prototype.append=function r(e){if(e==null)return this;if(e.buffer)this._appendBuffer(Buffer.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let t=0;t<e.length;t++)this.append(e[t]);else if(this._isBufferList(e))for(let t=0;t<e._bufs.length;t++)this.append(e._bufs[t]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(Buffer.from(e));return this};BufferList.prototype._appendBuffer=function r(e){this._bufs.push(e),this.length+=e.length};BufferList.prototype.indexOf=function(r,e,t){if(t===void 0&&typeof e=="string"&&(t=e,e=void 0),typeof r=="function"||Array.isArray(r))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof r=="number"?r=Buffer.from([r]):typeof r=="string"?r=Buffer.from(r,t):this._isBufferList(r)?r=r.slice():Array.isArray(r.buffer)?r=Buffer.from(r.buffer,r.byteOffset,r.byteLength):Buffer.isBuffer(r)||(r=Buffer.from(r)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),r.length===0)return e>this.length?this.length:e;const n=this._offset(e);let o=n[0],a=n[1];for(;o<this._bufs.length;o++){const s=this._bufs[o];for(;a<s.length;)if(s.length-a>=r.length){const f=s.indexOf(r,a);if(f!==-1)return this._reverseOffset([o,f]);a=s.length-r.length+1}else{const f=this._reverseOffset([o,a]);if(this._match(f,r))return f;a++}a=0}return-1};BufferList.prototype._match=function(r,e){if(this.length-r<e.length)return!1;for(let t=0;t<e.length;t++)if(this.get(r+t)!==e[t])return!1;return!0};(function(){const r={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const e in r)(function(t){r[t]===null?BufferList.prototype[t]=function(n,o){return this.slice(n,n+o)[t](0,o)}:BufferList.prototype[t]=function(n=0){return this.slice(n,n+r[t])[t](0)}})(e)})();BufferList.prototype._isBufferList=function r(e){return e instanceof BufferList||BufferList.isBufferList(e)};BufferList.isBufferList=function r(e){return e!=null&&e[symbol]};var BufferList_1=BufferList;const BufferList$1=getDefaultExportFromCjs(BufferList_1);let Rabin$1=class{constructor(e,t=12,n=8*1024,o=32*1024,a=64,s){this.bits=t,this.min=n,this.max=o,this.asModule=e,this.rabin=new e.Rabin(t,n,o,a,s),this.polynomial=s}fingerprint(e){const{__retain:t,__release:n,__allocArray:o,__getInt32Array:a,Int32Array_ID:s,Uint8Array_ID:l}=this.asModule,f=new Int32Array(Math.ceil(e.length/this.min)),h=t(o(s,f)),d=t(o(l,e)),m=this.rabin.fingerprint(d,h),_=a(m);n(d),n(h);const b=_.indexOf(0);return b>=0?_.subarray(0,b):_}};var rabin$1=Rabin$1,loader={};const ID_OFFSET=-8,SIZE_OFFSET=-4,ARRAYBUFFER_ID=0,STRING_ID=1,ARRAYBUFFERVIEW=1,ARRAY=2,VAL_ALIGN_OFFSET=5,VAL_SIGNED=1024,VAL_FLOAT=2048,VAL_MANAGED=8192,ARRAYBUFFERVIEW_BUFFER_OFFSET=0,ARRAYBUFFERVIEW_DATASTART_OFFSET=4,ARRAYBUFFERVIEW_DATALENGTH_OFFSET=8,ARRAYBUFFERVIEW_SIZE=12,ARRAY_LENGTH_OFFSET=12,ARRAY_SIZE=16,BIGINT=typeof BigUint64Array<"u",THIS=Symbol(),CHUNKSIZE=1024;function getStringImpl(r,e){const t=new Uint32Array(r),n=new Uint16Array(r);var o=t[e+SIZE_OFFSET>>>2]>>>1,a=e>>>1;if(o<=CHUNKSIZE)return String.fromCharCode.apply(String,n.subarray(a,a+o));const s=[];do{const l=n[a+CHUNKSIZE-1],f=l>=55296&&l<56320?CHUNKSIZE-1:CHUNKSIZE;s.push(String.fromCharCode.apply(String,n.subarray(a,a+=f))),o-=f}while(o>CHUNKSIZE);return s.join("")+String.fromCharCode.apply(String,n.subarray(a,a+o))}function preInstantiate(r){const e={};function t(o,a){return o?getStringImpl(o.buffer,a):"<yet unknown>"}const n=r.env=r.env||{};return n.abort=n.abort||function(a,s,l,f){const h=e.memory||n.memory;throw Error("abort: "+t(h,a)+" at "+t(h,s)+":"+l+":"+f)},n.trace=n.trace||function(a,s){const l=e.memory||n.memory;console.log("trace: "+t(l,a)+(s?" ":"")+Array.prototype.slice.call(arguments,2,2+s).join(", "))},r.Math=r.Math||Math,r.Date=r.Date||Date,e}function postInstantiate(r,e){const t=e.exports,n=t.memory,o=t.table,a=t.__alloc,s=t.__retain,l=t.__rtti_base||-1;function f(A){const S=new Uint32Array(n.buffer),I=S[l>>>2];if((A>>>=0)>=I)throw Error("invalid id: "+A);return S[(l+4>>>2)+A*2]}function h(A){const S=new Uint32Array(n.buffer),I=S[l>>>2];if((A>>>=0)>=I)throw Error("invalid id: "+A);return S[(l+4>>>2)+A*2+1]}function d(A){return 31-Math.clz32(A>>>VAL_ALIGN_OFFSET&31)}function m(A){const S=A.length,I=a(S<<1,STRING_ID),L=new Uint16Array(n.buffer);for(var x=0,R=I>>>1;x<S;++x)L[R+x]=A.charCodeAt(x);return I}r.__allocString=m;function _(A){const S=n.buffer;if(new Uint32Array(S)[A+ID_OFFSET>>>2]!==STRING_ID)throw Error("not a string: "+A);return getStringImpl(S,A)}r.__getString=_;function b(A,S,I){const L=n.buffer;if(I)switch(A){case 2:return new Float32Array(L);case 3:return new Float64Array(L)}else switch(A){case 0:return new(S?Int8Array:Uint8Array)(L);case 1:return new(S?Int16Array:Uint16Array)(L);case 2:return new(S?Int32Array:Uint32Array)(L);case 3:return new(S?BigInt64Array:BigUint64Array)(L)}throw Error("unsupported align: "+A)}function w(A,S){const I=f(A);if(!(I&(ARRAYBUFFERVIEW|ARRAY)))throw Error("not an array: "+A+" @ "+I);const L=d(I),x=S.length,R=a(x<<L,ARRAYBUFFER_ID),M=a(I&ARRAY?ARRAY_SIZE:ARRAYBUFFERVIEW_SIZE,A),K=new Uint32Array(n.buffer);K[M+ARRAYBUFFERVIEW_BUFFER_OFFSET>>>2]=s(R),K[M+ARRAYBUFFERVIEW_DATASTART_OFFSET>>>2]=R,K[M+ARRAYBUFFERVIEW_DATALENGTH_OFFSET>>>2]=x<<L,I&ARRAY&&(K[M+ARRAY_LENGTH_OFFSET>>>2]=x);const Y=b(L,I&VAL_SIGNED,I&VAL_FLOAT);if(I&VAL_MANAGED)for(let ee=0;ee<x;++ee)Y[(R>>>L)+ee]=s(S[ee]);else Y.set(S,R>>>L);return M}r.__allocArray=w;function y(A){const S=new Uint32Array(n.buffer),I=S[A+ID_OFFSET>>>2],L=f(I);if(!(L&ARRAYBUFFERVIEW))throw Error("not an array: "+I);const x=d(L);var R=S[A+ARRAYBUFFERVIEW_DATASTART_OFFSET>>>2];const M=L&ARRAY?S[A+ARRAY_LENGTH_OFFSET>>>2]:S[R+SIZE_OFFSET>>>2]>>>x;return b(x,L&VAL_SIGNED,L&VAL_FLOAT).subarray(R>>>=x,R+M)}r.__getArrayView=y;function E(A){const S=y(A),I=S.length,L=new Array(I);for(let x=0;x<I;x++)L[x]=S[x];return L}r.__getArray=E;function T(A){const S=n.buffer,I=new Uint32Array(S)[A+SIZE_OFFSET>>>2];return S.slice(A,A+I)}r.__getArrayBuffer=T;function N(A,S,I){return new A(D(A,S,I))}function D(A,S,I){const L=n.buffer,x=new Uint32Array(L),R=x[I+ARRAYBUFFERVIEW_DATASTART_OFFSET>>>2];return new A(L,R,x[R+SIZE_OFFSET>>>2]>>>S)}r.__getInt8Array=N.bind(null,Int8Array,0),r.__getInt8ArrayView=D.bind(null,Int8Array,0),r.__getUint8Array=N.bind(null,Uint8Array,0),r.__getUint8ArrayView=D.bind(null,Uint8Array,0),r.__getUint8ClampedArray=N.bind(null,Uint8ClampedArray,0),r.__getUint8ClampedArrayView=D.bind(null,Uint8ClampedArray,0),r.__getInt16Array=N.bind(null,Int16Array,1),r.__getInt16ArrayView=D.bind(null,Int16Array,1),r.__getUint16Array=N.bind(null,Uint16Array,1),r.__getUint16ArrayView=D.bind(null,Uint16Array,1),r.__getInt32Array=N.bind(null,Int32Array,2),r.__getInt32ArrayView=D.bind(null,Int32Array,2),r.__getUint32Array=N.bind(null,Uint32Array,2),r.__getUint32ArrayView=D.bind(null,Uint32Array,2),BIGINT&&(r.__getInt64Array=N.bind(null,BigInt64Array,3),r.__getInt64ArrayView=D.bind(null,BigInt64Array,3),r.__getUint64Array=N.bind(null,BigUint64Array,3),r.__getUint64ArrayView=D.bind(null,BigUint64Array,3)),r.__getFloat32Array=N.bind(null,Float32Array,2),r.__getFloat32ArrayView=D.bind(null,Float32Array,2),r.__getFloat64Array=N.bind(null,Float64Array,3),r.__getFloat64ArrayView=D.bind(null,Float64Array,3);function C(A,S){const I=new Uint32Array(n.buffer);var L=I[A+ID_OFFSET>>>2];if(L<=I[l>>>2])do if(L==S)return!0;while(L=h(L));return!1}return r.__instanceof=C,r.memory=r.memory||n,r.table=r.table||o,demangle(t,r)}function isResponse(r){return typeof Response<"u"&&r instanceof Response}async function instantiate$1(r,e){return isResponse(r=await r)?instantiateStreaming(r,e):postInstantiate(preInstantiate(e||(e={})),await WebAssembly.instantiate(r instanceof WebAssembly.Module?r:await WebAssembly.compile(r),e))}loader.instantiate=instantiate$1;function instantiateSync(r,e){return postInstantiate(preInstantiate(e||(e={})),new WebAssembly.Instance(r instanceof WebAssembly.Module?r:new WebAssembly.Module(r),e))}loader.instantiateSync=instantiateSync;async function instantiateStreaming(r,e){return WebAssembly.instantiateStreaming?postInstantiate(preInstantiate(e||(e={})),(await WebAssembly.instantiateStreaming(r,e)).instance):instantiate$1(isResponse(r=await r)?r.arrayBuffer():r,e)}loader.instantiateStreaming=instantiateStreaming;function demangle(r,e){var t=e?Object.create(e):{},n=r.__argumentsLength?function(o){r.__argumentsLength.value=o}:r.__setArgumentsLength||r.__setargc||function(){};for(let o in r){if(!Object.prototype.hasOwnProperty.call(r,o))continue;const a=r[o];let s=o.split("."),l=t;for(;s.length>1;){let d=s.shift();Object.prototype.hasOwnProperty.call(l,d)||(l[d]={}),l=l[d]}let f=s[0],h=f.indexOf("#");if(h>=0){let d=f.substring(0,h),m=l[d];if(typeof m>"u"||!m.prototype){let _=function(...b){return _.wrap(_.prototype.constructor(0,...b))};_.prototype={valueOf:function(){return this[THIS]}},_.wrap=function(b){return Object.create(_.prototype,{[THIS]:{value:b,writable:!1}})},m&&Object.getOwnPropertyNames(m).forEach(b=>Object.defineProperty(_,b,Object.getOwnPropertyDescriptor(m,b))),l[d]=_}if(f=f.substring(h+1),l=l[d].prototype,/^(get|set):/.test(f)){if(!Object.prototype.hasOwnProperty.call(l,f=f.substring(4))){let _=r[o.replace("set:","get:")],b=r[o.replace("get:","set:")];Object.defineProperty(l,f,{get:function(){return _(this[THIS])},set:function(w){b(this[THIS],w)},enumerable:!0})}}else f==="constructor"?(l[f]=(..._)=>(n(_.length),a(..._))).original=a:(l[f]=function(..._){return n(_.length),a(this[THIS],..._)}).original=a}else/^(get|set):/.test(f)?Object.prototype.hasOwnProperty.call(l,f=f.substring(4))||Object.defineProperty(l,f,{get:r[o.replace("set:","get:")],set:r[o.replace("get:","set:")],enumerable:!0}):typeof a=="function"&&a!==n?(l[f]=(...d)=>(n(d.length),a(...d))).original=a:l[f]=a}return t}loader.demangle=demangle;const{instantiate}=loader;loadWebAssembly.supported=typeof WebAssembly<"u";function loadWebAssembly(r={}){if(!loadWebAssembly.supported)return null;var e=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return instantiate(new Response(new Blob([e],{type:"application/wasm"})),r)}var rabinWasm=loadWebAssembly;const Rabin=rabin$1,getRabin=rabinWasm,create=async(r,e,t,n,o)=>{const a=await getRabin();return new Rabin(a,r,e,t,n,o)};var src$2={Rabin,create};async function*rabinChunker(r,e){let t,n,o;if(e.minChunkSize&&e.maxChunkSize&&e.avgChunkSize)o=e.avgChunkSize,t=e.minChunkSize,n=e.maxChunkSize;else if(e.avgChunkSize)o=e.avgChunkSize,t=o/3,n=o+o/2;else throw errCode$1(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");if(t<16)throw errCode$1(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");n<t&&(n=t),o<t&&(o=t);const a=Math.floor(Math.log2(o));for await(const s of rabin(r,{min:t,max:n,bits:a,window:e.window,polynomial:e.polynomial}))yield s}async function*rabin(r,e){const t=await src$2.create(e.bits,e.min,e.max,e.window),n=new BufferList$1;for await(const o of r){n.append(o);const a=t.fingerprint(o);for(let s=0;s<a.length;s++){const l=a[s],f=n.slice(0,l);n.consume(l),yield f}}n.length&&(yield n.slice(0))}async function*fixedSizeChunker(r,e){let t=new BufferList$1,n=0,o=!1;const a=e.maxChunkSize;for await(const s of r)for(t.append(s),n+=s.length;n>=a;)if(yield t.slice(0,a),o=!0,a===t.length)t=new BufferList$1,n=0;else{const l=new BufferList$1;l.append(t.shallowSlice(a)),t=l,n-=a}(!o||n)&&(yield t.slice(0,n))}const identity=from$1({prefix:"\0",name:"identity",encode:r=>toString$1(r),decode:r=>fromString$3(r)}),identityBase=Object.freeze(Object.defineProperty({__proto__:null,identity},Symbol.toStringTag,{value:"Module"})),base2=rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$1=Object.freeze(Object.defineProperty({__proto__:null,base2},Symbol.toStringTag,{value:"Module"})),base8=rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$1=Object.freeze(Object.defineProperty({__proto__:null,base8},Symbol.toStringTag,{value:"Module"})),base10=baseX({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$1=Object.freeze(Object.defineProperty({__proto__:null,base10},Symbol.toStringTag,{value:"Module"})),base16=rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$1=Object.freeze(Object.defineProperty({__proto__:null,base16,base16upper},Symbol.toStringTag,{value:"Module"})),base36=baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$1=Object.freeze(Object.defineProperty({__proto__:null,base36,base36upper},Symbol.toStringTag,{value:"Module"})),base64=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$1=Object.freeze(Object.defineProperty({__proto__:null,base64,base64pad,base64url,base64urlpad},Symbol.toStringTag,{value:"Module"})),alphabet=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),alphabetBytesToChars=alphabet.reduce((r,e,t)=>(r[t]=e,r),[]),alphabetCharsToBytes=alphabet.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function encode(r){return r.reduce((e,t)=>(e+=alphabetBytesToChars[t],e),"")}function decode(r){const e=[];for(const t of r){const n=alphabetCharsToBytes[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}const base256emoji=from$1({prefix:"🚀",name:"base256emoji",encode,decode}),base256emoji$1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const bases={...identityBase,...base2$1,...base8$1,...base10$1,...base16$1,...base32$1,...base36$1,...base58,...base64$1,...base256emoji$1};function asUint8Array(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function allocUnsafe(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?asUint8Array(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function createCodec(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const string=createCodec("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),ascii=createCodec("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=allocUnsafe(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),BASES={utf8:string,"utf-8":string,hex:bases.base16,latin1:ascii,ascii,binary:ascii,...bases};function fromString(r,e="utf8"){const t=BASES[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}const fromString$1=Object.freeze(Object.defineProperty({__proto__:null,fromString},Symbol.toStringTag,{value:"Module"}));async function*validateChunks(r){for await(const e of r){if(e.length===void 0)throw errCode$1(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if(typeof e=="string"||e instanceof String)yield fromString(e.toString());else if(Array.isArray(e))yield Uint8Array.from(e);else if(e instanceof Uint8Array)yield e;else throw errCode$1(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}}function isIterable(r){return Symbol.iterator in r}function isAsyncIterable(r){return Symbol.asyncIterator in r}function contentAsAsyncIterable(r){try{if(r instanceof Uint8Array)return async function*(){yield r}();if(isIterable(r))return async function*(){yield*r}();if(isAsyncIterable(r))return r}catch{throw errCode$1(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw errCode$1(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}async function*dagBuilder(r,e,t){for await(const n of r)if(n.path&&(n.path.substring(0,2)==="./"&&(t.wrapWithDirectory=!0),n.path=n.path.split("/").filter(o=>o&&o!==".").join("/")),n.content){let o;typeof t.chunker=="function"?o=t.chunker:t.chunker==="rabin"?o=rabinChunker:o=fixedSizeChunker;let a;typeof t.chunkValidator=="function"?a=t.chunkValidator:a=validateChunks;const s={path:n.path,mtime:n.mtime,mode:n.mode,content:o(a(contentAsAsyncIterable(n.content),t),t)};yield()=>fileBuilder(s,e,t)}else if(n.path){const o={path:n.path,mtime:n.mtime,mode:n.mode};yield()=>dirBuilder(o,e,t)}else throw new Error("Import candidate must have content or path or both")}class Dir{constructor(e,t){this.options=t||{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime,this.cid=void 0,this.size=void 0}async put(e,t){}get(e){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(e){}}class DirFlat extends Dir{constructor(e,t){super(e,t),this._children={}}async put(e,t){this.cid=void 0,this.size=void 0,this._children[e]=t}get(e){return Promise.resolve(this._children[e])}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}async*eachChildSeries(){const e=Object.keys(this._children);for(let t=0;t<e.length;t++){const n=e[t];yield{key:n,child:this._children[n]}}}async*flush(e){const t=Object.keys(this._children),n=[];for(let h=0;h<t.length;h++){let d=this._children[t[h]];if(d instanceof Dir)for await(const m of d.flush(e))d=m,yield d;d.size!=null&&d.cid&&n.push({Name:t[h],Tsize:d.size,Hash:d.cid})}const o=new UnixFS({type:"directory",mtime:this.mtime,mode:this.mode}),a={Data:o.marshal(),Links:n},s=encode$1(prepare(a)),l=await persist(s,e,this.options),f=s.length+a.Links.reduce((h,d)=>h+(d.Tsize==null?0:d.Tsize),0);this.cid=l,this.size=f,yield{cid:l,unixfs:o,path:this.path,size:f}}}const BITS_PER_BYTE=7;var sparseArray=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,t){let n=this._internalPositionFor(e,!1);if(t===void 0)n!==-1&&(this._unsetInternalPos(n),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let o=!1;n===-1?(n=this._data.length,this._setBit(e),this._changedData=!0):o=!0,this._setInternalPos(n,e,t,o),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();const t=this._internalPositionFor(e,!0);if(t!==-1)return this._data[t][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){const e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let t=0;for(;t<this.length;)e(this.get(t),t,this),t++}map(e){let t=0,n=new Array(this.length);for(;t<this.length;)n[t]=e(this.get(t),t,this),t++;return n}reduce(e,t){let n=0,o=t;for(;n<this.length;){const a=this.get(n);o=e(o,a,n),n++}return o}find(e){let t=0,n,o;for(;t<this.length&&!n;)o=this.get(t),n=e(o),t++;return n?o:void 0}_internalPositionFor(e,t){const n=this._bytePosFor(e,t);if(n>=this._bitArrays.length)return-1;const o=this._bitArrays[n],a=e-n*BITS_PER_BYTE;if(!((o&1<<a)>0))return-1;const l=this._bitArrays.slice(0,n).reduce(popCountReduce,0),f=~(4294967295<<a+1),h=popCount(o&f);return l+h-1}_bytePosFor(e,t){const n=Math.floor(e/BITS_PER_BYTE),o=n+1;for(;!t&&this._bitArrays.length<o;)this._bitArrays.push(0);return n}_setBit(e){const t=this._bytePosFor(e,!1);this._bitArrays[t]|=1<<e-t*BITS_PER_BYTE}_unsetBit(e){const t=this._bytePosFor(e,!1);this._bitArrays[t]&=~(1<<e-t*BITS_PER_BYTE)}_setInternalPos(e,t,n,o){const a=this._data,s=[t,n];if(o)this._sortData(),a[e]=s;else{if(a.length)if(a[a.length-1][0]>=t)a.push(s);else if(a[0][0]<=t)a.unshift(s);else{const l=Math.round(a.length/2);this._data=a.slice(0,l).concat(s).concat(a.slice(l))}else this._data.push(s);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(sortInternal),this._changedData=!1}bitField(){const e=[];let t=8,n=0,o=0,a;const s=this._bitArrays.slice();for(;s.length||n;){n===0&&(a=s.shift(),n=7);const f=Math.min(n,t),h=~(255<<f),d=a&h;o|=d<<8-t,a=a>>>f,n-=f,t-=f,(!t||!n&&!s.length)&&(e.push(o),o=0,t=8)}for(var l=e.length-1;l>0&&e[l]===0;l--)e.pop();return e}compactArray(){return this._sortData(),this._data.map(valueOnly)}};function popCountReduce(r,e){return r+popCount(e)}function popCount(r){let e=r;return e=e-(e>>1&1431655765),e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}function sortInternal(r,e){return r[0]-e[0]}function valueOnly(r){return r[1]}const require$$1$1=getAugmentedNamespace(fromString$1),SparseArray=sparseArray,{fromString:uint8ArrayFromString}=require$$1$1;let Bucket$1=class Oe{constructor(e,t,n=0){this._options=e,this._popCount=0,this._parent=t,this._posAtParent=n,this._children=new SparseArray,this.key=null}async put(e,t){const n=await this._findNewBucketAndPos(e);await n.bucket._putAt(n,e,t)}async get(e){const t=await this._findChild(e);if(t)return t.value}async del(e){const t=await this._findPlace(e),n=t.bucket._at(t.pos);n&&n.key===e&&t.bucket._delAt(t.pos)}leafCount(){return this._children.compactArray().reduce((t,n)=>n instanceof Oe?t+n.leafCount():t+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const e=this._children.compactArray();for(const t of e)t instanceof Oe?yield*t.eachLeafSeries():yield t;return[]}serialize(e,t){const n=[];return t(this._children.reduce((o,a,s)=>(a&&(a instanceof Oe?o.push(a.serialize(e,t)):o.push(e(a,s))),o),n))}asyncTransform(e,t){return asyncTransformBucket(this,e,t)}toJSON(){return this.serialize(mapNode,reduceNodes)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){const t=await this._findPlace(e),n=t.bucket._at(t.pos);if(!(n instanceof Oe)&&n&&n.key===e)return n}async _findPlace(e){const t=this._options.hash(typeof e=="string"?uint8ArrayFromString(e):e),n=await t.take(this._options.bits),o=this._children.get(n);return o instanceof Oe?o._findPlace(t):{bucket:this,pos:n,hash:t,existingChild:o}}async _findNewBucketAndPos(e){const t=await this._findPlace(e);if(t.existingChild&&t.existingChild.key!==e){const n=new Oe(this._options,t.bucket,t.pos);t.bucket._putObjectAt(t.pos,n);const o=await n._findPlace(t.existingChild.hash);return o.bucket._putAt(o,t.existingChild.key,t.existingChild.value),n._findNewBucketAndPos(t.hash)}return t}_putAt(e,t,n){this._putObjectAt(e.pos,{key:t,value:n,hash:e.hash})}_putObjectAt(e,t){this._children.get(e)||this._popCount++,this._children.set(e,t)}_delAt(e){if(e===-1)throw new Error("Invalid position");this._children.get(e)&&this._popCount--,this._children.unset(e),this._level()}_level(){if(this._parent&&this._popCount<=1)if(this._popCount===1){const e=this._children.find(exists);if(e&&!(e instanceof Oe)){const t=e.hash;t.untake(this._options.bits);const n={pos:this._posAtParent,hash:t,bucket:this._parent};this._parent._putAt(n,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}};function exists(r){return!!r}function mapNode(r,e){return r.key}function reduceNodes(r){return r}async function asyncTransformBucket(r,e,t){const n=[];for(const o of r._children.compactArray())if(o instanceof Bucket$1)await asyncTransformBucket(o,e,t);else{const a=await e(o);n.push({bitField:r._children.bitField(),children:a})}return t(n)}var bucket=Bucket$1,consumableHash={exports:{}};const START_MASKS=[255,254,252,248,240,224,192,128],STOP_MASKS=[1,3,7,15,31,63,127,255];var consumableBuffer=class{constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let t=e,n=0;for(;t&&this._haveBits();){const o=this._value[this._currentBytePos],a=this._currentBitPos+1,s=Math.min(a,t),l=byteBitsToInt(o,a-s,s);n=(n<<s)+l,t-=s,this._currentBitPos-=s,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function byteBitsToInt(r,e,t){const n=maskFor(e,t);return(r&n)>>>e}function maskFor(r,e){return START_MASKS[r]&STOP_MASKS[Math.min(e+r-1,7)]}function concat(r,e){e||(e=r.reduce((o,a)=>o+a.length,0));const t=allocUnsafe(e);let n=0;for(const o of r)t.set(o,n),n+=o.length;return asUint8Array(t)}const concat$1=Object.freeze(Object.defineProperty({__proto__:null,concat},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(concat$1),ConsumableBuffer=consumableBuffer,{concat:uint8ArrayConcat}=require$$1;function wrapHash$1(r){function e(t){return t instanceof InfiniteHash?t:new InfiniteHash(t,r)}return e}class InfiniteHash{constructor(e,t){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=t,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let t=e;for(;this._availableBits<t;)await this._produceMoreBits();let n=0;for(;t>0;){const o=this._buffers[this._currentBufferIndex],a=Math.min(o.availableBits(),t),s=o.take(a);n=(n<<a)+s,t-=a,this._availableBits-=a,o.availableBits()===0&&this._currentBufferIndex++}return n}untake(e){let t=e;for(;t>0;){const n=this._buffers[this._currentBufferIndex],o=Math.min(n.totalBits()-n.availableBits(),t);n.untake(o),t-=o,this._availableBits+=o,this._currentBufferIndex>0&&n.totalBits()===n.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const e=this._depth?uint8ArrayConcat([this._value,Uint8Array.from([this._depth])]):this._value,t=await this._hashFn(e),n=new ConsumableBuffer(t);this._buffers.push(n),this._availableBits+=n.availableBits()}}consumableHash.exports=wrapHash$1;consumableHash.exports.InfiniteHash=InfiniteHash;var consumableHashExports=consumableHash.exports;const Bucket=bucket,wrapHash=consumableHashExports;function createHAMT(r){if(!r||!r.hashFn)throw new Error("please define an options.hashFn");const e={bits:r.bits||8,hash:wrapHash(r.hashFn)};return new Bucket(e)}var src$1={createHAMT,Bucket};class DirSharded extends Dir{constructor(e,t){super(e,t),this._bucket=src$1.createHAMT({hashFn:t.hamtHashFn,bits:t.hamtBucketBits})}async put(e,t){await this._bucket.put(e,t)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:e,value:t}of this._bucket.eachLeafSeries())yield{key:e,child:t}}async*flush(e){for await(const t of flush(this._bucket,e,this,this.options))yield{...t,path:this.path}}}async function*flush(r,e,t,n){const o=r._children,a=[];let s=0;for(let b=0;b<o.length;b++){const w=o.get(b);if(!w)continue;const y=b.toString(16).toUpperCase().padStart(2,"0");if(w instanceof src$1.Bucket){let E;for await(const T of await flush(w,e,null,n))E=T;if(!E)throw new Error("Could not flush sharded directory, no subshard found");a.push({Name:y,Tsize:E.size,Hash:E.cid}),s+=E.size}else if(typeof w.value.flush=="function"){const E=w.value;let T;for await(const D of E.flush(e))T=D,yield T;const N=y+w.key;a.push({Name:N,Tsize:T.size,Hash:T.cid}),s+=T.size}else{const E=w.value;if(!E.cid)continue;const T=y+w.key,N=E.size;a.push({Name:T,Tsize:N,Hash:E.cid}),s+=N}}const l=Uint8Array.from(o.bitField().reverse()),f=new UnixFS({type:"hamt-sharded-directory",data:l,fanout:r.tableSize(),hashType:n.hamtHashCode,mtime:t&&t.mtime,mode:t&&t.mode}),h={Data:f.marshal(),Links:a},d=encode$1(prepare(h)),m=await persist(d,e,n),_=d.length+s;yield{cid:m,unixfs:f,size:_}}async function flatToShard(r,e,t,n){let o=e;e instanceof DirFlat&&e.directChildrenCount()>=t&&(o=await convertToShard(e,n));const a=o.parent;if(a){if(o!==e){if(r&&(r.parent=o),!o.parentKey)throw new Error("No parent key found");await a.put(o.parentKey,o)}return flatToShard(o,a,t,n)}return o}async function convertToShard(r,e){const t=new DirSharded({root:r.root,dir:!0,parent:r.parent,parentKey:r.parentKey,path:r.path,dirty:r.dirty,flat:!1,mtime:r.mtime,mode:r.mode},e);for await(const{key:n,child:o}of r.eachChildSeries())await t.put(n,o);return t}const toPathComponents=(r="")=>(r.trim().match(/([^\\/]|\\\/)+/g)||[]).filter(Boolean);async function addToTree(r,e,t){const n=toPathComponents(r.path||""),o=n.length-1;let a=e,s="";for(let l=0;l<n.length;l++){const f=n[l];s+=`${s?"/":""}${f}`;const h=l===o;if(a.dirty=!0,a.cid=void 0,a.size=void 0,h)await a.put(f,r),e=await flatToShard(null,a,t.shardSplitThreshold,t);else{let d=await a.get(f);(!d||!(d instanceof Dir))&&(d=new DirFlat({root:!1,dir:!0,parent:a,parentKey:f,path:s,dirty:!0,flat:!0,mtime:d&&d.unixfs&&d.unixfs.mtime,mode:d&&d.unixfs&&d.unixfs.mode},t)),await a.put(f,d),a=d}}return e}async function*flushAndYield(r,e){if(!(r instanceof Dir)){r&&r.unixfs&&r.unixfs.isDirectory()&&(yield r);return}yield*r.flush(e)}async function*treeBuilder(r,e,t){let n=new DirFlat({root:!0,dir:!0,path:"",dirty:!0,flat:!0},t);for await(const o of r)o&&(n=await addToTree(o,n,t),(!o.unixfs||!o.unixfs.isDirectory())&&(yield o));if(t.wrapWithDirectory)yield*flushAndYield(n,e);else for await(const o of n.eachChildSeries())o&&(yield*flushAndYield(o.child,e))}async function*importer(r,e,t={}){const n=defaultOptions$1(t);let o;typeof t.dagBuilder=="function"?o=t.dagBuilder:o=dagBuilder;let a;typeof t.treeBuilder=="function"?a=t.treeBuilder:a=treeBuilder;let s;Symbol.asyncIterator in r||Symbol.iterator in r?s=r:s=[r];for await(const l of a(parallelBatch$1(o(s,e,n),n.fileImportConcurrency),e,n))yield{cid:l.cid,path:l.path,unixfs:l.unixfs,size:l.size}}async function*browserReadableStreamToIt$1(r,e={}){const t=r.getReader();try{for(;;){const n=await t.read();if(n.done)return;yield n.value}}finally{e.preventCancel!==!0&&t.cancel(),t.releaseLock()}}var browserReadablestreamToIt=browserReadableStreamToIt$1;const browserStreamToIt=getDefaultExportFromCjs(browserReadablestreamToIt),browserReadableStreamToIt=browserReadablestreamToIt;function blobToIt(r){return typeof r.stream=="function"?browserReadableStreamToIt(r.stream()):browserReadableStreamToIt(new Response(r).body)}var blobToIt_1=blobToIt;const blobToIt$1=getDefaultExportFromCjs(blobToIt_1);function peekableIterator(r){const[e,t]=r[Symbol.asyncIterator]?[r[Symbol.asyncIterator](),Symbol.asyncIterator]:[r[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>e.next(),push:o=>{n.push(o)},next:()=>n.length?{done:!1,value:n.shift()}:e.next(),[t](){return this}}}var itPeekable=peekableIterator;const itPeekable$1=getDefaultExportFromCjs(itPeekable),map=async function*(r,e){for await(const t of r)yield e(t)};var itMap=map;const map$1=getDefaultExportFromCjs(itMap);function isBytes$1(r){return ArrayBuffer.isView(r)||r instanceof ArrayBuffer}function isBlob$2(r){return r.constructor&&(r.constructor.name==="Blob"||r.constructor.name==="File")&&typeof r.stream=="function"}function isFileObject(r){return typeof r=="object"&&(r.path||r.content)}const isReadableStream=r=>r&&typeof r.getReader=="function";async function*toAsyncIterable(r){yield r}async function normaliseContent(r){if(isBytes$1(r))return toAsyncIterable(toBytes(r));if(typeof r=="string"||r instanceof String)return toAsyncIterable(toBytes(r.toString()));if(isBlob$2(r))return blobToIt$1(r);if(isReadableStream(r)&&(r=browserStreamToIt(r)),Symbol.iterator in r||Symbol.asyncIterator in r){const e=itPeekable$1(r),{value:t,done:n}=await e.peek();if(n)return toAsyncIterable(new Uint8Array(0));if(e.push(t),Number.isInteger(t))return toAsyncIterable(Uint8Array.from(await all$1(e)));if(isBytes$1(t)||typeof t=="string"||t instanceof String)return map$1(e,toBytes)}throw errCode$1(new Error(`Unexpected input: ${r}`),"ERR_UNEXPECTED_INPUT")}function toBytes(r){return r instanceof Uint8Array?r:ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r instanceof ArrayBuffer?new Uint8Array(r):Array.isArray(r)?Uint8Array.from(r):fromString(r.toString())}async function*normaliseCandidateSingle(r,e){if(r==null)throw errCode$1(new Error(`Unexpected input: ${r}`),"ERR_UNEXPECTED_INPUT");if(typeof r=="string"||r instanceof String){yield toFileObject$1(r.toString(),e);return}if(isBytes$1(r)||isBlob$2(r)){yield toFileObject$1(r,e);return}if(isReadableStream(r)&&(r=browserStreamToIt(r)),Symbol.iterator in r||Symbol.asyncIterator in r){const t=itPeekable$1(r),{value:n,done:o}=await t.peek();if(o){yield{content:[]};return}if(t.push(n),Number.isInteger(n)||isBytes$1(n)||typeof n=="string"||n instanceof String){yield toFileObject$1(t,e);return}throw errCode$1(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(isFileObject(r)){yield toFileObject$1(r,e);return}throw errCode$1(new Error('Unexpected input: cannot convert "'+typeof r+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function toFileObject$1(r,e){const{path:t,mode:n,mtime:o,content:a}=r,s={path:t||"",mode:parseMode(n),mtime:parseMtime(o)};return a?s.content=await e(a):t||(s.content=await e(r)),s}function normaliseInput$1(r){return normaliseCandidateSingle(r,normaliseContent)}async function*normaliseCandidateMultiple(r,e){if(typeof r=="string"||r instanceof String||isBytes$1(r)||isBlob$2(r)||r._readableState)throw errCode$1(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(isReadableStream(r)&&(r=browserStreamToIt(r)),Symbol.iterator in r||Symbol.asyncIterator in r){const t=itPeekable$1(r),{value:n,done:o}=await t.peek();if(o){yield*[];return}if(t.push(n),Number.isInteger(n))throw errCode$1(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState){yield*map$1(t,a=>toFileObject({content:a},e));return}if(isBytes$1(n)){yield toFileObject({content:t},e);return}if(isFileObject(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||isReadableStream(n)||isBlob$2(n)){yield*map$1(t,a=>toFileObject(a,e));return}}throw isFileObject(r)?errCode$1(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):errCode$1(new Error("Unexpected input: "+typeof r),"ERR_UNEXPECTED_INPUT")}async function toFileObject(r,e){const{path:t,mode:n,mtime:o,content:a}=r,s={path:t||"",mode:parseMode(n),mtime:parseMtime(o)};return a?s.content=await e(a):t||(s.content=await e(r)),s}function normaliseInput(r){return normaliseCandidateMultiple(r,normaliseContent)}function isBytes(r){return ArrayBuffer.isView(r)||r instanceof ArrayBuffer}function isBlob$1(r){return!!r.constructor&&(r.constructor.name==="Blob"||r.constructor.name==="File")&&typeof r.stream=="function"}function isSingle(r){return typeof r=="string"||r instanceof String||isBytes(r)||isBlob$1(r)||"_readableState"in r}function getNormaliser(r){return isSingle(r)?normaliseInput$1(r):normaliseInput(r)}const drain=async r=>{for await(const e of r);};var itDrain=drain;const drain$1=getDefaultExportFromCjs(itDrain),filter=async function*(r,e){for await(const t of r)await e(t)&&(yield t)};var itFilter=filter;const filter$1=getDefaultExportFromCjs(itFilter),take=async function*(r,e){let t=0;if(!(e<1)){for await(const n of r)if(yield n,t++,t===e)return}};var itTake=take;const take$1=getDefaultExportFromCjs(itTake),sortAll=(r,e)=>async function*(){yield*(await all$1(r)).sort(e)}();class BaseBlockstore{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,n){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(const{key:n,value:o}of e)await this.put(n,o,t),yield{key:n,value:o}}async*getMany(e,t={}){for await(const n of e)yield this.get(n,t)}async*deleteMany(e,t={}){for await(const n of e)await this.delete(n,t),yield n}batch(){let e=[],t=[];return{put(n,o){e.push({key:n,value:o})},delete(n){t.push(n)},commit:async n=>{await drain$1(this.putMany(e,n)),e=[],await drain$1(this.deleteMany(t,n)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let n=this._all(e,t);if(e.prefix!=null&&(n=filter$1(n,o=>o.key.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(n=e.filters.reduce((o,a)=>filter$1(o,a),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((o,a)=>sortAll(o,a),n)),e.offset!=null){let o=0;n=filter$1(n,()=>o++>=(e.offset||0))}return e.limit!=null&&(n=take$1(n,e.limit)),n}queryKeys(e,t){let n=this._allKeys(e,t);if(e.prefix!=null&&(n=filter$1(n,o=>o.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(n=e.filters.reduce((o,a)=>filter$1(o,a),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((o,a)=>sortAll(o,a),n)),e.offset!=null){let o=0;n=filter$1(n,()=>o++>=e.offset)}return e.limit!=null&&(n=take$1(n,e.limit)),n}}class MemoryBlockStore extends BaseBlockstore{constructor(){super(),this.store=new Map}async*blocks(){for(const[e,t]of this.store.entries())yield{cid:CID.parse(e),bytes:t}}put(e,t){return this.store.set(e.toString(),t),Promise.resolve()}get(e){const t=this.store.get(e.toString());if(!t)throw new Error(`block with cid ${e.toString()} no found`);return Promise.resolve(t)}has(e){return Promise.resolve(this.store.has(e.toString()))}close(){return this.store.clear(),Promise.resolve()}}const unixfsImporterOptionsDefault={cidVersion:1,chunker:"fixed",maxChunkSize:262144,hasher:sha256,rawLeaves:!0,wrapWithDirectory:!0,maxChildrenPerNode:174};async function pack({input:r,blockstore:e,hasher:t,maxChunkSize:n,maxChildrenPerNode:o,wrapWithDirectory:a,rawLeaves:s}){if(!r||Array.isArray(r)&&!r.length)throw new Error("missing input file(s)");const l=e||new MemoryBlockStore,f=await last$1(pipe$1(getNormaliser(r),E=>importer(E,l,{...unixfsImporterOptionsDefault,hasher:t||unixfsImporterOptionsDefault.hasher,maxChunkSize:n||unixfsImporterOptionsDefault.maxChunkSize,maxChildrenPerNode:o||unixfsImporterOptionsDefault.maxChildrenPerNode,wrapWithDirectory:a===!1?!1:unixfsImporterOptionsDefault.wrapWithDirectory,rawLeaves:s??unixfsImporterOptionsDefault.rawLeaves})));if(!f||!f.cid)throw new Error("given input could not be parsed correctly");const h=f.cid,{writer:d,out:m}=await CarWriter.create([h]),_=m[Symbol.asyncIterator]();let b;const w=async()=>{for await(const E of l.blocks())await d.put(E);await d.close(),e||await l.close()},y={[Symbol.asyncIterator](){if(b!=null)throw new Error("Multiple iterator not supported");return b=w(),{async next(){const E=await _.next();return E.done&&await b,E}}}};return{root:h,out:y}}var throttledQueue$1={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0});function t(n,o,a){a===void 0&&(a=!1),a&&(o=o/n,n=1);var s=[],l=0,f=0,h,d=function(){var m=l+o,_=Date.now();if(_<m){h!==void 0&&clearTimeout(h),h=setTimeout(d,m-_);return}l=_,f=0;for(var b=0,w=s.splice(0,n);b<w.length;b++){var y=w[b];f++,y()}s.length?h=setTimeout(d,o):h=void 0};return function(m){return new Promise(function(_,b){var w=function(){return Promise.resolve().then(m).then(_).catch(b)},y=Date.now();h===void 0&&y-l>o&&(l=y,f=0),f++<n?w():(s.push(w),h===void 0&&(h=setTimeout(d,l+o-y)))})}}r.exports=t,e.default=t})(throttledQueue$1,throttledQueue$1.exports);var throttledQueueExports=throttledQueue$1.exports;const throttledQueue=getDefaultExportFromCjs(throttledQueueExports),fetch$1=globalThis.fetch,Blob$1=globalThis.Blob,Blockstore=MemoryBlockStore,GATEWAY=new URL("https://nftstorage.link/"),toGatewayURL=(r,e={})=>{const t=e.gateway||GATEWAY;return r=new URL(String(r)),r.protocol==="ipfs:"?new URL(`/ipfs/${r.href.slice(7)}`,t):r};class BlockstoreCarReader{constructor(e,t,n){this._version=e,this._roots=t,this._blockstore=n}get version(){return this._version}get blockstore(){return this._blockstore}async getRoots(){return this._roots}has(e){return this._blockstore.has(e)}async get(e){const t=await this._blockstore.get(e);return{cid:e,bytes:t}}blocks(){return this._blockstore.blocks()}async*cids(){for await(const e of this.blocks())yield e.cid}}class Token{constructor(e,t,n){this.ipnft=e,this.url=t,this.data=n,Object.defineProperties(this,{ipnft:{enumerable:!0,writable:!1},url:{enumerable:!0,writable:!1},data:{enumerable:!1,writable:!1}})}embed(){return Token.embed(this)}static embed({data:e}){return embed(e,{gateway:GATEWAY})}static async encode(e){var h,d;const t=new Blockstore,[n,o]=mapTokenInputBlobs(e),a=JSON.parse(JSON.stringify(o)),s=JSON.parse(JSON.stringify(o));for(const[m,_]of n.entries()){const b=_.name||"blob";let w;parseInt((d=(h=globalThis.process)==null?void 0:h.versions)==null?void 0:d.node)>18?w=new Uint8Array(await _.arrayBuffer()):w=_.stream();const{root:y}=await pack({input:[{path:b,content:w}],blockstore:t,wrapWithDirectory:!0}),E=new URL(`ipfs://${y}/${b}`),T=m.split(".");setIn(a,T,E),setIn(s,T,y)}const{root:l}=await pack({input:[{path:"metadata.json",content:JSON.stringify(a)}],blockstore:t,wrapWithDirectory:!1}),f=await encode$4({value:{...s,"metadata.json":l,type:"nft"},codec:dagCbor,hasher:sha256});return await t.put(f.cid,f.bytes),{cid:f.cid,token:new Token(f.cid.toString(),`ipfs://${f.cid}/metadata.json`,a),car:new BlockstoreCarReader(1,[f.cid],t)}}}const embed=(r,e)=>mapWith(r,isURL,embedURL,e),isURL=r=>r instanceof URL,embedURL=(r,e)=>[r,toGatewayURL(e,r)],isObject=r=>typeof r=="object"&&r!=null,encodeBlob=(r,e,t)=>(r.set(t.join("."),e),[r,void 0]),isBlob=r=>r instanceof Blob$1,mapTokenInputBlobs=r=>mapValueWith(r,isBlob,encodeBlob,new Map,[]),mapWith=(r,e,t,n)=>{const[,o]=mapValueWith(r,e,t,n,[]);return o},mapValueWith=(r,e,t,n,o)=>e(r,n,o)?t(n,r,o):Array.isArray(r)?mapArrayWith(r,e,t,n,o):isObject(r)?mapObjectWith(r,e,t,n,o):[n,r],mapObjectWith=(r,e,t,n,o)=>{let a=n;const s={};for(const[l,f]of Object.entries(r)){const[h,d]=mapValueWith(f,e,t,a,[...o,l]);s[l]=d,a=h}return[a,s]},mapArrayWith=(r,e,t,n,o)=>{const a=[];let s=n;for(const[l,f]of r.entries()){const[h,d]=mapValueWith(f,e,t,s,[...o,l]);a[l]=d,s=h}return[s,a]},setIn=(r,e,t)=>{const n=e.length-1;let o=r;for(let[a,s]of e.entries())a===n?o[s]=t:o=o[s]},MAX_STORE_RETRIES=5,MAX_CONCURRENT_UPLOADS=3,MAX_CHUNK_SIZE=1024*1024*50,RATE_LIMIT_REQUESTS=30,RATE_LIMIT_PERIOD=10*1e3;function createRateLimiter(){const r=throttledQueue(RATE_LIMIT_REQUESTS,RATE_LIMIT_PERIOD);return()=>r(()=>{})}const globalRateLimiter=createRateLimiter();class NFTStorage{constructor({token:e,did:t,endpoint:n=new URL("https://api.nft.storage"),rateLimiter:o}){this.token=e,this.endpoint=n,this.rateLimiter=o||createRateLimiter(),this.did=t}static auth({token:e,did:t}){if(!e)throw new Error("missing token");return{Authorization:`Bearer ${e}`,"X-Client":"nft.storage/js",...t?{"x-agent-did":t}:{}}}static async storeBlob(e,t,n){const o=new Blockstore;let a;try{const{cid:s,car:l}=await NFTStorage.encodeBlob(t,{blockstore:o});await NFTStorage.storeCar(e,l,n),a=s.toString()}finally{await o.close()}return a}static async storeCar({endpoint:e,rateLimiter:t=globalRateLimiter,...n},o,{onStoredChunk:a,maxRetries:s,maxChunkSize:l,decoders:f,signal:h}={}){const d=new URL("upload/",e),m={...NFTStorage.auth(n),"Content-Type":"application/car"},_=l||MAX_CHUNK_SIZE,b=o instanceof Blob$1?await TreewalkCarSplitter.fromBlob(o,_,{decoders:f}):new TreewalkCarSplitter(o,_,{decoders:f}),w=transform$1(MAX_CONCURRENT_UPLOADS,async function(E){var A,S;const T=[];for await(const I of E)T.push(I);const N=new Blob$1(T,{type:"application/car"});let D=N;parseInt((S=(A=globalThis.process)==null?void 0:A.versions)==null?void 0:S.node)>18&&(D=await D.arrayBuffer());const C=await pRetry$1(async()=>{await t();let I;try{I=await fetch$1(d.toString(),{method:"POST",headers:m,body:D,signal:h})}catch(x){throw h&&h.aborted?new AbortError_1(x):x}if(I.status===429)throw new Error("rate limited");const L=await I.json();if(!L.ok)throw I.status===401?new AbortError_1(L.error.message):new Error(L.error.message);return L.value.cid},{retries:s??MAX_STORE_RETRIES});return a&&a(N.size),C});let y;for await(const E of w(b.cars()))y=E;return y}static async storeDirectory(e,t,n){const o=new Blockstore;let a;try{const{cid:s,car:l}=await NFTStorage.encodeDirectory(t,{blockstore:o});await NFTStorage.storeCar(e,l,n),a=s.toString()}finally{await o.close()}return a}static async store(e,t,n){const{token:o,car:a}=await NFTStorage.encodeNFT(t);return await NFTStorage.storeCar(e,a,n),o}static async status({endpoint:e,rateLimiter:t=globalRateLimiter,...n},o,a){const s=new URL(`${o}/`,e);await t();const l=await fetch$1(s.toString(),{method:"GET",headers:NFTStorage.auth(n),signal:a&&a.signal});if(l.status===429)throw new Error("rate limited");const f=await l.json();if(f.ok)return{cid:f.value.cid,deals:decodeDeals(f.value.deals),size:f.value.size,pin:decodePin(f.value.pin),created:new Date(f.value.created)};throw new Error(f.error.message)}static async check({endpoint:e,rateLimiter:t=globalRateLimiter},n,o){const a=new URL(`check/${n}/`,e);await t();const s=await fetch$1(a.toString(),{signal:o&&o.signal});if(s.status===429)throw new Error("rate limited");const l=await s.json();if(l.ok)return{cid:l.value.cid,deals:decodeDeals(l.value.deals),pin:l.value.pin};throw new Error(l.error.message)}static async delete({endpoint:e,rateLimiter:t=globalRateLimiter,...n},o,a){const s=new URL(`${o}/`,e);await t();const l=await fetch$1(s.toString(),{method:"DELETE",headers:NFTStorage.auth(n),signal:a&&a.signal});if(l.status===429)throw new Error("rate limited");const f=await l.json();if(!f.ok)throw new Error(f.error.message)}static async encodeNFT(e){return validateERC1155(e),Token.encode(e)}static async encodeBlob(e,{blockstore:t}={}){if(e.size===0)throw new Error("Content size is 0, make sure to provide some content");return packCar([toImportCandidate("blob",e)],{blockstore:t,wrapWithDirectory:!1})}static async encodeDirectory(e,{blockstore:t}={}){let n=0;const o=pipe$1(e,async function*(s){for await(const l of s)yield toImportCandidate(l.name,l),n+=l.size}),a=await packCar(o,{blockstore:t,wrapWithDirectory:!0});if(n===0)throw new Error("Total size of files should exceed 0, make sure to provide some content");return a}storeBlob(e,t){return NFTStorage.storeBlob(this,e,t)}storeCar(e,t){return NFTStorage.storeCar(this,e,t)}storeDirectory(e,t){return NFTStorage.storeDirectory(this,e,t)}status(e,t){return NFTStorage.status(this,e,t)}delete(e,t){return NFTStorage.delete(this,e,t)}check(e,t){return NFTStorage.check(this,e,t)}store(e,t){return NFTStorage.store(this,e,t)}}const validateERC1155=({name:r,description:e,image:t,decimals:n})=>{if(typeof r!="string")throw new TypeError("string property `name` identifying the asset is required");if(typeof e!="string")throw new TypeError("string property `description` describing asset is required");if(t instanceof Blob$1)t.type.startsWith("image/")||console.warn(`According to ERC721 Metadata JSON Schema 'image' must have 'image/*' mime type.

For better interoperability we would highly recommend storing content with different mime type under 'properties' namespace e.g. \`properties: { video: file }\` and using 'image' field for storing a preview image for it instead.

For more context please see ERC-721 specification https://eips.ethereum.org/EIPS/eip-721`);else throw new TypeError("property `image` must be a Blob or File object");if(typeof n<"u"&&typeof n!="number")throw new TypeError("property `decimals` must be an integer value")},packCar=async(r,{blockstore:e,wrapWithDirectory:t}={})=>{e=e||new Blockstore;const{root:n}=await pack({input:r,blockstore:e,wrapWithDirectory:t}),o=new BlockstoreCarReader(1,[n],e);return{cid:n,car:o}},decodeDeals=r=>r.map(e=>{const{dealActivation:t,dealExpiration:n,lastChanged:o}={dealExpiration:null,dealActivation:null,...e};return{...e,lastChanged:new Date(o),...t&&{dealActivation:new Date(t)},...n&&{dealExpiration:new Date(n)}}}),decodePin=r=>({...r,created:new Date(r.created)});function toImportCandidate(r,e){let t;return{path:r,get content(){return t=t||e.stream(),t}}}const client=new NFTStorage({token:PUBLIC_NFT_STORAGE_API_KEY}),storeMetaData=async r=>{try{const e=JSON.stringify(r),t=new Blob([e],{type:"application/json"});return[await client.storeBlob(t),null]}catch(e){return console.error(e),[null,e]}},createReview=async r=>{try{let e="";jwtToken.subscribe(a=>e=a);const t={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(r)};return await(await fetch(`${PUBLIC_GATEWAY_URL}/delegateReviewCreation`,t)).json()}catch(e){return console.error(e),[null,e]}};function create_else_block$1(r){let e,t,n;return{c(){e=element("a"),t=element("h1"),n=text("Get Authenticated"),this.h()},l(o){e=claim_element(o,"A",{href:!0,class:!0});var a=children(e);t=claim_element(a,"H1",{});var s=children(t);n=claim_text(s,"Get Authenticated"),s.forEach(detach),a.forEach(detach),this.h()},h(){attr(e,"href","/Onboarding"),attr(e,"class","btn")},m(o,a){insert_hydration(o,e,a),append_hydration(e,t),append_hydration(t,n)},p:noop$2,d(o){o&&detach(e)}}}function create_if_block$2(r){let e,t,n,o,a,s,l,f,h,d,m,_,b,w,y,E,T,N,D,C,A,S,I,L,x,R,M,K,Y,ee,F,He,fe,Ve,he,We,G,q,Ue,$e,Z,Ne,le,de,_e,te,Me,ce,pe,ye,ne,je,ae,Ge,ze,W,re,ie,se,qe,Q,Ye,p,c,u,g,v,k,B,U,j,V,z,H,be,et,Ke,we,tt,Ze,X,me,rt,ve,nt,Ee,it,De,ot,Te,at,Ae,st,Xe,xe,lt,Je,J,ge,ct,ke,ut,Se,ft,Ce,ht,Be,dt,Ie,pt,Qe,Le,Re,yt,mt,gt;return{c(){e=element("h3"),t=text("Write Your Reviews Here"),n=space(),o=element("label"),a=text("URL"),s=space(),l=element("input"),f=space(),h=element("label"),d=text("CATEGORY"),m=space(),_=element("select"),b=element("option"),w=text("Pick a category"),y=element("option"),E=text("Tooling"),T=element("option"),N=text("Infra"),D=element("option"),C=text("Bridges"),A=element("option"),S=text("Launchpads"),I=element("option"),L=text("Social"),x=element("option"),R=text("Marketplaces"),M=element("option"),K=text("Wallets"),Y=element("option"),ee=text("Stablecoins"),F=element("option"),He=text("NFT Tooling"),fe=element("option"),Ve=text("Gaming"),he=element("option"),We=text("DeFi"),G=space(),q=element("label"),Ue=text("RATING"),$e=space(),Z=element("input"),Ne=space(),le=element("label"),de=text("TITLE"),_e=space(),te=element("input"),Me=space(),ce=element("label"),pe=text("DESCRIPTION"),ye=space(),ne=element("textarea"),je=space(),ae=element("label"),Ge=text("SITE TYPE"),ze=space(),W=element("select"),re=element("option"),ie=text("Pick a site type"),se=element("option"),qe=text("Blog"),Q=element("option"),Ye=text("Common Website"),p=element("option"),c=text("Company Portfolio"),u=element("option"),g=text("DeFi Project"),v=element("option"),k=text("E-commerce"),B=element("option"),U=text("Personal Portfolio"),j=element("option"),V=text("Social Media"),z=element("option"),H=text("Software as a Service"),be=element("option"),et=text("Web3 Wallet"),Ke=space(),we=element("label"),tt=text("SITE TAG"),Ze=space(),X=element("select"),me=element("option"),rt=text("Pick a site tag"),ve=element("option"),nt=text("Scam"),Ee=element("option"),it=text("Fake"),De=element("option"),ot=text("Stereotype"),Te=element("option"),at=text("Hate"),Ae=element("option"),st=text("Genuine"),Xe=space(),xe=element("label"),lt=text("SITE SAFETY"),Je=space(),J=element("select"),ge=element("option"),ct=text("Pick a site safety"),ke=element("option"),ut=text("Safe"),Se=element("option"),ft=text("Phishing"),Ce=element("option"),ht=text("Adware"),Be=element("option"),dt=text("Malware"),Ie=element("option"),pt=text("Spyware"),Qe=space(),Le=element("div"),Re=element("button"),yt=text("Submit"),this.h()},l(O){e=claim_element(O,"H3",{class:!0});var P=children(e);t=claim_text(P,"Write Your Reviews Here"),P.forEach(detach),n=claim_space(O),o=claim_element(O,"LABEL",{for:!0,class:!0});var _t=children(o);a=claim_text(_t,"URL"),_t.forEach(detach),s=claim_space(O),l=claim_element(O,"INPUT",{id:!0,type:!0,class:!0}),f=claim_space(O),h=claim_element(O,"LABEL",{for:!0,class:!0});var bt=children(h);d=claim_text(bt,"CATEGORY"),bt.forEach(detach),m=claim_space(O),_=claim_element(O,"SELECT",{id:!0,class:!0});var oe=children(_);b=claim_element(oe,"OPTION",{});var wt=children(b);w=claim_text(wt,"Pick a category"),wt.forEach(detach),y=claim_element(oe,"OPTION",{});var vt=children(y);E=claim_text(vt,"Tooling"),vt.forEach(detach),T=claim_element(oe,"OPTION",{});var Et=children(T);N=claim_text(Et,"Infra"),Et.forEach(detach),D=claim_element(oe,"OPTION",{});var Dt=children(D);C=claim_text(Dt,"Bridges"),Dt.forEach(detach),A=claim_element(oe,"OPTION",{});var Tt=children(A);S=claim_text(Tt,"Launchpads"),Tt.forEach(detach),I=claim_element(oe,"OPTION",{});var At=children(I);L=claim_text(At,"Social"),At.forEach(detach),x=claim_element(oe,"OPTION",{});var xt=children(x);R=claim_text(xt,"Marketplaces"),xt.forEach(detach),M=claim_element(oe,"OPTION",{});var kt=children(M);K=claim_text(kt,"Wallets"),kt.forEach(detach),Y=claim_element(oe,"OPTION",{});var St=children(Y);ee=claim_text(St,"Stablecoins"),St.forEach(detach),F=claim_element(oe,"OPTION",{});var Ct=children(F);He=claim_text(Ct,"NFT Tooling"),Ct.forEach(detach),fe=claim_element(oe,"OPTION",{});var Bt=children(fe);Ve=claim_text(Bt,"Gaming"),Bt.forEach(detach),he=claim_element(oe,"OPTION",{});var It=children(he);We=claim_text(It,"DeFi"),It.forEach(detach),oe.forEach(detach),G=claim_space(O),q=claim_element(O,"LABEL",{for:!0,class:!0});var Ot=children(q);Ue=claim_text(Ot,"RATING"),Ot.forEach(detach),$e=claim_space(O),Z=claim_element(O,"INPUT",{id:!0,type:!0,min:!0,max:!0,placeholder:!0,class:!0}),Ne=claim_space(O),le=claim_element(O,"LABEL",{for:!0,class:!0});var $t=children(le);de=claim_text($t,"TITLE"),$t.forEach(detach),_e=claim_space(O),te=claim_element(O,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),Me=claim_space(O),ce=claim_element(O,"LABEL",{for:!0,class:!0});var Nt=children(ce);pe=claim_text(Nt,"DESCRIPTION"),Nt.forEach(detach),ye=claim_space(O),ne=claim_element(O,"TEXTAREA",{id:!0,placeholder:!0,class:!0}),children(ne).forEach(detach),je=claim_space(O),ae=claim_element(O,"LABEL",{for:!0,class:!0});var Lt=children(ae);Ge=claim_text(Lt,"SITE TYPE"),Lt.forEach(detach),ze=claim_space(O),W=claim_element(O,"SELECT",{id:!0,class:!0});var ue=children(W);re=claim_element(ue,"OPTION",{});var Rt=children(re);ie=claim_text(Rt,"Pick a site type"),Rt.forEach(detach),se=claim_element(ue,"OPTION",{});var Pt=children(se);qe=claim_text(Pt,"Blog"),Pt.forEach(detach),Q=claim_element(ue,"OPTION",{});var Ft=children(Q);Ye=claim_text(Ft,"Common Website"),Ft.forEach(detach),p=claim_element(ue,"OPTION",{});var Ut=children(p);c=claim_text(Ut,"Company Portfolio"),Ut.forEach(detach),u=claim_element(ue,"OPTION",{});var Mt=children(u);g=claim_text(Mt,"DeFi Project"),Mt.forEach(detach),v=claim_element(ue,"OPTION",{});var jt=children(v);k=claim_text(jt,"E-commerce"),jt.forEach(detach),B=claim_element(ue,"OPTION",{});var zt=children(B);U=claim_text(zt,"Personal Portfolio"),zt.forEach(detach),j=claim_element(ue,"OPTION",{});var Ht=children(j);V=claim_text(Ht,"Social Media"),Ht.forEach(detach),z=claim_element(ue,"OPTION",{});var Vt=children(z);H=claim_text(Vt,"Software as a Service"),Vt.forEach(detach),be=claim_element(ue,"OPTION",{});var Wt=children(be);et=claim_text(Wt,"Web3 Wallet"),Wt.forEach(detach),ue.forEach(detach),Ke=claim_space(O),we=claim_element(O,"LABEL",{for:!0,class:!0});var Gt=children(we);tt=claim_text(Gt,"SITE TAG"),Gt.forEach(detach),Ze=claim_space(O),X=claim_element(O,"SELECT",{id:!0,class:!0});var Pe=children(X);me=claim_element(Pe,"OPTION",{});var qt=children(me);rt=claim_text(qt,"Pick a site tag"),qt.forEach(detach),ve=claim_element(Pe,"OPTION",{});var Yt=children(ve);nt=claim_text(Yt,"Scam"),Yt.forEach(detach),Ee=claim_element(Pe,"OPTION",{});var Kt=children(Ee);it=claim_text(Kt,"Fake"),Kt.forEach(detach),De=claim_element(Pe,"OPTION",{});var Zt=children(De);ot=claim_text(Zt,"Stereotype"),Zt.forEach(detach),Te=claim_element(Pe,"OPTION",{});var Xt=children(Te);at=claim_text(Xt,"Hate"),Xt.forEach(detach),Ae=claim_element(Pe,"OPTION",{});var Jt=children(Ae);st=claim_text(Jt,"Genuine"),Jt.forEach(detach),Pe.forEach(detach),Xe=claim_space(O),xe=claim_element(O,"LABEL",{for:!0,class:!0});var Qt=children(xe);lt=claim_text(Qt,"SITE SAFETY"),Qt.forEach(detach),Je=claim_space(O),J=claim_element(O,"SELECT",{id:!0,class:!0});var Fe=children(J);ge=claim_element(Fe,"OPTION",{});var er=children(ge);ct=claim_text(er,"Pick a site safety"),er.forEach(detach),ke=claim_element(Fe,"OPTION",{});var tr=children(ke);ut=claim_text(tr,"Safe"),tr.forEach(detach),Se=claim_element(Fe,"OPTION",{});var rr=children(Se);ft=claim_text(rr,"Phishing"),rr.forEach(detach),Ce=claim_element(Fe,"OPTION",{});var nr=children(Ce);ht=claim_text(nr,"Adware"),nr.forEach(detach),Be=claim_element(Fe,"OPTION",{});var ir=children(Be);dt=claim_text(ir,"Malware"),ir.forEach(detach),Ie=claim_element(Fe,"OPTION",{});var ar=children(Ie);pt=claim_text(ar,"Spyware"),ar.forEach(detach),Fe.forEach(detach),Qe=claim_space(O),Le=claim_element(O,"DIV",{class:!0});var sr=children(Le);Re=claim_element(sr,"BUTTON",{class:!0});var lr=children(Re);yt=claim_text(lr,"Submit"),lr.forEach(detach),sr.forEach(detach),this.h()},h(){attr(e,"class","font-bold text-2xl mt-5"),attr(o,"for","websiteUrl"),attr(o,"class","text-md mt-5 mb-3 block"),attr(l,"id","websiteUrl"),attr(l,"type","text"),l.value=r[3],attr(l,"class","input input-bordered input-success dark:bg-gray-900 dark:text-white dark:border-zinc-600 input-md w-full max-w-xs"),l.disabled=!0,attr(h,"for","category"),attr(h,"class","text-md mt-3 mb-3 block"),b.disabled=!0,b.selected=!0,b.__value="Pick a category",b.value=b.__value,y.__value="tooling",y.value=y.__value,T.__value="infra",T.value=T.__value,D.__value="bridges",D.value=D.__value,A.__value="launchpads",A.value=A.__value,I.__value="social",I.value=I.__value,x.__value="marketplaces",x.value=x.__value,M.__value="wallets",M.value=M.__value,Y.__value="stablecoins",Y.value=Y.__value,F.__value="nft tooling",F.value=F.__value,fe.__value="gaming",fe.value=fe.__value,he.__value="defi",he.value=he.__value,attr(_,"id","siteTag"),attr(_,"class","select select-success w-full max-w-xs dark:bg-gray-900 dark:text-white dark:border-zinc-600"),_.required=!0,r[4]===void 0&&add_render_callback(()=>r[14].call(_)),attr(q,"for","rating"),attr(q,"class","text-md mt-3 mb-3 block"),attr(Z,"id","rating"),attr(Z,"type","number"),attr(Z,"min",0),attr(Z,"max",10),attr(Z,"placeholder","rating"),attr(Z,"class","textarea textarea-success dark:bg-gray-900 dark:text-white dark:border-zinc-600 input-md w-full max-w-xs"),Z.required=!0,attr(le,"for","title"),attr(le,"class","text-md mt-5 mb-3 block"),attr(te,"id","title"),attr(te,"type","text"),attr(te,"placeholder","TITLE"),attr(te,"class","input input-bordered input-success dark:bg-gray-900 dark:text-white dark:border-zinc-600 input-md w-full max-w-xs"),te.required=!0,attr(ce,"for","description"),attr(ce,"class","text-md mt-3 mb-3 block"),attr(ne,"id","description"),attr(ne,"placeholder","DESCRIPTION"),attr(ne,"class","textarea textarea-success dark:bg-gray-900 dark:text-white dark:border-zinc-600 input-md w-full max-w-xs"),ne.required=!0,attr(ae,"for","siteType"),attr(ae,"class","text-md mt-3 mb-3 block"),re.disabled=!0,re.selected=!0,re.__value="Pick a site type",re.value=re.__value,se.__value="blog",se.value=se.__value,Q.__value="common website",Q.value=Q.__value,p.__value="company portfolio",p.value=p.__value,u.__value="defi project",u.value=u.__value,v.__value="ecommerce",v.value=v.__value,B.__value="personal portfolio",B.value=B.__value,j.__value="social media",j.value=j.__value,z.__value="software as a Service",z.value=z.__value,be.__value="web3 wallet",be.value=be.__value,attr(W,"id","siteType"),attr(W,"class","select select-success w-full max-w-xs dark:bg-gray-900 dark:text-white dark:border-zinc-600"),W.required=!0,r[7]===void 0&&add_render_callback(()=>r[18].call(W)),attr(we,"for","siteTag"),attr(we,"class","text-md mt-3 mb-3 block"),me.disabled=!0,me.selected=!0,me.__value="Pick a site tag",me.value=me.__value,ve.__value="scam",ve.value=ve.__value,Ee.__value="fake",Ee.value=Ee.__value,De.__value="stereotype",De.value=De.__value,Te.__value="hate",Te.value=Te.__value,Ae.__value="genuine",Ae.value=Ae.__value,attr(X,"id","siteTag"),attr(X,"class","select select-success w-full max-w-xs dark:bg-gray-900 dark:text-white dark:border-zinc-600"),X.required=!0,r[5]===void 0&&add_render_callback(()=>r[19].call(X)),attr(xe,"for","siteSafety"),attr(xe,"class","text-md mt-3 mb-3 block"),ge.disabled=!0,ge.selected=!0,ge.__value="Pick a site safety",ge.value=ge.__value,ke.__value="safe",ke.value=ke.__value,Se.__value="phishing",Se.value=Se.__value,Ce.__value="adware",Ce.value=Ce.__value,Be.__value="malware",Be.value=Be.__value,Ie.__value="spyware",Ie.value=Ie.__value,attr(J,"id","siteSafety"),attr(J,"class","select select-success w-full max-w-xs dark:bg-gray-900 dark:text-white dark:border-zinc-600"),J.required=!0,r[6]===void 0&&add_render_callback(()=>r[20].call(J)),attr(Re,"class","btn"),attr(Le,"class","modal-action")},m(O,P){insert_hydration(O,e,P),append_hydration(e,t),insert_hydration(O,n,P),insert_hydration(O,o,P),append_hydration(o,a),insert_hydration(O,s,P),insert_hydration(O,l,P),insert_hydration(O,f,P),insert_hydration(O,h,P),append_hydration(h,d),insert_hydration(O,m,P),insert_hydration(O,_,P),append_hydration(_,b),append_hydration(b,w),append_hydration(_,y),append_hydration(y,E),append_hydration(_,T),append_hydration(T,N),append_hydration(_,D),append_hydration(D,C),append_hydration(_,A),append_hydration(A,S),append_hydration(_,I),append_hydration(I,L),append_hydration(_,x),append_hydration(x,R),append_hydration(_,M),append_hydration(M,K),append_hydration(_,Y),append_hydration(Y,ee),append_hydration(_,F),append_hydration(F,He),append_hydration(_,fe),append_hydration(fe,Ve),append_hydration(_,he),append_hydration(he,We),select_option(_,r[4],!0),insert_hydration(O,G,P),insert_hydration(O,q,P),append_hydration(q,Ue),insert_hydration(O,$e,P),insert_hydration(O,Z,P),set_input_value(Z,r[10]),insert_hydration(O,Ne,P),insert_hydration(O,le,P),append_hydration(le,de),insert_hydration(O,_e,P),insert_hydration(O,te,P),set_input_value(te,r[1]),insert_hydration(O,Me,P),insert_hydration(O,ce,P),append_hydration(ce,pe),insert_hydration(O,ye,P),insert_hydration(O,ne,P),set_input_value(ne,r[2]),insert_hydration(O,je,P),insert_hydration(O,ae,P),append_hydration(ae,Ge),insert_hydration(O,ze,P),insert_hydration(O,W,P),append_hydration(W,re),append_hydration(re,ie),append_hydration(W,se),append_hydration(se,qe),append_hydration(W,Q),append_hydration(Q,Ye),append_hydration(W,p),append_hydration(p,c),append_hydration(W,u),append_hydration(u,g),append_hydration(W,v),append_hydration(v,k),append_hydration(W,B),append_hydration(B,U),append_hydration(W,j),append_hydration(j,V),append_hydration(W,z),append_hydration(z,H),append_hydration(W,be),append_hydration(be,et),select_option(W,r[7],!0),insert_hydration(O,Ke,P),insert_hydration(O,we,P),append_hydration(we,tt),insert_hydration(O,Ze,P),insert_hydration(O,X,P),append_hydration(X,me),append_hydration(me,rt),append_hydration(X,ve),append_hydration(ve,nt),append_hydration(X,Ee),append_hydration(Ee,it),append_hydration(X,De),append_hydration(De,ot),append_hydration(X,Te),append_hydration(Te,at),append_hydration(X,Ae),append_hydration(Ae,st),select_option(X,r[5],!0),insert_hydration(O,Xe,P),insert_hydration(O,xe,P),append_hydration(xe,lt),insert_hydration(O,Je,P),insert_hydration(O,J,P),append_hydration(J,ge),append_hydration(ge,ct),append_hydration(J,ke),append_hydration(ke,ut),append_hydration(J,Se),append_hydration(Se,ft),append_hydration(J,Ce),append_hydration(Ce,ht),append_hydration(J,Be),append_hydration(Be,dt),append_hydration(J,Ie),append_hydration(Ie,pt),select_option(J,r[6],!0),insert_hydration(O,Qe,P),insert_hydration(O,Le,P),append_hydration(Le,Re),append_hydration(Re,yt),mt||(gt=[listen(_,"change",r[14]),listen(Z,"input",r[15]),listen(te,"input",r[16]),listen(ne,"input",r[17]),listen(W,"change",r[18]),listen(X,"change",r[19]),listen(J,"change",r[20]),listen(Re,"click",r[11])],mt=!0)},p(O,P){P&8&&l.value!==O[3]&&(l.value=O[3]),P&16&&select_option(_,O[4]),P&1024&&to_number(Z.value)!==O[10]&&set_input_value(Z,O[10]),P&2&&te.value!==O[1]&&set_input_value(te,O[1]),P&4&&set_input_value(ne,O[2]),P&128&&select_option(W,O[7]),P&32&&select_option(X,O[5]),P&64&&select_option(J,O[6])},d(O){O&&detach(e),O&&detach(n),O&&detach(o),O&&detach(s),O&&detach(l),O&&detach(f),O&&detach(h),O&&detach(m),O&&detach(_),O&&detach(G),O&&detach(q),O&&detach($e),O&&detach(Z),O&&detach(Ne),O&&detach(le),O&&detach(_e),O&&detach(te),O&&detach(Me),O&&detach(ce),O&&detach(ye),O&&detach(ne),O&&detach(je),O&&detach(ae),O&&detach(ze),O&&detach(W),O&&detach(Ke),O&&detach(we),O&&detach(Ze),O&&detach(X),O&&detach(Xe),O&&detach(xe),O&&detach(Je),O&&detach(J),O&&detach(Qe),O&&detach(Le),mt=!1,run_all(gt)}}}function create_fragment$3(r){let e,t,n,o,a,s,l,f,h,d,m,_,b,w,y;function E(D,C){return D[8]?create_if_block$2:create_else_block$1}let T=E(r),N=T(r);return _=new Loader({}),{c(){e=element("div"),t=element("button"),n=text("Submit Review"),o=space(),a=element("div"),s=element("div"),l=element("button"),f=text("✕"),h=space(),N.c(),d=space(),m=element("div"),create_component(_.$$.fragment),this.h()},l(D){e=claim_element(D,"DIV",{class:!0});var C=children(e);t=claim_element(C,"BUTTON",{class:!0});var A=children(t);n=claim_text(A,"Submit Review"),A.forEach(detach),o=claim_space(C),a=claim_element(C,"DIV",{class:!0});var S=children(a);s=claim_element(S,"DIV",{class:!0});var I=children(s);l=claim_element(I,"BUTTON",{class:!0});var L=children(l);f=claim_text(L,"✕"),L.forEach(detach),h=claim_space(I),N.l(I),I.forEach(detach),d=claim_space(S),m=claim_element(S,"DIV",{class:!0});var x=children(m);claim_component(_.$$.fragment,x),x.forEach(detach),S.forEach(detach),C.forEach(detach),this.h()},h(){attr(t,"class","btn"),attr(l,"class","btn btn-sm btn-circle absolute right-2 top-2"),attr(s,"class","modal-box relative bg-white text-black dark:bg-gray-900 dark:text-white"),attr(m,"class","modal h-screen z-10 absolute top-0 flex justify-center items-center"),toggle_class(m,"modal-open",r[9]),attr(a,"class","modal"),toggle_class(a,"modal-open",r[0]),attr(e,"class","grid flex-grow")},m(D,C){insert_hydration(D,e,C),append_hydration(e,t),append_hydration(t,n),append_hydration(e,o),append_hydration(e,a),append_hydration(a,s),append_hydration(s,l),append_hydration(l,f),append_hydration(s,h),N.m(s,null),append_hydration(a,d),append_hydration(a,m),mount_component(_,m,null),b=!0,w||(y=[listen(t,"click",r[12]),listen(l,"click",r[13])],w=!0)},p(D,[C]){T===(T=E(D))&&N?N.p(D,C):(N.d(1),N=T(D),N&&(N.c(),N.m(s,null))),(!b||C&512)&&toggle_class(m,"modal-open",D[9]),(!b||C&1)&&toggle_class(a,"modal-open",D[0])},i(D){b||(transition_in(_.$$.fragment,D),b=!0)},o(D){transition_out(_.$$.fragment,D),b=!1},d(D){D&&detach(e),N.d(),destroy_component(_),w=!1,run_all(y)}}}let image="ipfs://bafybeica7pi67452fokrlrmxrooazsxbuluckmcojascc5z4fcazsuhsuy";function instance$3(r,e,t){let n=!1,o,a,s,l,f,h,d,m=!1,_=!1,b=0;const w=async()=>{var R;const[x]=await chrome.tabs.query({active:!0,currentWindow:!0});t(3,s=(R=x.url)==null?void 0:R.toLocaleLowerCase())},y=async()=>{t(9,_=!0);const x=new URL(`${s}`).hostname;let K=`ipfs://${await storeMetaData({name:o??"",description:a??"",category:l??"",image,domainAddress:x??"",siteUrl:s??"",siteType:d??"",siteTag:f??"",siteSafety:h??"",siteRating:b??""})}`.split(",")[0];try{await createReview({category:l??"",domainAddress:x??"",siteUrl:s??"",siteType:d??"",siteTag:f??"",siteSafety:h??"",metaDataUri:K,siteIpfsHash:"ipfs://abcd"})}catch(Y){console.log("error: "+Y)}finally{t(9,_=!1),t(0,n=!1),location.reload()}};onMount(async()=>{t(8,[m]=await checkAuth(),m),await w()});const E=()=>{t(0,n=!0)},T=()=>t(0,n=!1);function N(){l=select_value(this),t(4,l)}function D(){b=to_number(this.value),t(10,b)}function C(){o=this.value,t(1,o)}function A(){a=this.value,t(2,a)}function S(){d=select_value(this),t(7,d)}function I(){f=select_value(this),t(5,f)}function L(){h=select_value(this),t(6,h)}return[n,o,a,s,l,f,h,d,m,_,b,y,E,T,N,D,C,A,S,I,L]}class SubmitReview extends SvelteComponent{constructor(e){super(),init(this,e,instance$3,create_fragment$3,safe_not_equal,{})}}function styleInject(r,e){e===void 0&&(e={});var t=e.insertAt;if(r&&typeof document<"u"){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",t==="top"&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=r:o.appendChild(document.createTextNode(r))}}function $(r,e){return typeof r=="string"?(e||document).querySelector(r):r||null}function getOffset(r){var e=r.getBoundingClientRect();return{top:e.top+(document.documentElement.scrollTop||document.body.scrollTop),left:e.left+(document.documentElement.scrollLeft||document.body.scrollLeft)}}function isHidden(r){return r.offsetParent===null}function isElementInViewport(r){var e=r.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function getElementContentWidth(r){var e=window.getComputedStyle(r),t=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight);return r.clientWidth-t}function fire(r,e,t){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0);for(var o in t)n[o]=t[o];return r.dispatchEvent(n)}function getTopOffset(r){return r.titleHeight+r.margins.top+r.paddings.top}function getLeftOffset(r){return r.margins.left+r.paddings.left}function getExtraHeight(r){return r.margins.top+r.margins.bottom+r.paddings.top+r.paddings.bottom+r.titleHeight+r.legendHeight}function getExtraWidth(r){return r.margins.left+r.margins.right+r.paddings.left+r.paddings.right}function _classCallCheck$4(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function floatTwo(r){return parseFloat(r.toFixed(2))}function fillArray(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0&&arguments[3];t||(t=n?r[0]:r[r.length-1]);var o=new Array(Math.abs(e)).fill(t);return r=n?o.concat(r):r.concat(o)}function getStringWidth(r,e){return(r+"").length*e}function getPositionByAngle(r,e){return{x:Math.sin(r*ANGLE_RATIO)*e,y:Math.cos(r*ANGLE_RATIO)*e}}function isValidNumber(r){var e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return!Number.isNaN(r)&&r!==void 0&&!!Number.isFinite(r)&&!(e&&r<0)}function round(r){return+(Math.round(r+"e4")+"e-4")}function deepClone(r){var e=void 0,t=void 0,n=void 0;if(r instanceof Date)return new Date(r.getTime());if((r===void 0?"undefined":_typeof$2(r))!=="object"||r===null)return r;e=Array.isArray(r)?[]:{};for(n in r)t=r[n],e[n]=deepClone(t);return e}function getBarHeightAndYAttr(r,e){var t=void 0,n=void 0;return r<=e?(t=e-r,n=r):(t=r-e,n=e),[t,n]}function equilizeNoOfElements(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length-r.length;return t>0?r=fillArray(r,t):e=fillArray(e,t),[r,e]}function truncateString(r,e){if(r)return r.length>e?r.slice(0,e-3)+"...":r}function shortenLargeNumber(r){var e=void 0;if(typeof r=="number")e=r;else if(typeof r=="string"&&(e=Number(r),Number.isNaN(e)))return r;var t=Math.floor(Math.log10(Math.abs(e)));if(t<=2)return e;var n=Math.floor(t/3),o=Math.pow(10,t-3*n)*+(e/Math.pow(10,t)).toFixed(1);return Math.round(100*o)/100+" "+["","K","M","B","T"][n]}function getSplineCurvePointsStr(r,e){for(var t=[],n=0;n<r.length;n++)t.push([r[n],e[n]]);var o=function(s,l){var f=l[0]-s[0],h=l[1]-s[1];return{length:Math.sqrt(Math.pow(f,2)+Math.pow(h,2)),angle:Math.atan2(h,f)}},a=function(s,l,f,h){var d=o(l||s,f||s),m=d.angle+(h?Math.PI:0),_=.2*d.length;return[s[0]+Math.cos(m)*_,s[1]+Math.sin(m)*_]};return function(s,l){return s.reduce(function(f,h,d,m){return d===0?h[0]+","+h[1]:f+" "+l(h,d,m)},"")}(t,function(s,l,f){var h=a(f[l-1],f[l-2],s),d=a(s,f[l-1],f[l+1],!0);return"C "+h[0]+","+h[1]+" "+d[0]+","+d[1]+" "+s[0]+","+s[1]})}function limitColor(r){return r>255?255:r<0?0:r}function lightenDarkenColor(r,e){var t=getColor(r),n=!1;t[0]=="#"&&(t=t.slice(1),n=!0);var o=parseInt(t,16),a=limitColor((o>>16)+e),s=limitColor((o>>8&255)+e),l=limitColor((255&o)+e);return(n?"#":"")+(l|s<<8|a<<16).toString(16)}function isValidColor(r){var e=/(^\s*)(rgb|hsl)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/i;return/(^\s*)(#)((?:[A-Fa-f0-9]{3}){1,2})$/i.test(r)||e.test(r)}function $$1(r,e){return typeof r=="string"?(e||document).querySelector(r):r||null}function createSVG(r,e){var t=document.createElementNS("http://www.w3.org/2000/svg",r);for(var n in e){var o=e[n];if(n==="inside")$$1(o).appendChild(t);else if(n==="around"){var a=$$1(o);a.parentNode.insertBefore(t,a),t.appendChild(a)}else n==="styles"?(o===void 0?"undefined":_typeof$1(o))==="object"&&Object.keys(o).map(function(s){t.style[s]=o[s]}):(n==="className"&&(n="class"),n==="innerHTML"?t.textContent=o:t.setAttribute(n,o))}return t}function renderVerticalGradient(r,e){return createSVG("linearGradient",{inside:r,id:e,x1:0,x2:0,y1:0,y2:1})}function setGradientStop(r,e,t,n){return createSVG("stop",{inside:r,style:"stop-color: "+t,offset:e,"stop-opacity":n})}function makeSVGContainer(r,e,t,n){return createSVG("svg",{className:e,inside:r,width:t,height:n})}function makeSVGDefs(r){return createSVG("defs",{inside:r})}function makeSVGGroup(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,n={className:r,transform:e};return t&&(n.inside=t),createSVG("g",n)}function makePath(r){return createSVG("path",{className:arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",d:r,styles:{stroke:arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none",fill:arguments.length>3&&arguments[3]!==void 0?arguments[3]:"none","stroke-width":arguments.length>4&&arguments[4]!==void 0?arguments[4]:2}})}function makeArcPathStr(r,e,t,n){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,s=t.x+r.x,l=t.y+r.y,f=t.x+e.x,h=t.y+e.y;return"M"+t.x+" "+t.y+`
		L`+s+" "+l+`
		A `+n+" "+n+" 0 "+a+" "+(o?1:0)+`
		`+f+" "+h+" z"}function makeCircleStr(r,e,t,n){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,s=t.x+r.x,l=t.y+r.y,f=t.x+e.x,h=2*t.y,d=t.y+e.y;return"M"+t.x+" "+t.y+`
		L`+s+" "+l+`
		A `+n+" "+n+" 0 "+a+" "+(o?1:0)+`
		`+f+" "+h+` z
		L`+s+" "+h+`
		A `+n+" "+n+" 0 "+a+" "+(o?1:0)+`
		`+f+" "+d+" z"}function makeArcStrokePathStr(r,e,t,n){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,s=t.x+r.x,l=t.y+r.y,f=t.x+e.x,h=t.y+e.y;return"M"+s+" "+l+`
		A `+n+" "+n+" 0 "+a+" "+(o?1:0)+`
		`+f+" "+h}function makeStrokeCircleStr(r,e,t,n){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,s=t.x+r.x,l=t.y+r.y,f=t.x+e.x,h=2*n+l,d=t.y+r.y;return"M"+s+" "+l+`
		A `+n+" "+n+" 0 "+a+" "+(o?1:0)+`
		`+f+" "+h+`
		M`+s+" "+h+`
		A `+n+" "+n+" 0 "+a+" "+(o?1:0)+`
		`+f+" "+d}function makeGradient(r,e){var t=arguments.length>2&&arguments[2]!==void 0&&arguments[2],n="path-fill-gradient-"+e+"-"+(t?"lighter":"default"),o=renderVerticalGradient(r,n),a=[1,.6,.2];return t&&(a=[.4,.2,0]),setGradientStop(o,"0%",e,a[0]),setGradientStop(o,"50%",e,a[1]),setGradientStop(o,"100%",e,a[2]),n}function percentageBar(r,e,t,n){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:PERCENTAGE_BAR_DEFAULT_DEPTH,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"none";return createSVG("rect",{className:"percentage-bar",x:r,y:e,width:t,height:n,fill:a,styles:{stroke:lightenDarkenColor(a,-25),"stroke-dasharray":"0, "+(n+t)+", "+t+", "+n,"stroke-width":o}})}function heatSquare(r,e,t,n,o){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"none",s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{},l={className:r,x:e,y:t,width:n,height:n,rx:o,fill:a};return Object.keys(s).map(function(f){l[f]=s[f]}),createSVG("rect",l)}function legendBar(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"none",o=arguments[4];o=arguments.length>5&&arguments[5]!==void 0&&arguments[5]?truncateString(o,LABEL_MAX_CHARS):o;var a={className:"legend-bar",x:0,y:0,width:t,height:"2px",fill:n},s=createSVG("text",{className:"legend-dataset-text",x:0,y:0,dy:2*FONT_SIZE+"px","font-size":1.2*FONT_SIZE+"px","text-anchor":"start",fill:FONT_FILL,innerHTML:o}),l=createSVG("g",{transform:"translate("+r+", "+e+")"});return l.appendChild(createSVG("rect",a)),l.appendChild(s),l}function legendDot(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"none",o=arguments[4];o=arguments.length>5&&arguments[5]!==void 0&&arguments[5]?truncateString(o,LABEL_MAX_CHARS):o;var a={className:"legend-dot",cx:0,cy:0,r:t,fill:n},s=createSVG("text",{className:"legend-dataset-text",x:0,y:0,dx:FONT_SIZE+"px",dy:FONT_SIZE/3+"px","font-size":1.2*FONT_SIZE+"px","text-anchor":"start",fill:FONT_FILL,innerHTML:o}),l=createSVG("g",{transform:"translate("+r+", "+e+")"});return l.appendChild(createSVG("circle",a)),l.appendChild(s),l}function makeText(r,e,t,n){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},a=o.fontSize||FONT_SIZE;return createSVG("text",{className:r,x:e,y:t,dy:(o.dy!==void 0?o.dy:a/2)+"px","font-size":a+"px",fill:o.fill||FONT_FILL,"text-anchor":o.textAnchor||"start",innerHTML:n})}function makeVertLine(r,e,t,n){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};o.stroke||(o.stroke=BASE_LINE_COLOR);var a=createSVG("line",{className:"line-vertical "+o.className,x1:0,x2:0,y1:t,y2:n,styles:{stroke:o.stroke}}),s=createSVG("text",{x:0,y:t>n?t+LABEL_MARGIN:t-LABEL_MARGIN-FONT_SIZE,dy:FONT_SIZE+"px","font-size":FONT_SIZE+"px","text-anchor":"middle",innerHTML:e+""}),l=createSVG("g",{transform:"translate("+r+", 0)"});return l.appendChild(a),l.appendChild(s),l}function makeHoriLine(r,e,t,n){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};o.stroke||(o.stroke=BASE_LINE_COLOR),o.lineType||(o.lineType=""),o.shortenNumbers&&(e=shortenLargeNumber(e));var a=createSVG("line",{className:"line-horizontal "+o.className+(o.lineType==="dashed"?"dashed":""),x1:t,x2:n,y1:0,y2:0,styles:{stroke:o.stroke}}),s=createSVG("text",{x:t<n?t-LABEL_MARGIN:t+LABEL_MARGIN,y:0,dy:FONT_SIZE/2-2+"px","font-size":FONT_SIZE+"px","text-anchor":t<n?"end":"start",innerHTML:e+""}),l=createSVG("g",{transform:"translate(0, "+r+")","stroke-opacity":1});return s!==0&&s!=="0"||(l.style.stroke="rgba(27, 31, 35, 0.6)"),l.appendChild(a),l.appendChild(s),l}function yLine(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};isValidNumber(r)||(r=0),n.pos||(n.pos="left"),n.offset||(n.offset=0),n.mode||(n.mode="span"),n.stroke||(n.stroke=BASE_LINE_COLOR),n.className||(n.className="");var o=-1*AXIS_TICK_LENGTH,a=n.mode==="span"?t+AXIS_TICK_LENGTH:0;return n.mode==="tick"&&n.pos==="right"&&(o=t+AXIS_TICK_LENGTH,a=t),o+=n.offset,a+=n.offset,makeHoriLine(r,e,o,a,{stroke:n.stroke,className:n.className,lineType:n.lineType,shortenNumbers:n.shortenNumbers})}function xLine(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};isValidNumber(r)||(r=0),n.pos||(n.pos="bottom"),n.offset||(n.offset=0),n.mode||(n.mode="span"),n.stroke||(n.stroke=BASE_LINE_COLOR),n.className||(n.className="");var o=t+AXIS_TICK_LENGTH,a=n.mode==="span"?-1*AXIS_TICK_LENGTH:t;return n.mode==="tick"&&n.pos==="top"&&(o=-1*AXIS_TICK_LENGTH,a=0),makeVertLine(r,e,o,a,{stroke:n.stroke,className:n.className,lineType:n.lineType})}function yMarker(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};n.labelPos||(n.labelPos="right");var o=createSVG("text",{className:"chart-label",x:n.labelPos==="left"?LABEL_MARGIN:t-getStringWidth(e,5)-LABEL_MARGIN,y:0,dy:FONT_SIZE/-2+"px","font-size":FONT_SIZE+"px","text-anchor":"start",innerHTML:e+""}),a=makeHoriLine(r,"",0,t,{stroke:n.stroke||BASE_LINE_COLOR,className:n.className||"",lineType:n.lineType});return a.appendChild(o),a}function yRegion(r,e,t,n){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},a=r-e,s=createSVG("rect",{className:"bar mini",styles:{fill:"rgba(228, 234, 239, 0.49)",stroke:BASE_LINE_COLOR,"stroke-dasharray":t+", "+a},x:0,y:0,width:t,height:a});o.labelPos||(o.labelPos="right");var l=createSVG("text",{className:"chart-label",x:o.labelPos==="left"?LABEL_MARGIN:t-getStringWidth(n+"",4.5)-LABEL_MARGIN,y:0,dy:FONT_SIZE/-2+"px","font-size":FONT_SIZE+"px","text-anchor":"start",innerHTML:n+""}),f=createSVG("g",{transform:"translate(0, "+e+")"});return f.appendChild(s),f.appendChild(l),f}function datasetBar(r,e,t,n){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:{},f=getBarHeightAndYAttr(e,l.zeroLine),h=_slicedToArray(f,2),d=h[0],m=h[1];m-=s,d===0&&(d=l.minHeight,m-=l.minHeight),isValidNumber(r)||(r=0),isValidNumber(m)||(m=0),isValidNumber(d,!0)||(d=0),isValidNumber(t,!0)||(t=0);var _=createSVG("rect",{className:"bar mini",style:"fill: "+n,"data-point-index":a,x:r,y:m,width:t,height:d});if((o+="")||o.length){_.setAttribute("y",0),_.setAttribute("x",0);var b=createSVG("text",{className:"data-point-value",x:t/2,y:0,dy:FONT_SIZE/2*-1+"px","font-size":FONT_SIZE+"px","text-anchor":"middle",innerHTML:o}),w=createSVG("g",{"data-point-index":a,transform:"translate("+r+", "+m+")"});return w.appendChild(_),w.appendChild(b),w}return _}function datasetDot(r,e,t,n){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,s=createSVG("circle",{style:"fill: "+n,"data-point-index":a,cx:r,cy:e,r:t});if((o+="")||o.length){s.setAttribute("cy",0),s.setAttribute("cx",0);var l=createSVG("text",{className:"data-point-value",x:0,y:0,dy:FONT_SIZE/2*-1-t+"px","font-size":FONT_SIZE+"px","text-anchor":"middle",innerHTML:o}),f=createSVG("g",{"data-point-index":a,transform:"translate("+r+", "+e+")"});return f.appendChild(s),f.appendChild(l),f}return s}function getPaths(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},a=e.map(function(m,_){return r[_]+","+m}).join("L");n.spline&&(a=getSplineCurvePointsStr(r,e));var s=makePath("M"+a,"line-graph-path",t);if(n.heatline){var l=makeGradient(o.svgDefs,t);s.style.stroke="url(#"+l+")"}var f={path:s};if(n.regionFill){var h=makeGradient(o.svgDefs,t,!0),d="M"+r[0]+","+o.zeroLine+"L"+a+"L"+r.slice(-1)[0]+","+o.zeroLine;f.region=makePath(d,"region-fill","none","url(#"+h+")")}return f}function translate(r,e,t,n){var o=typeof e=="string"?e:e.join(", ");return[r,{transform:t.join(", ")},n,STD_EASING,"translate",{transform:o}]}function translateVertLine(r,e,t){return translate(r,[t,0],[e,0],MARKER_LINE_ANIM_DUR)}function translateHoriLine(r,e,t){return translate(r,[0,t],[0,e],MARKER_LINE_ANIM_DUR)}function animateRegion(r,e,t,n){var o=e-t,a=r.childNodes[0];return[[a,{height:o,"stroke-dasharray":a.getAttribute("width")+", "+o},MARKER_LINE_ANIM_DUR,STD_EASING],translate(r,[0,n],[0,t],MARKER_LINE_ANIM_DUR)]}function animateBar(r,e,t,n){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a=getBarHeightAndYAttr(t,(arguments.length>5&&arguments[5]!==void 0?arguments[5]:{}).zeroLine),s=_slicedToArray$2(a,2),l=s[0],f=s[1];return f-=o,r.nodeName!=="rect"?[[r.childNodes[0],{width:n,height:l},UNIT_ANIM_DUR,STD_EASING],translate(r,r.getAttribute("transform").split("(")[1].slice(0,-1),[e,f],MARKER_LINE_ANIM_DUR)]:[[r,{width:n,height:l,x:e,y:f},UNIT_ANIM_DUR,STD_EASING]]}function animateDot(r,e,t){return r.nodeName!=="circle"?[translate(r,r.getAttribute("transform").split("(")[1].slice(0,-1),[e,t],MARKER_LINE_ANIM_DUR)]:[[r,{cx:e,cy:t},UNIT_ANIM_DUR,STD_EASING]]}function animatePath(r,e,t,n,o){var a=[],s=t.map(function(m,_){return e[_]+","+m}).join("L");o&&(s=getSplineCurvePointsStr(e,t));var l=[r.path,{d:"M"+s},PATH_ANIM_DUR,STD_EASING];if(a.push(l),r.region){var f=e[0]+","+n+"L",h="L"+e.slice(-1)[0]+", "+n,d=[r.region,{d:"M"+f+s+h},PATH_ANIM_DUR,STD_EASING];a.push(d)}return a}function animatePathStr(r,e){return[r,{d:e},UNIT_ANIM_DUR,STD_EASING]}function _toConsumableArray$1(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}return Array.from(r)}function animateSVGElement(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"linear",o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},s=r.cloneNode(!0),l=r.cloneNode(!0);for(var f in e){var h=void 0;h=f==="transform"?document.createElementNS("http://www.w3.org/2000/svg","animateTransform"):document.createElementNS("http://www.w3.org/2000/svg","animate");var d=a[f]||r.getAttribute(f),m=e[f],_={attributeName:f,from:d,to:m,begin:"0s",dur:t/1e3+"s",values:d+";"+m,keySplines:EASING[n],keyTimes:"0;1",calcMode:"spline",fill:"freeze"};o&&(_.type=o);for(var b in _)h.setAttribute(b,_[b]);s.appendChild(h),o?l.setAttribute(f,"translate("+m+")"):l.setAttribute(f,m)}return[s,l]}function transform(r,e){r.style.transform=e,r.style.webkitTransform=e,r.style.msTransform=e,r.style.mozTransform=e,r.style.oTransform=e}function animateSVG(r,e){var t=[],n=[];e.map(function(a){var s=a[0],l=s.parentNode,f=void 0,h=void 0;a[0]=s;var d=animateSVGElement.apply(void 0,_toConsumableArray$1(a)),m=_slicedToArray$1(d,2);f=m[0],h=m[1],t.push(h),n.push([f,l]),l&&l.replaceChild(f,s)});var o=r.cloneNode(!0);return n.map(function(a,s){a[1]&&(a[1].replaceChild(t[s],a[0]),e[s][0]=t[s])}),o}function runSMILAnimation(r,e,t){if(t.length!==0){var n=animateSVG(e,t);e.parentNode==r&&(r.removeChild(e),r.appendChild(n)),setTimeout(function(){n.parentNode==r&&(r.removeChild(n),r.appendChild(e))},REPLACE_ALL_NEW_DUR)}}function downloadFile(r,e){var t=document.createElement("a");t.style="display: none";var n=new Blob(e,{type:"image/svg+xml; charset=utf-8"}),o=window.URL.createObjectURL(n);t.href=o,t.download=r,document.body.appendChild(t),t.click(),setTimeout(function(){document.body.removeChild(t),window.URL.revokeObjectURL(o)},300)}function prepareForExport(r){var e=r.cloneNode(!0);e.classList.add("chart-container"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");var t=$.create("style",{innerHTML:CSSTEXT});e.insertBefore(t,e.firstChild);var n=$.create("div");return n.appendChild(e),n.innerHTML}function _classCallCheck$3(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck$2(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$1(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||typeof e!="object"&&typeof e!="function"?r:e}function _inherits$1(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}function treatAsUtc(r){var e=new Date(r);return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e}function getYyyyMmDd(r){var e=r.getDate(),t=r.getMonth()+1;return[r.getFullYear(),(t>9?"":"0")+t,(e>9?"":"0")+e].join("-")}function clone(r){return new Date(r.getTime())}function getWeeksBetween(r,e){var t=setDayToSunday(r);return Math.ceil(getDaysBetween(t,e)/NO_OF_DAYS_IN_WEEK)}function getDaysBetween(r,e){var t=SEC_IN_DAY*NO_OF_MILLIS;return(treatAsUtc(e)-treatAsUtc(r))/t}function areInSameMonth(r,e){return r.getMonth()===e.getMonth()&&r.getFullYear()===e.getFullYear()}function getMonthName(r){var e=arguments.length>1&&arguments[1]!==void 0&&arguments[1],t=MONTH_NAMES[r];return e?t.slice(0,3):t}function getLastDateInMonth(r,e){return new Date(e,r+1,0)}function setDayToSunday(r){var e=clone(r),t=e.getDay();return t!==0&&addDays(e,-1*t),e}function addDays(r,e){r.setDate(r.getDate()+e)}function _classCallCheck$5(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function getComponent(r,e,t){var n=Object.keys(componentConfigs).filter(function(a){return r.includes(a)}),o=componentConfigs[n[0]];return Object.assign(o,{constants:e,getData:t}),new ChartComponent(o)}function _toConsumableArray(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}return Array.from(r)}function _classCallCheck$1(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||typeof e!="object"&&typeof e!="function"?r:e}function _inherits(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}function _toConsumableArray$2(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}return Array.from(r)}function _classCallCheck$6(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$2(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||typeof e!="object"&&typeof e!="function"?r:e}function _inherits$2(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}function _toConsumableArray$4(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}return Array.from(r)}function normalize(r){if(r===0)return[0,0];if(isNaN(r))return{mantissa:-6755399441055744,exponent:972};var e=r>0?1:-1;if(!isFinite(r))return{mantissa:4503599627370496*e,exponent:972};r=Math.abs(r);var t=Math.floor(Math.log10(r));return[e*(r/Math.pow(10,t)),t]}function getChartRangeIntervals(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=Math.ceil(r),n=Math.floor(e),o=t-n,a=o,s=1;o>5&&(o%2!=0&&(o=++t-n),a=o/2,s=2),o<=2&&(s=o/(a=4)),o===0&&(a=5,s=1);for(var l=[],f=0;f<=a;f++)l.push(n+s*f);return l}function getChartIntervals(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=normalize(r),n=_slicedToArray$4(t,2),o=n[0],a=n[1],s=e?e/Math.pow(10,a):0,l=getChartRangeIntervals(o=o.toFixed(6),s);return l=l.map(function(f){return f*Math.pow(10,a)})}function calcChartIntervals(r){function e(h,d){for(var m=getChartIntervals(h),_=m[1]-m[0],b=0,w=1;b<d;w++)b+=_,m.unshift(-1*b);return m}var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n=Math.max.apply(Math,_toConsumableArray$4(r)),o=Math.min.apply(Math,_toConsumableArray$4(r)),a=[];if(n>=0&&o>=0)normalize(n)[1],a=t?getChartIntervals(n,o):getChartIntervals(n);else if(n>0&&o<0){var s=Math.abs(o);n>=s?(normalize(n)[1],a=e(n,s)):(normalize(s)[1],a=e(s,n).reverse().map(function(h){return-1*h}))}else if(n<=0&&o<=0){var l=Math.abs(o),f=Math.abs(n);normalize(l)[1],a=(a=t?getChartIntervals(l,f):getChartIntervals(l)).reverse().map(function(h){return-1*h})}return a}function getZeroIndex(r){var e=getIntervalSize(r);return r.indexOf(0)>=0?r.indexOf(0):r[0]>0?-1*r[0]/e:-1*r[r.length-1]/e+(r.length-1)}function getIntervalSize(r){return r[1]-r[0]}function getValueRange(r){return r[r.length-1]-r[0]}function scale(r,e){return floatTwo(e.zeroLine-r*e.scaleMultiplier)}function getClosestInArray(r,e){var t=arguments.length>2&&arguments[2]!==void 0&&arguments[2],n=e.reduce(function(o,a){return Math.abs(a-r)<Math.abs(o-r)?a:o},[]);return t?e.indexOf(n):n}function calcDistribution(r,e){for(var t=Math.max.apply(Math,_toConsumableArray$4(r)),n=1/(e-1),o=[],a=0;a<e;a++){var s=t*(n*a);o.push(s)}return o}function getMaxCheckpoint(r,e){return e.filter(function(t){return t<r}).length}function _toConsumableArray$3(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}return Array.from(r)}function _classCallCheck$7(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$3(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||typeof e!="object"&&typeof e!="function"?r:e}function _inherits$3(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}function _toConsumableArray$6(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}return Array.from(r)}function dataPrep(r,e){r.labels=r.labels||[];var t=r.labels.length,n=r.datasets,o=new Array(t).fill(0);return n||(n=[{values:o}]),n.map(function(a){if(a.values){var s=a.values;s=(s=s.map(function(l){return isNaN(l)?0:l})).length>t?s.slice(0,t):fillArray(s,t-s.length,0),a.values=s}else a.values=o;a.chartType||(a.chartType=e)}),r.yRegions&&r.yRegions.map(function(a){if(a.end<a.start){var s=[a.end,a.start];a.start=s[0],a.end=s[1]}}),r}function zeroDataPrep(r){var e=r.labels.length,t=new Array(e).fill(0),n={labels:r.labels.slice(0,-1),datasets:r.datasets.map(function(o){return{name:"",values:t.slice(0,-1),chartType:o.chartType}})};return r.yMarkers&&(n.yMarkers=[{value:0,label:""}]),r.yRegions&&(n.yRegions=[{start:0,end:0,label:""}]),n}function getShortenedLabels(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],n=r/e.length;n<=0&&(n=1);var o=n/DEFAULT_CHAR_WIDTH,a=void 0;if(t){var s=Math.max.apply(Math,_toConsumableArray$6(e.map(function(l){return l.length})));a=Math.ceil(s/o)}return e.map(function(l,f){return(l+="").length>o&&(t?f%a!=0&&(l=""):l=o-3>0?l.slice(0,o-3)+" ...":l.slice(0,o)+".."),l})}function _toConsumableArray$5(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}return Array.from(r)}function _classCallCheck$8(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$4(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||typeof e!="object"&&typeof e!="function"?r:e}function _inherits$4(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}function _toConsumableArray$7(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}return Array.from(r)}function _classCallCheck$9(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$5(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||typeof e!="object"&&typeof e!="function"?r:e}function _inherits$5(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}function _classCallCheck(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function getChartByType(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"line",e=arguments[1],t=arguments[2];return r==="axis-mixed"?(t.type="line",new AxisChart(e,t)):chartTypes[r]?new chartTypes[r](e,t):void console.error("Undefined chart type: "+r)}var css_248z='.chart-container{position:relative;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif}.chart-container .axis,.chart-container .chart-label{fill:#555b51}.chart-container .axis line,.chart-container .chart-label line{stroke:#dadada}.chart-container .dataset-units circle{stroke:#fff;stroke-width:2}.chart-container .dataset-units path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container .dataset-path{stroke-width:2px}.chart-container .path-group path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container line.dashed{stroke-dasharray:5,3}.chart-container .axis-line .specific-value{text-anchor:start}.chart-container .axis-line .y-line{text-anchor:end}.chart-container .axis-line .x-line{text-anchor:middle}.chart-container .legend-dataset-text{fill:#6c7680;font-weight:600}.graph-svg-tip{position:absolute;z-index:99999;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0,0,0,.8);border-radius:3px}.graph-svg-tip ol,.graph-svg-tip ul{padding-left:0;display:-webkit-box;display:-ms-flexbox;display:flex}.graph-svg-tip ul.data-point-list li{min-width:90px;-webkit-box-flex:1;-ms-flex:1;flex:1;font-weight:600}.graph-svg-tip strong{color:#dfe2e5;font-weight:600}.graph-svg-tip .svg-pointer{position:absolute;height:5px;margin:0 0 0 -5px;content:" ";border:5px solid transparent;border-top-color:rgba(0,0,0,.8)}.graph-svg-tip.comparison{padding:0;text-align:left;pointer-events:none}.graph-svg-tip.comparison .title{display:block;padding:10px;margin:0;font-weight:600;line-height:1;pointer-events:none}.graph-svg-tip.comparison ul{margin:0;white-space:nowrap;list-style:none}.graph-svg-tip.comparison li{display:inline-block;padding:5px 10px}';styleInject(css_248z);var _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};$.create=function(r,e){var t=document.createElement(r);for(var n in e){var o=e[n];if(n==="inside")$(o).appendChild(t);else if(n==="around"){var a=$(o);a.parentNode.insertBefore(t,a),t.appendChild(a)}else n==="styles"?(o===void 0?"undefined":_typeof(o))==="object"&&Object.keys(o).map(function(s){t.style[s]=o[s]}):n in t?t[n]=o:t.setAttribute(n,o)}return t};var BASE_MEASURES={margins:{top:10,bottom:10,left:20,right:20},paddings:{top:20,bottom:40,left:30,right:10},baseHeight:240,titleHeight:20,legendHeight:30,titleFontSize:12},INIT_CHART_UPDATE_TIMEOUT=700,CHART_POST_ANIMATE_TIMEOUT=400,AXIS_LEGEND_BAR_SIZE=100,BAR_CHART_SPACE_RATIO=.5,MIN_BAR_PERCENT_HEIGHT=0,LINE_CHART_DOT_SIZE=4,DOT_OVERLAY_SIZE_INCR=4,PERCENTAGE_BAR_DEFAULT_HEIGHT=20,PERCENTAGE_BAR_DEFAULT_DEPTH=2,HEATMAP_DISTRIBUTION_SIZE=5,HEATMAP_SQUARE_SIZE=10,HEATMAP_GUTTER_SIZE=2,DEFAULT_CHAR_WIDTH=7,TOOLTIP_POINTER_TRIANGLE_HEIGHT=5,DEFAULT_CHART_COLORS=["light-blue","blue","violet","red","orange","yellow","green","light-green","purple","magenta","light-grey","dark-grey"],HEATMAP_COLORS_GREEN=["#ebedf0","#c6e48b","#7bc96f","#239a3b","#196127"],DEFAULT_COLORS={bar:DEFAULT_CHART_COLORS,line:DEFAULT_CHART_COLORS,pie:DEFAULT_CHART_COLORS,percentage:DEFAULT_CHART_COLORS,heatmap:HEATMAP_COLORS_GREEN,donut:DEFAULT_CHART_COLORS},ANGLE_RATIO=Math.PI/180,FULL_ANGLE=360,_createClass$3=function(){function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),SvgTip=function(){function r(e){var t=e.parent,n=t===void 0?null:t,o=e.colors,a=o===void 0?[]:o;_classCallCheck$4(this,r),this.parent=n,this.colors=a,this.titleName="",this.titleValue="",this.listValues=[],this.titleValueFirst=0,this.x=0,this.y=0,this.top=0,this.left=0,this.setup()}return _createClass$3(r,[{key:"setup",value:function(){this.makeTooltip()}},{key:"refresh",value:function(){this.fill(),this.calcPosition()}},{key:"makeTooltip",value:function(){var e=this;this.container=$.create("div",{inside:this.parent,className:"graph-svg-tip comparison",innerHTML:`<span class="title"></span>
				<ul class="data-point-list"></ul>
				<div class="svg-pointer"></div>`}),this.hideTip(),this.title=this.container.querySelector(".title"),this.dataPointList=this.container.querySelector(".data-point-list"),this.parent.addEventListener("mouseleave",function(){e.hideTip()})}},{key:"fill",value:function(){var e=this,t=void 0;this.index&&this.container.setAttribute("data-point-index",this.index),t=this.titleValueFirst?"<strong>"+this.titleValue+"</strong>"+this.titleName:this.titleName+"<strong>"+this.titleValue+"</strong>",this.title.innerHTML=t,this.dataPointList.innerHTML="",this.listValues.map(function(n,o){var a=e.colors[o]||"black",s=n.formatted===0||n.formatted?n.formatted:n.value,l=$.create("li",{styles:{"border-top":"3px solid "+a},innerHTML:'<strong style="display: block;">'+(s===0||s?s:"")+`</strong>
					`+(n.title?n.title:"")});e.dataPointList.appendChild(l)})}},{key:"calcPosition",value:function(){var e=this.container.offsetWidth;this.top=this.y-this.container.offsetHeight-TOOLTIP_POINTER_TRIANGLE_HEIGHT,this.left=this.x-e/2;var t=this.parent.offsetWidth-e,n=this.container.querySelector(".svg-pointer");if(this.left<0)n.style.left="calc(50% - "+-1*this.left+"px)",this.left=0;else if(this.left>t){var o="calc(50% + "+(this.left-t)+"px)";n.style.left=o,this.left=t}else n.style.left="50%"}},{key:"setValues",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;this.titleName=n.name,this.titleValue=n.value,this.listValues=o,this.x=e,this.y=t,this.titleValueFirst=n.valueFirst||0,this.index=a,this.refresh()}},{key:"hideTip",value:function(){this.container.style.top="0px",this.container.style.left="0px",this.container.style.opacity="0"}},{key:"showTip",value:function(){this.container.style.top=this.top+"px",this.container.style.left=this.left+"px",this.container.style.opacity="1"}}]),r}(),_typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},PRESET_COLOR_MAP={"light-blue":"#7cd6fd",blue:"#5e64ff",violet:"#743ee2",red:"#ff5858",orange:"#ffa00a",yellow:"#feef72",green:"#28a745","light-green":"#98d85b",purple:"#b554ff",magenta:"#ffa3ef",black:"#36114C",grey:"#bdd3e6","light-grey":"#f0f4f7","dark-grey":"#b8c2cc"},getColor=function(r){return/rgb[a]{0,1}\([\d, ]+\)/gim.test(r)?/\D+(\d*)\D+(\d*)\D+(\d*)/gim.exec(r).map(function(e,t){return t!==0?Number(e).toString(16):"#"}).reduce(function(e,t){return""+e+t}):PRESET_COLOR_MAP[r]||r},_slicedToArray=function(){function r(e,t){var n=[],o=!0,a=!1,s=void 0;try{for(var l,f=e[Symbol.iterator]();!(o=(l=f.next()).done)&&(n.push(l.value),!t||n.length!==t);o=!0);}catch(h){a=!0,s=h}finally{try{!o&&f.return&&f.return()}finally{if(a)throw s}}return n}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return r(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},AXIS_TICK_LENGTH=6,LABEL_MARGIN=4,LABEL_MAX_CHARS=15,FONT_SIZE=10,BASE_LINE_COLOR="#dadada",FONT_FILL="#555b51",makeOverlay={bar:function(r){var e=void 0;r.nodeName!=="rect"&&(e=r.getAttribute("transform"),r=r.childNodes[0]);var t=r.cloneNode();return t.style.fill="#000000",t.style.opacity="0.4",e&&t.setAttribute("transform",e),t},dot:function(r){var e=void 0;r.nodeName!=="circle"&&(e=r.getAttribute("transform"),r=r.childNodes[0]);var t=r.cloneNode(),n=r.getAttribute("r"),o=r.getAttribute("fill");return t.setAttribute("r",parseInt(n)+DOT_OVERLAY_SIZE_INCR),t.setAttribute("fill",o),t.style.opacity="0.6",e&&t.setAttribute("transform",e),t},heat_square:function(r){var e=void 0;r.nodeName!=="circle"&&(e=r.getAttribute("transform"),r=r.childNodes[0]);var t=r.cloneNode(),n=r.getAttribute("r"),o=r.getAttribute("fill");return t.setAttribute("r",parseInt(n)+DOT_OVERLAY_SIZE_INCR),t.setAttribute("fill",o),t.style.opacity="0.6",e&&t.setAttribute("transform",e),t}},updateOverlay={bar:function(r,e){var t=void 0;r.nodeName!=="rect"&&(t=r.getAttribute("transform"),r=r.childNodes[0]);var n=["x","y","width","height"];Object.values(r.attributes).filter(function(o){return n.includes(o.name)&&o.specified}).map(function(o){e.setAttribute(o.name,o.nodeValue)}),t&&e.setAttribute("transform",t)},dot:function(r,e){var t=void 0;r.nodeName!=="circle"&&(t=r.getAttribute("transform"),r=r.childNodes[0]);var n=["cx","cy"];Object.values(r.attributes).filter(function(o){return n.includes(o.name)&&o.specified}).map(function(o){e.setAttribute(o.name,o.nodeValue)}),t&&e.setAttribute("transform",t)},heat_square:function(r,e){var t=void 0;r.nodeName!=="circle"&&(t=r.getAttribute("transform"),r=r.childNodes[0]);var n=["cx","cy"];Object.values(r.attributes).filter(function(o){return n.includes(o.name)&&o.specified}).map(function(o){e.setAttribute(o.name,o.nodeValue)}),t&&e.setAttribute("transform",t)}},_slicedToArray$2=function(){function r(e,t){var n=[],o=!0,a=!1,s=void 0;try{for(var l,f=e[Symbol.iterator]();!(o=(l=f.next()).done)&&(n.push(l.value),!t||n.length!==t);o=!0);}catch(h){a=!0,s=h}finally{try{!o&&f.return&&f.return()}finally{if(a)throw s}}return n}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return r(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),UNIT_ANIM_DUR=350,PATH_ANIM_DUR=350,MARKER_LINE_ANIM_DUR=UNIT_ANIM_DUR,REPLACE_ALL_NEW_DUR=250,STD_EASING="easein",_slicedToArray$1=function(){function r(e,t){var n=[],o=!0,a=!1,s=void 0;try{for(var l,f=e[Symbol.iterator]();!(o=(l=f.next()).done)&&(n.push(l.value),!t||n.length!==t);o=!0);}catch(h){a=!0,s=h}finally{try{!o&&f.return&&f.return()}finally{if(a)throw s}}return n}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return r(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),EASING={ease:"0.25 0.1 0.25 1",linear:"0 0 1 1",easein:"0.1 0.8 0.2 1",easeout:"0 0 0.58 1",easeinout:"0.42 0 0.58 1"},CSSTEXT=".chart-container{position:relative;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif}.chart-container .axis,.chart-container .chart-label{fill:#555b51}.chart-container .axis line,.chart-container .chart-label line{stroke:#dadada}.chart-container .dataset-units circle{stroke:#fff;stroke-width:2}.chart-container .dataset-units path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container .dataset-path{stroke-width:2px}.chart-container .path-group path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container line.dashed{stroke-dasharray:5,3}.chart-container .axis-line .specific-value{text-anchor:start}.chart-container .axis-line .y-line{text-anchor:end}.chart-container .axis-line .x-line{text-anchor:middle}.chart-container .legend-dataset-text{fill:#6c7680;font-weight:600}.graph-svg-tip{position:absolute;z-index:99999;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0,0,0,.8);border-radius:3px}.graph-svg-tip ul{padding-left:0;display:flex}.graph-svg-tip ol{padding-left:0;display:flex}.graph-svg-tip ul.data-point-list li{min-width:90px;flex:1;font-weight:600}.graph-svg-tip strong{color:#dfe2e5;font-weight:600}.graph-svg-tip .svg-pointer{position:absolute;height:5px;margin:0 0 0 -5px;content:' ';border:5px solid transparent;border-top-color:rgba(0,0,0,.8)}.graph-svg-tip.comparison{padding:0;text-align:left;pointer-events:none}.graph-svg-tip.comparison .title{display:block;padding:10px;margin:0;font-weight:600;line-height:1;pointer-events:none}.graph-svg-tip.comparison ul{margin:0;white-space:nowrap;list-style:none}.graph-svg-tip.comparison li{display:inline-block;padding:5px 10px}",_createClass$2=function(){function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),BaseChart=function(){function r(e,t){if(_classCallCheck$3(this,r),t=deepClone(t),this.parent=typeof e=="string"?document.querySelector(e):e,!(this.parent instanceof HTMLElement))throw new Error("No `parent` element to render on was provided.");this.rawChartArgs=t,this.title=t.title||"",this.type=t.type||"",this.realData=this.prepareData(t.data),this.data=this.prepareFirstData(this.realData),this.colors=this.validateColors(t.colors,this.type),this.config={showTooltip:1,showLegend:1,isNavigable:t.isNavigable||0,animate:t.animate!==void 0?t.animate:1,truncateLegends:t.truncateLegends||1},this.measures=JSON.parse(JSON.stringify(BASE_MEASURES));var n=this.measures;this.setMeasures(t),this.title.length||(n.titleHeight=0),this.config.showLegend||(n.legendHeight=0),this.argHeight=t.height||n.baseHeight,this.state={},this.options={},this.initTimeout=INIT_CHART_UPDATE_TIMEOUT,this.config.isNavigable&&(this.overlays=[]),this.configure(t)}return _createClass$2(r,[{key:"prepareData",value:function(e){return e}},{key:"prepareFirstData",value:function(e){return e}},{key:"validateColors",value:function(e,t){var n=[];return(e=(e||[]).concat(DEFAULT_COLORS[t])).forEach(function(o){var a=getColor(o);isValidColor(a)?n.push(a):console.warn('"'+o+'" is not a valid color.')}),n}},{key:"setMeasures",value:function(){}},{key:"configure",value:function(){var e=this,t=this.argHeight;this.baseHeight=t,this.height=t-getExtraHeight(this.measures),this.boundDrawFn=function(){return e.draw(!0)},ResizeObserver&&(this.resizeObserver=new ResizeObserver(this.boundDrawFn),this.resizeObserver.observe(this.parent)),window.addEventListener("resize",this.boundDrawFn),window.addEventListener("orientationchange",this.boundDrawFn)}},{key:"destroy",value:function(){this.resizeObserver&&this.resizeObserver.disconnect(),window.removeEventListener("resize",this.boundDrawFn),window.removeEventListener("orientationchange",this.boundDrawFn)}},{key:"setup",value:function(){this.makeContainer(),this.updateWidth(),this.makeTooltip(),this.draw(!1,!0)}},{key:"makeContainer",value:function(){this.parent.innerHTML="";var e={inside:this.parent,className:"chart-container"};this.independentWidth&&(e.styles={width:this.independentWidth+"px"}),this.container=$.create("div",e)}},{key:"makeTooltip",value:function(){this.tip=new SvgTip({parent:this.container,colors:this.colors}),this.bindTooltip()}},{key:"bindTooltip",value:function(){}},{key:"draw",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];t&&isHidden(this.parent)||(this.updateWidth(),this.calc(t),this.makeChartArea(),this.setupComponents(),this.components.forEach(function(o){return o.setup(e.drawArea)}),this.render(this.components,!1),n&&(this.data=this.realData,setTimeout(function(){e.update(e.data)},this.initTimeout)),this.renderLegend(),this.setupNavigation(n))}},{key:"calc",value:function(){}},{key:"updateWidth",value:function(){this.baseWidth=getElementContentWidth(this.parent),this.width=this.baseWidth-getExtraWidth(this.measures)}},{key:"makeChartArea",value:function(){this.svg&&this.container.removeChild(this.svg);var e=this.measures;this.svg=makeSVGContainer(this.container,"frappe-chart chart",this.baseWidth,this.baseHeight),this.svgDefs=makeSVGDefs(this.svg),this.title.length&&(this.titleEL=makeText("title",e.margins.left,e.margins.top,this.title,{fontSize:e.titleFontSize,fill:"#666666",dy:e.titleFontSize}));var t=getTopOffset(e);this.drawArea=makeSVGGroup(this.type+"-chart chart-draw-area","translate("+getLeftOffset(e)+", "+t+")"),this.config.showLegend&&(t+=this.height+e.paddings.bottom,this.legendArea=makeSVGGroup("chart-legend","translate("+getLeftOffset(e)+", "+t+")")),this.title.length&&this.svg.appendChild(this.titleEL),this.svg.appendChild(this.drawArea),this.config.showLegend&&this.svg.appendChild(this.legendArea),this.updateTipOffset(getLeftOffset(e),getTopOffset(e))}},{key:"updateTipOffset",value:function(e,t){this.tip.offset={x:e,y:t}}},{key:"setupComponents",value:function(){this.components=new Map}},{key:"update",value:function(e){e||console.error("No data to update."),this.data=this.prepareData(e),this.calc(),this.render(this.components,this.config.animate),this.renderLegend()}},{key:"render",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.components,n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.config.isNavigable&&this.overlays.map(function(a){return a.parentNode.removeChild(a)});var o=[];t.forEach(function(a){o=o.concat(a.update(n))}),o.length>0?(runSMILAnimation(this.container,this.svg,o),setTimeout(function(){t.forEach(function(a){return a.make()}),e.updateNav()},CHART_POST_ANIMATE_TIMEOUT)):(t.forEach(function(a){return a.make()}),this.updateNav())}},{key:"updateNav",value:function(){this.config.isNavigable&&(this.makeOverlay(),this.bindUnits())}},{key:"renderLegend",value:function(){}},{key:"setupNavigation",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.config.isNavigable&&t&&(this.bindOverlay(),this.keyActions={13:this.onEnterKey.bind(this),37:this.onLeftArrow.bind(this),38:this.onUpArrow.bind(this),39:this.onRightArrow.bind(this),40:this.onDownArrow.bind(this)},document.addEventListener("keydown",function(n){isElementInViewport(e.container)&&(n=n||window.event,e.keyActions[n.keyCode]&&e.keyActions[n.keyCode]())}))}},{key:"makeOverlay",value:function(){}},{key:"updateOverlay",value:function(){}},{key:"bindOverlay",value:function(){}},{key:"bindUnits",value:function(){}},{key:"onLeftArrow",value:function(){}},{key:"onRightArrow",value:function(){}},{key:"onUpArrow",value:function(){}},{key:"onDownArrow",value:function(){}},{key:"onEnterKey",value:function(){}},{key:"addDataPoint",value:function(){}},{key:"removeDataPoint",value:function(){}},{key:"getDataPoint",value:function(){}},{key:"setCurrentDataPoint",value:function(){}},{key:"updateDataset",value:function(){}},{key:"export",value:function(){var e=prepareForExport(this.svg);downloadFile(this.title||"Chart",[e])}}]),r}(),_createClass$1=function(){function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),_get$1=function r(e,t,n){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(o===void 0){var a=Object.getPrototypeOf(e);return a===null?void 0:r(a,t,n)}if("value"in o)return o.value;var s=o.get;if(s!==void 0)return s.call(n)},AggregationChart=function(r){function e(t,n){return _classCallCheck$2(this,e),_possibleConstructorReturn$1(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return _inherits$1(e,r),_createClass$1(e,[{key:"configure",value:function(t){_get$1(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"configure",this).call(this,t),this.config.formatTooltipY=(t.tooltipOptions||{}).formatTooltipY,this.config.maxSlices=t.maxSlices||20,this.config.maxLegendPoints=t.maxLegendPoints||20}},{key:"calc",value:function(){var t=this,n=this.state,o=this.config.maxSlices;n.sliceTotals=[];var a=this.data.labels.map(function(f,h){var d=0;return t.data.datasets.map(function(m){d+=m.values[h]}),[d,f]}).filter(function(f){return f[0]>=0}),s=a;if(a.length>o){a.sort(function(f,h){return h[0]-f[0]}),s=a.slice(0,o-1);var l=0;a.slice(o-1).map(function(f){l+=f[0]}),s.push([l,"Rest"]),this.colors[o-1]="grey"}n.labels=[],s.map(function(f){n.sliceTotals.push(round(f[0])),n.labels.push(f[1])}),n.grandTotal=n.sliceTotals.reduce(function(f,h){return f+h},0),this.center={x:this.width/2,y:this.height/2}}},{key:"renderLegend",value:function(){var t=this,n=this.state;this.legendArea.textContent="",this.legendTotals=n.sliceTotals.slice(0,this.config.maxLegendPoints);var o=0,a=0;this.legendTotals.map(function(s,l){var f=150,h=Math.floor((t.width-getExtraWidth(t.measures))/f);t.legendTotals.length<h&&(f=t.width/t.legendTotals.length),o>h&&(o=0,a+=20);var d=f*o+5,m=t.config.truncateLegends?truncateString(n.labels[l],f/10):n.labels[l],_=t.config.formatTooltipY?t.config.formatTooltipY(s):s,b=legendDot(d,a,5,t.colors[l],m+": "+_,!1);t.legendArea.appendChild(b),o++})}}]),e}(BaseChart),NO_OF_YEAR_MONTHS=12,NO_OF_DAYS_IN_WEEK=7,NO_OF_MILLIS=1e3,SEC_IN_DAY=86400,MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December"],DAY_NAMES_SHORT=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],_slicedToArray$3=function(){function r(e,t){var n=[],o=!0,a=!1,s=void 0;try{for(var l,f=e[Symbol.iterator]();!(o=(l=f.next()).done)&&(n.push(l.value),!t||n.length!==t);o=!0);}catch(h){a=!0,s=h}finally{try{!o&&f.return&&f.return()}finally{if(a)throw s}}return n}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return r(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass$4=function(){function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),ChartComponent=function(){function r(e){var t=e.layerClass,n=t===void 0?"":t,o=e.layerTransform,a=o===void 0?"":o,s=e.constants,l=e.getData,f=e.makeElements,h=e.animateElements;_classCallCheck$5(this,r),this.layerTransform=a,this.constants=s,this.makeElements=f,this.getData=l,this.animateElements=h,this.store=[],this.labels=[],this.layerClass=n,this.layerClass=typeof this.layerClass=="function"?this.layerClass():this.layerClass,this.refresh()}return _createClass$4(r,[{key:"refresh",value:function(e){this.data=e||this.getData()}},{key:"setup",value:function(e){this.layer=makeSVGGroup(this.layerClass,this.layerTransform,e)}},{key:"make",value:function(){this.render(this.data),this.oldData=this.data}},{key:"render",value:function(e){var t=this;this.store=this.makeElements(e),this.layer.textContent="",this.store.forEach(function(n){t.layer.appendChild(n)}),this.labels.forEach(function(n){t.layer.appendChild(n)})}},{key:"update",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.refresh();var t=[];return e&&(t=this.animateElements(this.data)||[]),t}}]),r}(),componentConfigs={donutSlices:{layerClass:"donut-slices",makeElements:function(r){return r.sliceStrings.map(function(e,t){var n=makePath(e,"donut-path",r.colors[t],"none",r.strokeWidth);return n.style.transition="transform .3s;",n})},animateElements:function(r){return this.store.map(function(e,t){return animatePathStr(e,r.sliceStrings[t])})}},pieSlices:{layerClass:"pie-slices",makeElements:function(r){return r.sliceStrings.map(function(e,t){var n=makePath(e,"pie-path","none",r.colors[t]);return n.style.transition="transform .3s;",n})},animateElements:function(r){return this.store.map(function(e,t){return animatePathStr(e,r.sliceStrings[t])})}},percentageBars:{layerClass:"percentage-bars",makeElements:function(r){var e=this;return r.xPositions.map(function(t,n){return percentageBar(t,0,r.widths[n],e.constants.barHeight,e.constants.barDepth,r.colors[n])})},animateElements:function(r){if(r)return[]}},yAxis:{layerClass:"y axis",makeElements:function(r){var e=this;return r.positions.map(function(t,n){return yLine(t,r.labels[n],e.constants.width,{mode:e.constants.mode,pos:e.constants.pos,shortenNumbers:e.constants.shortenNumbers})})},animateElements:function(r){var e=r.positions,t=r.labels,n=this.oldData.positions,o=this.oldData.labels,a=equilizeNoOfElements(n,e),s=_slicedToArray$3(a,2);n=s[0],e=s[1];var l=equilizeNoOfElements(o,t),f=_slicedToArray$3(l,2);return o=f[0],t=f[1],this.render({positions:n,labels:t}),this.store.map(function(h,d){return translateHoriLine(h,e[d],n[d])})}},xAxis:{layerClass:"x axis",makeElements:function(r){var e=this;return r.positions.map(function(t,n){return xLine(t,r.calcLabels[n],e.constants.height,{mode:e.constants.mode,pos:e.constants.pos})})},animateElements:function(r){var e=r.positions,t=r.calcLabels,n=this.oldData.positions,o=this.oldData.calcLabels,a=equilizeNoOfElements(n,e),s=_slicedToArray$3(a,2);n=s[0],e=s[1];var l=equilizeNoOfElements(o,t),f=_slicedToArray$3(l,2);return o=f[0],t=f[1],this.render({positions:n,calcLabels:t}),this.store.map(function(h,d){return translateVertLine(h,e[d],n[d])})}},yMarkers:{layerClass:"y-markers",makeElements:function(r){var e=this;return r.map(function(t){return yMarker(t.position,t.label,e.constants.width,{labelPos:t.options.labelPos,mode:"span",lineType:"dashed"})})},animateElements:function(r){var e=equilizeNoOfElements(this.oldData,r),t=_slicedToArray$3(e,2);this.oldData=t[0];var n=(r=t[1]).map(function(l){return l.position}),o=r.map(function(l){return l.label}),a=r.map(function(l){return l.options}),s=this.oldData.map(function(l){return l.position});return this.render(s.map(function(l,f){return{position:s[f],label:o[f],options:a[f]}})),this.store.map(function(l,f){return translateHoriLine(l,n[f],s[f])})}},yRegions:{layerClass:"y-regions",makeElements:function(r){var e=this;return r.map(function(t){return yRegion(t.startPos,t.endPos,e.constants.width,t.label,{labelPos:t.options.labelPos})})},animateElements:function(r){var e=equilizeNoOfElements(this.oldData,r),t=_slicedToArray$3(e,2);this.oldData=t[0];var n=(r=t[1]).map(function(d){return d.endPos}),o=r.map(function(d){return d.label}),a=r.map(function(d){return d.startPos}),s=r.map(function(d){return d.options}),l=this.oldData.map(function(d){return d.endPos}),f=this.oldData.map(function(d){return d.startPos});this.render(l.map(function(d,m){return{startPos:f[m],endPos:l[m],label:o[m],options:s[m]}}));var h=[];return this.store.map(function(d,m){h=h.concat(animateRegion(d,a[m],n[m],l[m]))}),h}},heatDomain:{layerClass:function(){return"heat-domain domain-"+this.constants.index},makeElements:function(r){var e=this,t=this.constants,n=t.index,o=t.colWidth,a=t.rowHeight,s=t.squareSize,l=t.radius,f=t.xTranslate,h=0;return this.serializedSubDomains=[],r.cols.map(function(d,m){m===1&&e.labels.push(makeText("domain-name",f,-12,getMonthName(n,!0).toUpperCase(),{fontSize:9})),d.map(function(_,b){if(_.fill){var w={"data-date":_.yyyyMmDd,"data-value":_.dataValue,"data-day":b},y=heatSquare("day",f,h,s,l,_.fill,w);e.serializedSubDomains.push(y)}h+=a}),h=0,f+=o}),this.serializedSubDomains},animateElements:function(r){if(r)return[]}},barGraph:{layerClass:function(){return"dataset-units dataset-bars dataset-"+this.constants.index},makeElements:function(r){var e=this.constants;return this.unitType="bar",this.units=r.yPositions.map(function(t,n){return datasetBar(r.xPositions[n],t,r.barWidth,e.color,r.labels[n],n,r.offsets[n],{zeroLine:r.zeroLine,barsWidth:r.barsWidth,minHeight:e.minHeight})}),this.units},animateElements:function(r){var e=r.xPositions,t=r.yPositions,n=r.offsets,o=r.labels,a=this.oldData.xPositions,s=this.oldData.yPositions,l=this.oldData.offsets,f=this.oldData.labels,h=equilizeNoOfElements(a,e),d=_slicedToArray$3(h,2);a=d[0],e=d[1];var m=equilizeNoOfElements(s,t),_=_slicedToArray$3(m,2);s=_[0],t=_[1];var b=equilizeNoOfElements(l,n),w=_slicedToArray$3(b,2);l=w[0],n=w[1];var y=equilizeNoOfElements(f,o),E=_slicedToArray$3(y,2);f=E[0],o=E[1],this.render({xPositions:a,yPositions:s,offsets:l,labels:o,zeroLine:this.oldData.zeroLine,barsWidth:this.oldData.barsWidth,barWidth:this.oldData.barWidth});var T=[];return this.store.map(function(N,D){T=T.concat(animateBar(N,e[D],t[D],r.barWidth,n[D],{zeroLine:r.zeroLine}))}),T}},lineGraph:{layerClass:function(){return"dataset-units dataset-line dataset-"+this.constants.index},makeElements:function(r){var e=this.constants;return this.unitType="dot",this.paths={},e.hideLine||(this.paths=getPaths(r.xPositions,r.yPositions,e.color,{heatline:e.heatline,regionFill:e.regionFill,spline:e.spline},{svgDefs:e.svgDefs,zeroLine:r.zeroLine})),this.units=[],e.hideDots||(this.units=r.yPositions.map(function(t,n){return datasetDot(r.xPositions[n],t,r.radius,e.color,e.valuesOverPoints?r.values[n]:"",n)})),Object.values(this.paths).concat(this.units)},animateElements:function(r){var e=r.xPositions,t=r.yPositions,n=r.values,o=this.oldData.xPositions,a=this.oldData.yPositions,s=this.oldData.values,l=equilizeNoOfElements(o,e),f=_slicedToArray$3(l,2);o=f[0],e=f[1];var h=equilizeNoOfElements(a,t),d=_slicedToArray$3(h,2);a=d[0],t=d[1];var m=equilizeNoOfElements(s,n),_=_slicedToArray$3(m,2);s=_[0],n=_[1],this.render({xPositions:o,yPositions:a,values:n,zeroLine:this.oldData.zeroLine,radius:this.oldData.radius});var b=[];return Object.keys(this.paths).length&&(b=b.concat(animatePath(this.paths,e,t,r.zeroLine,this.constants.spline))),this.units.length&&this.units.map(function(w,y){b=b.concat(animateDot(w,e[y],t[y]))}),b}}},_createClass=function(){function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),_get=function r(e,t,n){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(o===void 0){var a=Object.getPrototypeOf(e);return a===null?void 0:r(a,t,n)}if("value"in o)return o.value;var s=o.get;if(s!==void 0)return s.call(n)},PercentageChart=function(r){function e(t,n){_classCallCheck$1(this,e);var o=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return o.type="percentage",o.setup(),o}return _inherits(e,r),_createClass(e,[{key:"setMeasures",value:function(t){var n=this.measures;this.barOptions=t.barOptions||{};var o=this.barOptions;o.height=o.height||PERCENTAGE_BAR_DEFAULT_HEIGHT,o.depth=o.depth||PERCENTAGE_BAR_DEFAULT_DEPTH,n.paddings.right=30,n.legendHeight=60,n.baseHeight=8*(o.height+.5*o.depth)}},{key:"setupComponents",value:function(){var t=this.state,n=[["percentageBars",{barHeight:this.barOptions.height,barDepth:this.barOptions.depth},(function(){return{xPositions:t.xPositions,widths:t.widths,colors:this.colors}}).bind(this)]];this.components=new Map(n.map(function(o){var a=getComponent.apply(void 0,_toConsumableArray(o));return[o[0],a]}))}},{key:"calc",value:function(){var t=this;_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"calc",this).call(this);var n=this.state;n.xPositions=[],n.widths=[];var o=0;n.sliceTotals.map(function(a){var s=t.width*a/n.grandTotal;n.widths.push(s),n.xPositions.push(o),o+=s})}},{key:"makeDataByIndex",value:function(){}},{key:"bindTooltip",value:function(){var t=this,n=this.state;this.container.addEventListener("mousemove",function(o){var a=t.components.get("percentageBars").store,s=o.target;if(a.includes(s)){var l=a.indexOf(s),f=getOffset(t.container),h=getOffset(s),d=h.left-f.left+parseInt(s.getAttribute("width"))/2,m=h.top-f.top,_=(t.formattedLabels&&t.formattedLabels.length>0?t.formattedLabels[l]:t.state.labels[l])+": ",b=n.sliceTotals[l]/n.grandTotal;t.tip.setValues(d,m,{name:_,value:(100*b).toFixed(1)+"%"}),t.tip.showTip()}})}}]),e}(AggregationChart),_createClass$5=function(){function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),_get$2=function r(e,t,n){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(o===void 0){var a=Object.getPrototypeOf(e);return a===null?void 0:r(a,t,n)}if("value"in o)return o.value;var s=o.get;if(s!==void 0)return s.call(n)},PieChart=function(r){function e(t,n){_classCallCheck$6(this,e);var o=_possibleConstructorReturn$2(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return o.type="pie",o.initTimeout=0,o.init=1,o.setup(),o}return _inherits$2(e,r),_createClass$5(e,[{key:"configure",value:function(t){_get$2(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"configure",this).call(this,t),this.mouseMove=this.mouseMove.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.hoverRadio=t.hoverRadio||.1,this.config.startAngle=t.startAngle||0,this.clockWise=t.clockWise||!1}},{key:"calc",value:function(){var t=this;_get$2(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"calc",this).call(this);var n=this.state;this.radius=this.height>this.width?this.center.x:this.center.y;var o=this.radius,a=this.clockWise,s=n.slicesProperties||[];n.sliceStrings=[],n.slicesProperties=[];var l=180-this.config.startAngle;n.sliceTotals.map(function(f,h){var d=l,m=f/n.grandTotal*FULL_ANGLE,_=m>180?1:0,b=a?-m:m,w=l+=b,y=getPositionByAngle(d,o),E=getPositionByAngle(w,o),T=t.init&&s[h],N=void 0,D=void 0;t.init?(N=T?T.startPosition:y,D=T?T.endPosition:y):(N=y,D=E);var C=m===360?makeCircleStr(N,D,t.center,t.radius,a,_):makeArcPathStr(N,D,t.center,t.radius,a,_);n.sliceStrings.push(C),n.slicesProperties.push({startPosition:y,endPosition:E,value:f,total:n.grandTotal,startAngle:d,endAngle:w,angle:b})}),this.init=0}},{key:"setupComponents",value:function(){var t=this.state,n=[["pieSlices",{},(function(){return{sliceStrings:t.sliceStrings,colors:this.colors}}).bind(this)]];this.components=new Map(n.map(function(o){var a=getComponent.apply(void 0,_toConsumableArray$2(o));return[o[0],a]}))}},{key:"calTranslateByAngle",value:function(t){var n=this.radius,o=this.hoverRadio,a=getPositionByAngle(t.startAngle+t.angle/2,n);return"translate3d("+a.x*o+"px,"+a.y*o+"px,0)"}},{key:"hoverSlice",value:function(t,n,o,a){if(t){var s=this.colors[n];if(o){transform(t,this.calTranslateByAngle(this.state.slicesProperties[n])),t.style.fill=lightenDarkenColor(s,50);var l=getOffset(this.svg),f=a.pageX-l.left+10,h=a.pageY-l.top-10,d=(this.formatted_labels&&this.formatted_labels.length>0?this.formatted_labels[n]:this.state.labels[n])+": ",m=(100*this.state.sliceTotals[n]/this.state.grandTotal).toFixed(1);this.tip.setValues(f,h,{name:d,value:m+"%"}),this.tip.showTip()}else transform(t,"translate3d(0,0,0)"),this.tip.hideTip(),t.style.fill=s}}},{key:"bindTooltip",value:function(){this.container.addEventListener("mousemove",this.mouseMove),this.container.addEventListener("mouseleave",this.mouseLeave)}},{key:"mouseMove",value:function(t){var n=t.target,o=this.components.get("pieSlices").store,a=this.curActiveSliceIndex,s=this.curActiveSlice;if(o.includes(n)){var l=o.indexOf(n);this.hoverSlice(s,a,!1),this.curActiveSlice=n,this.curActiveSliceIndex=l,this.hoverSlice(n,l,!0,t)}else this.mouseLeave()}},{key:"mouseLeave",value:function(){this.hoverSlice(this.curActiveSlice,this.curActiveSliceIndex,!1)}}]),e}(AggregationChart),_slicedToArray$4=function(){function r(e,t){var n=[],o=!0,a=!1,s=void 0;try{for(var l,f=e[Symbol.iterator]();!(o=(l=f.next()).done)&&(n.push(l.value),!t||n.length!==t);o=!0);}catch(h){a=!0,s=h}finally{try{!o&&f.return&&f.return()}finally{if(a)throw s}}return n}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return r(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass$6=function(){function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),COL_WIDTH=HEATMAP_SQUARE_SIZE+HEATMAP_GUTTER_SIZE,ROW_HEIGHT=COL_WIDTH,Heatmap=function(r){function e(t,n){_classCallCheck$7(this,e);var o=_possibleConstructorReturn$3(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));o.type="heatmap",o.countLabel=n.countLabel||"";var a=["Sunday","Monday"],s=a.includes(n.startSubDomain)?n.startSubDomain:"Sunday";return o.startSubDomainIndex=a.indexOf(s),o.setup(),o}return _inherits$3(e,r),_createClass$6(e,[{key:"setMeasures",value:function(t){var n=this.measures;this.discreteDomains=t.discreteDomains===0?0:1,n.paddings.top=3*ROW_HEIGHT,n.paddings.bottom=0,n.legendHeight=2*ROW_HEIGHT,n.baseHeight=ROW_HEIGHT*NO_OF_DAYS_IN_WEEK+getExtraHeight(n);var o=this.data,a=this.discreteDomains?NO_OF_YEAR_MONTHS:0;this.independentWidth=(getWeeksBetween(o.start,o.end)+a)*COL_WIDTH+getExtraWidth(n)}},{key:"updateWidth",value:function(){var t=this.discreteDomains?NO_OF_YEAR_MONTHS:0,n=this.state.noOfWeeks?this.state.noOfWeeks:52;this.baseWidth=(n+t)*COL_WIDTH+getExtraWidth(this.measures)}},{key:"prepareData",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.data;if(t.start&&t.end&&t.start>t.end)throw new Error("Start date cannot be greater than end date.");if(t.start||(t.start=new Date,t.start.setFullYear(t.start.getFullYear()-1)),t.end||(t.end=new Date),t.dataPoints=t.dataPoints||{},parseInt(Object.keys(t.dataPoints)[0])>1e5){var n={};Object.keys(t.dataPoints).forEach(function(o){var a=new Date(o*NO_OF_MILLIS);n[getYyyyMmDd(a)]=t.dataPoints[o]}),t.dataPoints=n}return t}},{key:"calc",value:function(){var t=this.state;t.start=clone(this.data.start),t.end=clone(this.data.end),t.firstWeekStart=clone(t.start),t.noOfWeeks=getWeeksBetween(t.start,t.end),t.distribution=calcDistribution(Object.values(this.data.dataPoints),HEATMAP_DISTRIBUTION_SIZE),t.domainConfigs=this.getDomains()}},{key:"setupComponents",value:function(){var t=this,n=this.state,o=this.discreteDomains?0:1,a=n.domainConfigs.map(function(l,f){return["heatDomain",{index:l.index,colWidth:COL_WIDTH,rowHeight:ROW_HEIGHT,squareSize:HEATMAP_SQUARE_SIZE,radius:t.rawChartArgs.radius||0,xTranslate:n.domainConfigs.filter(function(h,d){return d<f}).map(function(h){return h.cols.length-o}).reduce(function(h,d){return h+d},0)*COL_WIDTH},(function(){return n.domainConfigs[f]}).bind(t)]});this.components=new Map(a.map(function(l,f){var h=getComponent.apply(void 0,_toConsumableArray$3(l));return[l[0]+"-"+f,h]}));var s=0;DAY_NAMES_SHORT.forEach(function(l,f){if([1,3,5].includes(f)){var h=makeText("subdomain-name",-COL_WIDTH/2,s,l,{fontSize:HEATMAP_SQUARE_SIZE,dy:8,textAnchor:"end"});t.drawArea.appendChild(h)}s+=ROW_HEIGHT})}},{key:"update",value:function(t){t||console.error("No data to update."),this.data=this.prepareData(t),this.draw(),this.bindTooltip()}},{key:"bindTooltip",value:function(){var t=this;this.container.addEventListener("mousemove",function(n){t.components.forEach(function(o){var a=o.store,s=n.target;if(a.includes(s)){var l=s.getAttribute("data-value"),f=s.getAttribute("data-date").split("-"),h=getMonthName(parseInt(f[1])-1,!0),d=t.container.getBoundingClientRect(),m=s.getBoundingClientRect(),_=parseInt(n.target.getAttribute("width")),b=m.left-d.left+_/2,w=m.top-d.top,y=l+" "+t.countLabel,E=" on "+h+" "+f[0]+", "+f[2];t.tip.setValues(b,w,{name:E,value:y,valueFirst:1},[]),t.tip.showTip()}})})}},{key:"renderLegend",value:function(){var t=this;this.legendArea.textContent="";var n=0,o=ROW_HEIGHT,a=this.rawChartArgs.radius||0,s=makeText("subdomain-name",n,o,"Less",{fontSize:HEATMAP_SQUARE_SIZE+1,dy:9});n=2*COL_WIDTH+COL_WIDTH/2,this.legendArea.appendChild(s),this.colors.slice(0,HEATMAP_DISTRIBUTION_SIZE).map(function(f,h){var d=heatSquare("heatmap-legend-unit",n+(COL_WIDTH+3)*h,o,HEATMAP_SQUARE_SIZE,a,f);t.legendArea.appendChild(d)});var l=makeText("subdomain-name",n+HEATMAP_DISTRIBUTION_SIZE*(COL_WIDTH+3)+COL_WIDTH/4,o,"More",{fontSize:HEATMAP_SQUARE_SIZE+1,dy:9});this.legendArea.appendChild(l)}},{key:"getDomains",value:function(){for(var t=this.state,n=[t.start.getMonth(),t.start.getFullYear()],o=n[0],a=n[1],s=[t.end.getMonth(),t.end.getFullYear()],l=s[0]-o+1+12*(s[1]-a),f=[],h=clone(t.start),d=0;d<l;d++){var m=t.end;if(!areInSameMonth(h,t.end)){var _=[h.getMonth(),h.getFullYear()];m=getLastDateInMonth(_[0],_[1])}f.push(this.getDomainConfig(h,m)),addDays(m,1),h=m}return f}},{key:"getDomainConfig",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",o=[t.getMonth(),t.getFullYear()],a=o[0],s=o[1],l=setDayToSunday(t),f={index:a,cols:[]};addDays(n=clone(n)||getLastDateInMonth(a,s),1);for(var h=getWeeksBetween(l,n),d=[],m=void 0,_=0;_<h;_++)m=this.getCol(l,a),d.push(m),addDays(l=new Date(m[NO_OF_DAYS_IN_WEEK-1].yyyyMmDd),1);return m[NO_OF_DAYS_IN_WEEK-1].dataValue!==void 0&&(addDays(l,1),d.push(this.getCol(l,a,!0))),f.cols=d,f}},{key:"getCol",value:function(t,n){for(var o=arguments.length>2&&arguments[2]!==void 0&&arguments[2],a=this.state,s=clone(t),l=[],f=0;f<NO_OF_DAYS_IN_WEEK;f++,addDays(s,1)){var h={},d=s>=a.start&&s<=a.end;o||s.getMonth()!==n||!d?h.yyyyMmDd=getYyyyMmDd(s):h=this.getSubDomainConfig(s),l.push(h)}return l}},{key:"getSubDomainConfig",value:function(t){var n=getYyyyMmDd(t),o=this.data.dataPoints[n];return{yyyyMmDd:n,dataValue:o||0,fill:this.colors[getMaxCheckpoint(o,this.state.distribution)]}}}]),e}(BaseChart),_createClass$7=function(){function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),_get$3=function r(e,t,n){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(o===void 0){var a=Object.getPrototypeOf(e);return a===null?void 0:r(a,t,n)}if("value"in o)return o.value;var s=o.get;if(s!==void 0)return s.call(n)},AxisChart=function(r){function e(t,n){_classCallCheck$8(this,e);var o=_possibleConstructorReturn$4(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return o.barOptions=n.barOptions||{},o.lineOptions=n.lineOptions||{},o.type=n.type||"line",o.init=1,o.setup(),o}return _inherits$4(e,r),_createClass$7(e,[{key:"setMeasures",value:function(){this.data.datasets.length<=1&&(this.config.showLegend=0,this.measures.paddings.bottom=30)}},{key:"configure",value:function(t){_get$3(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"configure",this).call(this,t),t.axisOptions=t.axisOptions||{},t.tooltipOptions=t.tooltipOptions||{},this.config.xAxisMode=t.axisOptions.xAxisMode||"span",this.config.yAxisMode=t.axisOptions.yAxisMode||"span",this.config.xIsSeries=t.axisOptions.xIsSeries||0,this.config.shortenYAxisNumbers=t.axisOptions.shortenYAxisNumbers||0,this.config.formatTooltipX=t.tooltipOptions.formatTooltipX,this.config.formatTooltipY=t.tooltipOptions.formatTooltipY,this.config.valuesOverPoints=t.valuesOverPoints}},{key:"prepareData",value:function(){return dataPrep(arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.data,this.type)}},{key:"prepareFirstData",value:function(){return zeroDataPrep(arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.data)}},{key:"calc",value:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.calcXPositions(),t||this.calcYAxisParameters(this.getAllYValues(),this.type==="line"),this.makeDataByIndex()}},{key:"calcXPositions",value:function(){var t=this.state,n=this.data.labels;t.datasetLength=n.length,t.unitWidth=this.width/t.datasetLength,t.xOffset=t.unitWidth/2,t.xAxis={labels:n,positions:n.map(function(o,a){return floatTwo(t.xOffset+a*t.unitWidth)})}}},{key:"calcYAxisParameters",value:function(t){var n=calcChartIntervals(t,arguments.length>1&&arguments[1]!==void 0?arguments[1]:"false"),o=this.height/getValueRange(n),a=getIntervalSize(n)*o,s=this.height-getZeroIndex(n)*a;this.state.yAxis={labels:n,positions:n.map(function(l){return s-l*o}),scaleMultiplier:o,zeroLine:s},this.calcDatasetPoints(),this.calcYExtremes(),this.calcYRegions()}},{key:"calcDatasetPoints",value:function(){var t=this.state,n=function(o){return o.map(function(a){return scale(a,t.yAxis)})};t.datasets=this.data.datasets.map(function(o,a){var s=o.values,l=o.cumulativeYs||[];return{name:o.name&&o.name.replace(/<|>|&/g,function(f){return f=="&"?"&amp;":f=="<"?"&lt;":"&gt;"}),index:a,chartType:o.chartType,values:s,yPositions:n(s),cumulativeYs:l,cumulativeYPos:n(l)}})}},{key:"calcYExtremes",value:function(){var t=this.state;if(this.barOptions.stacked)return void(t.yExtremes=t.datasets[t.datasets.length-1].cumulativeYPos);t.yExtremes=new Array(t.datasetLength).fill(9999),t.datasets.map(function(n){n.yPositions.map(function(o,a){o<t.yExtremes[a]&&(t.yExtremes[a]=o)})})}},{key:"calcYRegions",value:function(){var t=this.state;this.data.yMarkers&&(this.state.yMarkers=this.data.yMarkers.map(function(n){return n.position=scale(n.value,t.yAxis),n.options||(n.options={}),n})),this.data.yRegions&&(this.state.yRegions=this.data.yRegions.map(function(n){return n.startPos=scale(n.start,t.yAxis),n.endPos=scale(n.end,t.yAxis),n.options||(n.options={}),n}))}},{key:"getAllYValues",value:function(){var t,n=this,o="values";if(this.barOptions.stacked){o="cumulativeYs";var a=new Array(this.state.datasetLength).fill(0);this.data.datasets.map(function(l,f){var h=n.data.datasets[f].values;l[o]=a=a.map(function(d,m){return d+h[m]})})}var s=this.data.datasets.map(function(l){return l[o]});return this.data.yMarkers&&s.push(this.data.yMarkers.map(function(l){return l.value})),this.data.yRegions&&this.data.yRegions.map(function(l){s.push([l.end,l.start])}),(t=[]).concat.apply(t,_toConsumableArray$5(s))}},{key:"setupComponents",value:function(){var t=this,n=[["yAxis",{mode:this.config.yAxisMode,width:this.width,shortenNumbers:this.config.shortenYAxisNumbers},(function(){return this.state.yAxis}).bind(this)],["xAxis",{mode:this.config.xAxisMode,height:this.height},(function(){var d=this.state;return d.xAxis.calcLabels=getShortenedLabels(this.width,d.xAxis.labels,this.config.xIsSeries),d.xAxis}).bind(this)],["yRegions",{width:this.width,pos:"right"},(function(){return this.state.yRegions}).bind(this)]],o=this.state.datasets.filter(function(d){return d.chartType==="bar"}),a=this.state.datasets.filter(function(d){return d.chartType==="line"}),s=o.map(function(d){var m=d.index;return["barGraph-"+d.index,{index:m,color:t.colors[m],stacked:t.barOptions.stacked,valuesOverPoints:t.config.valuesOverPoints,minHeight:t.height*MIN_BAR_PERCENT_HEIGHT},(function(){var _=this.state,b=_.datasets[m],w=this.barOptions.stacked,y=this.barOptions.spaceRatio||BAR_CHART_SPACE_RATIO,E=_.unitWidth*(1-y),T=E/(w?1:o.length),N=_.xAxis.positions.map(function(A){return A-E/2});w||(N=N.map(function(A){return A+T*m}));var D=new Array(_.datasetLength).fill("");this.config.valuesOverPoints&&(D=w&&b.index===_.datasets.length-1?b.cumulativeYs:b.values);var C=new Array(_.datasetLength).fill(0);return w&&(C=b.yPositions.map(function(A,S){return A-b.cumulativeYPos[S]})),{xPositions:N,yPositions:b.yPositions,offsets:C,labels:D,zeroLine:_.yAxis.zeroLine,barsWidth:E,barWidth:T}}).bind(t)]}),l=a.map(function(d){var m=d.index;return["lineGraph-"+d.index,{index:m,color:t.colors[m],svgDefs:t.svgDefs,heatline:t.lineOptions.heatline,regionFill:t.lineOptions.regionFill,spline:t.lineOptions.spline,hideDots:t.lineOptions.hideDots,hideLine:t.lineOptions.hideLine,valuesOverPoints:t.config.valuesOverPoints},(function(){var _=this.state,b=_.datasets[m],w=_.yAxis.positions[0]<_.yAxis.zeroLine?_.yAxis.positions[0]:_.yAxis.zeroLine;return{xPositions:_.xAxis.positions,yPositions:b.yPositions,values:b.values,zeroLine:w,radius:this.lineOptions.dotSize||LINE_CHART_DOT_SIZE}}).bind(t)]}),f=[["yMarkers",{width:this.width,pos:"right"},(function(){return this.state.yMarkers}).bind(this)]];n=n.concat(s,l,f);var h=["yMarkers","yRegions"];this.dataUnitComponents=[],this.components=new Map(n.filter(function(d){return!h.includes(d[0])||t.state[d[0]]}).map(function(d){var m=getComponent.apply(void 0,_toConsumableArray$5(d));return(d[0].includes("lineGraph")||d[0].includes("barGraph"))&&t.dataUnitComponents.push(m),[d[0],m]}))}},{key:"makeDataByIndex",value:function(){var t=this;this.dataByIndex={};var n=this.state,o=this.config.formatTooltipX,a=this.config.formatTooltipY;n.xAxis.labels.map(function(s,l){var f=t.state.datasets.map(function(h,d){var m=h.values[l];return{title:h.name,value:m,yPos:h.yPositions[l],color:t.colors[d],formatted:a?a(m):m}});t.dataByIndex[l]={label:s,formattedLabel:o?o(s):s,xPos:n.xAxis.positions[l],values:f,yExtreme:n.yExtremes[l]}})}},{key:"bindTooltip",value:function(){var t=this;this.container.addEventListener("mousemove",function(n){var o=t.measures,a=getOffset(t.container),s=n.pageX-a.left-getLeftOffset(o),l=n.pageY-a.top;l<t.height+getTopOffset(o)&&l>getTopOffset(o)?t.mapTooltipXPosition(s):t.tip.hideTip()})}},{key:"mapTooltipXPosition",value:function(t){var n=this.state;if(n.yExtremes){var o=getClosestInArray(t,n.xAxis.positions,!0);if(o>=0){var a=this.dataByIndex[o];this.tip.setValues(a.xPos+this.tip.offset.x,a.yExtreme+this.tip.offset.y,{name:a.formattedLabel,value:""},a.values,o),this.tip.showTip()}}}},{key:"renderLegend",value:function(){var t=this,n=this.data;n.datasets.length>1&&(this.legendArea.textContent="",n.datasets.map(function(o,a){var s=AXIS_LEGEND_BAR_SIZE,l=legendBar(s*a,"0",s,t.colors[a],o.name,t.config.truncateLegends);t.legendArea.appendChild(l)}))}},{key:"makeOverlay",value:function(){var t=this;if(this.init)return void(this.init=0);this.overlayGuides&&this.overlayGuides.forEach(function(n){var o=n.overlay;o.parentNode.removeChild(o)}),this.overlayGuides=this.dataUnitComponents.map(function(n){return{type:n.unitType,overlay:void 0,units:n.units}}),this.state.currentIndex===void 0&&(this.state.currentIndex=this.state.datasetLength-1),this.overlayGuides.map(function(n){var o=n.units[t.state.currentIndex];n.overlay=makeOverlay[n.type](o),t.drawArea.appendChild(n.overlay)})}},{key:"updateOverlayGuides",value:function(){this.overlayGuides&&this.overlayGuides.forEach(function(t){var n=t.overlay;n.parentNode.removeChild(n)})}},{key:"bindOverlay",value:function(){var t=this;this.parent.addEventListener("data-select",function(){t.updateOverlay()})}},{key:"bindUnits",value:function(){var t=this;this.dataUnitComponents.map(function(n){n.units.map(function(o){o.addEventListener("click",function(){var a=o.getAttribute("data-point-index");t.setCurrentDataPoint(a)})})}),this.tip.container.addEventListener("click",function(){var n=t.tip.container.getAttribute("data-point-index");t.setCurrentDataPoint(n)})}},{key:"updateOverlay",value:function(){var t=this;this.overlayGuides.map(function(n){var o=n.units[t.state.currentIndex];updateOverlay[n.type](o,n.overlay)})}},{key:"onLeftArrow",value:function(){this.setCurrentDataPoint(this.state.currentIndex-1)}},{key:"onRightArrow",value:function(){this.setCurrentDataPoint(this.state.currentIndex+1)}},{key:"getDataPoint",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.state.currentIndex,n=this.state;return{index:t,label:n.xAxis.labels[t],values:n.datasets.map(function(o){return o.values[t]})}}},{key:"setCurrentDataPoint",value:function(t){var n=this.state;(t=parseInt(t))<0&&(t=0),t>=n.xAxis.labels.length&&(t=n.xAxis.labels.length-1),t!==n.currentIndex&&(n.currentIndex=t,fire(this.parent,"data-select",this.getDataPoint()))}},{key:"addDataPoint",value:function(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.state.datasetLength;_get$3(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addDataPoint",this).call(this,t,n,o),this.data.labels.splice(o,0,t),this.data.datasets.map(function(a,s){a.values.splice(o,0,n[s])}),this.update(this.data)}},{key:"removeDataPoint",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.state.datasetLength-1;this.data.labels.length<=1||(_get$3(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removeDataPoint",this).call(this,t),this.data.labels.splice(t,1),this.data.datasets.map(function(n){n.values.splice(t,1)}),this.update(this.data))}},{key:"updateDataset",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.data.datasets[n].values=t,this.update(this.data)}},{key:"updateDatasets",value:function(t){this.data.datasets.map(function(n,o){t[o]&&(n.values=t[o])}),this.update(this.data)}}]),e}(BaseChart),_createClass$8=function(){function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),_get$4=function r(e,t,n){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(o===void 0){var a=Object.getPrototypeOf(e);return a===null?void 0:r(a,t,n)}if("value"in o)return o.value;var s=o.get;if(s!==void 0)return s.call(n)},DonutChart=function(r){function e(t,n){_classCallCheck$9(this,e);var o=_possibleConstructorReturn$5(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return o.type="donut",o.initTimeout=0,o.init=1,o.setup(),o}return _inherits$5(e,r),_createClass$8(e,[{key:"configure",value:function(t){_get$4(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"configure",this).call(this,t),this.mouseMove=this.mouseMove.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.hoverRadio=t.hoverRadio||.1,this.config.startAngle=t.startAngle||0,this.clockWise=t.clockWise||!1,this.strokeWidth=t.strokeWidth||30}},{key:"calc",value:function(){var t=this;_get$4(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"calc",this).call(this);var n=this.state;this.radius=this.height>this.width?this.center.x-this.strokeWidth/2:this.center.y-this.strokeWidth/2;var o=this.radius,a=this.clockWise,s=n.slicesProperties||[];n.sliceStrings=[],n.slicesProperties=[];var l=180-this.config.startAngle;n.sliceTotals.map(function(f,h){var d=l,m=f/n.grandTotal*FULL_ANGLE,_=m>180?1:0,b=a?-m:m,w=l+=b,y=getPositionByAngle(d,o),E=getPositionByAngle(w,o),T=t.init&&s[h],N=void 0,D=void 0;t.init?(N=T?T.startPosition:y,D=T?T.endPosition:y):(N=y,D=E);var C=m===360?makeStrokeCircleStr(N,D,t.center,t.radius,t.clockWise,_):makeArcStrokePathStr(N,D,t.center,t.radius,t.clockWise,_);n.sliceStrings.push(C),n.slicesProperties.push({startPosition:y,endPosition:E,value:f,total:n.grandTotal,startAngle:d,endAngle:w,angle:b})}),this.init=0}},{key:"setupComponents",value:function(){var t=this.state,n=[["donutSlices",{},(function(){return{sliceStrings:t.sliceStrings,colors:this.colors,strokeWidth:this.strokeWidth}}).bind(this)]];this.components=new Map(n.map(function(o){var a=getComponent.apply(void 0,_toConsumableArray$7(o));return[o[0],a]}))}},{key:"calTranslateByAngle",value:function(t){var n=this.radius,o=this.hoverRadio,a=getPositionByAngle(t.startAngle+t.angle/2,n);return"translate3d("+a.x*o+"px,"+a.y*o+"px,0)"}},{key:"hoverSlice",value:function(t,n,o,a){if(t){var s=this.colors[n];if(o){transform(t,this.calTranslateByAngle(this.state.slicesProperties[n])),t.style.stroke=lightenDarkenColor(s,50);var l=getOffset(this.svg),f=a.pageX-l.left+10,h=a.pageY-l.top-10,d=(this.formatted_labels&&this.formatted_labels.length>0?this.formatted_labels[n]:this.state.labels[n])+": ",m=(100*this.state.sliceTotals[n]/this.state.grandTotal).toFixed(1);this.tip.setValues(f,h,{name:d,value:m+"%"}),this.tip.showTip()}else transform(t,"translate3d(0,0,0)"),this.tip.hideTip(),t.style.stroke=s}}},{key:"bindTooltip",value:function(){this.container.addEventListener("mousemove",this.mouseMove),this.container.addEventListener("mouseleave",this.mouseLeave)}},{key:"mouseMove",value:function(t){var n=t.target,o=this.components.get("donutSlices").store,a=this.curActiveSliceIndex,s=this.curActiveSlice;if(o.includes(n)){var l=o.indexOf(n);this.hoverSlice(s,a,!1),this.curActiveSlice=n,this.curActiveSliceIndex=l,this.hoverSlice(n,l,!0,t)}else this.mouseLeave()}},{key:"mouseLeave",value:function(){this.hoverSlice(this.curActiveSlice,this.curActiveSliceIndex,!1)}}]),e}(AggregationChart),chartTypes={bar:AxisChart,line:AxisChart,percentage:PercentageChart,heatmap:Heatmap,pie:PieChart,donut:DonutChart},Chart=function r(e,t){return _classCallCheck(this,r),getChartByType(t.type,e,t)};function create_fragment$2(r){let e,t,n;return{c(){e=element("div")},l(o){e=claim_element(o,"DIV",{}),children(e).forEach(detach)},m(o,a){insert_hydration(o,e,a),r[18](e),t||(n=listen(e,"data-select",r[17]),t=!0)},p:noop$2,i:noop$2,o:noop$2,d(o){o&&detach(e),r[18](null),t=!1,n()}}}function instance$2(r,e,t){let{data:n={labels:[],datasets:[{values:[]}],yMarkers:{},yRegions:[]}}=e,{title:o=""}=e,{type:a="line"}=e,{height:s=300}=e,{animate:l=!0}=e,{axisOptions:f={}}=e,{barOptions:h={}}=e,{lineOptions:d={}}=e,{tooltipOptions:m={}}=e,{colors:_=[]}=e,{valuesOverPoints:b=0}=e,{isNavigable:w=!1}=e,{maxSlices:y=3}=e,E=null,T;function N(x){return function(...M){if(E)return x(...M)}}const D=N((x,R,M)=>E.addDataPoint(x,R,M)),C=N(x=>E.removeDataPoint(x)),A=N(()=>E.export()),S=N(x=>E.update(x));onMount(()=>{E=new Chart(T,{data:n,title:o,type:a,height:s,animate:l,colors:_,axisOptions:f,barOptions:h,lineOptions:d,tooltipOptions:m,valuesOverPoints:b,isNavigable:w,maxSlices:y})}),onDestroy(()=>{E=null});function I(x){bubble.call(this,r,x)}function L(x){binding_callbacks[x?"unshift":"push"](()=>{T=x,t(0,T)})}return r.$$set=x=>{"data"in x&&t(1,n=x.data),"title"in x&&t(2,o=x.title),"type"in x&&t(3,a=x.type),"height"in x&&t(4,s=x.height),"animate"in x&&t(5,l=x.animate),"axisOptions"in x&&t(6,f=x.axisOptions),"barOptions"in x&&t(7,h=x.barOptions),"lineOptions"in x&&t(8,d=x.lineOptions),"tooltipOptions"in x&&t(9,m=x.tooltipOptions),"colors"in x&&t(10,_=x.colors),"valuesOverPoints"in x&&t(11,b=x.valuesOverPoints),"isNavigable"in x&&t(12,w=x.isNavigable),"maxSlices"in x&&t(13,y=x.maxSlices)},r.$$.update=()=>{r.$$.dirty&2&&S(n)},[T,n,o,a,s,l,f,h,d,m,_,b,w,y,D,C,A,I,L]}class Base extends SvelteComponent{constructor(e){super(),init(this,e,instance$2,create_fragment$2,safe_not_equal,{data:1,title:2,type:3,height:4,animate:5,axisOptions:6,barOptions:7,lineOptions:8,tooltipOptions:9,colors:10,valuesOverPoints:11,isNavigable:12,maxSlices:13,addDataPoint:14,removeDataPoint:15,exportChart:16})}get addDataPoint(){return this.$$.ctx[14]}get removeDataPoint(){return this.$$.ctx[15]}get exportChart(){return this.$$.ctx[16]}}const Base$1=Base;function create_if_block_1(r){let e,t,n,o,a,s,l;return s=new SubmitReview({}),{c(){e=element("div"),t=element("h3"),n=text("Be the first to review this website"),o=space(),a=element("div"),create_component(s.$$.fragment),this.h()},l(f){e=claim_element(f,"DIV",{class:!0});var h=children(e);t=claim_element(h,"H3",{class:!0});var d=children(t);n=claim_text(d,"Be the first to review this website"),d.forEach(detach),o=claim_space(h),a=claim_element(h,"DIV",{class:!0});var m=children(a);claim_component(s.$$.fragment,m),m.forEach(detach),h.forEach(detach),this.h()},h(){attr(t,"class","text-3xl text-center"),attr(a,"class","card-actions justify-end"),attr(e,"class","flex flex-col gap-28 items-center")},m(f,h){insert_hydration(f,e,h),append_hydration(e,t),append_hydration(t,n),append_hydration(e,o),append_hydration(e,a),mount_component(s,a,null),l=!0},p:noop$2,i(f){l||(transition_in(s.$$.fragment,f),l=!0)},o(f){transition_out(s.$$.fragment,f),l=!1},d(f){f&&detach(e),destroy_component(s)}}}function create_if_block$1(r){let e,t,n,o,a,s,l,f,h,d,m,_,b,w,y,E,T,N;return n=new Base$1({props:{data:r[1],type:"donut",height:300,width:300}}),y=new Review({props:{urlWithoutProtocol:r[3]}}),T=new SubmitReview({}),{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),o=space(),a=element("div"),s=space(),l=element("br"),f=space(),h=element("div"),d=element("div"),m=element("h2"),_=text("What people say"),b=space(),w=element("div"),create_component(y.$$.fragment),E=space(),create_component(T.$$.fragment),this.h()},l(D){e=claim_element(D,"DIV",{class:!0});var C=children(e);t=claim_element(C,"DIV",{class:!0});var A=children(t);claim_component(n.$$.fragment,A),o=claim_space(A),a=claim_element(A,"DIV",{}),children(a).forEach(detach),A.forEach(detach),C.forEach(detach),s=claim_space(D),l=claim_element(D,"BR",{}),f=claim_space(D),h=claim_element(D,"DIV",{class:!0});var S=children(h);d=claim_element(S,"DIV",{class:!0});var I=children(d);m=claim_element(I,"H2",{class:!0});var L=children(m);_=claim_text(L,"What people say"),L.forEach(detach),b=claim_space(I),w=claim_element(I,"DIV",{class:!0});var x=children(w);claim_component(y.$$.fragment,x),E=claim_space(x),claim_component(T.$$.fragment,x),x.forEach(detach),I.forEach(detach),S.forEach(detach),this.h()},h(){attr(t,"class","block w-auto h-max"),attr(e,"class","justify-center"),attr(m,"class","px-5 text-xl font-bold text-center dark:text-white"),attr(w,"class","card-actions mt-4 justify-center"),attr(d,"class","p-4"),attr(h,"class","w-auto shadow-lg dark:shadow-green-300/30 rounded-lg")},m(D,C){insert_hydration(D,e,C),append_hydration(e,t),mount_component(n,t,null),append_hydration(t,o),append_hydration(t,a),insert_hydration(D,s,C),insert_hydration(D,l,C),insert_hydration(D,f,C),insert_hydration(D,h,C),append_hydration(h,d),append_hydration(d,m),append_hydration(m,_),append_hydration(d,b),append_hydration(d,w),mount_component(y,w,null),append_hydration(w,E),mount_component(T,w,null),N=!0},p(D,C){const A={};C&2&&(A.data=D[1]),n.$set(A);const S={};C&8&&(S.urlWithoutProtocol=D[3]),y.$set(S)},i(D){N||(transition_in(n.$$.fragment,D),transition_in(y.$$.fragment,D),transition_in(T.$$.fragment,D),N=!0)},o(D){transition_out(n.$$.fragment,D),transition_out(y.$$.fragment,D),transition_out(T.$$.fragment,D),N=!1},d(D){D&&detach(e),destroy_component(n),D&&detach(s),D&&detach(l),D&&detach(f),D&&detach(h),destroy_component(y),destroy_component(T)}}}function create_fragment$1(r){let e,t,n,o,a,s,l,f,h,d,m,_,b;t=new Header({});const w=[create_if_block$1,create_if_block_1],y=[];function E(T,N){return T[0]&&T[0].length>0?0:T[0]&&T[0].length<=0||!T[0]?1:-1}return~(f=E(r))&&(h=y[f]=w[f](r)),_=new Loader({}),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),o=element("div"),a=text(r[3]),s=space(),l=element("div"),h&&h.c(),d=space(),m=element("div"),create_component(_.$$.fragment),this.h()},l(T){e=claim_element(T,"DIV",{});var N=children(e);claim_component(t.$$.fragment,N),n=claim_space(N),o=claim_element(N,"DIV",{class:!0});var D=children(o);a=claim_text(D,r[3]),D.forEach(detach),s=claim_space(N),l=claim_element(N,"DIV",{class:!0});var C=children(l);h&&h.l(C),C.forEach(detach),d=claim_space(N),m=claim_element(N,"DIV",{class:!0});var A=children(m);claim_component(_.$$.fragment,A),A.forEach(detach),N.forEach(detach),this.h()},h(){attr(o,"class","text-center text-xl text-bold dark:text-white p-2 m-5 border border-zinc-600 dark:border-green-400 rounded-full flex justify-center items-center"),attr(l,"class","bg-white text-black dark:bg-gray-900 dark:text-white"),attr(m,"class","modal h-screen z-10 absolute top-0 flex justify-center items-center"),toggle_class(m,"modal-open",r[2])},m(T,N){insert_hydration(T,e,N),mount_component(t,e,null),append_hydration(e,n),append_hydration(e,o),append_hydration(o,a),append_hydration(e,s),append_hydration(e,l),~f&&y[f].m(l,null),append_hydration(e,d),append_hydration(e,m),mount_component(_,m,null),b=!0},p(T,[N]){(!b||N&8)&&set_data(a,T[3]);let D=f;f=E(T),f===D?~f&&y[f].p(T,N):(h&&(group_outros(),transition_out(y[D],1,1,()=>{y[D]=null}),check_outros()),~f?(h=y[f],h?h.p(T,N):(h=y[f]=w[f](T),h.c()),transition_in(h,1),h.m(l,null)):h=null),(!b||N&4)&&toggle_class(m,"modal-open",T[2])},i(T){b||(transition_in(t.$$.fragment,T),transition_in(h),transition_in(_.$$.fragment,T),b=!0)},o(T){transition_out(t.$$.fragment,T),transition_out(h),transition_out(_.$$.fragment,T),b=!1},d(T){T&&detach(e),destroy_component(t),~f&&y[f].d(),destroy_component(_)}}}function instance$1(r,e,t){let n,o,a=[],s,l=!1;const f=async()=>{var m;t(2,l=!0);try{const[_]=await chrome.tabs.query({active:!0,currentWindow:!0});t(4,o=(m=_.url)==null?void 0:m.toLocaleLowerCase())}catch(_){console.log(_)}finally{t(2,l=!1)}};let h=async()=>{let m="";jwtToken.subscribe(y=>m=y);const _={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`}},w=await(await fetch(`${PUBLIC_GATEWAY_URL}/stats?domain=${n}`,_)).json();t(0,a=w.payload),console.log(w)};const d=async()=>{t(1,s={labels:[],datasets:[{values:[]}]}),a&&a.forEach(m=>{s.labels.push(m.siteSafety),s.datasets[0].values.push(Number(m.count))})};return onMount(async()=>{await f(),await h(),await d()}),r.$$.update=()=>{r.$$.dirty&16&&t(3,n=o==null?void 0:o.replace(/^https?:\/\/([^/]+)\/.*/,"$1"))},[a,s,l,n,o]}class Dashboard extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment$1,safe_not_equal,{})}}function create_else_block(r){let e,t;return e=new Dashboard({}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,o){mount_component(e,n,o),t=!0},p:noop$2,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block(r){let e,t,n,o,a,s,l,f,h,d,m,_,b,w,y,E,T,N,D,C;return t=new Header({}),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),o=element("div"),a=element("img"),l=space(),f=element("div"),h=element("h1"),d=text("Welcome "),m=element("br"),_=text(" to Netsepio"),b=space(),w=element("div"),y=element("a"),E=element("button"),T=text("Dashboard"),this.h()},l(A){e=claim_element(A,"DIV",{});var S=children(e);claim_component(t.$$.fragment,S),n=claim_space(S),o=claim_element(S,"DIV",{class:!0});var I=children(o);a=claim_element(I,"IMG",{src:!0,alt:!0,class:!0}),l=claim_space(I),f=claim_element(I,"DIV",{class:!0});var L=children(f);h=claim_element(L,"H1",{class:!0});var x=children(h);d=claim_text(x,"Welcome "),m=claim_element(x,"BR",{}),_=claim_text(x," to Netsepio"),x.forEach(detach),b=claim_space(L),w=claim_element(L,"DIV",{class:!0});var R=children(w);y=claim_element(R,"A",{href:!0});var M=children(y);E=claim_element(M,"BUTTON",{class:!0});var K=children(E);T=claim_text(K,"Dashboard"),K.forEach(detach),M.forEach(detach),R.forEach(detach),L.forEach(detach),I.forEach(detach),S.forEach(detach),this.h()},h(){src_url_equal(a.src,s=src)||attr(a,"src",s),attr(a,"alt","NetSepio logo"),attr(a,"class","w-1/2 mx-auto block"),attr(h,"class","text-4xl font-bold text-center"),attr(E,"class","btn btn-wide mt-3"),attr(y,"href","/"),attr(w,"class","mt-2"),attr(f,"class",""),attr(o,"class","flex flex-col justify-evenly items-center w-full min-h-[490px] max-h-max mx-auto")},m(A,S){insert_hydration(A,e,S),mount_component(t,e,null),append_hydration(e,n),append_hydration(e,o),append_hydration(o,a),append_hydration(o,l),append_hydration(o,f),append_hydration(f,h),append_hydration(h,d),append_hydration(h,m),append_hydration(h,_),append_hydration(f,b),append_hydration(f,w),append_hydration(w,y),append_hydration(y,E),append_hydration(E,T),N=!0,D||(C=listen(E,"click",r[1]),D=!0)},p:noop$2,i(A){N||(transition_in(t.$$.fragment,A),N=!0)},o(A){transition_out(t.$$.fragment,A),N=!1},d(A){A&&detach(e),destroy_component(t),D=!1,C()}}}function create_fragment(r){let e,t,n,o;const a=[create_if_block,create_else_block],s=[];function l(f,h){return f[0]===0?0:1}return e=l(r),t=s[e]=a[e](r),{c(){t.c(),n=empty$1()},l(f){t.l(f),n=empty$1()},m(f,h){s[e].m(f,h),insert_hydration(f,n,h),o=!0},p(f,[h]){let d=e;e=l(f),e===d?s[e].p(f,h):(group_outros(),transition_out(s[d],1,1,()=>{s[d]=null}),check_outros(),t=s[e],t?t.p(f,h):(t=s[e]=a[e](f),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(f){o||(transition_in(t),o=!0)},o(f){transition_out(t),o=!1},d(f){s[e].d(f),f&&detach(n)}}}let src="/logo-3.png";function instance(r,e,t){let n;return component_subscribe(r,onboardingStepsLeft,a=>t(0,n=a)),[n,()=>{onboardingStepsLeft.set(3)}]}class Page extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{})}}export{Page as component,_page as universal};
